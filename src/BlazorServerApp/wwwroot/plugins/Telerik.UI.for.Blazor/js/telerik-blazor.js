!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TelerikBlazor=e():t.TelerikBlazor=e()}(self,(function(){return(()=>{var t={840:(t,e,i)=>{var n;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(r,o,s,a){"use strict";var l,h=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),p=Math.round,u=Math.abs,d=Date.now;function f(t,e,i){return setTimeout(x(t,i),e)}function v(t,e,i){return!!Array.isArray(t)&&(m(t,i[e],i),!0)}function m(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function g(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,n,i),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var y=g((function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===a)&&(t[n[r]]=e[n[r]]),r++;return t}),"extend","Use `assign`."),b=g((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function w(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&l(n,i)}function x(t,e){return function(){return t.apply(e,arguments)}}function _(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function k(t,e){return t===a?e:t}function S(t,e,i){m(A(e),(function(e){t.addEventListener(e,i,!1)}))}function C(t,e,i){m(A(e),(function(e){t.removeEventListener(e,i,!1)}))}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function A(t){return t.trim().split(/\s+/g)}function M(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function O(t){return Array.prototype.slice.call(t,0)}function D(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];M(r,s)<0&&n.push(t[o]),r[o]=s,o++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}function P(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<h.length;){if((n=(i=h[o])?i+r:e)in t)return n;o++}return a}var R=1;function I(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var z="ontouchstart"in r,L=P(r,"PointerEvent")!==a,B=z&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),N="touch",j="mouse",F=24,V=["x","y"],H=["clientX","clientY"];function W(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){_(t.options.enable,[t])&&i.handler(e)},this.init()}function U(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=1&e&&n-r==0,s=12&e&&n-r==0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=q(e));r>1&&!i.firstMultiple?i.firstMultiple=q(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,l=s?s.center:o.center,h=e.center=$(n);e.timeStamp=d(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Y(l,h),e.distance=X(l,h),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=K(e.deltaX,e.deltaY);var c=G(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=u(c.x)>u(c.y)?c.x:c.y,e.scale=s?(p=s.pointers,f=n,X(f[0],f[1],H)/X(p[0],p[1],H)):1,e.rotation=s?function(t,e){return Y(e[1],e[0],H)+Y(t[1],t[0],H)}(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,r,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(l>25||s.velocity===a)){var h=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,p=G(l,h,c);n=p.x,r=p.y,i=u(p.x)>u(p.y)?p.x:p.y,o=K(h,c),t.lastInterval=e}else i=s.velocity,n=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=o}(i,e);var p,f;var v=t.element;E(e.srcEvent.target,v)&&(v=e.srcEvent.target);e.target=v}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:p(t.pointers[i].clientX),clientY:p(t.pointers[i].clientY)},i++;return{timeStamp:d(),pointers:e,center:$(e),deltaX:t.deltaX,deltaY:t.deltaY}}function $(t){var e=t.length;if(1===e)return{x:p(t[0].clientX),y:p(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:p(i/e),y:p(n/e)}}function G(t,e,i){return{x:e/t||0,y:i/t||0}}function K(t,e){return t===e?1:u(t)>=u(e)?t<0?2:4:e<0?8:16}function X(t,e,i){i||(i=V);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function Y(t,e,i){i||(i=V);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}W.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(I(this.element),this.evWin,this.domHandler)}};var Z={mousedown:1,mousemove:2,mouseup:4},J="mousedown",Q="mousemove mouseup";function tt(){this.evEl=J,this.evWin=Q,this.pressed=!1,W.apply(this,arguments)}w(tt,W,{handler:function(t){var e=Z[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t}))}});var et={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},it={2:N,3:"pen",4:j,5:"kinect"},nt="pointerdown",rt="pointermove pointerup pointercancel";function ot(){this.evEl=nt,this.evWin=rt,W.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(nt="MSPointerDown",rt="MSPointerMove MSPointerUp MSPointerCancel"),w(ot,W,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=et[n],o=it[t.pointerType]||t.pointerType,s=o==N,a=M(e,t.pointerId,"pointerId");1&r&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&r&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var st={touchstart:1,touchmove:2,touchend:4,touchcancel:8},at="touchstart",lt="touchstart touchmove touchend touchcancel";function ht(){this.evTarget=at,this.evWin=lt,this.started=!1,W.apply(this,arguments)}function ct(t,e){var i=O(t.touches),n=O(t.changedTouches);return 12&e&&(i=D(i.concat(n),"identifier",!0)),[i,n]}w(ht,W,{handler:function(t){var e=st[t.type];if(1===e&&(this.started=!0),this.started){var i=ct.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:N,srcEvent:t})}}});var pt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ut="touchstart touchmove touchend touchcancel";function dt(){this.evTarget=ut,this.targetIds={},W.apply(this,arguments)}function ft(t,e){var i=O(t.touches),n=this.targetIds;if(3&e&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,o,s=O(t.changedTouches),a=[],l=this.target;if(o=i.filter((function(t){return E(t.target,l)})),1===e)for(r=0;r<o.length;)n[o[r].identifier]=!0,r++;for(r=0;r<s.length;)n[s[r].identifier]&&a.push(s[r]),12&e&&delete n[s[r].identifier],r++;return a.length?[D(o.concat(a),"identifier",!0),a]:void 0}w(dt,W,{handler:function(t){var e=pt[t.type],i=ft.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:N,srcEvent:t})}});function vt(){W.apply(this,arguments);var t=x(this.handler,this);this.touch=new dt(this.manager,t),this.mouse=new tt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function mt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,gt.call(this,e)):12&t&&gt.call(this,e)}function gt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),2500)}}function yt(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],o=Math.abs(e-r.x),s=Math.abs(i-r.y);if(o<=25&&s<=25)return!0}return!1}w(vt,W,{handler:function(t,e,i){var n=i.pointerType==N,r=i.pointerType==j;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)mt.call(this,e,i);else if(r&&yt.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var bt=P(c.style,"touchAction"),wt=bt!==a,xt="compute",_t="auto",kt="manipulation",St="none",Ct="pan-x",Et="pan-y",Tt=function(){if(!wt)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||r.CSS.supports("touch-action",i)})),t}();function At(t,e){this.manager=t,this.set(e)}At.prototype={set:function(t){t==xt&&(t=this.compute()),wt&&this.manager.element.style&&Tt[t]&&(this.manager.element.style[bt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,(function(e){_(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(T(t,St))return St;var e=T(t,Ct),i=T(t,Et);if(e&&i)return St;if(e||i)return e?Ct:Et;if(T(t,kt))return kt;return _t}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=T(n,St)&&!Tt.none,o=T(n,Et)&&!Tt["pan-y"],s=T(n,Ct)&&!Tt["pan-x"];if(r){var a=1===t.pointers.length,l=t.distance<2,h=t.deltaTime<250;if(a&&l&&h)return}if(!s||!o)return r||o&&6&i||s&&i&F?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Mt=32;function Ot(t){this.options=l({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=k(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Dt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Pt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Rt(t,e){var i=e.manager;return i?i.get(t):t}function It(){Ot.apply(this,arguments)}function zt(){It.apply(this,arguments),this.pX=null,this.pY=null}function Lt(){It.apply(this,arguments)}function Bt(){Ot.apply(this,arguments),this._timer=null,this._input=null}function Nt(){It.apply(this,arguments)}function jt(){It.apply(this,arguments)}function Ft(){Ot.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Vt(t,e){return(e=e||{}).recognizers=k(e.recognizers,Vt.defaults.preset),new Ht(t,e)}Ot.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(v(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Rt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return v(t,"dropRecognizeWith",this)||(t=Rt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(v(t,"requireFailure",this))return this;var e=this.requireFail;return-1===M(e,t=Rt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(v(t,"dropRequireFailure",this))return this;t=Rt(t,this);var e=M(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+Dt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+Dt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Mt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!_(this.options.enable,[this,e]))return this.reset(),void(this.state=Mt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},w(It,Ot,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,r=this.attrTest(t);return n&&(8&i||!r)?16|e:n||r?4&i?8|e:2&e?4|e:2:Mt}}),w(zt,It,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Et),t&F&&e.push(Ct),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:o<0?2:4,i=o!=this.pX,n=Math.abs(t.deltaX)):(r=0===s?1:s<0?8:16,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return It.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Pt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),w(Lt,It,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[St]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),w(Bt,Ot,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[_t]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Mt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),w(Nt,It,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[St]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),w(jt,It,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return zt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.overallVelocity:6&i?e=t.overallVelocityX:i&F&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&u(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Pt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),w(Ft,Ot,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[kt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&r&&i){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||X(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Mt},failTimeout:function(){return this._timer=f((function(){this.state=Mt}),this.options.interval,this),Mt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Vt.VERSION="2.0.7",Vt.defaults={domEvents:!1,touchAction:xt,enable:!0,inputTarget:null,inputClass:null,preset:[[Nt,{enable:!1}],[Lt,{enable:!1},["rotate"]],[jt,{direction:6}],[zt,{direction:6},["swipe"]],[Ft],[Ft,{event:"doubletap",taps:2},["tap"]],[Bt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ht(t,e){var i;this.options=l({},Vt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(L?ot:B?dt:z?vt:tt))(i,U),this.touchAction=new At(this,this.options.touchAction),Wt(this,!0),m(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Wt(t,e){var i,n=t.element;n.style&&(m(t.options.cssProps,(function(r,o){i=P(n.style,o),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}Ht.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&14&i.state&&(r=e.curRecognizer=i),o++}},get:function(t){if(t instanceof Ot)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(v(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(v(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=M(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return m(A(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(t!==a){var i=this.handlers;return m(A(t),(function(t){e?i[t]&&i[t].splice(M(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&Wt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Vt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Mt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:F,DIRECTION_ALL:30,Manager:Ht,Input:W,TouchAction:At,TouchInput:dt,MouseInput:tt,PointerEventInput:ot,TouchMouseInput:vt,SingleTouchInput:ht,Recognizer:Ot,AttrRecognizer:It,Tap:Ft,Pan:zt,Swipe:jt,Pinch:Lt,Rotate:Nt,Press:Bt,on:S,off:C,each:m,merge:b,extend:y,assign:l,inherit:w,bindFn:x,prefixed:P}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=Vt,(n=function(){return Vt}.call(e,i,e,t))===a||(t.exports=n)}(window,document)}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{"use strict";i.r(n),i.d(n,{Component:()=>F,FormKeyTrap:()=>pe,GridBase:()=>gi,Key:()=>ee,KeyCode:()=>te,KeyModifiers:()=>ie,NavigationService:()=>oe,Platform:()=>ue,ResizeService:()=>_i,ScrollSync:()=>ge,Shortcut:()=>ne,TabKeyTrap:()=>ae,addClass:()=>K,addComponentSuffix:()=>Kt,areElementsOverlapping:()=>Mt,childrenWidth:()=>Bt,clamp:()=>Zt,closestDivisibleTo:()=>Jt,columnResizableAutoFitAllColumns:()=>tD,columnResizableAutoFitColumns:()=>QO,columnResizableSetColumns:()=>eD,converToKeyboardEventArgs:()=>M,convertToHtml:()=>B,convertToMouseEventArgs:()=>O,createCancellableTimerPromise:()=>k,deepExtend:()=>m,delay:()=>_,destroyChart:()=>UA,destroyColumnDraggable:()=>PO,destroyColumnReorderable:()=>NO,destroyColumnResizable:()=>JO,destroyComponent:()=>Vt,destroyGrid:()=>OW,destroyGroupable:()=>wO,destroyTileLayout:()=>q$,destroyTreeList:()=>cG,destroyVirtualColumnScroller:()=>XG,disableFormTabKeyTrap:()=>ce,enableFormTabKeyTrap:()=>he,extend:()=>u,findEditable:()=>at,findFocusable:()=>st,findNextSiblings:()=>ut,findPreviousSiblings:()=>pt,firstVisibleItem:()=>At,focusElement:()=>it,focusElementInNextFrame:()=>et,focusFirstFocusableChild:()=>lt,focusInNextFrameAsync:()=>tt,focusTimePickerInput:()=>qM,getComponentInstance:()=>Ut,getElementByDataId:()=>q,getElementById:()=>U,getElementIndex:()=>Rt,getElementScrollHeight:()=>W,getIntersectionRect:()=>Ot,getLocationHost:()=>p,getMaxScrollLeft:()=>Tt,getScrollBarHeight:()=>bt,getScrollBarWidth:()=>yt,getSiblings:()=>ft,getSlotMetrics:()=>m$,groupBy:()=>N,guid:()=>g,hasAncestor:()=>rt,hasAnyClass:()=>Z,hasClass:()=>Y,hasValue:()=>x,haveSameParent:()=>Pt,hideAnimationGroup:()=>ji,hideAnimationGroupAsync:()=>Ni,hideElement:()=>G,htmlEncode:()=>S,initAnimationGroup:()=>Li,initAutoComplete:()=>gD,initBreadcrumb:()=>OA,initCalendar:()=>iO,initCheckBox:()=>zW,initColorGradient:()=>eM,initColorPalette:()=>KA,initColorPicker:()=>ZA,initColumnDraggable:()=>DO,initColumnMenu:()=>lM,initColumnReorderable:()=>BO,initColumnResizable:()=>ZO,initComboBox:()=>wD,initComponent:()=>Ft,initComponentLoaderContainer:()=>bi,initContextMenu:()=>pM,initDateInput:()=>IM,initDatePicker:()=>jM,initDateRangePicker:()=>cO,initDateTimePicker:()=>oO,initDayTable:()=>d$,initDialog:()=>dO,initDrawer:()=>sD,initDropDownGroupHeader:()=>BD,initDropDownList:()=>OD,initDropDownListFilter:()=>DD,initEditor:()=>iW,initFileManager:()=>rW,initFileSelect:()=>WG,initFilterMenu:()=>hW,initFlatColorPicker:()=>rM,initGantt:()=>fW,initGanttTimeline:()=>vW,initGrid:()=>MW,initGroupable:()=>bO,initMaskedTextBox:()=>KW,initMediaQuery:()=>sq,initMenuItem:()=>wU,initMonthTable:()=>f$,initMultiSelect:()=>ID,initNumericTextBox:()=>tU,initOrUpdateArcGauge:()=>xW,initOrUpdateBarcode:()=>CA,initOrUpdateChart:()=>WA,initOrUpdateCircularGauge:()=>kW,initOrUpdateLinearGauge:()=>CW,initOrUpdateMap:()=>tq,initOrUpdateQRCode:()=>TA,initOrUpdateRadialGauge:()=>TW,initPager:()=>pq,initPanelBar:()=>vq,initPopup:()=>Qq,initRangeSlider:()=>mU,initScheduler:()=>u$,initSlider:()=>uU,initSplitButton:()=>E$,initSplitter:()=>F$,initStepper:()=>SU,initSwitch:()=>aU,initTabStrip:()=>zU,initTextArea:()=>nU,initTextBox:()=>rU,initTileLayout:()=>U$,initTimeCarousel:()=>$M,initTimePicker:()=>UM,initTimelineTable:()=>v$,initToggleButton:()=>X$,initToolBar:()=>YU,initTooltip:()=>aG,initTreeList:()=>hG,initTreeView:()=>VU,initUpload:()=>HG,initVirtualColumnScroller:()=>KG,initVirtualScroller:()=>JG,initWindow:()=>aK,invokeComponentMethod:()=>Yt,isChild:()=>J,isDefined:()=>b,isDomElement:()=>v,isFocusable:()=>ot,isFunction:()=>y,isHtmlElement:()=>f,isNotNull:()=>w,isObject:()=>d,isTargetAfterElement:()=>Dt,isWholeElementInView:()=>Et,noop:()=>C,offsetWidth:()=>Lt,ownsElement:()=>V,ownsElementOrSelf:()=>H,parseAttrToInt:()=>z,parseStyleAttrToInt:()=>L,removeClass:()=>X,removeComponentInstance:()=>$t,removeComponentSuffix:()=>Xt,roughlyEqual:()=>Qt,runInNextFrameAsync:()=>Q,saveFile:()=>E,scrollListToItem:()=>gt,setCarouselSelectedIndex:()=>GM,setComponentInstance:()=>qt,setComponentOptions:()=>Ht,setElementValue:()=>nt,setIndeterminate:()=>vt,setOptions:()=>Wt,setPosition:()=>mt,setScrollbarSizeCssVariables:()=>It,showAnimationGroup:()=>Fi,showAnimationGroupAsync:()=>Bi,showElement:()=>$,stringifyToStyle:()=>T,supportsTouchEvents:()=>c,toAttrQuerySelector:()=>P,toAttrValueQuerySelector:()=>R,toClassSelector:()=>I,toDataAttr:()=>D,toPixel:()=>j,updateDateInputValue:()=>zM});var t={};i.r(t),i.d(t,{IntlError:()=>Ui,cldr:()=>Ki,currencyDisplay:()=>Wn,currencyDisplays:()=>Hn,currencyFractionOptions:()=>Un,dateFieldName:()=>On,dateFormatNames:()=>Dn,errors:()=>Gi,firstDay:()=>Yn,format:()=>Ro,formatDate:()=>ro,formatNumber:()=>xr,load:()=>An,localeCurrency:()=>$n,localeInfo:()=>Yi,numberSymbols:()=>Qn,parseDate:()=>Co,parseNumber:()=>Er,setData:()=>Mn,splitDateFormat:()=>Oo,territoryCurrencyCode:()=>qn,toIntlErrors:()=>$i,toString:()=>Po,weekendRange:()=>Jn});var e={};i.r(e),i.d(e,{DEG_TO_RAD:()=>pa,LRUCache:()=>Va,MAX_NUM:()=>ua,MIN_NUM:()=>da,TextMetrics:()=>Xa,append:()=>oa,arabicToRoman:()=>aa,bindEvents:()=>Aa,createPromise:()=>la,defined:()=>bs,definitionId:()=>ca,deg:()=>fa,elementOffset:()=>Ma,elementPadding:()=>Ia,elementScale:()=>ja,elementSize:()=>Pa,elementStyles:()=>Oa,encodeBase64:()=>ga,eventCoordinates:()=>ya,eventElement:()=>ba,hashKey:()=>qa,isTransparent:()=>wa,last:()=>xa,limitValue:()=>_a,measureText:()=>Ya,mergeSort:()=>ka,normalizeText:()=>Wa,now:()=>Sa,objectKey:()=>Ua,promiseAll:()=>Ca,rad:()=>Ea,round:()=>Gs,unbindEvents:()=>Ra,valueOrDefault:()=>Ta});var r={};i.r(r),i.d(r,{easeOutElastic:()=>Ac,linear:()=>Tc,swing:()=>Ec});var o=function(){return document.createElement("a")},s=function(){return"download"in o()};function a(t,e){var i=t;if("string"==typeof t){for(var n=t.split(";base64,"),r=n[0],o=atob(n[1]),s=new Uint8Array(o.length),a=0;a<o.length;a++)s[a]=o.charCodeAt(a);i=new Blob([s.buffer],{type:r})}navigator.msSaveBlob(i,e)}function l(t,e){var i=t;window.Blob&&t instanceof Blob&&(i=URL.createObjectURL(t));var n=o();n.download=e,n.href=i;var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r),setTimeout((function(){return URL.revokeObjectURL(i)}))}function h(t,e,i){if(i.proxyURL){var n=document.createElement("form");n.setAttribute("action",i.proxyURL),n.setAttribute("method","POST"),n.setAttribute("target",i.proxyTarget||"_self");var r=i.proxyData||{};r.fileName=e;var o=t.split(";base64,");for(var s in r.contentType=o[0].replace("data:",""),r.base64=o[1],r)if(r.hasOwnProperty(s)){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",s),a.setAttribute("value",r[s]),n.appendChild(a)}document.body.appendChild(n),n.submit(),document.body.removeChild(n)}}String.fromCharCode;var c=()=>{var t="ontouchstart"in window;return Boolean(t)},p=()=>window.location.host,u=function(){return Object.assign(...arguments)},d=t=>t&&"object"==typeof t&&!Array.isArray(t),f=t=>t instanceof HTMLElement,v=t=>t instanceof Element,m=function t(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];if(!n.length)return e;var o=n.shift();if(d(e)&&d(o))for(var s in o)f(o[s])?e[s]=o[s]:d(o[s])?(e[s]||u(e,{[s]:{}}),t(e[s],o[s])):u(e,{[s]:o[s]});return t(e,...n)},g=()=>{var t,e,i="";for(t=0;t<32;t++)e=16*Math.random()|0,8!==t&&12!==t&&16!==t&&20!==t||(i+="-"),i+=(12===t?4:16===t?3&e|8:e).toString(16);return i},y=t=>"function"==typeof t,b=t=>void 0!==t,w=t=>null!==t,x=t=>b(t)&&w(t),_=t=>new Promise((e=>setTimeout(e,t))),k=t=>{var e,i;return{promise:new Promise((function(n,r){i=r,e=setTimeout((function(){n("timer done")}),t)})),cancel:function(){clearTimeout(e),i()}}},S=t=>String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),C=function(){},E=(t,e)=>{!function(t,e,i){void 0===i&&(i={});var n=h;if(i.forceProxy&&!i.proxyURL)throw new Error("No proxyURL is set, but forceProxy is true");i.forceProxy||(s()&&(n=l),navigator.msSaveBlob&&(n=a)),n(t,e,i)}(e,t)},T=t=>{var e=[],i=Object.entries(t);for(var[n,r]of i)if(b(r)){var o="".concat(A(n),": ").concat(r);e.push(o.toLowerCase())}return e.join("; ")},A=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2"),M=t=>({type:t.type,key:t.key,code:(t.keyCode||"").toString(),ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey}),O=t=>({type:t.type,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY,button:t.button,buttons:t.buttons,detail:t.detail,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey}),D=t=>"data-".concat(t),P=t=>"[".concat(t,"]"),R=(t,e)=>"[".concat(t,'="').concat(e,'"]'),I=t=>".".concat(t),z=(t,e)=>{if(!e)return-1;var i=e.getAttribute(t),n=parseInt(i,10);return Number.isNaN(n)?-1:n},L=(t,e)=>{if(!e)return 0;var i=e.style[t],n=parseInt(i,10);return Number.isNaN(n)?0:n},B=t=>{var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild},N=(t,e)=>t.reduce((function(t,i){var n=e instanceof Function?e(i):i[e];return(t[n]=t[n]||[]).push(i),t}),{}),j=t=>parseFloat(t)+"px";class F{constructor(t,e){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,events:{}}),this.element=t,this.dotNetInstance=e.dotNetInstance}destroy(){this.element=null,this.dotNetInstance=null}extendOptions(t){this.options=m(this.options,t)}setOptions(t){this.options=t}invokeMethodAsync(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.dotNetInstance;if(i&&i.invokeMethodAsync&&t)return i.invokeMethodAsync(t,e)}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={defaultPrevented:!1,preventDefault:()=>{i.defaultPrevented=!0}};if(y(this.options.events[t]))return this.options.events[t](u(i,e,{sender:this})),i.defaultPrevented}}function V(t,e){if(!e)return!1;for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1}function H(t,e){return t===e||V(t,e)}function W(t){return(q(t)||document.getElementById(t)).scrollHeight.toString()}function U(t,e){var i=R("id",t);return(e||document).querySelector(i)}function q(t,e){return(e||document).querySelector('[data-id="'.concat(t,'"]'))}var $=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t instanceof HTMLElement&&(t.style.display=e)},G=t=>{t instanceof HTMLElement&&(t.style.display="none")},K=(t,e)=>{e.classList.add(t)},X=(t,e)=>{e.classList.remove(t)},Y=(t,e)=>{if(e instanceof HTMLElement)return e.classList.contains(t)},Z=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=0;i<t.length;i++)if(Y(t[i],e))return!0},J=(t,e)=>{for(var i=t;i&&i!==document;){if(e.indexOf(i)>=0)return!0;i=i.parentElement}return!1},Q=t=>_(33).then((()=>t())),tt=t=>Q((()=>{t&&t.focus&&t.focus()})),et=t=>{var e=q(t);e&&tt(e)},it=(t,e)=>{var i=q(t);i instanceof HTMLElement&&i.focus({preventScroll:e})},nt=(t,e)=>{var i=q(t);i instanceof HTMLElement&&(i.value=e)},rt=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t instanceof HTMLElement&&t.closest(e);return i?Boolean(n):n&&!t.matches(e)},ot=t=>{var e=t.nodeName.toLowerCase(),i=/input|^a$|area|iframe|select|textarea|button|object/.test(e),n=t.tabIndex>-1,r="none"!==window.getComputedStyle(t).display;return(i||n)&&r&&!t.disabled},st=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=ct(t,ot,e);return i},at=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=ct(t,ht,e);return i},lt=(t,e)=>{var i=q(t)||document.getElementById(t);if(i){var n=st(i,!1);n instanceof HTMLElement&&setTimeout((()=>{n.focus({preventScroll:e})}),33)}},ht=t=>{var e=ot(t),i=(t.tagName||"").toLowerCase(),n="span"===i,r=n&&t.classList.contains("k-switch"),o=n&&t.classList.contains("k-dropdownlist");return e&&i&&(/input|^a$|area|select|textarea|button/.test(i)||r||o)},ct=function t(e,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;if(n&&i(e))return e;for(e=e.firstElementChild;e;){var r=t(e,i,!0);if(r)return r;e=e.nextElementSibling}},pt=(t,e)=>dt(t,e,"previousElementSibling"),ut=(t,e)=>dt(t,e,"nextElementSibling"),dt=(t,e,i)=>{if(!t)return null;for(var n=[],r=t[i];r;)(!e||y(e)&&e(r))&&n.push(r),r=r[i];return n},ft=t=>t&&t.parentNode?Array.from(t.parentNode.children):[],vt=(t,e)=>{var i=q(t)||document.getElementById(t);i&&(i.indeterminate=e)},mt=(t,e,i)=>{var n=q(t)||document.getElementById(t);n&&(n.style.top=e,n.style.left=i)},gt=(t,e,i)=>{var n=q(t)||document.getElementById(t),r="UL"===n.tagName?n:n.getElementsByTagName("ul")[0],o=r.getElementsByTagName("li")[e],s=i&&_t(r.parentElement)?r.parentElement:null,a=s||r.offsetParent;if(o&&a){var l=a.scrollTop,h=l+a.offsetHeight,c=o.offsetTop,p=c+o.offsetHeight;p>h?a.scrollTop+=p-h:c<l&&(a.scrollTop=c)}},yt=t=>!t||t&&_t(t)?wt().width:0,bt=t=>!t||t&&xt(t)?wt().height:0,wt=()=>{var t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",document.body.appendChild(t);var e=document.createElement("div");t.appendChild(e);var i=t.offsetWidth-e.offsetWidth,n=t.offsetHeight-e.offsetHeight;return t.parentNode.removeChild(t),{width:i,height:n}},xt=t=>kt(t)&&t.clientWidth<t.scrollWidth,_t=t=>St(t)&&t.clientHeight<t.scrollHeight,kt=t=>Ct(t,"overflow-x"),St=t=>Ct(t,"overflow-y"),Ct=(t,e)=>{var i=window.getComputedStyle(t)[e];return i.indexOf("auto")>-1||i.indexOf("scroll")>-1},Et=(t,e)=>{if(!t||!e)return!1;var i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return i.top+i.height>=n.top&&i.bottom<=n.bottom&&i.left+i.width>=n.left&&i.right<=n.right},Tt=t=>f(t)?t.scrollWidth-t.clientWidth:0,At=(t,e)=>{for(var i,n=t.scrollTop,r=t.querySelectorAll(e),o=0;o<r.length;o++)if(r[o].offsetTop+r[o].clientHeight>n){i=r[o];break}return i},Mt=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!t||!e||t===e)return!1;var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=n.top+i<=r.bottom&&n.bottom-i>=r.top&&n.left+i<=r.right&&n.right-i>=r.left;return o},Ot=(t,e)=>{var i=Mt(t,e);if(!t||!e||t===e||!i)return{width:0,height:0};var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=Math.max(n.left,r.left),s=Math.max(n.top,r.top),a=Math.min(n.right,r.right),l=Math.min(n.bottom,r.bottom);return{x:o,y:s,top:s,left:o,right:a,bottom:l,width:a-o,height:l-s}},Dt=(t,e)=>!(!t||!e)&&(Pt(t,e)&&Rt(t)>Rt(e)),Pt=(t,e)=>!(!f(t)||!f(e))&&t.parentNode===e.parentNode,Rt=(t,e)=>{if(!t)return[].indexOf(t);var i=Array.from(t.parentElement.children);return e&&(i=i.filter((t=>t.matches(e)))),Array.from(i).indexOf(t)},It=()=>{var t=wt();zt("--kendo-scrollbar-width","".concat(t.width,"px")),zt("--kendo-scrollbar-height","".concat(t.height,"px"))},zt=(t,e)=>{var i=document.documentElement;i&&i.style.setProperty(t,e)},Lt=t=>{var e=window.getComputedStyle(t),i=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return t.offsetWidth+i},Bt=t=>{if(t)return[...t.children].reduce(((t,e)=>t+Lt(e)),0)},Nt="telerik",jt=new RegExp("-".concat(Nt,"-.*$"),"ig");function Ft(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Xt(e),r=q(n),o=Ut(e);if(!o){var s=new t(r,i);qt(e,s)}}function Vt(t){var e=Ut(t);e&&e.destroy&&(e.destroy(),e=null),$t(t)}function Ht(t,e){t&&t.setOptions&&t.setOptions(e)}function Wt(t,e){Ht(Gt()[t],e)}function Ut(t){return Gt()[t]}function qt(t,e){Gt()[t]=e}function $t(t){delete(window.TelerikBlazor._instances||{})[t]}var Gt=()=>{if(void 0===window.TelerikBlazor)throw new Error("The telerik-blazor.js script is not loaded");return window.TelerikBlazor._instances=window.TelerikBlazor._instances||{},window.TelerikBlazor._instances},Kt=(t,e)=>"".concat(t,"-").concat(Nt,"-").concat(e),Xt=t=>t.replace(jt,"");function Yt(t,e,i){var n=Ut(e);if(n&&y(n[t]))return n[t](i)}var Zt=(t,e,i)=>Math.min(i,Math.max(e,t));function Jt(t,e){var i=t%e,n=t-i,r=t+e-i;return n+r<2*t?r:n}function Qt(t,e,i){var{decimals:n=0}=i;if(t&&e)return t.toFixed(n)===e.toFixed(n)}var te={DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,SPACE:32,END:35,HOME:36,PAGE_UP:33,PAGE_DOWN:34,PAGEUP:33,PAGEDOWN:34},ee={DELETE:"Delete",BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESC:"Escape",ARROWLEFT:"ArrowLeft",ARROWUP:"ArrowUp",ARROWRIGHT:"ArrowRight",ARROWDOWN:"ArrowDown",SPACE:"Space",END:"End",HOME:"Home",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown"},ie={CTRL:"CTRL",ALT:"ALT",SHIFT:"SHIFT"};class ne{static equals(t,e){return t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift&&t.code===e.code}constructor(t){"string"==typeof t?this._initFromString(t):t instanceof KeyboardEvent&&this._initFromEvent(t)}_initFromString(t){var e=t.toUpperCase().split(/[\t-\r \+\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/);for(var i of e)switch(i){case ie.CTRL:this.ctrl=!0;break;case ie.ALT:this.alt=!0;break;case ie.SHIFT:this.shift=!0;break;default:this.code=this._toNormalizedCode(i)}this.name=t}_initFromEvent(t){this.name="",t.ctrlKey&&(this.ctrl=t.ctrlKey,this.name+="".concat(ie.CTRL," ")),t.shiftKey&&(this.shift=t.shiftKey,this.name+="".concat(ie.SHIFT," ")),t.altKey&&(this.alt=t.altKey,this.name+="".concat(ie.ALT," ")),this.code=t.keyCode,this.name+=t.key}_toNormalizedCode(t){return te[t.toUpperCase()]}}var re="keydown";class oe{constructor(t){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onNavigate",(t=>{var e=new ne(t),i=1===e.name.length,n=this.shortcuts.find((t=>ne.equals(t,e)))||i&&this.shortcuts.find((t=>"printableKey"===t.name));n&&this.callbacks[n.name].forEach((i=>{i(e,t)||(t.preventDefault(),t.stopPropagation())}))})),this.element=t,this.callbacks={},this.shortcuts=[],this.bindEvents()}destroy(){this.unbindEvents(),this.element=this.callbacks=this.shortcuts=null}bindEvents(){this.element.addEventListener(re,this.onNavigate)}unbindEvents(){this.element.removeEventListener(re,this.onNavigate)}bind(t,e){var i=Array.isArray(t)?t:[t];for(var n of i){var r=new ne(n);this.callbacks[r.name]=this.callbacks[r.name]||[],this.shortcuts.push(r),this.callbacks[r.name].push(e)}}}function se(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class ae{constructor(t){se(this,"disableTabKeyTrap",(()=>{this.element&&this.element.removeEventListener("keydown",this.onKeyDown)})),se(this,"onKeyDown",(t=>{this.tryFindEdgeElements()?t.keyCode===te.TAB&&(t.shiftKey?document.activeElement===this.firstElement&&(this.lastElement.focus(),t.preventDefault()):document.activeElement===this.lastElement&&(this.firstElement.focus(),t.preventDefault())):this.element.removeEventListener("keydown",this.onKeyDown)})),this.element=t}destroy(){this.disableTabKeyTrap(),this.element=null,this.firstElement=null,this.lastElement=null}enableKeyTrap(){this.element&&this.element.addEventListener("keydown",this.onKeyDown)}tryFindEdgeElements(){return this.findEdgeElements(),this.firstElement&&this.lastElement}findEdgeElements(){var t=this.element.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], *[contenteditable]");this.firstElement=t[0],this.lastElement=t[t.length-1]}}function le(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var he=t=>{pe&&pe.instanceMap&&Q((()=>{var e=q(t);if(e&&!pe.instanceMap[t]){var i=new pe(e);pe.instanceMap[t]=i,i.enableKeyTrap()}}))},ce=t=>{if(pe&&pe.instanceMap){var e=pe.instanceMap[t];e&&e.disableTabKeyTrap()}};class pe{constructor(t){le(this,"disableTabKeyTrap",(()=>{this.firstElement&&this.firstElement.removeEventListener("keydown",this.onFirstElementKeyDown),this.lastElement&&this.lastElement.removeEventListener("keydown",this.onLastElementKeyDown)})),le(this,"onFirstElementKeyDown",(t=>{t.keyCode===te.TAB&&t.shiftKey&&(t.preventDefault(),this.lastElement&&this.lastElement.focus())})),le(this,"onLastElementKeyDown",(t=>{t.keyCode!==te.TAB||t.shiftKey||(t.preventDefault(),this.firstElement&&this.firstElement.focus())})),t&&(this.element=t,this.firstElement=st(t,!1),this.lastElement=(t=>{if(t.length)return t[t.length-1]})(t.querySelectorAll("button, .k-button")))}destroy(){this.disableTabKeyTrap(),this.element=null,this.firstElement=null,this.lastElement=null}enableKeyTrap(){this.element&&this.firstElement&&this.lastElement&&(this.firstElement.addEventListener("keydown",this.onFirstElementKeyDown),this.lastElement.addEventListener("keydown",this.onLastElementKeyDown))}}le(pe,"instanceMap",{});class ue{static get webAssembly(){return Boolean(window.Blazor&&window.Blazor.platform)}static get serverSideBlazor(){return Boolean(window.Blazor&&window.Blazor.reconnect)}static get firefox(){return Boolean(/Firefox/i.test(navigator.userAgent))}}function de(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var fe="scroll",ve="scrollLeft",me="horizontal";class ge extends F{constructor(t,e){super(t,e),de(this,"options",{horizontal:!0,vertical:!0,minScrollDelta:1,syncFromConnections:!1,connections:[]}),de(this,"onScroll",(t=>{var e=t.currentTarget;(this.options.syncFromConnections?this.scrollableElements:this.connections).filter((t=>t!==e)).forEach((t=>{this.syncScroll(e,t,{orientation:me}),this.syncScroll(e,t,{orientation:"vertical"})}))})),this.extendOptions(e),this.connections=this.options.connections.filter(f),this.scrollableElements=this.getScrollableElements(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.forEachScrollableElement((t=>{t.addEventListener(fe,this.onScroll)}))}unbindEvents(){this.forEachScrollableElement((t=>{t.removeEventListener(fe,this.onScroll)}))}syncScroll(t,e,i){var{orientation:n=me}=i,r=n===me?ve:"scrollTop",o=r===ve?"dataScrollLeft":"dataScrollTop",s=t[r],a=t[o]||0,l=e[r],h=e[o],c=a!==s||h!==s,p=Tt(this.element)>0;if(this.options[n]&&c&&p){var u=Math.abs(a-s),d=Math.abs(l-s),f=this.options.minScrollDelta;(u>=f||d>=10*f)&&(e[o]=s,e[r]=s)}}getScrollableElements(){var t=[];return this.options.syncFromConnections&&(t=this.connections),[this.element,...t]}forEachScrollableElement(t){this.forEachElement(this.scrollableElements,t)}forEachConnection(t){this.forEachElement(this.connections,t)}forEachElement(){var t=arguments.length>1?arguments[1]:void 0;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{f(e)&&y(t)&&t(e)}))}}var ye=t=>Z(["k-grid-content-sticky","k-grid-header-sticky","k-grid-footer-sticky"],t);function be(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var we="data-col-index",xe="data-render-row-index",_e="nearest",ke=Array.from,Se="right",Ce="left";class Ee extends F{constructor(t,e){super(t,e),be(this,"options",{navigable:!1,incellEdit:!1,columnVirtualization:!1,virtualScrollDelay:66.66666666666667,events:{removeFocus:null,blur:null,incellEditBlur:null},rowSelector:t=>"tr[data-render-row-index='".concat(t,"']"),columnSelector:t=>"[".concat(we,"='").concat(t,"']"),cellNavigationSelector:t=>"[".concat("data-cell-navigation-id","='").concat(t,"']"),groupRowClass:"k-grouping-row",headerClass:"k-grid-header",contentClass:"k-grid-content",editRowClass:"k-grid-edit-row",filterRowClass:"k-filter-row",lockedHeaderClass:"k-grid-header-sticky"}),be(this,"onClick",(t=>{"input"===t.target.tagName.toLowerCase()&&t.stopPropagation()})),be(this,"onKeyDown",(t=>{var e=this.options.navigable&&[te.ARROWRIGHT,te.ARROWLEFT,te.ARROWUP,te.ARROWDOWN,te.PAGE_DOWN,te.PAGE_UP,te.HOME,te.END,te.SPACE].includes(t.keyCode),i=t.keyCode===te.SPACE&&Y("k-checkbox",t.target),n=e&&!i&&(t.target.matches("td")||t.target.matches("th")),r=t.keyCode===te.TAB&&this.options.incellEdit&&t.target.closest(".k-grid-edit-row");(n||r)&&t.preventDefault()})),be(this,"onFocusOut",(t=>{var e=t.target.closest("[".concat(we,"]")),i=e?e.closest("tr"):null,n=i&&i.hasAttribute(xe)?parseInt(i.getAttribute(xe)):null,r=e&&e.hasAttribute(we)?parseInt(e.getAttribute(we)):null,o={originalEvent:t};null!==n&&null!==r&&(o.rowIndex=n,o.columnIndex=r,o.isChildFocused=e&&!t.target.hasAttribute(we)),this.options.incellEdit&&t.target&&t.target.closest(".k-grid-edit-cell")&&(!t.relatedTarget&&document.activeElement===document.body||t.relatedTarget&&!this.element.contains(t.relatedTarget)&&!t.relatedTarget.closest(".k-popup")||t.relatedTarget&&t.relatedTarget.closest(".k-detail-row,.k-grid-search,.k-filter-row"))&&this.triggerIncellEditBlur(o),this.options.navigable&&(!t.relatedTarget||this.element.contains(t.relatedTarget)&&!t.relatedTarget.closest(".k-detail-row")||t.relatedTarget.closest(".k-window")||t.relatedTarget.closest(".k-grid-filter-popup")?this.triggerBlur(o):this.triggerRemoveFocus())})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut),this.options.navigable&&this.element.addEventListener("click",this.onClick)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut),this.options.navigable&&this.element.removeEventListener("click",this.onClick)}focusCell(t){var{rowIndex:e,columnIndex:i,isChildFocused:n,cellNavigationId:r,keyboardEventArgs:o}=t,s=this.getRow(e),a=r>=0?this.element.querySelector(this.options.cellNavigationSelector(r)):null;if(a)this.focusElement(a);else if(s){if(Y("k-grouping-row",s))a=s.querySelector("td[role='gridcell']");else if(!(a=s.querySelector(this.options.columnSelector(i)))){if(this.hasNavigableVirtualColumns())return;var l=s.querySelector("[".concat(we,"]"));parseInt(l.attributes["".concat(we)].value)>i&&(a=l)}if(a)if(this.hasNavigableVirtualColumns()){var h=this.hasEditRow(),c=this.isCellInFilterRow(e,i);if(n&&(h||c))this.focusEditable({rowIndex:e,columnIndex:i});else{var p=this.getKeyboardDirection(o);this.scrollIntoView(a,p),this.focusElement(a)}}else this.focusElement(a)}}focusElement(t){t instanceof HTMLElement&&t!==document.activeElement&&t.focus()}selectElement(t){t instanceof HTMLElement&&y(t.select)&&t.select()}selectAndFocusElement(t){t!==document.activeElement&&(this.selectElement(t),this.focusElement(t))}focusEditable(t){var{rowIndex:e,columnIndex:i}=t;clearTimeout(this.selectAndFocusTimeout),setTimeout((()=>{var t=this.getCell(e,i),n=at(t,!1);if(f(n)&&n.tabIndex<0){var r=st(t,!1);n=r||t}this.scrollIntoView(t),this.options.columnVirtualization?this.selectAndFocusTimeout=setTimeout((()=>{this.selectAndFocusElement(n)}),2*this.options.virtualScrollDelay):this.selectAndFocusElement(n)}),1)}focusFirstFocusable(t){var{rowIndex:e,columnIndex:i}=t;setTimeout((()=>{this.focusCellChild(e,i,st)}),1)}focusCellChild(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:st,n=this.getCell(t,e),r=n?i(n,!1):null;this.focusElement(r)}getRow(t){var e=this.element.parentElement.closest(".k-grid");return e&&e!==this.element?this.element.querySelector(this.options.rowSelector(t)):Array.from(this.element.querySelectorAll(this.options.rowSelector(t))).filter((t=>null===t.closest(".k-detail-row")))[0]}getCell(t,e){var i=this.getRow(t);if(i)return i.querySelector(this.options.columnSelector(e))}triggerRemoveFocus(){this.trigger("removeFocus")}triggerBlur(t){this.trigger("blur",t)}triggerIncellEditBlur(t){this.trigger("incellEditBlur",t)}scrollIntoView(t,e){if(this.preventScrollIntoView)this.preventScrollIntoView=!1;else{var i=t.closest(P(we)),n=i?i.closest("tr"):null;if(t&&i&&!ye(i)&&n){var r=this.getClosestOverlappingLockedCell(i),o=this.hasSpaceToScrollIntoView(i),s=Et(i,this.getContentElement());r&&o?(s||this.scrollElementIntoView(i),this.scrollToLockedCell(r,i,e)):!this.hasLockedColumns()||s||o?r||!o?this.scrollToCell(i):this.scrollElementIntoView(t):this.scrollToCell(i)}}}scrollToCell(t){var e=this.getContentElement(),i=pt(t,(t=>!ye(t))),n=this.getTotalCellsWidth(i);n!==e.scrollLeft&&(this.preventScrollIntoView=!0,e.scrollLeft=n)}scrollToLockedCell(t,e,i){var n=this.getContentElement(),r=this.getIntersectionOffset(e,t,i);0!==r&&(this.preventScrollIntoView=!0,n.scrollLeft+=r)}scrollElementIntoView(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{horizontalAlign:_e,verticalAlign:_e};t&&t.scrollIntoView&&t.scrollIntoView({inline:e.horizontalAlign||_e,block:e.verticalAlign||_e})}scrollAndFocusFirstCell(t){this.scrollAndFocusCell({scrollLeft:0,rowIndex:t.rowIndex,columnIndex:t.columnIndex})}scrollAndFocusLastCell(t){var e=this.getContentElement(),i=Tt(e);this.scrollAndFocusCell({scrollLeft:i,rowIndex:t.rowIndex,columnIndex:t.columnIndex})}scrollAndFocusCell(t){var{scrollLeft:e,rowIndex:i,columnIndex:n}=t;this.getContentElement().scrollLeft=e,setTimeout((()=>{this.focusCell({rowIndex:i,columnIndex:n})}),2*this.options.virtualScrollDelay)}getHeaderElement(){return this.element.querySelector(I(this.options.headerClass))}getContentElement(){return this.element.querySelector(I(this.options.contentClass))}hasEditRow(){var t=this.getContentElement();return t&&t.querySelector(I(this.options.editRowClass))}isCellInFilterRow(t,e){var i=this.getHeaderElement(),n=i?i.querySelector(I(this.options.filterRowClass)):null;if(!x(n))return!1;if(z(xe,n)===t){var r=ke(n.querySelectorAll("th[".concat(we,"]")));return x(r[e])}return!1}hasLockedColumns(){var t=this.getHeaderElement();return t&&t.querySelector(I(this.options.lockedHeaderClass))}hasNavigableVirtualColumns(){return this.options.navigable&&this.options.columnVirtualization}hasSpaceToScrollIntoView(t){var e=ft(t).filter(ye),i=this.getContentElement();return this.getTotalCellsWidth(e)+t.getBoundingClientRect().width<i.clientWidth}getTotalCellsWidth(t){return t.reduce(((t,e)=>t+e.getBoundingClientRect().width),0)}getClosestOverlappingLockedCell(t){if(!this.hasLockedColumns())return null;var e=pt(t),i=ut(t),n=e.concat(i).filter(ye),r=null;for(var o of n)if(Mt(t,o)){r=o;break}return r}getKeyboardDirection(t){if(!t)return null;var e=t.key;return e===ee.ARROWRIGHT||e===ee.END?Se:e===ee.ARROWLEFT||e===ee.HOME?Ce:null}getIntersectionOffset(t,e,i){if(!Pt(t,e))return 0;var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=r.left<=n.left&&r.right<=n.right,s=n.left<=r.left&&n.right<=r.right,a=r.left<n.left&&r.right>n.right,l=n.left<r.left&&n.right>r.right,h=n.left===r.left&&n.right===r.right,c=Ot(t,e).width,p=n.width,u=r.width,d=0;return h?i===Ce?d=-1*c:i===Se&&(d=c):o?d=-1*c:s?d=-1*(p-c+u):a?d=r.right-n.right+p:l&&(d=-1*(r.right-n.left)),d}}var Te="col-initialization-index",Ae="cell-navigation-id",Me=t=>R(D(Te),t),Oe=t=>{if(t.length)return t[t.length-1]},De=t=>{var{clientX:e,clientY:i}=t;if(b(e)&&b(i))return document.elementFromPoint(e,i)},Pe=t=>{var e=z(D("level"),t);return e>=0?e:1},Re=t=>(t.getAttribute(D("has-children"))||"").toLowerCase()===(!0).toString(),Ie=t=>Le(t,D(Te)),ze=t=>Le(t,D("parent-col-initialization-index")),Le=(t,e)=>t?z(e,t):[].indexOf(t),Be=(t,e)=>{for(var i=Ie(t),n=Ne(e),r=[],o=0;o<e.length;o++){var s=e[o],a=ze(s),l=Ie(s),h=n.indexOf(s);if(a===i){r.push({parentIndex:a,index:l,leafIndex:h,element:s});var c=Be(s,e);r=r.concat(c)}}return r},Ne=t=>t.filter((e=>t.every((t=>!Ve(e,t))))),je=(t,e)=>{var i=z(D(Ae),t),n=z(D(Ae),e);return i>n?1:i<n?-1:0},Fe=(t,e)=>{var i=Ie(t),n=Ie(e);return i>n?1:i<n?-1:0},Ve=(t,e)=>Ie(t)===ze(e),He=t=>{t.preventDefault&&t.preventDefault(),t.originalEvent&&t.originalEvent.preventDefault()},We=t=>{var{clientTop:e,clientLeft:i}=(t=>t.ownerDocument.documentElement)(t),{pageYOffset:n,pageXOffset:r}=(t=>t.ownerDocument.defaultView)(t),{top:o,left:s}=t.getBoundingClientRect();return{top:o+n-e,left:s+r-i}},Ue=t=>".".concat(t),qe=function(t,e){return function(i){return e(t(i))}},$e=function(t,e,i){return t.addEventListener&&t.addEventListener(e,i)},Ge=function(t,e,i){return t&&t.removeEventListener&&t.removeEventListener(e,i)},Ke=function(){},Xe=function(t){return t.preventDefault()},Ye=/touch/;function Ze(t){return t.type.match(Ye)?{pageX:t.changedTouches[0].pageX,pageY:t.changedTouches[0].pageY,clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY,type:t.type,originalEvent:t,isTouch:!0}:{pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,type:t.type,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,originalEvent:t}}var Je=function(t){var e=this,i=t.press;void 0===i&&(i=Ke);var n=t.drag;void 0===n&&(n=Ke);var r=t.release;void 0===r&&(r=Ke);var o=t.mouseOnly;void 0===o&&(o=!1),this._pressHandler=qe(Ze,i),this._dragHandler=qe(Ze,n),this._releaseHandler=qe(Ze,r),this._ignoreMouse=!1,this._mouseOnly=o,this._touchstart=function(t){1===t.touches.length&&e._pressHandler(t)},this._touchmove=function(t){1===t.touches.length&&e._dragHandler(t)},this._touchend=function(t){0===t.touches.length&&1===t.changedTouches.length&&(e._releaseHandler(t),e._ignoreMouse=!0,setTimeout(e._restoreMouse,2e3))},this._restoreMouse=function(){e._ignoreMouse=!1},this._mousedown=function(t){var i=t.which;i&&i>1||e._ignoreMouse||($e(document,"mousemove",e._mousemove),$e(document,"mouseup",e._mouseup),e._pressHandler(t))},this._mousemove=function(t){e._dragHandler(t)},this._mouseup=function(t){Ge(document,"mousemove",e._mousemove),Ge(document,"mouseup",e._mouseup),e._releaseHandler(t)},this._pointerdown=function(t){t.isPrimary&&0===t.button&&($e(document,"pointermove",e._pointermove),$e(document,"pointerup",e._pointerup),$e(document,"pointercancel",e._pointerup),$e(document,"contextmenu",Xe),e._pressHandler(t))},this._pointermove=function(t){t.isPrimary&&e._dragHandler(t)},this._pointerup=function(t){t.isPrimary&&(Ge(document,"pointermove",e._pointermove),Ge(document,"pointerup",e._pointerup),Ge(document,"pointercancel",e._pointerup),Ge(document,"contextmenu",Xe),e._releaseHandler(t))}};Je.supportPointerEvent=function(){return"undefined"!=typeof window&&window.PointerEvent},Je.prototype.bindTo=function(t){t!==this._element&&(this._element&&this._unbindFromCurrent(),this._element=t,this._bindToCurrent())},Je.prototype._bindToCurrent=function(){var t=this._element;this._usePointers()?$e(t,"pointerdown",this._pointerdown):($e(t,"mousedown",this._mousedown),this._mouseOnly||($e(t,"touchstart",this._touchstart),$e(t,"touchmove",this._touchmove),$e(t,"touchend",this._touchend)))},Je.prototype._unbindFromCurrent=function(){var t=this._element;if(this._usePointers())return Ge(t,"pointerdown",this._pointerdown),Ge(document,"pointermove",this._pointermove),Ge(document,"pointerup",this._pointerup),Ge(document,"contextmenu",Xe),void Ge(document,"pointercancel",this._pointerup);Ge(t,"mousedown",this._mousedown),this._mouseOnly||(Ge(t,"touchstart",this._touchstart),Ge(t,"touchmove",this._touchmove),Ge(t,"touchend",this._touchend))},Je.prototype._usePointers=function(){return!this._mouseOnly&&Je.supportPointerEvent()},Je.prototype.destroy=function(){this._unbindFromCurrent(),this._element=null},Je.default=Je;function Qe(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class ti extends F{constructor(t,e){super(t,e),Qe(this,"options",{id:g(),group:null,itemSelector:"",allowsDragFrom:()=>!0,allowsDropFrom:()=>!0,events:{dragEnter:null,dragLeave:null,dragOver:null,drop:null}}),this.extendOptions(e),qt(this.options.id,this),ti.InstancesByGroup[this.options.group]||(ti.InstancesByGroup[this.options.group]=new Set),ti.InstancesByGroup[this.options.group].add(this)}destroy(){ti.InstancesByGroup[this.options.group]&&ti.InstancesByGroup[this.options.group].delete(this),$t(this.options.id),super.destroy()}triggerDragEnter(t){this.trigger("dragEnter",t)}triggerDragLeave(t){this.trigger("dragLeave",t)}triggerDragOver(t){this.trigger("dragOver",t)}triggerDrop(t){this.trigger("drop",t)}allowsDragFrom(t,e){return t&&t.options.group===this.options.group&&this.options.allowsDragFrom(t,e)}allowsDropFrom(t,e){return t&&t.options.group===this.options.group&&this.options.allowsDropFrom(t,e)}}function ei(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Qe(ti,"InstancesByGroup",{}),Qe(ti,"forEachInstanceInGroup",((t,e)=>{var i=ti.InstancesByGroup[t]||new Set;for(var n of i)n&&n instanceof ti&&e(n)}));var ii=(t,e)=>!!(e&&t&&t.closest(e));class ni extends F{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),ei(this,"options",{events:{dragStart:null,drag:null,dragEnd:null,dropTargetEnter:null},offset:{x:0,y:0},filter:null,ignore:"",hint:null,group:null,ignoreElementUnderCursor:()=>!1}),ei(this,"onPress",(t=>{this.dragStarted=!1,ii(t.originalEvent.target,this.options.ignore)?this.originalCurrentTarget=null:ii(t.originalEvent.target,this.options.filter)?(He(t),this.originalCurrentTarget=t.originalEvent.target.closest(this.options.filter),this.dragStarted=!0,this.triggerDragStart(t)):this.originalCurrentTarget=null})),ei(this,"onDrag",(t=>{var e=u(t,{originalCurrentTarget:this.originalCurrentTarget});if(this.originalCurrentTarget&&(He(e),this.dragStarted&&(this.processDropTargetIntersection(e),!this.triggerDrag(u(e,{dropTarget:this.getLastDropTarget()}))))){!this.hint&&this.options.hint&&(this.createHint(this.originalCurrentTarget),this.appendHint());var i=this.getOffset();this.dragHint({top:e.pageY+i.y,left:e.pageX+i.x}),this.triggerDropTargetDragOver(e)}})),ei(this,"onRelease",(t=>{this.originalCurrentTarget&&(He(t),this.processDropTargetDrop(t),this.destroyHint(),this.triggerDragEnd(t))})),this.extendOptions(e),this.initDraggableEvents(t)}destroy(){this.destroyDraggableEvents(),this.destroyHint(),this.lastDropTargetId=null,this.originalCurrentTarget=null,super.destroy()}initDraggableEvents(){this.destroyDraggableEvents(),this.draggableEvents=new Je({press:this.onPress,drag:this.onDrag,release:this.onRelease}),this.draggableEvents.bindTo(this.element)}destroyDraggableEvents(){this.draggableEvents&&this.draggableEvents.destroy&&this.draggableEvents.destroy()}triggerDragStart(t){this.trigger("dragStart",t)}triggerDrag(t){return this.trigger("drag",t)}triggerDragEnd(t){this.trigger("dragEnd",t)}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return super.trigger(t,u(e,{originalCurrentTarget:this.originalCurrentTarget,elementUnderCursor:this.getElementUnderCursor(e)}))}triggerDropTargetDragEnter(t,e){t&&(t.triggerDragEnter(u(e,{draggable:this})),this.triggerDropTargetEnter(u(e,{dropTarget:t})))}triggerDropTargetEnter(t){this.trigger("dropTargetEnter",t)}triggerDropTargetDragLeave(t,e){t&&(t.triggerDragLeave(u(e,{draggable:this})),this.triggerDropTargetLeave(u(e,{dropTarget:t})))}triggerDropTargetLeave(t){this.trigger("dropTargetLeave",u(t,{dropTarget:this.dropTarget}))}triggerDropTargetDragOver(t){if(this.lastDropTargetId){var e=Ut(this.lastDropTargetId);if(!e)return;e.triggerDragOver(u(t,{draggable:this})),this.triggerDropTargetOver(u(t,{dropTarget:e}))}}triggerDropTargetOver(t){this.trigger("dropTargetOver",t)}triggerDropTargetDrop(t,e){var i=u(e,{elementUnderCursor:this.getElementUnderCursor(e)});t&&(t.allowsDropFrom(this,i)&&t.triggerDrop(u(i,{draggable:this})),this.triggerDrop(u(i,{dropTarget:t})))}triggerDrop(t){this.trigger("drop",t)}processDropTargetIntersection(t){var e=this.getElementUnderCursor(t),i=!1;this.forEachDropTarget((n=>{var r=n.element.contains(e),o=Ut(this.lastDropTargetId);i=i||r,r&&this.lastDropTargetId!==n.options.id&&(this.triggerDropTargetDragLeave(o,t),this.lastDropTargetId=n.options.id,this.triggerDropTargetDragEnter(n,t))})),i||(this.triggerDropTargetDragLeave(this.getLastDropTarget(),t),this.lastDropTargetId=null)}processDropTargetDrop(t){this.forEachDropTarget((e=>{var i=this.getElementUnderCursor(t);e.element.contains(i)&&(this.lastDropTargetId=null,this.triggerDropTargetDrop(e,t))}))}getOffset(){return y(this.options.offset)?this.options.offset(this.hint):this.options.offset}createHint(t){this.hint=y(this.options.hint)?this.options.hint(t):this.options.hint}destroyHint(){this.hint&&(this.removeHint(),this.hint=null)}showHint(){$(this.hint)}hideHint(){G(this.hint)}appendHint(){document.body.appendChild(this.hint)}removeHint(){document.body.removeChild(this.hint)}dragHint(t){var{top:e,left:i}=t;this.setHintState({top:e,left:i})}setHintState(t){var{top:e,left:i}=t;this.hint&&this.setHintPosition({top:e,left:i})}setHintPosition(t){var{top:e=0,left:i=0}=t,{width:n,height:r}=this.hint.getBoundingClientRect(),o=e-r/2,s=i-n/2;this.hint.style.top="".concat(o,"px"),this.hint.style.left="".concat(s,"px")}getElementUnderCursor(t){var e=De(t);if(this.hint&&this.hint.contains(e)){if(this.hideHint(),e=De(t),this.options.ignoreElementUnderCursor(e)){var i=e;G(i);var n=De(t);n&&(e=n),$(i)}this.showHint()}return e}forEachDropTarget(t){ti.forEachInstanceInGroup(this.options.group,t)}getLastDropTarget(){return Ut(this.lastDropTargetId)}}class ri{constructor(t){var e;!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{appendTo:document.body,template:(e=T({position:"absolute","z-index":1e4}),'<div class="k-grouping-dropclue" style="'.concat(e,'" />'))}),this.extendOptions(t),this.initElement(),this.append()}destroy(){this.remove()}extendOptions(t){this.options=u(this.options,t)}initElement(){this.element=B(this.options.template)}append(){this.hide(),this.options.appendTo.appendChild(this.element)}remove(){this.options.appendTo.removeChild(this.element),this.element=null}show(){$(this.element)}hide(){G(this.element)}setState(t){var{top:e,left:i,height:n,visible:r}=t;this.setPosition({top:e,left:i}),this.setVisibility(r),this.setSize({height:n})}setSize(t){var{height:e}=t;this.element.style.height="".concat(e,"px")}getSize(){var t=this.element.style.display,e=this.element.style.visibility;this.element.style.visibility="hidden",this.element.style.display="block";var i=this.element.offsetWidth,n=this.element.offsetHeight;return this.element.style.display=t,this.element.style.visibility=e,{width:i,height:n}}setVisibility(t){t?this.show():this.hide()}setPosition(t){var{top:e=0,left:i=0}=t;this.element.style.top="".concat(e,"px"),this.element.style.left="".concat(i,"px")}getOffsetState(t,e){var i=We(t),{offsetWidth:n,offsetHeight:r}=t;return{top:i.top,left:i.left+(e?n:0),height:r}}}function oi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var si={forbidden:"k-i-cancel",before:"k-i-insert-middle",after:"k-i-insert-middle",over:"k-i-plus"},ai="forbidden",li="before",hi="after",ci="over";class pi extends F{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),oi(this,"options",{componentSelector:"",group:"",filter:"",dropClueTargetSelector:"",dropClueEmptySelector:"",itemSelector:"",dropClueTemplate:'<div class="k-drop-hint k-drop-hint-h" style="position: absolute; z-index: 10000;">\n                               <div class="k-drop-hint-start"></div>\n                               <div class="k-drop-hint-line"></div>\n                           </div>',hint:null,allowDropOver:!0,offsetDropClue:!1,events:{itemDragStart:null,itemDrop:null}}),oi(this,"onDragStart",(t=>{var e=this.getItem(t.originalCurrentTarget);e.closest(this.options.componentSelector)===this.element?(this.dragging=!0,this.trigger("itemDragStart",u(t,{sourceItem:e})),this.createDropClue()):this.dragging=!1})),oi(this,"onDrag",(t=>{if(this.dragging){this.lastDropPosition=this.getDropPosition(t),this.updateDragClueState(this.draggable.hint);var e=this.getElementUnderCursor(t),i=e&&e.closest(this.options.dropClueTargetSelector);this.updateDropClueState(i)}})),oi(this,"onDragEnd",(t=>{if(this.dragging&&(this.destroyDropClue(),this.lastDropPosition!==ai)){var e=this.getItem(t.originalCurrentTarget),i=this.getElementUnderCursor(t),n=this.getItem(i);e&&e!==n&&this.trigger("itemDrop",u(t,{sourceItem:e,destinationItem:n,destinationElement:i,dropPosition:this.lastDropPosition}))}})),this.extendOptions(e),this.createDraggable()}destroy(){this.draggable&&this.draggable.destroy(),super.destroy()}createDraggable(){if(this.element){var t=this.options.hint;this.draggable=new ni(this.element,m(this.options,{offset:t=>{var e=t.getBoundingClientRect();return{x:e.width/2+10,y:e.height/2+10}},hint:e=>{var i=t(e);return this.updateDragClueState(i),i},events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}}))}}getItem(t){return t.closest(this.options.itemSelector)}createDropClue(){this.dropClue||(this.dropClue=new ri({template:this.options.dropClueTemplate}))}destroyDropClue(){this.dropClue&&(this.dropClue.destroy(),this.dropClue=null)}getDropPosition(t){var e=this.getElementUnderCursor(t),i=e&&e.closest(this.options.dropClueTargetSelector);if(this.options.dropClueEmptySelector&&e&&e.closest(this.options.dropClueEmptySelector))return ci;if(!i||i===t.originalCurrentTarget.closest(this.options.dropClueTargetSelector))return ai;var n=i.getBoundingClientRect(),r=this.options.allowDropOver?4:2,o=n.height/r,s=t.clientY,a=n.top;return s<a+o?li:s>=a+n.height-o?hi:ci}updateDragClueState(t){if(t){var e=t.querySelector(".k-icon");X(this.dropStatusClass,e),this.dropStatusClass=si[this.lastDropPosition],K(this.dropStatusClass,e)}}updateDropClueState(t){if(!this.shouldHideDropClue()&&t){this.dropClue.show();var e=We(t),i=e.top,n=e.left;this.lastDropPosition===hi&&(i+=t.offsetHeight),this.options.offsetDropClue||(n+=this.dropClue.element.offsetWidth/2),this.dropClue.setPosition({top:i,left:n})}else this.dropClue.hide()}shouldHideDropClue(){return this.lastDropPosition===ci||this.lastDropPosition===ai}getElementUnderCursor(t){var e;return this.dropClue&&this.dropClue.hide(),e=document.elementFromPoint(t.clientX,t.clientY),this.dropClue&&this.dropClue.show(),e}}function ui(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var di="k-grid-header-wrap",fi="k-grid-footer-wrap",vi="k-grid-content",mi="mousedown";class gi extends F{constructor(t,e){super(t,e),ui(this,"options",{dotNetInstance:null,incellEdit:!1,columnVirtualization:!1,virtualScrollDelay:66.66666666666667,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!1},componentSelector:"",jsinterop:{removeFocus:"",blur:"",incellEditBlur:"",rowDragStart:"",rowDrop:""}}),ui(this,"onMouseDown",(t=>{t.shiftKey&&t.preventDefault()})),ui(this,"onNavigationRemoveFocus",(()=>{this.removeFocus()})),ui(this,"onNavigationBlur",(t=>{this.blur(t)})),ui(this,"onIncellEditBlur",(t=>{this.incellEditBlur(t)})),ui(this,"createHint",(t=>{var e=this.getDragHintText(t);return B('<div class="k-header k-drag-clue">\n                <span class="k-icon k-drag-status k-icon-with-modifier">\n                    <span class="k-icon k-icon-modifier"></span>\n                </span>\n                '.concat(e,"\n            </div>"))})),ui(this,"getDragHintText",(t=>{if(Y("k-state-selected",t.closest("tr"))){var e=this.element.querySelectorAll("tr.k-master-row.k-state-selected").length;if(e>1)return e+" "+this.options.draggedItemsHint}return t.closest("td").getAttribute("data-drag-clue-text")})),ui(this,"onItemDragStart",(t=>{this.invokeMethodAsync(this.options.jsinterop.rowDragStart,{sourceIndex:this.getItemIndex(t.sourceItem)})})),ui(this,"onItemDrop",(t=>{this.invokeMethodAsync(this.options.jsinterop.rowDrop,{destinationIndex:this.getItemIndex(t.destinationItem),dotNetInstance:this.getDestinationComponent(t.destinationElement),dropPosition:t.dropPosition})})),ui(this,"setSearchBoxValue",(t=>{var e=this.element.querySelector(".k-grid-search input");e&&(e.value=t)})),this.extendOptions(e),this.content=this.getChildElement(vi),this.header=this.getChildElement(di),this.adjustScrollbarPadding(),this.bindEvents(),this.createNavigationService(),this.setSearchBoxValue(e.searchString),this.setRowDraggable(e.rowDraggable)}setRowDraggable(t){t?this.createRowDraggable():this.destroyRowDraggable()}setOptions(t){this.options.rowDraggable!==t.rowDraggable&&this.setRowDraggable(t.rowDraggable),this.extendOptions(t)}getChildElement(t){return this.element.getElementsByClassName(t)[0]}destroy(){this.destroyRowDraggable(),this.unbindEvents(),this.destroyNavigationService(),this.content=null,this.header=null,super.destroy()}adjustScrollbarPadding(){It()}bindEvents(){this.createContentScrollSync(),this.content.addEventListener(mi,this.onMouseDown)}unbindEvents(){this.destroyContentScrollSync(),this.content.removeEventListener(mi,this.onMouseDown)}createContentScrollSync(){this.contentScrollSync&&this.destroyContentScrollSync();var t=this.element.querySelector(Ue(fi));this.contentScrollSync=new ge(this.content,{horizontal:!0,vertical:!1,syncFromConnections:this.hasNavigableVirtualColumns(),connections:[this.header,t]})}destroyContentScrollSync(){this.contentScrollSync&&(this.contentScrollSync.destroy(),this.contentScrollSync=null)}createNavigationService(){this.navigationService=new Ee(this.element,{navigable:this.options.navigable,incellEdit:this.options.incellEdit,columnVirtualization:this.options.columnVirtualization,virtualScrollDelay:this.options.virtualScrollDelay,events:{removeFocus:this.onNavigationRemoveFocus,blur:this.onNavigationBlur,incellEditBlur:this.onIncellEditBlur}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}hasNavigableVirtualColumns(){return this.options.navigable&&this.options.columnVirtualization}focusCell(t){this.navigationService.focusCell(t)}focusEditable(t){this.navigationService.focusEditable(t)}focusFirstFocusable(t){this.navigationService.focusFirstFocusable(t)}scrollAndFocusFirstCell(t){this.navigationService.scrollAndFocusFirstCell(t)}scrollAndFocusLastCell(t){this.navigationService.scrollAndFocusLastCell(t)}scrollContent(t){this.content.scrollLeft=t}removeFocus(){this.invokeMethodAsync(this.options.jsinterop.removeFocus)}blur(t){this.invokeDefferedMethodAsync(this.options.jsinterop.blur,t)}incellEditBlur(t){this.invokeDefferedMethodAsync(this.options.jsinterop.incellEditBlur,t)}invokeDefferedMethodAsync(t,e){ue.webAssembly?setTimeout((()=>{e.deferred=!0,document.body.contains(e.originalEvent.target)&&this.invokeMethodAsync(t,e)}),1):this.invokeMethodAsync(t,e)}createRowDraggable(){this.element&&(this.rowDraggable=new pi(this.element,m(this.options.rowDraggableOptions,{componentSelector:".k-grid",group:".k-grid-table",filter:".k-i-reorder",dropClueTargetSelector:".k-grid-content tr.k-master-row",dropClueEmptySelector:".k-grid-norecords",itemSelector:"tr.k-master-row",offsetDropClue:!1,hint:this.createHint,events:{itemDragStart:this.onItemDragStart,itemDrop:this.onItemDrop}})))}destroyRowDraggable(){this.rowDraggable&&this.rowDraggable.destroy()}getItemIndex(t){return t?parseInt(t.getAttribute("data-render-row-index")):-1}getDestinationComponent(t){var e=this.element,i=t.closest(this.options.componentSelector);if(i&&e!==i){var n=Ut(i.getAttribute("data-id"));return n&&n.dotNetInstance}return this.dotNetInstance}}class yi extends F{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"_loaderIntervals",[])}startLoaderShowTimer(){this._loaderIntervals.push(setTimeout((()=>this.showLoader()),600))}showLoader(){$(this.element)}hideLoader(){clearTimeout(this._loaderIntervals.shift()),this._loaderIntervals.length||G(this.element)}}function bi(t,e){Ft(yi,t,e)}var wi=function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=function n(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var a=this;n.context=this,n.args=o,n.pending=!0,clearTimeout(e),e=setTimeout((()=>{clearTimeout(e),n.pending=!1,t.call(a,...o)}),i)};return n.pending=!1,n.callback=t,n.stop=function(){clearTimeout(e)},n.runCallback=function(){t.call(n.context,n.args)},n},xi=function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;return!i||i<=0?t:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var a=this,l=0,h=()=>{t.call(a,...o),n=performance.now()};if(n||(n=performance.now(),e=setTimeout(h,i)),(l=performance.now()-n)>3*i)return clearTimeout(e),void(n=0);clearTimeout(e),l>i?h():e=setTimeout(h,i-l)}};class _i{constructor(t){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onResize",(t=>{t[0].target===this.element&&this.resizeCallback()})),this.element=t.element,this.resizeCallback=t.onResize,this.initResizeObserver()}destroy(){this.destroyResizeObserver(),this.element=null}initResizeObserver(){this.debounceResize=wi(this.onResize,50),this.resizeObserver=new ResizeObserver(this.debounceResize),this.resizeObserver.observe(this.element)}destroyResizeObserver(){this.resizeObserver&&this.resizeObserver.unobserve(this.element),this.resizeObserver=this.debounceResize=this.resizeCallback=null}}function ki(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Si(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ki(Object(i),!0).forEach((function(e){Ci(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ki(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ci(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ei="none",Ti="k-animation-container-shown",Ai="reveal-vertical",Mi="reveal-horizontal",Oi={"slide-down":"slide-up","push-down":"push-up"},Di={appear:"appear",exit:"exit"},Pi=()=>_(20),Ri=(t,e)=>"k-".concat(t,"-").concat(e),Ii=t=>Object.keys(Di).reduce(((e,i)=>Si(Si({},e),{},{[i]:{base:Ri(t,i),active:Ri(t,"".concat(i,"-active"))}})),{});class zi extends F{constructor(t,e){super(t,e),Ci(this,"options",{dotNetInstance:null,animationName:"slide-down",duration:300,showDelay:10,hideDelay:10,jsinterop:{showStart:null,hideStart:null}}),this.extendOptions(e),this.element.parentElement.style.display=Ei,this.animationClasses=Ii(this.options.animationName)}setOptions(t){super.setOptions(t),this.animationClasses=Ii(this.options.animationName)}destroy(){this.cancelCallback(),this.parentComponent=null,super.destroy()}showAsync(){return this.cancelCallback(),this.onAppearStart().then((()=>this.onAppearing())).then((()=>this.onTransitionEnd(this.onAppearEnd.bind(this))))}hideAsync(){return this.cancelCallback(),this.onExitStart().then(this.onExiting()).then((()=>this.onTransitionEnd(this.onExitEnd.bind(this))))}show(){this.cancelCallback(),this.removeClasses(Di.exit),this.removeClasses(Di.appear),this.element.style.display=null,this.element.parentElement.style.display=null,this.triggerOpen()}hide(){this.cancelCallback(),this.removeClasses(Di.exit),this.removeClasses(Di.appear),this.element.style.display=Ei,this.element.parentElement.style.display=Ei,this.triggerClose()}onAppearStart(){return this.updateAppearStartState().then((()=>{var t=this.getParentPosition(),e=this.options.animationName;return this.maxDimensions(),t&&t.flipped&&Oi[e]?(this.element.style.display=Ei,this.element.parentElement.style.display=Ei,Pi().then((()=>(this.removeClasses(Di.appear),this.animationClasses=Ii(Oi[e]),this.updateAppearStartState())))):Promise.resolve()}))}updateAppearStartState(){return this.removeClasses(Di.exit),this.addClasses(this.animationClasses[Di.appear].base),this.addClasses(this.options.class),Pi().then((()=>{this.element&&(this.element.style.display=null,this.element.parentElement.style.display=null)}))}onAppearing(){return this.triggerOpen(),Pi().then((()=>{this.addClasses(this.animationClasses[Di.appear].active)}))}onAppearEnd(){var t=Di.appear;Pi().then((()=>{this.removeClasses(t),this.removeMaxDimensions(),this.isPopup()&&K(Ti,this.element.parentElement)}))}onExitStart(){return Pi().then((()=>{var t=this.getParentPosition(),e=this.options.animationName;t&&t.flipped&&Oi[e]&&(this.animationClasses=Ii(Oi[e])),this.removeClasses(Di.appear),this.addClasses(this.animationClasses[Di.exit].base)}))}onExiting(){return this.triggerClose(),this.maxDimensions(),Pi().then((()=>{this.addClasses(this.animationClasses[Di.exit].active),this.isPopup()&&X(Ti,this.element.parentElement)}))}onExitEnd(){this.removeClasses(Di.exit),this.removeMaxDimensions(),this.element.style.display=Ei,this.element.parentElement.style.display=Ei}onTransitionEnd(t){var e=this.options,i=e.duration+e.showDelay;return this.timer=k(i),this.timer.promise.then(t)}cancelCallback(){this.timer&&this.timer.cancel(),this.timer=null}getParentComponent(){if(this.parentComponent)return this.parentComponent;if(!this.element)return null;var t=this.element.closest(".k-animation-container");if(!t)return null;var e=t.getAttribute("data-id");return this.parentComponent=Ut(e),this.parentComponent}callParentMethod(t,e){var i=this.getParentComponent();if(i&&y(i[t]))return i[t](e)}getParentPosition(){return this.callParentMethod("getElementPosition")}triggerOpen(){this.invokeMethodAsync(this.options.jsinterop.showStart),this.callParentMethod("onOpen")}triggerClose(){this.invokeMethodAsync(this.options.jsinterop.hideStart),this.callParentMethod("onClose")}removeClasses(t){var e=this.animationClasses[t];this.element&&(this.element.classList.remove(e.base),this.element.classList.remove(e.active))}addClasses(t){var e=this;t&&t.split(/\s+/).forEach((t=>{e.element&&e.element.classList.add(t)}))}maxDimensions(){var t=this.options,e=this.element,i="".concat(e.scrollHeight,"px"),n="".concat(e.scrollWidth,"px");return t.animationName.includes(Ai)?(e.style.maxHeight=i,"max-height: ".concat(i)):t.animationName.includes(Mi)?(e.style.maxWidth=n,"max-width: ".concat(n)):""}removeMaxDimensions(){var t=this.options.animationName.includes(Ai)||this.options.animationName.includes(Mi);this.element&&t&&(this.element.style.maxHeight=null,this.element.style.maxWidth=null)}isPopup(){return this.element&&this.element.classList.contains("k-popup")&&this.element.parentElement}}function Li(t,e){Ft(zi,t,e)}function Bi(t,e){var i=Ut(t);return i?(i.setOptions(e),i.showAsync().catch(C)):null}function Ni(t,e){var i=Ut(t);return i?(i.setOptions(e),i.hideAsync().catch(C)):null}function ji(t){var e=Ut(t);e&&e.hide()}function Fi(t){var e=Ut(t);e&&e.show()}const Vi={en:{name:"en",identity:{version:{_number:"$Revision: 12418 $",_cldrVersion:"29"},language:"en"},territory:"US",numbers:{symbols:{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"",perMille:"",infinity:"",nan:"NaN",timeSeparator:":"},decimal:{patterns:["n"],groupSize:[3]},scientific:{patterns:["nEn"],groupSize:[]},percent:{patterns:["n%"],groupSize:[3]},currency:{patterns:["$n"],groupSize:[3],"unitPattern-count-one":"n $","unitPattern-count-other":"n $"},currencies:{BGN:{displayName:"Bulgarian Lev","displayName-count-one":"Bulgarian lev","displayName-count-other":"Bulgarian leva",symbol:"BGN"},EUR:{displayName:"Euro","displayName-count-one":"euro","displayName-count-other":"euros",symbol:"","symbol-alt-narrow":""},USD:{displayName:"US Dollar","displayName-count-one":"US dollar","displayName-count-other":"US dollars",symbol:"$","symbol-alt-narrow":"$"}},localeCurrency:"USD",accounting:{patterns:["$n","($n)"],groupSize:[3]}},calendar:{gmtFormat:"GMT{0}",gmtZeroFormat:"GMT",patterns:{d:"M/d/y",D:"EEEE, MMMM d, y",m:"MMM d",M:"MMMM d",y:"MMM y",Y:"MMMM y",F:"EEEE, MMMM d, y h:mm:ss a",g:"M/d/y h:mm a",G:"M/d/y h:mm:ss a",t:"h:mm a",T:"h:mm:ss a",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{Bh:"h B",Bhm:"h:mm B",Bhms:"h:mm:ss B",d:"d",E:"ccc",EBhm:"E h:mm B",EBhms:"E h:mm:ss B",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d","MMMMW-count-one":"'week' W 'of' MMMM","MMMMW-count-other":"'week' W 'of' MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y","yw-count-one":"'week' w 'of' Y","yw-count-other":"'week' w 'of' Y"}},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},days:{format:{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},"stand-alone":{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},months:{format:{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},"stand-alone":{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]}},quarters:{format:{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},"stand-alone":{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]}},dayPeriods:{format:{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},narrow:{midnight:"mi",am:"a","am-alt-variant":"am",noon:"n",pm:"p","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"}},"stand-alone":{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},narrow:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"}}},eras:{format:{wide:{0:"Before Christ",1:"Anno Domini","0-alt-variant":"Before Common Era","1-alt-variant":"Common Era"},abbreviated:{0:"BC",1:"AD","0-alt-variant":"BCE","1-alt-variant":"CE"},narrow:{0:"B",1:"A","0-alt-variant":"BCE","1-alt-variant":"CE"}}},dateFields:{era:{wide:"era"},year:{wide:"year",short:"yr.",narrow:"yr."},quarter:{wide:"quarter",short:"qtr.",narrow:"qtr."},month:{wide:"month",short:"mo.",narrow:"mo."},week:{wide:"week",short:"wk.",narrow:"wk."},day:{wide:"day",short:"day",narrow:"day"},weekday:{wide:"day of the week"},dayperiod:{wide:"AM/PM"},hour:{wide:"hour",short:"hr.",narrow:"hr."},minute:{wide:"minute",short:"min.",narrow:"min."},second:{wide:"second",short:"sec.",narrow:"sec."},zone:{wide:"time zone"}}}},supplemental:{likelySubtags:{en:"en-Latn-US"},currencyData:{region:{US:[{USD:{_from:"1792-01-01"}}]}},weekData:{firstDay:{US:"sun"},weekendStart:{"001":"sat"},weekendEnd:{"001":"sun"}}}};function Hi(t){return"string"==typeof t}var Wi=/\{(\d+)}?\}/g,Ui=function(t){var e=t.name,i=t.message;if(!e||!i)throw new Error("{ name: string, message: string } object is required!");this.name=e,this.message=i};Ui.prototype.formatMessage=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=qi(t),n=this.message.replace(Wi,(function(t,e){return i[parseInt(e,10)]}));return this.name+": "+n},Ui.prototype.error=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new Error(this.formatMessage(t))};var qi=function(t){return t.reduce((function(t,e){return t.concat(e)}),[])},$i=function(t){return Object.keys(t).reduce((function(e,i){return e[i]=new Ui({name:i,message:t[i]}),e}),{})},Gi=$i({NoLocale:"Missing locale info for '{0}'",NoCurrency:"Cannot determine currency information. Please load the locale currencies data.",NoSupplementalCurrency:"Cannot determine currency. Please load the supplemental currencyData.",NoCurrencyRegion:"No currency data for region '{0}'",NoCurrencyDisplay:"Cannot determine currency display information. Please load the locale currencies data. The default culture does not include the all currencies data.",NoGMTInfo:"Cannot determine locale GMT format. Please load the locale timeZoneNames data.",NoWeekData:"Cannot determine locale first day of week. Please load the supplemental weekData.",NoFirstDay:"Cannot determine locale first day of week. Please load the supplemental weekData. The default culture includes only the 'en-US' first day info.",NoValidCurrency:"Cannot determine a default currency for the {0} locale. Please specify explicitly the currency with the format options.",NoDateFieldNames:"Cannot determine the locale date field names. Please load the locale dateFields data."});var Ki=Vi;function Xi(t){return Hi(t)?Yi(t):t}function Yi(t){if(Ki[t])return Ki[t];if(Ki.supplemental.likelySubtags){var e=t.split("-"),i=e[0],n=e.slice(1),r=function(t,e){for(var i=Ki.supplemental.likelySubtags,n=0;n<e.length;n++){var r=i[t+"-"+e[n]];if(r)return r}if(i[t])return i[t]}(i,n),o=r?function(t,e){var i=t.split("-"),n=i[0],r=i[1],o=i[2];return Ki[t]||-1!==e.indexOf(o)&&Ki[n+"-"+o]||-1!==e.indexOf(r)&&Ki[n+"-"+r]||Ki[n]}(r,n):null;if(o)return o}throw Gi.NoLocale.error(t)}var Zi="decimal",Ji="currency",Qi="accounting",tn="percent",en="scientific",nn="$",rn="n",on=".",sn="",an="en",ln="Formats-numberSystem-latn",hn=/([#,0.]+)/g,cn=//g;function pn(t){return hn.lastIndex=0,t.replace(cn,nn).replace(hn,rn).split(";")}function un(t){return hn.lastIndex=0,hn.exec(t.split(";")[0])[0].split(on)[0].split(",").slice(1).map((function(t){return t.length})).reverse()}function dn(t,e){for(var i in e)i.startsWith("unitPattern")&&(t[i]=e[i].replace("{0}",rn).replace("{1}",nn))}function fn(t,e){var i=Ki[t],n=i.numbers=i.numbers||{};for(var r in n.symbols=n.symbols||{},e)if("symbols-numberSystem-latn"===r)Object.assign(n.symbols,e[r]);else if(r.includes(ln)){var o=r.substr(0,r.indexOf(ln)),s=e[r].standard;n[o]={patterns:pn(s)},o===Ji?(n[o].groupSize=un((e[Zi+ln]||e[r]).standard),dn(n[o],e[r]),n.accounting={patterns:pn(e[r].accounting),groupSize:n[o].groupSize}):n[o].groupSize=un(s)}else"currencies"===r&&(n.currencies=e[r])}var vn={s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},mn=/y+/g,gn=[["dateFormats","short"]],yn={D:[["dateFormats","full"]],m:[["dateTimeFormats","availableFormats","MMMd"]],M:[["dateTimeFormats","availableFormats","MMMMd"]],y:[["dateTimeFormats","availableFormats","yMMM"]],Y:[["dateTimeFormats","availableFormats","yMMMM"]],F:[["dateFormats","full"],["timeFormats","medium"]],g:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","short"]],G:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","medium"]],t:[["timeFormats","short"]],T:[["timeFormats","medium"]]};function bn(t){for(var e=[],i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=t[i[n]];e.push(r)}return e}function wn(t,e){var i={};for(var n in t){var r=i[n]={};for(var o in t[n]){var s=t[n][o];r[o]=e?s:bn(s)}}return i}function xn(t,e){var i=Ki[t].calendar;i.days=wn(e.days),i.months=wn(e.months),i.quarters=wn(e.quarters),i.dayPeriods=wn(e.dayPeriods,!0),i.eras=function(t){var e={},i=e.format={},n={eraAbbr:"abbreviated",eraNames:"wide",eraNarrow:"narrow"};for(var r in t)i[n[r]]=t[r];return e}(e.eras)}function _n(t,e){var i=Ki[t].calendar,n={};for(var r in e){var o=r.split("-"),s=o[0],a=o[1];void 0===a&&(a="wide");var l=n[s]||{},h=e[r].displayName;h&&(l[a]=h,n[s]=l)}i.dateFields=n}function kn(t,e){for(var i=[],n=0;n<t.length;n++){for(var r=t[n],o=e,s=0;s<r.length;s++)o=o[r[s]];i.push(o)}return i.join(" ")}function Sn(t,e){var i=Ki[t].calendar,n=i.patterns={};for(var r in n.d=kn(gn,e).replace(mn,"y"),yn)n[r]=kn(yn[r],e);for(var o in vn)n[o]=vn[o];var s=e.dateTimeFormats;i.dateTimeFormats={full:s.full,long:s.long,medium:s.medium,short:s.short,availableFormats:s.availableFormats},i.timeFormats=e.timeFormats,i.dateFormats=e.dateFormats}function Cn(t,e){var i=Ki[t].calendar=Ki[t].calendar||{};for(var n in e)"timeZoneNames"===n?(i.gmtFormat=e[n].gmtFormat,i.gmtZeroFormat=e[n].gmtZeroFormat):"calendars"===n&&e[n].gregorian?(Sn(t,e[n].gregorian),xn(t,e[n].gregorian)):"fields"===n&&_n(t,e.fields)}function En(t){if(t.territory)return t.territory;var e,i=t.name,n=t.identity;return e=n&&n.territory?n.territory:function(t,e){var i=Ki.supplemental.likelySubtags,n=t.split("-");if(i){var r=i[t]||i[n[0]];r&&(n=r.split("-"))}if(e)for(var o=n.length-1;o>=1;o--){var s=n[o];s!==e.variant&&s!==e.script||n.splice(o,1)}var a=n.length;if(a>1)return n[a-1].toUpperCase()}(i,n),t.territory=e,e}function Tn(t,e){for(var i in e)"numbers"===i?fn(t,e[i]):"dates"===i&&Cn(t,e[i])}function An(){for(var t=arguments,e=arguments.length,i=0;i<e;i++){var n=t[i];if(n.main){var r=Object.keys(n.main)[0],o=n.main[r],s=Ki[r]=Ki[r]||{};s.name=s.name||r,s.identity=s.identity||o.identity,En(s),Tn(r,o)}else n.supplemental&&(n.supplemental.weekData?Ki.supplemental.weekData={firstDay:n.supplemental.weekData.firstDay,weekendStart:n.supplemental.weekData.weekendStart,weekendEnd:n.supplemental.weekData.weekendEnd}:Object.assign(Ki.supplemental,n.supplemental))}}function Mn(t){var e=t.name,i=Ki[e]=Ki[e]||{};if(t.likelySubtags){var n=Ki.supplemental=Ki.supplemental||{};n.likelySubtags=Object.assign(n.likelySubtags||{},t.likelySubtags)}var r=i.numbers;Object.assign(i,t),r&&t.numbers&&(i.numbers=Object.assign({},r,t.numbers))}function On(t,e){void 0===e&&(e=an);var i=Yi(e).calendar.dateFields;if(!i)throw Gi.NoDateFieldNames.error();var n=i[t.type]||{};return n[t.nameType]||n.wide}function Dn(t,e){var i=e.type,n=e.nameType,r=e.standAlone,o=e.lower,s=Xi(t),a=r?"stand-alone":"format",l=(o?"lower-":sn)+n,h=s.calendar[i][a],c=h[l];return!c&&o&&(c=h[l]=function(t){var e=Array.isArray(t)?function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].toLowerCase());return e}(t):function(t){var e={};for(var i in t)e[i]=t[i].toLowerCase();return e}(t);return e}(h[n])),c}function Pn(t){var e=t.split("-"),i=parseInt(e[0],10),n=parseInt(e[1],10)-1,r=parseInt(e[2],10);return new Date(i,n,r)}var Rn=Gi.NoCurrency,In=Gi.NoCurrencyDisplay,zn=Gi.NoSupplementalCurrency,Ln=Gi.NoCurrencyRegion,Bn=Gi.NoValidCurrency,Nn="symbol",jn={"001":"USD",150:"EUR"};function Fn(t,e,i){var n=Xi(t).numbers.currencies;if(n){var r=n[e];if(r)return r;if(i)throw In.error()}else if(i)throw Rn.error()}function Vn(t,e){return e.length-t.length}function Hn(t,e,i){void 0===i&&(i=!0);var n=Fn(t,e,i);if(n){if(!n.displays){var r=[e];for(var o in n)r.push(n[o]);r.sort(Vn),n.displays=r}return n.displays}}function Wn(t,e){var i=e.value,n=e.currency,r=e.currencyDisplay;if(void 0===r&&(r=Nn),"code"===r)return n;var o=Fn(t,n,!0);return r===Nn?o["symbol-alt-narrow"]||o.symbol:void 0===typeof i||1!==i?o["displayName-count-other"]:o["displayName-count-one"]}function Un(t){var e=2,i=2,n=((Ki.supplemental.currencyData||{}).fractions||{})[t];return n&&n._digits&&(i=e=parseInt(n._digits,10)),{minimumFractionDigits:e,maximumFractionDigits:i}}function qn(t,e){if(void 0===e&&(e=!0),jn[t])return jn[t];var i=Ki.supplemental.currencyData;if(i){var n=i.region[t];if(n){var r=function(t){for(var e,i,n,r,o=0;o<t.length;o++){var s=t[o],a=Object.keys(s)[0],l=s[a];if("XXX"!==a&&"false"!==l._tender&&l._from)if(l._to){if(!n){var h=Pn(l._from),c=Pn(l._to);(!i||i.to<c||i.from<h)&&(e=a,i={from:h,to:c})}}else{var p=Pn(l._from);(!r||r<p)&&(n=a,r=p)}}return n||e}(n);return r}if(e)throw Ln.error(t)}else if(e)throw zn.error()}function $n(t,e){var i=Xi(t),n=i.numbers;if(!n.localeCurrency){var r=qn(En(i),e);if(!r&&e)throw Bn.error(i.name);n.localeCurrency=r}return n.localeCurrency}var Gn=["sun","mon","tue","wed","thu","fri","sat"],Kn=Gi.NoWeekData,Xn=Gi.NoFirstDay;function Yn(t){var e=Xi(t);if(!isNaN(e.firstDay))return e.firstDay;var i=Ki.supplemental.weekData;if(!i)throw Kn.error();var n=i.firstDay[En(e)]||i.firstDay["001"];if(!n)throw Xn.error();return e.firstDay=Gn.indexOf(n),e.firstDay}var Zn=Gi.NoWeekData;function Jn(t){var e=Xi(t);if(e.weekendRange)return e.weekendRange;var i=Ki.supplemental.weekData;if(!i)throw Zn.error();var n=En(e),r=i.weekendStart[n]||i.weekendStart["001"],o=i.weekendEnd[n]||i.weekendEnd["001"];return e.weekendRange={start:Gn.indexOf(r),end:Gn.indexOf(o)},e.weekendRange}function Qn(t){return Xi(t).numbers.symbols}function tr(t,e){return void 0===e&&(e={}),e.currency||(e.currency=$n(t,!0)),Wn(t,e)}function er(t,e,i,n,r){var o=r.numbers.symbols,s=t.indexOf(o.decimal),a=n.groupSize.slice(),l=a.shift(),h=-1!==s?s:i+1,c=t.substring(e,h),p=t,u=c.length;if(u>=l){for(var d=u,f=[];d>-1;){var v=c.substring(d-l,d);v&&f.push(v),d-=l;var m=a.shift();if(0===(l=void 0!==m?m:l)){(v=c.substring(0,d))&&f.push(v);break}}c=f.reverse().join(o.group),p=t.substring(0,e)+c+t.substring(h)}return p}function ir(t){return t===Ji||t===Qi}function nr(t,e,i){void 0===e&&(e=2),void 0===i&&(i=!1);var n=e-String(t).length,r=t;if(n>0){var o=new Array(n+1).join("0");r=i?t+o:o+t}return r}function rr(t,e){var i=t,n=e||0;return i=i.toString().split("e"),i=(i=Math.round(Number(i[0]+"e"+(i[1]?Number(i[1])+n:n)))).toString().split("e"),(i=Number(i[0]+"e"+(i[1]?Number(i[1])-n:-n))).toFixed(Math.min(n,20))}var or=/0+$/;function sr(t,e,i){var n=i.numbers.symbols,r=e.style,o=ir(r);if(r===en)return(void 0!==e.minimumFractionDigits?t.toExponential(e.minimumFractionDigits):t.toExponential()).replace(on,n.decimal);var s,a=t;o&&(e.value=a,s=tr(i,e)),r===tn&&(a*=100,s=n.percentSign);var l=function(t){var e,i=t.minimumFractionDigits,n=t.maximumFractionDigits,r=t.style,o=ir(r);return o&&(e=Un(t.currency)),void 0===i&&(i=o?e.minimumFractionDigits:0),void 0===n&&(n=r===tn?Math.max(i,0):o?Math.max(i,e.maximumFractionDigits):Math.max(i,3)),{minimumFractionDigits:i,maximumFractionDigits:n}}(e),h=l.minimumFractionDigits,c=(a=rr(a,l.maximumFractionDigits))<0,p=a.split(on),u=p[0],d=nr(p[1]?p[1].replace(or,sn):sn,h,!0);c&&(u=u.substring(1)),e.minimumIntegerDigits&&(u=nr(u,e.minimumIntegerDigits));var f,v=!1!==e.useGrouping?er(u,0,u.length,e,i):u;if(d&&(v+=n.decimal+d),o&&"name"===e.currencyDisplay)f=function(t,e){var i=t.numbers.currency,n=1!==e?i["unitPattern-count-other"]:i["unitPattern-count-one"];return e<0&&(n=n.replace(rn,"-n")),n}(i,t);else{var m=e.patterns;f=c?m[1]||"-"+m[0]:m[0]}if(f===rn&&!c)return v;var g=function(t,e,i){for(var n=sn,r=0,o=e.length;r<o;r++){var s=e.charAt(r);n+=s===rn?t:s===nn||"%"===s?i:s}return n}(v,f,s);return g}var ar="__??__",lr="#",hr="0",cr=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,pr=/(\.(?:[0-9]*[1-9])?)0+$/g,ur=/\.$/,dr=/\,/g;function fr(t){var e,i,n,r=t.number,o=t.format,s=o.indexOf(on);if(-1!==s){var a=o.lastIndexOf(hr)-s,l=o.lastIndexOf(lr)-s,h=a>-1,c=l>-1,p=r.toString().split("e"),u=(p=(p=p[1]?rr(r,Math.abs(p[1])):p[0]).split(on)[1]||sn).length,d=-1;h||c?h&&a>l?u=a:l>a&&(c&&u>l?u=l:h&&u<a&&(u=a),d=h?a:0):(t.format=o.substring(0,s)+o.substring(s+1),s=-1,u=0),u>-1&&(r=rr(r,u),d>-1&&(e=r,n=0===(i=d)?pr:new RegExp("(\\.[0-9]{"+i+"}[1-9]*)0+$","g"),r=e.replace(n,"$1").replace(ur,sn)))}else r=rr(r);t.negative&&-1*r>=0&&(t.negative=!1),t.number=r,t.decimalIndex=s}function vr(t){var e=t.number,i=t.format;if(i=i.split(";"),t.negative&&i[1])i=i[1],t.hasNegativeFormat=!0;else if(0===e){var n=i[2];i=n||i[0],n&&function(t){return-1===t.indexOf(lr)&&-1===t.indexOf(hr)}(n)&&(t.constant=n)}else i=i[0];t.format=i}function mr(t,e,i){return-1===t&&-1!==e?e:-1!==t&&-1===e?t:i?Math.min(t,e):Math.max(t,e)}function gr(t,e){var i=t.number;return-1!==t.start&&(i=function(t,e){var i=t.start,n=t.end,r=t.negative,o=t.format,s=t.decimalIndex,a=t.lastZeroIndex,l=t.hasNegativeFormat,h=t.hasGroup,c=t.number,p=c.toString().split(on),u=o.length,d=p[0],f=p[1]||sn,v=d.length,m=sn;c=o.substring(0,i),r&&!l&&(c+="-");for(var g=i;g<u;g++){var y=o.charAt(g);if(-1===s){if(n-g<v){c+=d;break}}else if(-1!==a&&a<g&&(m=sn),s-g<=v&&s-g>-1&&(c+=d,g=s),s===g){c+=(f?e.numbers.symbols.decimal:sn)+f,g+=n-s+1;continue}y===hr?(c+=y,m=y):y===lr&&(c+=m)}return h&&(c=er(c,i+(r&&!l?1:0),Math.max(n,v+i),e.numbers.decimal,e)),n>=i&&(c+=o.substring(n+1)),c}(t,e),i=function(t,e,i){var n=t;if(e===Ji||e===tn){n=sn;for(var r=0,o=t.length;r<o;r++){var s=t.charAt(r);n+=s===nn||"%"===s?i:s}}return n}(i,t.style,t.symbol),i=function(t,e){var i=t;if(e)for(var n=e.length,r=0;r<n;r++)i=i.replace(ar,e[r]);return i}(i,t.literals)),i}function yr(t,e,i){var n={negative:t<0,number:Math.abs(t),format:e};return vr(n),n.constant?n.constant:(function(t){var e=t.format;if(e.indexOf("'")>-1||e.indexOf('"')>-1||e.indexOf("\\")>-1){var i=t.literals=[];t.format=e.replace(cr,(function(t){var e=t.charAt(0).replace("\\",sn),n=t.slice(1).replace(e,sn);return i.push(n),ar}))}}(n),function(t,e){var i=t.format;-1!==i.indexOf("%")&&(t.style=tn,t.symbol=e.numbers.symbols.percentSign,t.number*=100),-1!==i.indexOf(nn)&&(t.style=Ji,t.symbol=tr(e))}(n,i),function(t){t.hasGroup=t.format.indexOf(",")>-1,t.hasGroup&&(t.format=t.format.replace(dr,sn))}(n),fr(n),function(t){var e=t.format,i=e.indexOf(lr),n=e.indexOf(hr),r=mr(i,n,!0),o=mr(i=e.lastIndexOf(lr),n=e.lastIndexOf(hr));r===e.length&&(o=r),t.start=r,t.end=o,t.lastZeroIndex=n}(n),gr(n,i))}var br=/^(n|c|p|e|a)(\d*)$/i;function wr(t){var e;return e=Hi(t)?function(t){var e=br.exec(t);if(e){var i={style:Zi},n=e[1].toLowerCase();return"c"===n?i.style=Ji:"a"===n?i.style=Qi:"p"===n?i.style=tn:"e"===n&&(i.style=en),e[2]&&(i.minimumFractionDigits=i.maximumFractionDigits=parseInt(e[2],10)),i}}(t):t,e}function xr(t,e,i){if(void 0===e&&(e=rn),void 0===i&&(i=an),null==t)return sn;if(!isFinite(t))return String(t);var n,r=Yi(i),o=wr(e);if(o){var s=o.style||Zi;n=sr(t,Object.assign({},r.numbers[s],o),r)}else n=yr(t,e,r);return n}function _r(t){return"number"==typeof t}var kr=/[eE][\-+]?[0-9]+/,Sr=/\u00A0/g;function Cr(t,e){if(e.length>1){var i=(e[1]||sn).replace(nn,sn).split(rn);if(t.indexOf(i[0])>-1&&t.indexOf(i[1])>-1)return t.replace(i[0],sn).replace(i[1],sn)}}function Er(t,e,i){if(void 0===e&&(e=an),void 0===i&&(i={}),!t&&0!==t)return null;if(_r(t))return t;var n,r=Yi(e),o=r.numbers.symbols,s=t.toString();if(kr.test(s))return s=parseFloat(s.replace(o.decimal,on)),isNaN(s)?null:s;var a=s.indexOf("-");if(a>0)return null;var l=a>-1,h=function(t,e,i){var n,r=wr(i)||{},o=ir(r.style),s=t,a=r.currency||$n(e,o);if(a){var l=Hn(e,a,o);if(l)for(var h=0;h<l.length;h++){var c=l[h];if(s.includes(c)){s=s.replace(c,sn),o=!0;break}}if(o){var p=Cr(s,e.numbers.currency.patterns)||Cr(s,e.numbers.accounting.patterns);p&&(n=!0,s=p)}}return{number:s,negative:n}}(s,r,i),c=h.negative;return s=h.number,l=void 0!==c?c:l,(i.style===tn||s.indexOf(o.percentSign)>-1)&&(s=s.replace(o.percentSign,sn),n=!0),s=s.replace("-",sn).replace(Sr," ").split(o.group.replace(Sr," ")).join(sn).replace(o.decimal,on),s=parseFloat(s),isNaN(s)?s=null:l&&(s*=-1),s&&n&&(s/=100),s}var Tr=/\{(\d+)}/g;function Ar(t){var e=arguments;return t.replace(Tr,(function(t,i){return e[parseInt(i,10)+1]}))}var Mr=[2,1,5,3,4],Or={};Or[(-2).toString()]=8,Or[(-1).toString()]=6,Or[2..toString()]=6,Or[1..toString()]=3;var Dr={numeric:1,"2-digit":2,short:3,long:4,narrow:5},Pr=/[hHmsSzZoOvVxX]/;var Rr=[{key:"era",specifier:"G"},{key:"year",specifier:"y"},{key:"month",specifier:"M"},{key:"day",specifier:"d"},{key:"weekday",specifier:"E"},{key:"hour",getSpecifier:function(t){return t.hour12?"h":"H"}},{key:"minute",specifier:"m"},{key:"second",specifier:"s"},{key:"timeZoneName",specifier:"z"}],Ir={e:"c",E:"c",M:"L",Q:"q"},zr={},Lr={};function Br(t){return zr[t]||(zr[t]=new RegExp(t+"+")),zr[t]}function Nr(t){for(var e=[],i=t.charAt(0),n=i,r=1;r<t.length;r++){var o=t.charAt(r);o===n?i+=o:(e.push(i),i=n=o)}return e.push(i),e}function jr(t,e){var i,n,r=t.length,o=-Number.MAX_VALUE;for(var s in e){for(var a=[],l=s.replace("v","z"),h=0,c=0;c<r;c++){var p=t[c],u=(Br(p[0]).exec(l)||[])[0];if(u){if(l=l.replace(u,sn),u.length!==p.length){var d=Math.max(Math.min(Mr[u.length]-Mr[p.length],2),-2);h-=Or[d]}}else h-=120;if(a.push(u),h<o)break}l.length&&(h-=20*Nr(l).length),h>o&&(o=h,i=a,n=e[s])}n=n.replace("v","z");for(var f=0;f<r;f++){var v=i[f];if(v&&v!==t[f]){var m=i[f][0];n=n.replace(Br(m),t[f]),Ir[m]&&(n=n.replace(Br(Ir[m]),t[f]))}}return n}function Fr(t,e){var i=e.calendar.dateTimeFormats.availableFormats;if(i[t])return i[t];if(Lr[e.name]&&Lr[e.name][t])return Lr[e.name][t];var n,r=t.search(Pr);if(r>0){var o=t.substr(0,r),s=t.substr(r);n=Ar(e.calendar.dateTimeFormats.short,i[s]||jr(Nr(s),i),i[o]||jr(Nr(o),i))}else n=jr(Nr(t),i);return function(t,e,i){Lr[i]||(Lr[i]={}),Lr[i][t]=e}(t,n,e.name),n}function Vr(t,e){var i,n=e.calendar;if(Hi(t))i=n.patterns[t]?n.patterns[t]:t;else if(t){if(t.pattern)return t.pattern;var r=t.skeleton;r||(t.datetime?i=Ar(n.dateTimeFormats[t.datetime],n.timeFormats[t.datetime],n.dateFormats[t.datetime]):t.date?i=n.dateFormats[t.date]:t.time?i=n.timeFormats[t.time]:r=function(t){for(var e=[],i=0;i<Rr.length;i++){var n=Rr[i],r=t[n.key];if(r){var o=n.specifier||n.getSpecifier(t);e.push(o.repeat(Dr[r]))}}return e.join(sn)}(t)),r&&(i=Fr(r,e))}return i||(i=n.patterns.d),i}function Hr(t){var e;return t<=3?e="abbreviated":4===t?e="wide":5===t?e="narrow":6===t&&(e="short"),e}function Wr(t,e,i,n,r){return Dn(t,{type:e,nameType:Hr(i),standAlone:n,lower:r})}function Ur(t){return"function"==typeof t}function qr(t){return Boolean(t)&&Ur(t.getTime)&&Ur(t.getMonth)}var $r="month",Gr="hour",Kr="zone",Xr="weekday",Yr="quarter",Zr={G:"era",y:"year",q:Yr,Q:Yr,M:$r,L:$r,d:"day",E:Xr,c:Xr,e:Xr,h:Gr,H:Gr,k:Gr,K:Gr,m:"minute",s:"second",a:"dayperiod",x:Kr,X:Kr,z:Kr,Z:Kr},Jr=/d{1,2}|E{1,6}|e{1,6}|c{3,6}|c{1}|M{1,5}|L{1,5}|y{1,4}|H{1,2}|h{1,2}|k{1,2}|K{1,2}|m{1,2}|a{1,5}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|x{1,5}|X{1,5}|G{1,5}|q{1,5}|Q{1,5}|"[^"]*"|'[^']*'/g;function Qr(t,e,i,n){return e<=2?nr(t+1,e):Wr(i,"months",e,n)[t]}function to(t,e,i,n){var r=Math.floor(t.getMonth()/3);return e<3?r+1:Wr(i,"quarters",e,n)[r]}function eo(t,e,i){var n=i.shortHours,r=i.optionalMinutes,o=i.separator,s=i.localizedName,a=i.zZeroOffset,l=t.getTimezoneOffset()/60;if(0===l&&a)return"Z";var h=l<=0?"+":"-",c=Math.abs(l).toString().split("."),p=c[1]||0,u=h+(n?c[0]:nr(c[0],2));(!p&&r||(u+=(o?":":sn)+nr(p,2)),s)&&(u=Ar(0===l?e.calendar.gmtZeroFormat:e.calendar.gmtFormat,u));return u}function io(t,e,i,n){var r;return r=e<3?function(t,e,i){var n=Yn(i);return(t<n?7-n+t:t-n)+1}(t.getDay(),0,i):Wr(i,"days",e,n)[t.getDay()],r}var no={};function ro(t,e,i){if(void 0===i&&(i=an),!qr(t))return null==t?sn:t;var n=Yi(i);return Vr(e,n).replace(Jr,(function(e){var i=e.length;return e.includes("'")||e.includes('"')?e.slice(1,i-1):no[e[0]](t,i,n)}))}function oo(t,e,i){var n=t.getTimezoneOffset(),r=new Date(t.getTime()+6e4*(e-i)),o=r.getTimezoneOffset();return new Date(r.getTime()+6e4*(o-n))}no.d=function(t,e){return nr(t.getDate(),e)},no.E=function(t,e,i){return Wr(i,"days",e)[t.getDay()]},no.M=function(t,e,i){return Qr(t.getMonth(),e,i,!1)},no.L=function(t,e,i){return Qr(t.getMonth(),e,i,!0)},no.y=function(t,e){var i=t.getFullYear();return 2===e&&(i%=100),nr(i,e)},no.h=function(t,e){return nr(t.getHours()%12||12,e)},no.H=function(t,e){return nr(t.getHours(),e)},no.k=function(t,e){return nr(t.getHours()||24,e)},no.K=function(t,e){return nr(t.getHours()%12,e)},no.m=function(t,e){return nr(t.getMinutes(),e)},no.s=function(t,e){return nr(t.getSeconds(),e)},no.S=function(t,e){return 0!==t.getMilliseconds()?String(t.getMilliseconds()/1e3).split(".")[1].substr(0,e):nr(sn,e)},no.a=function(t,e,i){return Wr(i,"dayPeriods",e)[t.getHours()<12?"am":"pm"]},no.z=function(t,e,i){return eo(t,i,{shortHours:e<4,optionalMinutes:e<4,separator:!0,localizedName:!0})},no.Z=function(t,e,i){return eo(t,i,{separator:e>3,localizedName:4===e,zZeroOffset:5===e})},no.x=function(t,e,i){return eo(t,i,{optionalMinutes:1===e,separator:3===e||5===e})},no.X=function(t,e,i){return eo(t,i,{optionalMinutes:1===e,separator:3===e||5===e,zZeroOffset:!0})},no.G=function(t,e,i){var n=t.getFullYear()>=0?1:0;return Wr(i,"eras",e)[n]},no.e=io,no.c=function(t,e,i){return io(t,e,i,!0)},no.q=function(t,e,i){return to(t,e,i,!0)},no.Q=to;var so=/([+|\-]\d{1,2})(:?)(\d{2})?/,ao=/^\/Date\((.*?)\)\/$/,lo=/[+-]\d*/,ho={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},co=/\d+/,po=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","E MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.SSSSSSSXXX","yyyy-MM-ddTHH:mm:ss.SSSXXX","yyyy-MM-ddTHH:mm:ss.SSXXX","yyyy-MM-ddTHH:mm:ssXXX","yyyy-MM-ddTHH:mm:ss.SSSSSSS","yyyy-MM-ddTHH:mm:ss.SSS","yyyy-MM-ddTHH:mmXXX","yyyy-MM-ddTHH:mmX","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"],uo=["G","g","F","Y","y","M","m","D","d","y","T","t"];function fo(t,e,i){return!(t>=e&&t<=i)}function vo(t,e){for(var i=e.format,n=e.idx,r=0;i[n]===t;)r++,n++;return r>0&&(n-=1),e.idx=n,r}function mo(t,e){var i=t?ho[t]||new RegExp("^\\d{1,"+t+"}"):co,n=e.value.substr(e.valueIdx,t).match(i);return n?(n=n[0],e.valueIdx+=n.length,parseInt(n,10)):null}function go(t,e,i){for(var n,r,o,s=0,a=t.length,l=0,h=0;s<a;s++)r=(n=t[s]).length,o=e.value.substr(e.valueIdx,r),i&&(o=o.toLowerCase()),o===n&&r>l&&(l=r,h=s);return l?(e.valueIdx+=l,h+1):null}function yo(t){var e=!1;return t.value.charAt(t.valueIdx)===t.format[t.idx]&&(t.valueIdx++,e=!0),e}function bo(t,e,i){var n=i.shortHours,r=i.noSeparator,o=i.optionalMinutes,s=i.localizedName,a=i.zLiteral;if(t.UTC=!0,a&&"Z"===t.value.charAt(t.valueIdx))return t.valueIdx++,!1;if(s&&!go(function(t){var e=t.gmtFormat,i=t.gmtZeroFormat;if(!e)throw Gi.NoGMTInfo.error();return[e.replace("{0}",sn).toLowerCase(),i.replace("{0}",sn).toLowerCase()]}(e.calendar),t,!0))return!0;var l=so.exec(t.value.substr(t.valueIdx,6));if(!l)return!s;var h=l[1],c=l[3],p=parseInt(h,10),u=l[2],d=parseInt(c,10);return!!(isNaN(p)||!n&&3!==h.length||!o&&isNaN(d)||r&&u)||(isNaN(d)&&(d=null),!!(fo(p,-12,13)||d&&fo(d,0,59))||(t.valueIdx+=l[0].length,t.hoursOffset=p,void(t.minutesOffset=d)))}function wo(t,e,i){var n=vo(t,e),r=Wr(i,"months",n,"L"===t,!0),o=n<3?mo(2,e):go(r,e,!0);if(null===o||fo(o,1,12))return!0;e.month=o-1}function xo(t,e,i){var n=vo(t,e),r=Wr(i,"days",n,"c"===t,!0),o=n<3?mo(1,e):go(r,e,!0);if(!o&&0!==o||fo(o,1,7))return!0}var _o={};function ko(t,e,i){for(var n=Vr(e,i).split(sn),r={format:n,idx:0,value:t,valueIdx:0,year:null,month:null,day:null,hours:null,minutes:null,seconds:null,milliseconds:null},o=n.length,s=!1;r.idx<o;r.idx++){var a=n[r.idx];if(s)"'"===a&&(s=!1),yo(r);else if(_o[a]){if(_o[a](r,i))return null}else if("'"===a)s=!0,yo(r);else if(!yo(r))return null}return r.valueIdx<t.length?null:function(t){var e,i=t.year,n=t.month,r=t.day,o=t.hours,s=t.minutes,a=t.seconds,l=t.milliseconds,h=t.pmHour,c=t.UTC,p=t.hoursOffset,u=t.minutesOffset,d=null!==o||null!==s||a||null,f=new Date;return null===i&&null===n&&null===r&&d?(i=f.getFullYear(),n=f.getMonth(),r=f.getDate()):(null===i&&(i=f.getFullYear()),null===r&&(r=1)),h&&o<12&&(o+=12),c?(p&&(o+=-p),u&&(s+=-u*(p<0?-1:1)),e=new Date(Date.UTC(i,n,r,o,s,a,l))):function(t,e){e||23!==t.getHours()||t.setHours(t.getHours()+2)}(e=new Date(i,n,r,o,s,a,l),o),i<100&&e.setFullYear(i),e.getDate()!==r&&void 0===c?null:e}(r)||null}function So(t){if(t&&0===t.indexOf("/D")){var e=ao.exec(t);if(e){e=e[1];var i=lo.exec(e.substring(1));return e=new Date(parseInt(e,10)),i&&(i=function(t){var e="-"===t.substr(0,1)?-1:1,i=t.substring(1);return e*(60*parseInt(i.substr(0,2),10)+parseInt(i.substring(2),10))}(i[0]),e=oo(e,e.getTimezoneOffset(),0),e=oo(e,0,-1*i)),e}}}function Co(t,e,i){if(void 0===i&&(i=an),!t)return null;if(qr(t))return t;var n=String(t).trim(),r=So(n);if(r)return r;for(var o=Yi(i),s=e||function(t){for(var e=[],i=t.patterns,n=uo.length,r=0;r<n;r++)e.push(i[uo[r]]);return e.concat(po)}(o.calendar),a=(s=Array.isArray(s)?s:[s]).length,l=0;l<a;l++)if(r=ko(n,s[l],o))return r;return r}_o.d=function(t){vo("d",t);var e=mo(2,t);if(null===e||fo(e,1,31))return!0;null===t.day&&(t.day=e)},_o.E=function(t,e){if(null===go(Wr(e,"days",vo("E",t),!1,!0),t,!0))return!0},_o.M=function(t,e){return wo("M",t,e)},_o.L=function(t,e){return wo("L",t,e)},_o.y=function(t){var e=vo("y",t),i=mo(1===e?void 0:e,t);if(null===i)return!0;if(2===e){var n=(new Date).getFullYear();(i=n-n%100+i)>2029&&(i-=100)}t.year=i},_o.h=function(t){vo("h",t);var e=mo(2,t);if(12===e&&(e=0),null===e||fo(e,0,11))return!0;t.hours=e},_o.K=function(t){vo("K",t);var e=mo(2,t);if(null===e||fo(e,0,11))return!0;t.hours=e},_o.a=function(t,e){var i=Wr(e,"dayPeriods",vo("a",t),!1,!0),n=go([i.pm],t,!0);if(!n&&!go([i.am],t,!0))return!0;t.pmHour=n},_o.H=function(t){vo("H",t);var e=mo(2,t);if(null===e||fo(e,0,23))return!0;t.hours=e},_o.k=function(t){vo("k",t);var e=mo(2,t);if(null===e||fo(e,1,24))return!0;t.hours=24===e?0:e},_o.m=function(t){vo("m",t);var e=mo(2,t);if(null===e||fo(e,0,59))return!0;t.minutes=e},_o.s=function(t){vo("s",t);var e=mo(2,t);if(null===e||fo(e,0,59))return!0;t.seconds=e},_o.S=function(t){var e=vo("S",t),i=t.value.substr(t.valueIdx,e),n=null;if(isNaN(parseInt(i,10))||(n=rr(n=parseFloat("0."+i,10),3),n*=1e3,t.valueIdx+=e),null===n||fo(n,0,999))return!0;t.milliseconds=n},_o.z=function(t,e){var i=vo("z",t)<4,n=bo(t,e,{shortHours:i,optionalMinutes:i,localizedName:!0});if(n)return n},_o.Z=function(t,e){var i=vo("Z",t),n=bo(t,e,{noSeparator:i<4,zLiteral:5===i,localizedName:4===i});if(n)return n},_o.x=function(t,e){var i=vo("x",t),n=bo(t,e,{noSeparator:3!==i&&5!==i,optionalMinutes:1===i});if(n)return n},_o.X=function(t,e){var i=vo("X",t),n=bo(t,e,{noSeparator:3!==i&&5!==i,optionalMinutes:1===i,zLiteral:!0});if(n)return n},_o.G=function(t,e){var i=Wr(e,"eras",vo("G",t),!1,!0);if(null===go([i[0],i[1]],t,!0))return!0},_o.e=function(t,e){return xo("e",t,e)},_o.c=function(t,e){return xo("c",t,e)};var Eo={month:{type:"months",minLength:3,standAlone:"L"},quarter:{type:"quarters",minLength:3,standAlone:"q"},weekday:{type:"days",minLength:{E:0,c:3,e:3},standAlone:"c"},dayperiod:{type:"dayPeriods",minLength:0},era:{type:"eras",minLength:0}},To="literal";function Ao(t,e){var i=t[t.length-1];i&&i.type===To?i.pattern+=e:t.push({type:To,pattern:e})}function Mo(t){return"h"===t||"K"===t}function Oo(t,e){void 0===e&&(e=an);for(var i=Vr(t,Yi(e)),n=[],r=Jr.lastIndex=0,o=Jr.exec(i);o;){var s=o[0];if(r<o.index&&Ao(n,i.substring(r,o.index)),s.startsWith('"')||s.startsWith("'"))Ao(n,s);else{var a=s[0],l=Zr[a],h={type:l,pattern:s};"hour"===l&&(h.hour12=Mo(s));var c=Eo[l];if(c){var p=_r(c.minLength)?c.minLength:c.minLength[a],u=s.length;u>=p&&(h.names={type:c.type,nameType:Hr(u),standAlone:c.standAlone===a})}n.push(h)}r=Jr.lastIndex,o=Jr.exec(i)}return r<i.length&&Ao(n,i.substring(r)),n}var Do=/\{(\d+)(:[^\}]+)?\}/g;function Po(t,e,i){if(e){if(qr(t))return ro(t,e,i);if(_r(t))return xr(t,e,i)}return null!=t?t:sn}function Ro(t,e,i){return t.replace(Do,(function(t,n,r){return Po(e[parseInt(n,10)],r?r.substring(1):sn,i)}))}class Io{static setLocale(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Mn(m({},Yi("en"),t)),this.localeId=t.name}static format(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Ro(t,i,this.localeId)}static toString(t,e,i){var n=t;return new RegExp("^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$").test(t)&&(n=new Date(t)),Po(n,e,this.localeId||i)}static parseDate(t,e,i){return Co(t,e,this.localeId||i)}}var zo=/\$\{([^}]*)\}/g,Lo=/\\\}/g,Bo=/__CURLY__/g,No=/\\#/g,jo=/__SHARP__/g;class Fo{static htmlEncode(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static render(t,e){var i,n,r="";for(i=0,n=e.length;i<n;i++)r+=t(e[i]);return r}static compile(t){var e,i,n="var $kendoOutput, $kendoHtmlEncode = htmlEncode;",r=Fo.options.paramName,o=Fo.options.useWithBlock;if("function"==typeof t)return t;for(n+=o?"with("+r+"){":"",n+="$kendoOutput=",e=t.replace(Lo,"__CURLY__").replace(zo,"#=$kendoHtmlEncode($1)#").replace(Bo,"}").replace(No,"__SHARP__").split("#"),i=0;i<e.length;i++)n+=Fo.compilePart(e[i],i%2==0);n+=o?";}":";",n=(n+="return $kendoOutput;").replace(jo,"#");try{var s=new Function(r,"htmlEncode",n);return function(t){return s(t,Fo.htmlEncode)}}catch(e){throw new Error("Invalid template:'"+t+"' Generated code:'"+n+"'")}}static compilePart(t,e){if(e)return"'"+t.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var i=t.charAt(0),n=t.substring(1);return"="===i?"+("+n+")+":":"===i?"+$kendoHtmlEncode("+n+")+":";"+t+";$kendoOutput+="}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Fo,"options",{useWithBlock:!0,paramName:"dataItem"});class Vo{static compile(t){return Fo.compile(t)}}var Ho="arc",Wo="#000",Uo="bottom",qo="center",$o="circle",Go="cross",Ko="date",Xo="12px sans-serif",Yo=10,Zo=/\{\d+:?/,Jo="height",Qo="inside",ts="left",es=Number.MAX_VALUE,is=-Number.MAX_VALUE,ns="none",rs="object",ss="outside",as="right",ls="roundedRect",hs="string",cs="top",ps="value",us="#fff",ds="width",fs="x",vs="y";function ms(t){return Array.isArray(t)}function gs(t,e){for(var i=ms(e)?e:[e],n=0;n<i.length;n++){var r=i[n];-1===t.className.indexOf(r)&&(t.className+=" "+r)}}var ys=/\s+/g;function bs(t){return void 0!==t}function ws(t){var e=.5;t.options.stroke&&bs(t.options.stroke.width)&&t.options.stroke.width%2==0&&(e=0);for(var i=0;i<t.segments.length;i++)t.segments[i].anchor().round(0).translate(e,e);return t}function xs(t,e){return-t.x*e.y+t.y*e.x<0}function _s(t){return"number"==typeof t&&!isNaN(t)}function ks(t){return typeof t===hs}function Ss(t){return _s(t)||ks(t)&&isFinite(t)}function Cs(t){return"function"==typeof t}var Es="object";function Ts(t,e){for(var i in e){var n=e[i],r=typeof n,o=void 0;if((o=r===Es&&null!==n?n.constructor:null)&&o!==Array)if(n instanceof Date)t[i]=new Date(n.getTime());else if(Cs(n.clone))t[i]=n.clone();else{var s=t[i];t[i]=typeof s===Es&&s||{},Ts(t[i],n)}else"undefined"!==r&&(t[i]=n)}return t}function As(t){for(var e=arguments,i=arguments.length,n=1;n<i;n++)Ts(t,e[n]);return t}function Ms(t){return"object"==typeof t}function Os(t){return _s(t)?t+"px":t}var Ds=/width|height|top|left|bottom|right/i;function Ps(t){return Ds.test(t)}function Rs(t,e){var i=ks(e)?[e]:e;if(ms(i)){for(var n={},r=window.getComputedStyle(t),o=0;o<i.length;o++){var s=i[o];n[s]=Ps(s)?parseFloat(r[s]):r[s]}return n}if(Ms(e))for(var a in e)t.style[a]=Os(e[a])}function Is(t,e){void 0===e&&(e=0);var i={top:0,right:0,bottom:0,left:0};return"number"==typeof t?i.top=i.right=i.bottom=i.left=t:(i.top=t.top||e,i.right=t.right||e,i.bottom=t.bottom||e,i.left=t.left||e),i}var zs={compile:function(t){return t}},Ls=function(){};Ls.register=function(t){zs=t},Ls.compile=function(t){return zs.compile(t)};const Bs=Ls;function Ns(t){var e;return void 0===t&&(t={}),t.template?t.template=e=Bs.compile(t.template):Cs(t.content)&&(e=t.content),e}var js=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,Fs={};function Vs(t){if(Fs[t])return Fs[t];var e=[];return t.replace(js,(function(t,i,n,r){e.push(bs(i)?i:n||r)})),Fs[t]=function(t){for(var i=t,n=0;n<e.length&&i;n++)i=i[e[n]];return i},Fs[t]}function Hs(t,e){for(var i=t.length,n=[],r=0;r<i;r++)e(t[r])&&n.push(t[r]);return n}function Ws(t,e){if(t.className)for(var i=e.split(" "),n=0;n<i.length;n++)if(-1!==t.className.indexOf(i[n]))return!0}Fs[void 0]=function(t){return t};var Us=function(){this._map={}};Us.prototype.get=function(t){return this._map[this._key(t)]},Us.prototype.set=function(t,e){this._map[this._key(t)]=e},Us.prototype._key=function(t){return t instanceof Date?t.getTime():t};const qs=Us;function $s(t,e){if(e)return-1!==e.indexOf(t)}function Gs(t,e){var i,n=(i=e)?Math.pow(10,i):1;return Math.round(t*n)/n}function Ks(t,e,i){return Gs(t+(e-t)*i,3)}var Xs="trigger",Ys=function(t,e){this.observer=t,this.handlerMap=As({},this.handlerMap,e)};Ys.prototype.trigger=function(t,e){var i,n=this.observer,r=this.handlerMap;return r[t]?i=this.callObserver(r[t],e):n.trigger&&(i=this.callObserver(Xs,t,e)),i},Ys.prototype.callObserver=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return this.observer[t].apply(this.observer,e)},Ys.prototype.requiresHandlers=function(t){if(this.observer.requiresHandlers)return this.observer.requiresHandlers(t);for(var e=0;e<t.length;e++)if(this.handlerMap[t[e]])return!0};const Zs=Ys;function Js(t,e){for(var i=t.length,n=[],r=0;r<i;r++){var o=e(t[r]);bs(o)&&n.push(o)}return n}var Qs={};const ta={get browser(){return"undefined"==typeof window||Qs?Qs:Qs=function(t){var e,i={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var n in i)if(i.hasOwnProperty(n)){var r=t.match(i[n]);if(r){(e={})[n]=!0,e[r[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,e.version=parseInt(document.documentMode||r[2],10);break}}return e}(window.navigator.userAgent)}};var ea=ta.browser||{};function ia(t){var e=0;return t.wheelDelta?(e=-t.wheelDelta/120,ea.webkit&&(e/=2*Math.max(window.devicePixelRatio,.625))):t.detail&&(e=t.detail/3),e=e>0?Math.ceil(e):Math.floor(e)}const na=function(){};function ra(t){var e=window.console;void 0!==e&&e.log&&e.log(t)}function oa(t,e){return t.push.apply(t,e),t}var sa={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};function aa(t){for(var e=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],i="";t>0;)t<e[0]?e.shift():(i+=sa[e[0]],t-=e[0]);return i}function la(){var t,e,i=new Promise((function(n,r){t=function(t){return i._state="resolved",n(t),i},e=function(t){return i._state="rejected",r(t),i}}));return i._state="pending",i.resolve=t,i.reject=e,i.state=function(){return i._state},i}var ha=1;function ca(){return"kdef"+ha++}var pa=Math.PI/180,ua=Number.MAX_VALUE,da=-Number.MAX_VALUE;function fa(t){return t/pa}var va=String.fromCharCode;var ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ga(t){for(var e="",i=0,n=function(t){for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);if(55296<=n&&n<=56319){var r=n,o=t.charCodeAt(++i);isNaN(o)||(n=1024*(r-55296)+(o-56320)+65536)}n<128?e+=va(n):n<2048?(e+=va(192|n>>>6),e+=va(128|63&n)):n<65536?(e+=va(224|n>>>12),e+=va(128|n>>>6&63),e+=va(128|63&n)):n<1114111&&(e+=va(240|n>>>18),e+=va(128|n>>>12&63),e+=va(128|n>>>6&63),e+=va(128|63&n))}return e}(t);i<n.length;){var r=n.charCodeAt(i++),o=n.charCodeAt(i++),s=n.charCodeAt(i++),a=r>>2,l=(3&r)<<4|o>>4,h=(15&o)<<2|s>>6,c=63&s;isNaN(o)?h=c=64:isNaN(s)&&(c=64),e=e+ma.charAt(a)+ma.charAt(l)+ma.charAt(h)+ma.charAt(c)}return e}function ya(t){return bs((t.x||{}).location)?{x:t.x.location,y:t.y.location}:{x:t.pageX||t.clientX||0,y:t.pageY||t.clientY||0}}function ba(t){return void 0===t&&(t={}),t.touch?t.touch.initialTouch:t.target}function wa(t){return""===t||null===t||"none"===t||"transparent"===t||!bs(t)}function xa(t){if(t)return t[t.length-1]}function _a(t,e,i){return Math.max(Math.min(t,i),e)}function ka(t,e){if(t.length<2)return t.slice();return function t(i){if(i.length<=1)return i;var n=Math.floor(i.length/2),r=i.slice(0,n),o=i.slice(n);return function(t,i){for(var n=[],r=0,o=0,s=0;r<t.length&&o<i.length;)e(t[r],i[o])<=0?n[s++]=t[r++]:n[s++]=i[o++];return r<t.length&&n.push.apply(n,t.slice(r)),o<i.length&&n.push.apply(n,i.slice(o)),n}(r=t(r),o=t(o))}(t)}const Sa=Date.now||function(){return(new Date).getTime()};function Ca(t){return Promise.all(t)}function Ea(t){return t*pa}function Ta(t,e){return bs(t)?t:e}function Aa(t,e){for(var i in e)for(var n=i.trim().split(" "),r=0;r<n.length;r++)t.addEventListener(n[r],e[i],!1)}function Ma(t){var e=t.getBoundingClientRect(),i=document.documentElement;return{top:e.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||0),left:e.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}}function Oa(t,e){for(var i={},n=window.getComputedStyle(t)||{},r=Array.isArray(e)?e:[e],o=0;o<r.length;o++){var s=r[o];i[s]=n[s]}return i}function Da(t){return isNaN(t)?t:t+"px"}function Pa(t,e){if(!e){var i=Oa(t,["width","height"]);return{width:parseInt(i.width,10),height:parseInt(i.height,10)}}var n=e.width,r=e.height;bs(n)&&(t.style.width=Da(n)),bs(r)&&(t.style.height=Da(r))}function Ra(t,e){for(var i in void 0===e&&(e={}),e)for(var n=i.trim().split(" "),r=0;r<n.length;r++)t.removeEventListener(n[r],e[i],!1)}function Ia(t){var e=Oa(t,["paddingLeft","paddingTop"]),i=e.paddingLeft,n=e.paddingTop;return{top:parseFloat(n),left:parseFloat(i)}}var za=function(t){function e(e,i,n,r,o,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),t.call(this),this.a=e,this.b=i,this.c=n,this.d=r,this.e=o,this.f=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.multiplyCopy=function(t){return new e(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)},e.prototype.invert=function(){var t=this,i=t.a,n=t.b,r=t.c,o=t.d,s=t.e,a=t.f,l=i*o-n*r;return 0===l?null:new e(o/l,-n/l,-r/l,i/l,(r*a-o*s)/l,(n*s-i*a)/l)},e.prototype.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},e.prototype.equals=function(t){return!!t&&(this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f)},e.prototype.round=function(t){return this.a=Gs(this.a,t),this.b=Gs(this.b,t),this.c=Gs(this.c,t),this.d=Gs(this.d,t),this.e=Gs(this.e,t),this.f=Gs(this.f,t),this},e.prototype.toArray=function(t){var e=[this.a,this.b,this.c,this.d,this.e,this.f];if(bs(t))for(var i=0;i<e.length;i++)e[i]=Gs(e[i],t);return e},e.prototype.toString=function(t,e){return void 0===e&&(e=","),this.toArray(t).join(e)},e.translate=function(t,i){return new e(1,0,0,1,t,i)},e.unit=function(){return new e(1,0,0,1,0,0)},e.rotate=function(t,i,n){var r=new e;return r.a=Math.cos(Ea(t)),r.b=Math.sin(Ea(t)),r.c=-r.b,r.d=r.a,r.e=i-i*r.a+n*r.b||0,r.f=n-n*r.a-i*r.b||0,r},e.scale=function(t,i){return new e(t,0,0,i,0,0)},e}(na);za.IDENTITY=za.unit();const La=za;var Ba=/matrix\((.*)\)/;function Na(t){var e=getComputedStyle(t).transform;return"none"===e?La.unit():function(t){var e=t.match(Ba);if(null===e||2!==e.length)return La.unit();var i=e[1].split(",").map((function(t){return parseFloat(t)}));return new(Function.prototype.bind.apply(La,[null].concat(i)))}(e)}function ja(t){if(!t)return La.unit();for(var e=Na(t),i=t.parentElement;i;){var n=Na(i);e=e.multiplyCopy(n),i=i.parentElement}return e.b=e.c=e.e=e.f=0,e}var Fa=function(t){function e(e){t.call(this),this._size=e,this._length=0,this._map={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.put=function(t,e){var i=this._map,n={key:t,value:e};i[t]=n,this._head?(this._tail.newer=n,n.older=this._tail,this._tail=n):this._head=this._tail=n,this._length>=this._size?(i[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},e.prototype.get=function(t){var e=this._map[t];if(e)return e===this._head&&e!==this._tail&&(this._head=e.newer,this._head.older=null),e!==this._tail&&(e.older&&(e.older.newer=e.newer,e.newer.older=e.older),e.older=this._tail,e.newer=null,this._tail.newer=e,this._tail=e),e.value},e}(na);const Va=Fa;var Ha=/\r?\n|\r|\t/g;function Wa(t){return String(t).replace(Ha," ")}function Ua(t){var e=[];for(var i in t)e.push(i+t[i]);return e.sort().join("")}function qa(t){for(var e=2166136261,i=0;i<t.length;++i)e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24),e^=t.charCodeAt(i);return e>>>0}var $a,Ga={baselineMarkerSize:1};"undefined"!=typeof document&&(($a=document.createElement("div")).style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;");var Ka=function(t){function e(e){t.call(this),this._cache=new Va(1e3),this.options=Object.assign({},Ga,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.measure=function(t,e,i){if(void 0===i&&(i={}),null==t)return{width:0,height:0,baseline:0};var n=qa(t+Ua(e)),r=this._cache.get(n);if(r)return r;var o={width:0,height:0,baseline:0},s=i.box||$a,a=this._baselineMarker().cloneNode(!1);for(var l in e){var h=e[l];void 0!==h&&(s.style[l]=h)}var c=!1!==i.normalizeText?Wa(t):String(t);return s.textContent=c,s.appendChild(a),document.body.appendChild(s),c.length&&(o.width=s.offsetWidth-this.options.baselineMarkerSize,o.height=s.offsetHeight,o.baseline=a.offsetTop+this.options.baselineMarkerSize),o.width>0&&o.height>0&&this._cache.put(n,o),s.parentNode.removeChild(s),o},e.prototype._baselineMarker=function(){var t=document.createElement("div");return t.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",t},e}(na);Ka.current=new Ka;const Xa=Ka;function Ya(t,e,i){return Xa.current.measure(t,e,i)}var Za=e.append,Ja=e.bindEvents,Qa=e.defined,tl=e.deg,el=e.elementOffset,il=e.elementSize,nl=e.eventCoordinates,rl=e.eventElement,ol=e.hashKey,sl=e.last,al=e.limitValue,ll=e.objectKey,hl=e.rad,cl=e.round,pl=e.unbindEvents,ul=e.valueOrDefault,dl=function(){};dl.fetchFonts=function(t,e,i){void 0===i&&(i={depth:0});!t||i.depth>5||!document.fonts||Object.keys(t).forEach((function(n){var r=t[n];"dataSource"!==n&&"$"!==n[0]&&r&&("font"===n?e.push(r):"object"==typeof r&&(i.depth++,dl.fetchFonts(r,e,i),i.depth--))}))},dl.loadFonts=function(t,e){var i=[];if(t.length>0&&document.fonts){try{i=t.map((function(t){return document.fonts.load(t)}))}catch(t){ra(t)}Promise.all(i).then(e,e)}else e()},dl.preloadFonts=function(t,e){var i=[];dl.fetchFonts(t,i),dl.loadFonts(i,e)};const fl=dl;function vl(t,e){var i=t.prototype;i.options?i.options=As({},i.options,e):i.options=e}function ml(t){for(var e=es,i=is,n=0,r=t.length;n<r;n++){var o=t[n];null!==o&&isFinite(o)&&(e=Math.min(e,o),i=Math.max(i,o))}return{min:e===es?void 0:e,max:i===is?void 0:i}}function gl(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(e(n,i,t))return n}}var yl=La,bl=/matrix\((.*)\)/;function wl(t){var e=getComputedStyle(t).transform;return"none"===e?yl.unit():function(t){var e=t.match(bl);if(null===e||2!==e.length)return yl.unit();var i=e[1].split(",").map((function(t){return parseFloat(t)}));return new(Function.prototype.bind.apply(yl,[null].concat(i)))}(e)}const xl={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};var _l=ta.browser,kl=function(t){var e=Object.keys(xl);e.push("transparent");var i=new RegExp("^("+e.join("|")+")(\\W|$)","i");return kl=function(t){return i.exec(t)},i.exec(t)},Sl=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHSV=function(){return this},e.prototype.toRGB=function(){return this},e.prototype.toHex=function(t){return this.toBytes().toHex(t)},e.prototype.toBytes=function(){return this},e.prototype.toCss=function(t){return"#"+this.toHex(t)},e.prototype.toCssRgba=function(){var t=this.toBytes();return"rgba("+t.r+", "+t.g+", "+t.b+", "+parseFloat(Number(this.a).toFixed(3))+")"},e.prototype.toDisplay=function(){return _l.msie&&_l.version<9?this.toCss():this.toCssRgba()},e.prototype.equals=function(t){return t===this||null!==t&&this.toCssRgba()===Pl(t).toCssRgba()},e.prototype.diff=function(t){if(null===t)return NaN;var e=this.toBytes(),i=t.toBytes();return Math.sqrt(Math.pow(.3*(e.r-i.r),2)+Math.pow(.59*(e.g-i.g),2)+Math.pow(.11*(e.b-i.b),2))},e.prototype.clone=function(){var t=this.toBytes();return t===this&&(t=new El(t.r,t.g,t.b,t.a)),t},e}(na),Cl=function(t){function e(e,i,n,r){t.call(this),this.r=e,this.g=i,this.b=n,this.a=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHSV=function(){var t,e,i=this,n=i.r,r=i.g,o=i.b,s=Math.min(n,r,o),a=Math.max(n,r,o),l=a-s,h=a;return 0===l?new Al(0,0,h,this.a):(0!==a?(e=l/a,t=n===a?(r-o)/l:r===a?2+(o-n)/l:4+(n-r)/l,(t*=60)<0&&(t+=360)):(e=0,t=-1),new Al(t,e,h,this.a))},e.prototype.toHSL=function(){var t,e,i=this,n=i.r,r=i.g,o=i.b,s=Math.max(n,r,o),a=Math.min(n,r,o),l=(s+a)/2;if(s===a)t=e=0;else{var h=s-a;switch(e=l>.5?h/(2-s-a):h/(s+a),s){case n:t=(r-o)/h+(r<o?6:0);break;case r:t=(o-n)/h+2;break;case o:t=(n-r)/h+4}}return new Ml(60*t,100*e,100*l,this.a)},e.prototype.toBytes=function(){return new El(255*this.r,255*this.g,255*this.b,this.a)},e}(Sl),El=function(t){function e(e,i,n,r){t.call(this,Math.round(e),Math.round(i),Math.round(n),r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){return new t(this.r/255,this.g/255,this.b/255,this.a)},e.prototype.toHSV=function(){return this.toRGB().toHSV()},e.prototype.toHSL=function(){return this.toRGB().toHSL()},e.prototype.toHex=function(t){var e=Tl(this.r,2)+Tl(this.g,2)+Tl(this.b,2);return t&&t.alpha&&(e+=Tl(Math.round(255*this.a),2)),e},e.prototype.toBytes=function(){return this},e}(Cl);function Tl(t,e,i){void 0===i&&(i="0");for(var n=t.toString(16);e>n.length;)n=i+n;return n}var Al=function(t){function e(e,i,n,r){t.call(this),this.h=e,this.s=i,this.v=n,this.a=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){var t,e,i,n=this,r=n.h,o=n.s,s=n.v;if(0===o)t=e=i=s;else{r/=60;var a=Math.floor(r),l=r-a,h=s*(1-o),c=s*(1-o*l),p=s*(1-o*(1-l));switch(a){case 0:t=s,e=p,i=h;break;case 1:t=c,e=s,i=h;break;case 2:t=h,e=s,i=p;break;case 3:t=h,e=c,i=s;break;case 4:t=p,e=h,i=s;break;default:t=s,e=h,i=c}}return new Cl(t,e,i,this.a)},e.prototype.toHSL=function(){return this.toRGB().toHSL()},e.prototype.toBytes=function(){return this.toRGB().toBytes()},e}(Sl),Ml=function(t){function e(e,i,n,r){t.call(this),this.h=e,this.s=i,this.l=n,this.a=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){var t,e,i,n=this.h/360,r=this.s/100,o=this.l/100;if(0===r)t=e=i=o;else{var s=o<.5?o*(1+r):o+r-o*r,a=2*o-s;t=Ol(a,s,n+1/3),e=Ol(a,s,n),i=Ol(a,s,n-1/3)}return new Cl(t,e,i,this.a)},e.prototype.toHSV=function(){return this.toRGB().toHSV()},e.prototype.toBytes=function(){return this.toRGB().toBytes()},e}(Sl);function Ol(t,e,i){var n=i;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Dl(t){return parseFloat(parseFloat(parseInt(t,16)/255).toFixed(3))}function Pl(t,e){var i,n;if(null==t||"none"===t)return null;if(t instanceof Sl)return t;var r=t.toLowerCase();if(i=kl(r))return(r="transparent"===i[1]?new Cl(1,1,1,0):Pl(xl[i[1]],e)).match=[i[1]],r;if((i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(r))?n=new El(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),1):(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(r))?n=new El(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),1):(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(r))?n=new El(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),Dl(i[4]+i[4])):(i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(r))?n=new El(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),Dl(i[4])):(i=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(r))?n=new El(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),1):(i=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(r))?n=new El(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4])):(i=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(r))?n=new Cl(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,1):(i=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(r))&&(n=new Cl(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4]))),n)n.match=i;else if(!e)throw new Error("Cannot parse color: "+r);return n}var Rl=function(t){function e(i){var n=this;if(t.call(this),1===arguments.length)for(var r=e.formats,o=this.resolveColor(i),s=0;s<r.length;s++){var a=r[s].re,l=r[s].process,h=a.exec(o);if(h){var c=l(h);n.r=c[0],n.g=c[1],n.b=c[2]}}else this.r=arguments[0],this.g=arguments[1],this.b=arguments[2];this.r=this.normalizeByte(this.r),this.g=this.normalizeByte(this.g),this.b=this.normalizeByte(this.b)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHex=function(){var t=this.padDigit,e=this.r.toString(16),i=this.g.toString(16),n=this.b.toString(16);return"#"+t(e)+t(i)+t(n)},e.prototype.resolveColor=function(t){var i=t||"black";return"#"===i.charAt(0)&&(i=i.substr(1,6)),i=(i=i.replace(/ /g,"")).toLowerCase(),i=e.namedColors[i]||i},e.prototype.normalizeByte=function(t){return t<0||isNaN(t)?0:t>255?255:t},e.prototype.padDigit=function(t){return 1===t.length?"0"+t:t},e.prototype.brightness=function(t){var e=Math.round;return this.r=e(this.normalizeByte(this.r*t)),this.g=e(this.normalizeByte(this.g*t)),this.b=e(this.normalizeByte(this.b*t)),this},e.prototype.percBrightness=function(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)},e.prototype.isDark=function(){return this.percBrightness()<180},e.fromBytes=function(t,e,i,n){return new El(t,e,i,null!=n?n:1)},e.fromRGB=function(t,e,i,n){return new Cl(t,e,i,null!=n?n:1)},e.fromHSV=function(t,e,i,n){return new Al(t,e,i,null!=n?n:1)},e.fromHSL=function(t,e,i,n){return new Ml(t,e,i,null!=n?n:1)},e}(na);Rl.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],Rl.namedColors=xl;const Il=Rl;const zl=function(t){return new Il(t).isDark()?us:Wo};var Ll={},Bl=function(t){this._index={},this._values=t?t.slice(0):[];for(var e=0;e<this._values.length;e++)this._index[this._values[e]]=e},Nl={size:{configurable:!0}};Bl.prototype.values=function(){return this._values.filter((function(t){return t!==Ll}))},Bl.prototype.has=function(t){return void 0!==this._index[t]},Bl.prototype.add=function(t){this.has(t)||(this._index[t]=this._values.length,this._values.push(t))},Bl.prototype.delete=function(t){var e=this._index[t];void 0!==e&&(this._values[e]=Ll,delete this._index[t])},Bl.prototype.clear=function(){this._index={},this._values=[]},Nl.size.get=function(){return this._values.length},Object.defineProperties(Bl.prototype,Nl);var jl=function(t){this._set=new Set(t)},Fl={size:{configurable:!0}};jl.prototype.values=function(){return Array.from(this._set)},jl.prototype.has=function(t){return this._set.has(t)},jl.prototype.add=function(t){this._set.add(t)},jl.prototype.delete=function(t){this._set.delete(t)},jl.prototype.clear=function(){this._set.clear()},Fl.size.get=function(){return this._set.size},Object.defineProperties(jl.prototype,Fl);function Vl(t){return e=!1,"function"==typeof Set&&(e=new Set([1]).has(1)),e?new jl(t):new Bl(t);var e}function Hl(t){throw t}const Wl={INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110};function Ul(t,e){var i=cl(e-t,9);if(0===i){if(0===e)return.1;i=Math.abs(e)}var n=Math.pow(10,Math.floor(Math.log(i)/Math.log(10))),r=cl(i/n,Yo);return cl(n*(r<1.904762?.2:r<4.761904?.5:r<9.523809?1:2),Yo)}var ql=function(t){function e(e,i){t.call(this),this.x=e||0,this.y=i||0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y},e.prototype.rotate=function(t,e){var i=hl(e),n=Math.cos(i),r=Math.sin(i),o=t.x,s=t.y,a=this.x,l=this.y;return this.x=cl(o+(a-o)*n+(l-s)*r,3),this.y=cl(s+(l-s)*n-(a-o)*r,3),this},e.prototype.multiply=function(t){return this.x*=t,this.y*=t,this},e.prototype.distanceTo=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},e.onCircle=function(t,i,n){var r=hl(i);return new e(t.x-n*Math.cos(r),t.y-n*Math.sin(r))},e}(na);const $l=ql;var Gl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.observers=function(){return this._observers=this._observers||[],this._observers},e.prototype.addObserver=function(t){return this._observers?this._observers.push(t):this._observers=[t],this},e.prototype.removeObserver=function(t){var e=this.observers(),i=e.indexOf(t);return-1!==i&&e.splice(i,1),this},e.prototype.trigger=function(t,e){var i=this._observers;if(i&&!this._suspended)for(var n=0;n<i.length;n++){var r=i[n];r[t]&&r[t](e)}return this},e.prototype.optionsChange=function(t){void 0===t&&(t={}),t.element=this,this.trigger("optionsChange",t)},e.prototype.geometryChange=function(){this.trigger("geometryChange",{element:this})},e.prototype.suspend=function(){return this._suspended=(this._suspended||0)+1,this},e.prototype.resume=function(){return this._suspended=Math.max((this._suspended||0)-1,0),this},e.prototype._observerField=function(t,e){this[t]&&this[t].removeObserver(this),this[t]=e,e.addObserver(this)},e}(na);const Kl=Gl;function Xl(t){return function(e){return this[t]!==e&&(this[t]=e,this.geometryChange()),this}}function Yl(t){return function(){return this[t]}}const Zl=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=n.charAt(0).toUpperCase()+n.substring(1,n.length);t["set"+r]=Xl(n),t["get"+r]=Yl(n)}}(i.prototype,e),i};function Jl(t){return t&&"function"==typeof t.matrix?t.matrix():t}var Ql=function(t){function e(e,i){t.call(this),this.x=e||0,this.y=i||0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={ZERO:{configurable:!0}};return e.prototype.equals=function(t){return t&&t.x===this.x&&t.y===this.y},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.rotate=function(t,i){var n=e.create(i)||e.ZERO;return this.transform(La.rotate(t,n.x,n.y))},e.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this.geometryChange(),this},e.prototype.translateWith=function(t){return this.translate(t.x,t.y)},e.prototype.move=function(t,e){return this.x=this.y=0,this.translate(t,e)},e.prototype.scale=function(t,e){return void 0===e&&(e=t),this.x*=t,this.y*=e,this.geometryChange(),this},e.prototype.scaleCopy=function(t,e){return this.clone().scale(t,e)},e.prototype.transform=function(t){var e=Jl(t),i=this.x,n=this.y;return this.x=e.a*i+e.c*n+e.e,this.y=e.b*i+e.d*n+e.f,this.geometryChange(),this},e.prototype.transformCopy=function(t){var e=this.clone();return t&&e.transform(t),e},e.prototype.distanceTo=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},e.prototype.round=function(t){return this.x=Gs(this.x,t),this.y=Gs(this.y,t),this.geometryChange(),this},e.prototype.toArray=function(t){var e=bs(t);return[e?Gs(this.x,t):this.x,e?Gs(this.y,t):this.y]},e.prototype.toString=function(t,e){void 0===e&&(e=" ");var i=this.x,n=this.y;return bs(t)&&(i=Gs(i,t),n=Gs(n,t)),i+e+n},e.create=function(t,i){if(bs(t))return t instanceof e?t:1===arguments.length&&2===t.length?new e(t[0],t[1]):new e(t,i)},e.min=function(){for(var t=arguments,i=ua,n=ua,r=0;r<arguments.length;r++){var o=t[r];i=Math.min(o.x,i),n=Math.min(o.y,n)}return new e(i,n)},e.max=function(){for(var t=arguments,i=da,n=da,r=0;r<arguments.length;r++){var o=t[r];i=Math.max(o.x,i),n=Math.max(o.y,n)}return new e(i,n)},e.minPoint=function(){return new e(da,da)},e.maxPoint=function(){return new e(ua,ua)},i.ZERO.get=function(){return new e(0,0)},Object.defineProperties(e,i),e}(Zl(Kl,["x","y"]));const th=Ql;var eh=function(t){function e(e,i){t.call(this),this.width=e||0,this.height=i||0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={ZERO:{configurable:!0}};return e.prototype.equals=function(t){return t&&t.width===this.width&&t.height===this.height},e.prototype.clone=function(){return new e(this.width,this.height)},e.prototype.toArray=function(t){var e=bs(t);return[e?Gs(this.width,t):this.width,e?Gs(this.height,t):this.height]},e.create=function(t,i){if(bs(t))return t instanceof e?t:1===arguments.length&&2===t.length?new e(t[0],t[1]):new e(t,i)},i.ZERO.get=function(){return new e(0,0)},Object.defineProperties(e,i),e}(Zl(Kl,["width","height"]));const ih=eh;var nh=function(t){function e(e,i,n){void 0===e&&(e=new th),void 0===i&&(i=new ih),void 0===n&&(n=0),t.call(this),this.setOrigin(e),this.setSize(i),this.setCornerRadius(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.origin.clone(),this.size.clone())},e.prototype.equals=function(t){return t&&t.origin.equals(this.origin)&&t.size.equals(this.size)},e.prototype.setOrigin=function(t){return this._observerField("origin",th.create(t)),this.geometryChange(),this},e.prototype.getOrigin=function(){return this.origin},e.prototype.setCornerRadius=function(t){return this.cornerRadius=Array.isArray(t)?t:[t,t],this.geometryChange(),this},e.prototype.getCornerRadius=function(){return this.cornerRadius},e.prototype.setSize=function(t){return this._observerField("size",ih.create(t)),this.geometryChange(),this},e.prototype.getSize=function(){return this.size},e.prototype.width=function(){return this.size.width},e.prototype.height=function(){return this.size.height},e.prototype.topLeft=function(){return this.origin.clone()},e.prototype.bottomRight=function(){return this.origin.clone().translate(this.width(),this.height())},e.prototype.topRight=function(){return this.origin.clone().translate(this.width(),0)},e.prototype.bottomLeft=function(){return this.origin.clone().translate(0,this.height())},e.prototype.center=function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},e.prototype.bbox=function(t){var i=this.topLeft().transformCopy(t),n=this.topRight().transformCopy(t),r=this.bottomRight().transformCopy(t),o=this.bottomLeft().transformCopy(t);return e.fromPoints(i,n,r,o)},e.prototype.transformCopy=function(t){return e.fromPoints(this.topLeft().transform(t),this.bottomRight().transform(t))},e.prototype.expand=function(t,e){return void 0===e&&(e=t),this.size.width+=2*t,this.size.height+=2*e,this.origin.translate(-t,-e),this},e.prototype.expandCopy=function(t,e){return this.clone().expand(t,e)},e.prototype.containsPoint=function(t){var e=this.origin,i=this.bottomRight();return!(t.x<e.x||t.y<e.y||i.x<t.x||i.y<t.y)},e.prototype._isOnPath=function(t,e){var i=this.expandCopy(e,e),n=this.expandCopy(-e,-e);return i.containsPoint(t)&&!n.containsPoint(t)},e.fromPoints=function(){var t=th.min.apply(null,arguments),i=th.max.apply(null,arguments),n=new ih(i.x-t.x,i.y-t.y);return new e(t,n)},e.union=function(t,i){return e.fromPoints(th.min(t.topLeft(),i.topLeft()),th.max(t.bottomRight(),i.bottomRight()))},e.intersect=function(t,i){var n={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},r={left:i.topLeft().x,top:i.topLeft().y,right:i.bottomRight().x,bottom:i.bottomRight().y};if(n.left<=r.right&&r.left<=n.right&&n.top<=r.bottom&&r.top<=n.bottom)return e.fromPoints(new th(Math.max(n.left,r.left),Math.max(n.top,r.top)),new th(Math.min(n.right,r.right),Math.min(n.bottom,r.bottom)))},e}(Kl);const rh=nh;var oh=function(t){function e(e,i,n,r){t.call(this),this.x1=e||0,this.y1=i||0,this.x2=n||0,this.y2=r||0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.equals=function(t){return this.x1===t.x1&&this.x2===t.x2&&this.y1===t.y1&&this.y2===t.y2},e.prototype.width=function(){return this.x2-this.x1},e.prototype.height=function(){return this.y2-this.y1},e.prototype.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},e.prototype.move=function(t,e){var i=this.height(),n=this.width();return Qa(t)&&(this.x1=t,this.x2=this.x1+n),Qa(e)&&(this.y1=e,this.y2=this.y1+i),this},e.prototype.wrap=function(t){return this.x1=Math.min(this.x1,t.x1),this.y1=Math.min(this.y1,t.y1),this.x2=Math.max(this.x2,t.x2),this.y2=Math.max(this.y2,t.y2),this},e.prototype.wrapPoint=function(t){var i=ms(t),n=i?t[0]:t.x,r=i?t[1]:t.y;return this.wrap(new e(n,r,n,r)),this},e.prototype.snapTo=function(t,e){return e!==fs&&e||(this.x1=t.x1,this.x2=t.x2),e!==vs&&e||(this.y1=t.y1,this.y2=t.y2),this},e.prototype.alignTo=function(t,e){var i=this.height(),n=this.width(),r=e===cs||e===Uo?vs:fs,o=r===vs?i:n;if(e===qo){var s=t.center(),a=this.center();this.x1+=s.x-a.x,this.y1+=s.y-a.y}else this[r+1]=e===cs||e===ts?t[r+1]-o:t[r+2];return this.x2=this.x1+n,this.y2=this.y1+i,this},e.prototype.shrink=function(t,e){return this.x2-=t,this.y2-=e,this},e.prototype.expand=function(t,e){return this.shrink(-t,-e),this},e.prototype.pad=function(t){var e=Is(t);return this.x1-=e.left,this.x2+=e.right,this.y1-=e.top,this.y2+=e.bottom,this},e.prototype.unpad=function(t){var e=Is(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,this.pad(e)},e.prototype.clone=function(){return new e(this.x1,this.y1,this.x2,this.y2)},e.prototype.center=function(){return new $l(this.x1+this.width()/2,this.y1+this.height()/2)},e.prototype.containsPoint=function(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2},e.prototype.points=function(){return[new $l(this.x1,this.y1),new $l(this.x2,this.y1),new $l(this.x2,this.y2),new $l(this.x1,this.y2)]},e.prototype.getHash=function(){return[this.x1,this.y1,this.x2,this.y2].join(",")},e.prototype.overlaps=function(t){return!(t.y2<this.y1||this.y2<t.y1||t.x2<this.x1||this.x2<t.x1)},e.prototype.rotate=function(t){var e=this.width(),i=this.height(),n=this.center(),r=n.x,o=n.y,s=sh(0,0,r,o,t),a=sh(e,0,r,o,t),l=sh(e,i,r,o,t),h=sh(0,i,r,o,t);return e=Math.max(s.x,a.x,l.x,h.x)-Math.min(s.x,a.x,l.x,h.x),i=Math.max(s.y,a.y,l.y,h.y)-Math.min(s.y,a.y,l.y,h.y),this.x2=this.x1+e,this.y2=this.y1+i,this},e.prototype.toRect=function(){return new rh([this.x1,this.y1],[this.width(),this.height()])},e.prototype.hasSize=function(){return 0!==this.width()&&0!==this.height()},e.prototype.align=function(t,e,i){var n=e+1,r=e+2,o=e===fs?ds:Jo,s=this[o]();$s(i,[ts,cs])?(this[n]=t[n],this[r]=this[n]+s):$s(i,[as,Uo])?(this[r]=t[r],this[n]=this[r]-s):i===qo&&(this[n]=t[n]+(t[o]()-s)/2,this[r]=this[n]+s)},e}(na);function sh(t,e,i,n,r){var o=hl(r);return new $l(i+(t-i)*Math.cos(o)+(e-n)*Math.sin(o),n-(t-i)*Math.sin(o)+(e-n)*Math.cos(o))}const ah=oh;var lh=function(t){function e(e,i,n,r,o){t.call(this),this.center=e,this.innerRadius=i,this.radius=n,this.startAngle=r,this.angle=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)},e.prototype.middle=function(){return this.startAngle+this.angle/2},e.prototype.setRadius=function(t,e){return e?this.innerRadius=t:this.radius=t,this},e.prototype.point=function(t,e){var i=hl(t),n=Math.cos(i),r=Math.sin(i),o=e?this.innerRadius:this.radius,s=cl(this.center.x-n*o,3),a=cl(this.center.y-r*o,3);return new $l(s,a)},e.prototype.adjacentBox=function(t,e,i){var n=this.clone().expand(t),r=n.middle(),o=n.point(r),s=e/2,a=i/2,l=Math.sin(hl(r)),h=Math.cos(hl(r)),c=o.x-s,p=o.y-a;return Math.abs(l)<.9&&(c+=s*-h/Math.abs(h)),Math.abs(h)<.9&&(p+=a*-l/Math.abs(l)),new ah(c,p,c+e,p+i)},e.prototype.containsPoint=function(t){var e=this.center,i=this.innerRadius,n=this.radius,r=this.startAngle,o=this.startAngle+this.angle,s=t.x-e.x,a=t.y-e.y,l=new $l(s,a),h=this.point(r),c=new $l(h.x-e.x,h.y-e.y),p=this.point(o),u=new $l(p.x-e.x,p.y-e.y),d=cl(s*s+a*a,3);return(c.equals(l)||xs(c,l))&&!xs(u,l)&&d>=i*i&&d<=n*n},e.prototype.getBBox=function(){var t,e=new ah(es,es,is,is),i=cl(this.startAngle%360),n=cl((i+this.angle)%360),r=this.innerRadius,o=[0,90,180,270,i,n].sort(hh),s=o.indexOf(i),a=o.indexOf(n);t=i===n?o:s<a?o.slice(s,a+1):[].concat(o.slice(0,a+1),o.slice(s,o.length));for(var l=0;l<t.length;l++){var h=this.point(t[l]);e.wrapPoint(h),e.wrapPoint(h,r)}return r||e.wrapPoint(this.center),e},e.prototype.expand=function(t){return this.radius+=t,this},e}(na);function hh(t,e){return t-e}const ch=lh;!function(t){function e(e,i,n,r){t.call(this,e,0,i,n,r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expand=function(e){return t.prototype.expand.call(this,e)},e.prototype.clone=function(){return new e(this.center,this.radius,this.startAngle,this.angle)},e.prototype.setRadius=function(t){return this.radius=t,this}}(ch);var ph=[].push,uh=[].pop,dh=[].splice,fh=[].shift,vh=[].slice,mh=[].unshift,gh=function(t){function e(e){void 0===e&&(e=[]),t.call(this),this.length=0,this._splice(0,e.length,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.elements=function(t){return t?(this._splice(0,this.length,t),this._change(),this):this.slice(0)},e.prototype.push=function(){var t=arguments,e=ph.apply(this,t);return this._add(t),e},e.prototype.slice=function(){return vh.call(this)},e.prototype.pop=function(){var t=this.length,e=uh.apply(this);return t&&this._remove([e]),e},e.prototype.splice=function(t,e){var i=vh.call(arguments,2),n=this._splice(t,e,i);return this._change(),n},e.prototype.shift=function(){var t=this.length,e=fh.apply(this);return t&&this._remove([e]),e},e.prototype.unshift=function(){var t=arguments,e=mh.apply(this,t);return this._add(t),e},e.prototype.indexOf=function(t){for(var e=this.length,i=0;i<e;i++)if(this[i]===t)return i;return-1},e.prototype._splice=function(t,e,i){var n=dh.apply(this,[t,e].concat(i));return this._clearObserver(n),this._setObserver(i),n},e.prototype._add=function(t){this._setObserver(t),this._change()},e.prototype._remove=function(t){this._clearObserver(t),this._change()},e.prototype._setObserver=function(t){for(var e=0;e<t.length;e++)t[e].addObserver(this)},e.prototype._clearObserver=function(t){for(var e=0;e<t.length;e++)t[e].removeObserver(this)},e.prototype._change=function(){},e}(Kl);const yh=gh;var bh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._change=function(){this.geometryChange()},e}(yh);const wh=bh;var xh={}.toString,_h=function(t){function e(e,i){for(var n in void 0===i&&(i=""),t.call(this),this.prefix=i,e){var r=e[n];r=this._wrap(r,n),this[n]=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){for(var e=t.split("."),i=this;e.length&&i;){i=i[e.shift()]}return i},e.prototype.set=function(t,e){this.get(t)!==e&&(this._set(t,this._wrap(e,t)),this.optionsChange({field:this.prefix+t,value:e}))},e.prototype._set=function(t,i){var n=t.indexOf(".")>=0,r=this,o=t;if(n){for(var s=o.split("."),a=this.prefix;s.length>1;){a+=(o=s.shift())+".";var l=r[o];l||((l=new e({},a)).addObserver(this),r[o]=l),r=l}o=s[0]}r._clear(o),r[o]=i},e.prototype._clear=function(t){var e=this[t];e&&e.removeObserver&&e.removeObserver(this)},e.prototype._wrap=function(t,i){var n=xh.call(t),r=t;return null!==r&&bs(r)&&"[object Object]"===n&&(t instanceof e||t instanceof na||(r=new e(r,this.prefix+i+".")),r.addObserver(this)),r},e}(Kl);const kh=_h;var Sh=function(t){function e(e){void 0===e&&(e=La.unit()),t.call(this),this._matrix=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this._matrix.clone())},e.prototype.equals=function(t){return t&&t._matrix.equals(this._matrix)},e.prototype.translate=function(t,e){return this._matrix=this._matrix.multiplyCopy(La.translate(t,e)),this._optionsChange(),this},e.prototype.scale=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=null);var n=i;return n&&(n=th.create(n),this._matrix=this._matrix.multiplyCopy(La.translate(n.x,n.y))),this._matrix=this._matrix.multiplyCopy(La.scale(t,e)),n&&(this._matrix=this._matrix.multiplyCopy(La.translate(-n.x,-n.y))),this._optionsChange(),this},e.prototype.rotate=function(t,e){var i=th.create(e)||th.ZERO;return this._matrix=this._matrix.multiplyCopy(La.rotate(t,i.x,i.y)),this._optionsChange(),this},e.prototype.multiply=function(t){var e=Jl(t);return this._matrix=this._matrix.multiplyCopy(e),this._optionsChange(),this},e.prototype.matrix=function(t){return t?(this._matrix=t,this._optionsChange(),this):this._matrix},e.prototype._optionsChange=function(){this.optionsChange({field:"transform",value:this})},e}(Kl);const Ch=Sh;function Eh(t){return null===t?null:t instanceof Ch?t:new Ch(t)}var Th=function(t){function e(e){t.call(this),this._initOptions(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Rect"},e.prototype._initOptions=function(t){void 0===t&&(t={});var e=t.clip,i=t.transform;i&&(t.transform=Eh(i)),e&&!e.id&&(e.id=ca()),this.options=new kh(t),this.options.addObserver(this)},e.prototype.transform=function(t){if(!bs(t))return this.options.get("transform");this.options.set("transform",Eh(t))},e.prototype.parentTransform=function(){for(var t,e=this;e.parent;){var i=(e=e.parent).transform();i&&(t=i.matrix().multiplyCopy(t||La.unit()))}if(t)return Eh(t)},e.prototype.currentTransform=function(t){void 0===t&&(t=this.parentTransform());var e,i=Jl(this.transform()),n=Jl(t);if(e=i&&n?n.multiplyCopy(i):i||n)return Eh(e)},e.prototype.visible=function(t){return bs(t)?(this.options.set("visible",t),this):!1!==this.options.get("visible")},e.prototype.clip=function(t){var e=this.options;return bs(t)?(t&&!t.id&&(t.id=ca()),e.set("clip",t),this):e.get("clip")},e.prototype.opacity=function(t){return bs(t)?(this.options.set("opacity",t),this):Ta(this.options.get("opacity"),1)},e.prototype.clippedBBox=function(t){var e=this._clippedBBox(t);if(e){var i=this.clip();return i?rh.intersect(e,i.bbox(t)):e}},e.prototype.containsPoint=function(t,e){if(this.visible()){var i=this.currentTransform(e),n=t;return i&&(n=t.transformCopy(i.matrix().invert())),this._hasFill()&&this._containsPoint(n)||this._isOnPath&&this._hasStroke()&&this._isOnPath(n)}return!1},e.prototype._hasFill=function(){var t=this.options.fill;return t&&!wa(t.color)},e.prototype._hasStroke=function(){var t=this.options.stroke;return t&&t.width>0&&!wa(t.color)},e.prototype._clippedBBox=function(t){return this.bbox(t)},Object.defineProperties(e.prototype,i),e}(Kl);const Ah=Th;const Mh=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fill=function(t,e){var i=this.options;if(bs(t)){if(t&&"Gradient"!==t.nodeType){var n={color:t};bs(e)&&(n.opacity=e),i.set("fill",n)}else i.set("fill",t);return this}return i.get("fill")},e.prototype.stroke=function(t,e,i){return bs(t)?(this.options.set("stroke.color",t),bs(e)&&this.options.set("stroke.width",e),bs(i)&&this.options.set("stroke.opacity",i),this):this.options.get("stroke")},e}(t)};var Oh=La.IDENTITY.toString();const Dh=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bbox=function(t){var e,i=Jl(this.currentTransform(t)),n=i?i.toString():Oh;this._bboxCache&&this._matrixHash===n?e=this._bboxCache.clone():(e=this._bbox(i),this._bboxCache=e?e.clone():null,this._matrixHash=n);var r=this.options.get("stroke.width");return r&&e&&e.expand(r/2),e},e.prototype.geometryChange=function(){delete this._bboxCache,this.trigger("geometryChange",{element:this})},e}(t)};var Ph=10;function Rh(t,e,i){return void 0===i&&(i=Ph),0===Gs(Math.abs(t-e),i)}function Ih(t,e,i){return t<e||Rh(t,e,i)}function zh(t,e,i,n){var r=0,o=0;return n&&(r=Math.atan2(n.c*i,n.a*e),0!==n.b&&(o=Math.atan2(n.d*i,n.b*e))),{x:r,y:o}}var Lh=Math.pow,Bh=function(t){function e(e,i){void 0===e&&(e=new th),void 0===i&&(i={}),t.call(this),this.setCenter(e),this.radiusX=i.radiusX,this.radiusY=i.radiusY||i.radiusX,this.startAngle=i.startAngle,this.endAngle=i.endAngle,this.anticlockwise=i.anticlockwise||!1,this.xRotation=i.xRotation}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},e.prototype.setCenter=function(t){return this._observerField("center",th.create(t)),this.geometryChange(),this},e.prototype.getCenter=function(){return this.center},e.prototype.pointAt=function(t){var e=this.center,i=Ea(t);return new th(e.x+this.radiusX*Math.cos(i),e.y+this.radiusY*Math.sin(i))},e.prototype.curvePoints=function(){var t,e=this.startAngle,i=this.anticlockwise?-1:1,n=[this.pointAt(e)],r=this._arcInterval(),o=r.endAngle-r.startAngle,s=Math.ceil(o/45),a=o/s,l=e;this.xRotation&&(t=Eh().rotate(this.xRotation,this.center));for(var h=1;h<=s;h++){var c=l+i*a,p=this._intervalCurvePoints(l,c,t);n.push(p.cp1,p.cp2,p.p2),l=c}return n},e.prototype.bbox=function(t){for(var e=this._arcInterval(),i=e.startAngle,n=e.endAngle,r=zh(this.center,this.radiusX,this.radiusY,t),o=fa(r.x),s=fa(r.y),a=this.pointAt(n).transformCopy(t),l=jh(o,i),h=jh(s,i),c=this.pointAt(i).transformCopy(t),p=th.min(c,a),u=th.max(c,a);l<n||h<n;){var d=void 0;l<n&&(d=this.pointAt(l).transformCopy(t),l+=90);var f=void 0;h<n&&(f=this.pointAt(h).transformCopy(t),h+=90),c=new th(d.x,f.y),p=th.min(p,c),u=th.max(u,c)}return rh.fromPoints(p,u)},e.prototype._arcInterval=function(){var t=this,e=t.startAngle,i=t.endAngle,n=t.anticlockwise;if(n){var r=e;e=i,i=r}return(e>i||n&&e===i)&&(i+=360),{startAngle:e,endAngle:i}},e.prototype._intervalCurvePoints=function(t,e,i){var n=this.pointAt(t),r=this.pointAt(e),o=this._derivativeAt(t),s=this._derivativeAt(e),a=(Ea(e)-Ea(t))/3,l=new th(n.x+a*o.x,n.y+a*o.y),h=new th(r.x-a*s.x,r.y-a*s.y);return i&&(n.transform(i),r.transform(i),l.transform(i),h.transform(i)),{p1:n,cp1:l,cp2:h,p2:r}},e.prototype._derivativeAt=function(t){var e=Ea(t);return new th(-this.radiusX*Math.sin(e),this.radiusY*Math.cos(e))},e.prototype.containsPoint=function(t){var e,i=this._arcInterval(),n=i.endAngle-i.startAngle,r=this,o=r.center,s=r.radiusX,a=r.radiusY,l=o.distanceTo(t),h=Math.atan2(t.y-o.y,t.x-o.x),c=s*a/Math.sqrt(Lh(s,2)*Lh(Math.sin(h),2)+Lh(a,2)*Lh(Math.cos(h),2)),p=this.pointAt(this.startAngle).round(Ph),u=this.pointAt(this.endAngle).round(Ph),d=function(t,e,i,n){var r=e.x-t.x,o=n.x-i.x,s=e.y-t.y,a=n.y-i.y,l=t.x-i.x,h=t.y-i.y,c=r*a-o*s,p=(r*h-s*l)/c,u=(o*h-a*l)/c;if(p>=0&&p<=1&&u>=0&&u<=1)return new th(t.x+u*r,t.y+u*s)}(o,t.round(Ph),p,u);if(n<180)e=d&&Ih(o.distanceTo(d),l)&&Ih(l,c);else{var f=Nh(o.x,o.y,s,a,t.x,t.y);360!==f&&(f=(360+f)%360);var v=i.startAngle<=f&&f<=i.endAngle;e=v&&Ih(l,c)||!v&&(!d||d.equals(t))}return e},e.prototype._isOnPath=function(t,e){var i=this._arcInterval(),n=this.center,r=Nh(n.x,n.y,this.radiusX,this.radiusY,t.x,t.y);return 360!==r&&(r=(360+r)%360),i.startAngle<=r&&r<=i.endAngle&&this.pointAt(r).distanceTo(t)<=e},e.fromPoints=function(t,i,n,r,o,s,a){var l=function(t){var e=t.x1,i=t.y1,n=t.x2,r=t.y2,o=t.rx,s=t.ry,a=t.largeArc,l=t.swipe,h=t.rotation;void 0===h&&(h=0);var c=Ea(h),p=Math.cos(c),u=Math.sin(c),d=p*(e-n)/2+u*(i-r)/2,f=-u*(e-n)/2+p*(i-r)/2,v=a!==l?1:-1,m=Math.pow(d,2),g=Math.pow(f,2),y=Math.pow(o,2),b=Math.pow(s,2),w=m/y+g/b;w>1&&(o*=w=Math.sqrt(m/y+g/b),y=Math.pow(o,2),s*=w,b=Math.pow(s,2));var x=v*Math.sqrt((y*b-y*g-b*m)/(y*g+b*m));isNaN(x)&&(x=0);var _=x*(o*f)/s,k=s*d*-x/o,S=p*_-u*k+(e+n)/2,C=u*_+p*k+(i+r)/2,E=(d-_)/o,T=(f-k)/s,A=-(d+_)/o,M=-(f+k)/s,O=(T>=0?1:-1)*fa(Math.acos(E/Math.sqrt(E*E+T*T))),D=Gs((E*A+T*M)/(Math.sqrt(E*E+T*T)*Math.sqrt(A*A+M*M)),10),P=(E*M-T*A>=0?1:-1)*fa(Math.acos(D));!l&&P>0&&(P-=360);l&&P<0&&(P+=360);var R=O+P,I=R>=0?1:-1;return R=Math.abs(R)%360*I,{center:new th(S,C),startAngle:O,endAngle:R,radiusX:o,radiusY:s,xRotation:h}}({x1:t.x,y1:t.y,x2:i.x,y2:i.y,rx:n,ry:r,largeArc:o,swipe:s,rotation:a});return new e(l.center,{startAngle:l.startAngle,endAngle:l.endAngle,radiusX:l.radiusX,radiusY:l.radiusY,xRotation:l.xRotation,anticlockwise:0===s})},e}(Zl(Kl,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]));function Nh(t,e,i,n,r,o){var s=Gs((r-t)/i,3),a=Gs((o-e)/n,3);return Gs(fa(Math.atan2(a,s)))}function jh(t,e){for(var i=t;i<e;)i+=90;return i}const Fh=Bh;function Vh(t,e,i){var n=fa(Math.atan2(e.y-t.y,e.x-t.x));return i.transformCopy(Eh().rotate(-n,t)).x<t.x}function Hh(t,e,i){var n=1-t;return Math.pow(n,3)*i[0][e]+3*Math.pow(n,2)*t*i[1][e]+3*Math.pow(t,2)*n*i[2][e]+Math.pow(t,3)*i[3][e]}function Wh(t,e){return[-t[0][e]+3*t[1][e]-3*t[2][e]+t[3][e],3*(t[0][e]-2*t[1][e]+t[2][e]),3*(-t[0][e]+t[1][e]),t[0][e]]}var Uh=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0),t.call(this),this.real=e,this.img=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.add=function(t){return new e(Gs(this.real+t.real,Ph),Gs(this.img+t.img,Ph))},e.prototype.addConstant=function(t){return new e(this.real+t,this.img)},e.prototype.negate=function(){return new e(-this.real,-this.img)},e.prototype.multiply=function(t){return new e(this.real*t.real-this.img*t.img,this.real*t.img+this.img*t.real)},e.prototype.multiplyConstant=function(t){return new e(this.real*t,this.img*t)},e.prototype.nthRoot=function(t){var i=Math.atan2(this.img,this.real),n=Math.sqrt(Math.pow(this.img,2)+Math.pow(this.real,2)),r=Math.pow(n,1/t);return new e(r*Math.cos(i/t),r*Math.sin(i/t))},e.prototype.equals=function(t){return this.real===t.real&&this.img===t.img},e.prototype.isReal=function(){return 0===this.img},e}(na);const qh=Uh;function $h(t){return t<0?-1:1}function Gh(t,e,i,n){if(0===t)return function(t,e,i){var n=Math.sqrt(Math.pow(e,2)-4*t*i);return[(-e+n)/(2*t),(-e-n)/(2*t)]}(e,i,n);var r,o,s,a,l,h,c,p=(3*t*i-Math.pow(e,2))/(3*Math.pow(t,2)),u=(2*Math.pow(e,3)-9*t*e*i+27*Math.pow(t,2)*n)/(27*Math.pow(t,3)),d=Math.pow(p/3,3)+Math.pow(u/2,2),f=new qh(0,1),v=-e/(3*t);d<0?(r=new qh(-u/2,Math.sqrt(-d)).nthRoot(3),o=new qh(-u/2,-Math.sqrt(-d)).nthRoot(3)):(r=-u/2+Math.sqrt(d),r=new qh($h(r)*Math.pow(Math.abs(r),1/3)),o=-u/2-Math.sqrt(d),o=new qh($h(o)*Math.pow(Math.abs(o),1/3))),s=r.add(o),h=r.add(o).multiplyConstant(-.5),c=r.add(o.negate()).multiplyConstant(Math.sqrt(3)/2),a=h.add(f.multiply(c)),l=h.add(f.negate().multiply(c));var m=[];return s.isReal()&&m.push(Gs(s.real+v,Ph)),a.isReal()&&m.push(Gs(a.real+v,Ph)),l.isReal()&&m.push(Gs(l.real+v,Ph)),m}function Kh(t,e,i,n,r){for(var o,s=Wh(t,n),a=Gh(s[0],s[1],s[2],s[3]-e[n]),l=0;l<a.length;l++)if(0<=a[l]&&a[l]<=1&&(o=Hh(a[l],i,t),Math.abs(o-e[i])<=r))return!0}function Xh(t,e,i){var n;if(t.x!==e.x){var r=Math.min(t.x,e.x),o=Math.max(t.x,e.x),s=Math.min(t.y,e.y),a=Math.max(t.y,e.y),l=r<=i.x&&i.x<o;n=s===a?i.y<=s&&l:l&&(a-s)*((t.x-e.x)*(t.y-e.y)>0?i.x-r:o-i.x)/(o-r)+s-i.y>=0}return n?1:0}function Yh(t){var e="_"+t;return function(t){return bs(t)?(this._observerField(e,th.create(t)),this.geometryChange(),this):this[e]}}const Zh=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=Yh(e[i])}(i.prototype,e),i};var Jh=function(t){function e(e,i,n){t.call(this),this.anchor(e||new th),this.controlIn(i),this.controlOut(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bboxTo=function(t,e){var i=this.anchor().transformCopy(e),n=t.anchor().transformCopy(e);return this.controlOut()&&t.controlIn()?this._curveBoundingBox(i,this.controlOut().transformCopy(e),t.controlIn().transformCopy(e),n):this._lineBoundingBox(i,n)},e.prototype._lineBoundingBox=function(t,e){return rh.fromPoints(t,e)},e.prototype._curveBoundingBox=function(t,e,i,n){var r=[t,e,i,n],o=this._curveExtremesFor(r,"x"),s=this._curveExtremesFor(r,"y"),a=Qh([o.min,o.max,t.x,n.x]),l=Qh([s.min,s.max,t.y,n.y]);return rh.fromPoints(new th(a.min,l.min),new th(a.max,l.max))},e.prototype._curveExtremesFor=function(t,e){var i=this._curveExtremes(t[0][e],t[1][e],t[2][e],t[3][e]);return{min:Hh(i.min,e,t),max:Hh(i.max,e,t)}},e.prototype._curveExtremes=function(t,e,i,n){var r=t-3*e+3*i-n,o=-2*(t-2*e+i),s=t-e,a=Math.sqrt(o*o-4*r*s),l=0,h=1;0===r?0!==o&&(l=h=-s/o):isNaN(a)||(l=(-o+a)/(2*r),h=(-o-a)/(2*r));var c=Math.max(Math.min(l,h),0);(c<0||c>1)&&(c=0);var p=Math.min(Math.max(l,h),1);return(p>1||p<0)&&(p=1),{min:c,max:p}},e.prototype._intersectionsTo=function(t,e){var i;return i=this.controlOut()&&t.controlIn()?function(t,e,i){for(var n,r=Wh(t,"x"),o=Gh(r[0],r[1],r[2],r[3]-e.x),s=0,a=0;a<o.length;a++)(Rh(n=Hh(o[a],"y",t),e.y)||n>e.y)&&((0===o[a]||1===o[a])&&i.bottomRight().x>e.x||0<o[a]&&o[a]<1)&&s++;return s}([this.anchor(),this.controlOut(),t.controlIn(),t.anchor()],e,this.bboxTo(t)):Xh(this.anchor(),t.anchor(),e),i},e.prototype._isOnCurveTo=function(t,e,i,n){if(this.bboxTo(t).expand(i,i).containsPoint(e)){var r=this.anchor(),o=this.controlOut(),s=t.controlIn(),a=t.anchor();if("start"===n&&r.distanceTo(e)<=i)return!Vh(r,o,e);if("end"===n&&a.distanceTo(e)<=i)return!Vh(a,s,e);var l=[r,o,s,a];if(Kh(l,e,"x","y",i)||Kh(l,e,"y","x",i))return!0;var h=Eh().rotate(45,e),c=[r.transformCopy(h),o.transformCopy(h),s.transformCopy(h),a.transformCopy(h)];return Kh(c,e,"x","y",i)||Kh(c,e,"y","x",i)}},e.prototype._isOnLineTo=function(t,e,i){var n=this.anchor(),r=t.anchor(),o=fa(Math.atan2(r.y-n.y,r.x-n.x));return new rh([n.x,n.y-i/2],[n.distanceTo(r),i]).containsPoint(e.transformCopy(Eh().rotate(-o,n)))},e.prototype._isOnPathTo=function(t,e,i,n){return this.controlOut()&&t.controlIn()?this._isOnCurveTo(t,e,i/2,n):this._isOnLineTo(t,e,i)},e}(Zh(Kl,["anchor","controlIn","controlOut"]));function Qh(t){for(var e=t.length,i=ua,n=da,r=0;r<e;r++)n=Math.max(n,t[r]),i=Math.min(i,t[r]);return{min:i,max:n}}const tc=Jh;var ec={l:function(t,e){for(var i=e.parameters,n=e.position,r=0;r<i.length;r+=2){var o=new th(i[r],i[r+1]);e.isRelative&&o.translateWith(n),t.lineTo(o.x,o.y),n.x=o.x,n.y=o.y}},c:function(t,e){for(var i=e.parameters,n=e.position,r=0;r<i.length;r+=6){var o=new th(i[r],i[r+1]),s=new th(i[r+2],i[r+3]),a=new th(i[r+4],i[r+5]);e.isRelative&&(s.translateWith(n),o.translateWith(n),a.translateWith(n)),t.curveTo(o,s,a),n.x=a.x,n.y=a.y}},v:function(t,e){var i=e.isRelative?0:e.position.x;ic(e.parameters,!0,i),this.l(t,e)},h:function(t,e){var i=e.isRelative?0:e.position.y;ic(e.parameters,!1,i),this.l(t,e)},a:function(t,e){for(var i=e.parameters,n=e.position,r=0;r<i.length;r+=7){var o=i[r],s=i[r+1],a=i[r+2],l=i[r+3],h=i[r+4],c=new th(i[r+5],i[r+6]);e.isRelative&&c.translateWith(n),n.x===c.x&&n.y===c.y||(t.arcTo(c,o,s,l,h,a),n.x=c.x,n.y=c.y)}},s:function(t,e){var i,n=e.parameters,r=e.position,o=e.previousCommand;"s"!==o&&"c"!==o||(i=xa(xa(t.paths).segments).controlIn());for(var s=0;s<n.length;s+=4){var a=new th(n[s],n[s+1]),l=new th(n[s+2],n[s+3]),h=void 0;e.isRelative&&(a.translateWith(r),l.translateWith(r)),h=i?nc(i,r):r.clone(),i=a,t.curveTo(h,a,l),r.x=l.x,r.y=l.y}},q:function(t,e){for(var i=e.parameters,n=e.position,r=0;r<i.length;r+=4){var o=new th(i[r],i[r+1]),s=new th(i[r+2],i[r+3]);e.isRelative&&(o.translateWith(n),s.translateWith(n));var a=oc(n,o,s);t.curveTo(a.controlOut,a.controlIn,s),n.x=s.x,n.y=s.y}},t:function(t,e){var i,n=e.parameters,r=e.position,o=e.previousCommand;"q"!==o&&"t"!==o||(i=xa(xa(t.paths).segments).controlIn().clone().translateWith(r.scaleCopy(-1/3)).scale(1.5));for(var s=0;s<n.length;s+=2){var a=new th(n[s],n[s+1]);e.isRelative&&a.translateWith(r),i=i?nc(i,r):r.clone();var l=oc(r,i,a);t.curveTo(l.controlOut,l.controlIn,a),r.x=a.x,r.y=a.y}}};function ic(t,e,i){for(var n=e?0:1,r=0;r<t.length;r+=2)t.splice(r+n,0,i)}function nc(t,e){if(t&&e)return e.scaleCopy(2).translate(-t.x,-t.y)}var rc=1/3;function oc(t,e,i){var n=e.clone().scale(2/3);return{controlOut:n.clone().translateWith(t.scaleCopy(rc)),controlIn:n.translateWith(i.scaleCopy(rc))}}const sc=ec;var ac=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,lc=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g;const hc=function(t,e){var i,n=new th;return e.replace(ac,(function(e,r,o,s){var a=r.toLowerCase(),l=a===r,h=function(t){var e=[];return t.replace(lc,(function(t,i){e.push(parseFloat(i))})),e}(o.trim());if("m"===a&&(l?(n.x+=h[0],n.y+=h[1]):(n.x=h[0],n.y=h[1]),t.moveTo(n.x,n.y),h.length>2&&(a="l",h.splice(0,2))),sc[a])sc[a](t,{parameters:h,position:n,isRelative:l,previousCommand:i}),s&&"z"===s.toLowerCase()&&t.close();else if("m"!==a)throw new Error("Error while parsing SVG path. Unsupported command: "+a);i=a})),t};function cc(t,e,i){for(var n,r=0;r<t.length;r++){var o=t[r];if(o.visible()){var s=e?o.bbox(i):o.rawBBox();s&&(n=n?rh.union(n,s):s)}}return n}function pc(t,e){for(var i,n=0;n<t.length;n++){var r=t[n];if(r.visible()){var o=r.clippedBBox(e);o&&(i=i?rh.union(i,o):o)}}return i}var uc=function(t){function e(e){t.call(this,e),this.segments=new wh,this.segments.addObserver(this),bs(this.options.stroke)||(this.stroke("#000"),bs(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return e.parse=function(t,e){return dc.parse(t,e)},i.nodeType.get=function(){return"Path"},e.prototype.moveTo=function(t,e){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(t,e),this},e.prototype.lineTo=function(t,e){var i=bs(e)?new th(t,e):t,n=new tc(i);return this.segments.push(n),this},e.prototype.curveTo=function(t,e,i){if(this.segments.length>0){var n=xa(this.segments),r=new tc(i,e);this.suspend(),n.controlOut(t),this.resume(),this.segments.push(r)}return this},e.prototype.arc=function(t,e,i,n,r){if(this.segments.length>0){var o=xa(this.segments).anchor(),s=Ea(t),a=new th(o.x-i*Math.cos(s),o.y-n*Math.sin(s)),l=new Fh(a,{startAngle:t,endAngle:e,radiusX:i,radiusY:n,anticlockwise:r});this._addArcSegments(l)}return this},e.prototype.arcTo=function(t,e,i,n,r,o){if(this.segments.length>0){var s=xa(this.segments).anchor(),a=Fh.fromPoints(s,th.create(t),e,i,n,r,o);this._addArcSegments(a)}return this},e.prototype._addArcSegments=function(t){this.suspend();for(var e=t.curvePoints(),i=1;i<e.length;i+=3)this.curveTo(e[i],e[i+1],e[i+2]);this.resume(),this.geometryChange()},e.prototype.close=function(){return this.options.closed=!0,this.geometryChange(),this},e.prototype.rawBBox=function(){return this._bbox()},e.prototype._containsPoint=function(t){for(var e,i,n=this.segments,r=n.length,o=0,s=1;s<r;s++)e=n[s-1],i=n[s],o+=e._intersectionsTo(i,t);return!this.options.closed&&n[0].anchor().equals(n[r-1].anchor())||(o+=Xh(n[0].anchor(),n[r-1].anchor(),t)),o%2!=0},e.prototype._isOnPath=function(t,e){var i=this.segments,n=i.length,r=e||this.options.stroke.width;if(n>1){if(i[0]._isOnPathTo(i[1],t,r,"start"))return!0;for(var o=2;o<=n-2;o++)if(i[o-1]._isOnPathTo(i[o],t,r))return!0;if(i[n-2]._isOnPathTo(i[n-1],t,r,"end"))return!0}return!1},e.prototype._bbox=function(t){var e,i=this.segments,n=i.length;if(1===n){var r=i[0].anchor().transformCopy(t);e=new rh(r,ih.ZERO)}else if(n>0)for(var o=1;o<n;o++){var s=i[o-1].bboxTo(i[o],t);e=e?rh.union(e,s):s}return e},e.fromRect=function(t,i){var n=new e(i),r=t.cornerRadius,o=r[0],s=r[1];if(0===o&&0===s)n.moveTo(t.topLeft()).lineTo(t.topRight()).lineTo(t.bottomRight()).lineTo(t.bottomLeft()).close();else{var a=t.origin,l=a.x,h=a.y,c=t.width(),p=t.height();o=_a(o,0,c/2),s=_a(s,0,p/2),n.moveTo(l+o,h).lineTo(l+c-o,h).arcTo([l+c,h+s],o,s,!1).lineTo(l+c,h+p-s).arcTo([l+c-o,h+p],o,s,!1).lineTo(l+o,h+p).arcTo([l,h+p-s],o,s,!1).lineTo(l,h+s).arcTo([l+o,h],o,s,!1)}return n},e.fromPoints=function(t,i){if(t){for(var n=new e(i),r=0;r<t.length;r++){var o=th.create(t[r]);o&&(0===r?n.moveTo(o):n.lineTo(o))}return n}},e.fromArc=function(t,i){var n=new e(i),r=t.startAngle,o=t.pointAt(r);return n.moveTo(o.x,o.y),n.arc(r,t.endAngle,t.radiusX,t.radiusY,t.anticlockwise),n},Object.defineProperties(e.prototype,i),e}(Mh(Dh(Ah))),dc=function(t){function e(e){t.call(this,e),this.paths=new wh,this.paths.addObserver(this),bs(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return e.parse=function(t,i){var n=new e(i);return hc(n,t)},i.nodeType.get=function(){return"MultiPath"},e.prototype.moveTo=function(t,e){var i=new uc;return i.moveTo(t,e),this.paths.push(i),this},e.prototype.lineTo=function(t,e){return this.paths.length>0&&xa(this.paths).lineTo(t,e),this},e.prototype.curveTo=function(t,e,i){return this.paths.length>0&&xa(this.paths).curveTo(t,e,i),this},e.prototype.arc=function(t,e,i,n,r){return this.paths.length>0&&xa(this.paths).arc(t,e,i,n,r),this},e.prototype.arcTo=function(t,e,i,n,r,o){return this.paths.length>0&&xa(this.paths).arcTo(t,e,i,n,r,o),this},e.prototype.close=function(){return this.paths.length>0&&xa(this.paths).close(),this},e.prototype._bbox=function(t){return cc(this.paths,!0,t)},e.prototype.rawBBox=function(){return cc(this.paths,!1)},e.prototype._containsPoint=function(t){for(var e=this.paths,i=0;i<e.length;i++)if(e[i]._containsPoint(t))return!0;return!1},e.prototype._isOnPath=function(t){for(var e=this.paths,i=this.options.stroke.width,n=0;n<e.length;n++)if(e[n]._isOnPath(t,i))return!0;return!1},e.prototype._clippedBBox=function(t){return pc(this.paths,this.currentTransform(t))},Object.defineProperties(e.prototype,i),e}(Mh(Dh(Ah))),fc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRing=function(t,e){var i=t.startAngle+180,n=t.angle+i;t.angle>0&&i===n&&(n+=.001);var r=new th(t.center.x,t.center.y),o=Math.max(t.radius,0),s=Math.max(t.innerRadius,0),a=new Fh(r,{startAngle:i,endAngle:n,radiusX:o,radiusY:o}),l=uc.fromArc(a,e).close();if(s){a.radiusX=a.radiusY=s;var h=a.pointAt(n);l.lineTo(h.x,h.y),l.arc(n,i,s,s,!0)}else l.lineTo(r.x,r.y);return l},e}(na);fc.current=new fc;const vc=fc;var mc=Math.PI/2,gc=function(t){function e(e,i){void 0===e&&(e=new th),void 0===i&&(i=0),t.call(this),this.setCenter(e),this.setRadius(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setCenter=function(t){return this._observerField("center",th.create(t)),this.geometryChange(),this},e.prototype.getCenter=function(){return this.center},e.prototype.equals=function(t){return t&&t.center.equals(this.center)&&t.radius===this.radius},e.prototype.clone=function(){return new e(this.center.clone(),this.radius)},e.prototype.pointAt=function(t){return this._pointAt(Ea(t))},e.prototype.bbox=function(t){for(var e=zh(this.center,this.radius,this.radius,t),i=th.maxPoint(),n=th.minPoint(),r=0;r<4;r++){var o=this._pointAt(e.x+r*mc).transformCopy(t),s=this._pointAt(e.y+r*mc).transformCopy(t),a=new th(o.x,s.y);i=th.min(i,a),n=th.max(n,a)}return rh.fromPoints(i,n)},e.prototype._pointAt=function(t){var e=this.center,i=this.radius;return new th(e.x+i*Math.cos(t),e.y+i*Math.sin(t))},e.prototype.containsPoint=function(t){var e=this.center,i=this.radius;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(i,2)},e.prototype._isOnPath=function(t,e){var i=this.center,n=this.radius,r=i.distanceTo(t);return n-e<=r&&r<=n+e},e}(Zl(Kl,["radius"]));const yc=gc;function bc(t){var e="_"+t;return function(t){return bs(t)?(this._observerField(e,t),this.geometryChange(),this):this[e]}}const wc=function(t,e){void 0===e&&(e=["geometry"]);var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=bc(e[i])}(i.prototype,e),i};var xc=function(t){function e(e,i){void 0===e&&(e=new yc),void 0===i&&(i={}),t.call(this,i),this.geometry(e),bs(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Circle"},e.prototype.rawBBox=function(){return this._geometry.bbox()},e.prototype._bbox=function(t){return this._geometry.bbox(t)},e.prototype._containsPoint=function(t){return this.geometry().containsPoint(t)},e.prototype._isOnPath=function(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)},Object.defineProperties(e.prototype,i),e}(Mh(Dh(wc(Ah))));const _c=xc;const kc=function(t,e){return function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.traverse=function(t){for(var i=this[e],n=0;n<i.length;n++){var r=i[n];r.traverse?r.traverse(t):t(r)}return this},i}(t)};var Sc=function(t){function e(e){t.call(this,e),this.children=[]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Group"},e.prototype.childrenChange=function(t,e,i){this.trigger("childrenChange",{action:t,items:e,index:i})},e.prototype.append=function(){return oa(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},e.prototype.insert=function(t,e){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this},e.prototype.insertAt=function(t,e){return this.insert(e,t)},e.prototype.remove=function(t){var e=this.children.indexOf(t);return e>=0&&(this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)),this},e.prototype.removeAt=function(t){if(0<=t&&t<this.children.length){var e=this.children[t];this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)}return this},e.prototype.clear=function(){var t=this.children;return this.children=[],this._reparent(t,null),this.childrenChange("remove",t,0),this},e.prototype.bbox=function(t){return cc(this.children,!0,this.currentTransform(t))},e.prototype.rawBBox=function(){return cc(this.children,!1)},e.prototype._clippedBBox=function(t){return pc(this.children,this.currentTransform(t))},e.prototype.currentTransform=function(t){return Ah.prototype.currentTransform.call(this,t)||null},e.prototype.containsPoint=function(t,e){if(this.visible())for(var i=this.children,n=this.currentTransform(e),r=0;r<i.length;r++)if(i[r].containsPoint(t,n))return!0;return!1},e.prototype._reparent=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=n.parent;r&&r!==this&&r.remove&&r.remove(n),n.parent=e}},Object.defineProperties(e.prototype,i),e}(kc(Ah,"children"));const Cc=Sc;function Ec(t){return.5-Math.cos(t*Math.PI)/2}function Tc(t){return t}function Ac(t,e,i,n){var r=1.70158,o=0,s=n;return 0===t?i:1===t?i+n:(o||(o=.5),s<Math.abs(n)?(s=n,r=o/4):r=o/(2*Math.PI)*Math.asin(n/s),s*Math.pow(2,-10*t)*Math.sin((Number(t)-r)*(1.1*Math.PI)/o)+n+i)}var Mc=function(t){var e="undefined"!=typeof window?window:{},i=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};Mc=function(t){return i.call(e,t)},Mc(t)};const Oc=Mc;var Dc,Pc=function(t){function e(){t.call(this),this._items=[]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={current:{configurable:!0}};return i.current.get=function(){return Dc||(Dc=new e),Dc},e.prototype.register=function(t,e){this._items.push({name:t,type:e})},e.prototype.create=function(t,e){var i,n=this._items;if(e&&e.type)for(var r=e.type.toLowerCase(),o=0;o<n.length;o++)if(n[o].name.toLowerCase()===r){i=n[o];break}if(i)return new i.type(t,e)},Object.defineProperties(e,i),e}(na);const Rc=Pc;var Ic=function(t){function e(e,i){t.call(this),this.options=Object.assign({},this.options,i),this.element=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={options:{configurable:!0}};return e.create=function(t,e,i){return Rc.current.create(t,e,i)},i.options.get=function(){return this._options||{duration:500,easing:"swing"}},i.options.set=function(t){this._options=t},e.prototype.setup=function(){},e.prototype.step=function(){},e.prototype.play=function(){var t=this,e=this.options,i=e.duration,n=e.delay;void 0===n&&(n=0);var o=r[e.easing],s=Sa()+n,a=s+i;0===i?(this.step(1),this.abort()):setTimeout((function(){var e=function(){if(!t._stopped){var n=Sa(),r=_a(n-s,0,i),l=o(r/i,r,0,1,i);t.step(l),n<a?Oc(e):t.abort()}};e()}),n)},e.prototype.abort=function(){this._stopped=!0},e.prototype.destroy=function(){this.abort()},Object.defineProperties(e.prototype,i),e}(na);const zc=Ic;var Lc=function(t){function e(e){t.call(this),this.children=[],this.options=As({},this.options,this.initUserOptions(e))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){return t},e.prototype.reflow=function(t){for(var e,i=this.children,n=0;n<i.length;n++){var r=i[n];r.reflow(t),e=e?e.wrap(r.box):r.box.clone()}this.box=e||t},e.prototype.destroy=function(){var t=this.children;this.animation&&this.animation.destroy();for(var e=0;e<t.length;e++)t[e].destroy()},e.prototype.getRoot=function(){var t=this.parent;return t?t.getRoot():null},e.prototype.getSender=function(){var t=this.getService();if(t)return t.sender},e.prototype.getService=function(){for(var t=this;t;){if(t.chartService)return t.chartService;t=t.parent}},e.prototype.translateChildren=function(t,e){for(var i=this.children,n=i.length,r=0;r<n;r++)i[r].box.translate(t,e)},e.prototype.append=function(){for(var t=arguments,e=this,i=0;i<arguments.length;i++){var n=t[i];e.children.push(n),n.parent=e}},e.prototype.renderVisual=function(){!1!==this.options.visible&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())},e.prototype.addVisual=function(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))},e.prototype.renderChildren=function(){for(var t=this.children,e=t.length,i=0;i<e;i++)t[i].renderVisual()},e.prototype.createVisual=function(){this.visual=new Cc({zIndex:this.options.zIndex,visible:ul(this.options.visible,!0)})},e.prototype.createAnimation=function(){this.visual&&this.options.animation&&(this.animation=zc.create(this.visual,this.options.animation))},e.prototype.appendVisual=function(t){t.chartElement||(t.chartElement=this),t.options.noclip?this.clipRoot().visual.append(t):Qa(t.options.zIndex)?this.stackRoot().stackVisual(t):this.isStackRoot?this.stackVisual(t):this.visual?this.visual.append(t):this.parent.appendVisual(t)},e.prototype.clipRoot=function(){return this.parent?this.parent.clipRoot():this},e.prototype.stackRoot=function(){return this.parent?this.parent.stackRoot():this},e.prototype.stackVisual=function(t){var e,i=t.options.zIndex||0,n=this.visual.children,r=n.length;for(e=0;e<r;e++){var o=n[e];if(ul(o.options.zIndex,0)>i)break}this.visual.insert(e,t)},e.prototype.traverse=function(t){for(var e=this.children,i=e.length,n=0;n<i;n++){var r=e[n];t(r),r.traverse&&r.traverse(t)}},e.prototype.closest=function(t){for(var e=this,i=!1;e&&!i;)(i=t(e))||(e=e.parent);if(i)return e},e.prototype.renderComplete=function(){},e.prototype.hasHighlight=function(){var t=(this.options||{}).highlight;return!(!this.createHighlight||t&&!1===t.visible)},e.prototype.toggleHighlight=function(t,e){var i=this,n=(this.options||{}).highlight||{},r=n.visual,o=this._highlight;if(!o){var s={fill:{color:us,opacity:e||.2},stroke:{color:us,width:1,opacity:e||.2}};if(r){if(!(o=this._highlight=r(Object.assign(this.highlightVisualArgs(),{createVisual:function(){return i.createHighlight(s)},sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total}))))return}else o=this._highlight=this.createHighlight(s);Qa(o.options.zIndex)||(o.options.zIndex=ul(n.zIndex,this.options.zIndex)),this.appendVisual(o)}o.visible(t)},e.prototype.createGradientOverlay=function(t,e,i){var n=new uc(Object.assign({stroke:{color:"none"},fill:this.createGradient(i),closed:t.options.closed},e));return n.segments.elements(t.segments.elements()),n},e.prototype.createGradient=function(t){if(this.parent)return this.parent.createGradient(t)},e.prototype.supportsPointInactiveOpacity=function(){return!0},e}(na);Lc.prototype.options={};const Bc=Lc;var Nc=function(t){function e(e){t.call(this,e),this.options.margin=Is(this.options.margin),this.options.padding=Is(this.options.padding)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(e){var i,n=this,r=this.options,o=r.width,s=r.height,a=r.shrinkToFit,l=o&&s,h=r.margin,c=r.padding,p=r.border.width,u=function(){n.align(e,fs,r.align),n.align(e,vs,r.vAlign),n.paddingBox=i.clone().unpad(h).unpad(p)},d=e.clone();l&&(d.x2=d.x1+o,d.y2=d.y1+s),a&&d.unpad(h).unpad(p).unpad(c),t.prototype.reflow.call(this,d),i=l?this.box=new ah(0,0,o,s):this.box,a&&l?(u(),d=this.contentBox=this.paddingBox.clone().unpad(c)):(d=this.contentBox=i.clone(),i.pad(c).pad(p).pad(h),u()),this.translateChildren(i.x1-d.x1+h.left+p+c.left,i.y1-d.y1+h.top+p+c.top);for(var f=this.children,v=0;v<f.length;v++){var m=f[v];m.reflow(m.box)}},e.prototype.align=function(t,e,i){this.box.align(t,e,i)},e.prototype.hasBox=function(){var t=this.options;return t.border.width||t.background},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.options.visible&&this.hasBox()&&this.visual.append(uc.fromRect(this.paddingBox.toRect(),this.visualStyle()))},e.prototype.visualStyle=function(){var t=this.options,e=t.border||{};return{stroke:{width:e.width,color:e.color,opacity:ul(e.opacity,t.opacity),dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}},e}(Bc);vl(Nc,{align:ts,vAlign:cs,margin:{},padding:{},border:{color:Wo,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0});const jc=Nc;var Fc=function(t){function e(e,i){t.call(this,e),this.pointData=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){var t=this.options,e=this.paddingBox,i=t.type,n=t.rotation,r=e.center(),o=e.width()/2,s=e.height()/2;if(!t.visible||!this.hasBox())return null;var a,l=this.visualStyle();if(i===$o)a=new _c(new yc([cl(e.x1+o,3),cl(e.y1+s,3)],Math.min(o,s)),l);else if("triangle"===i)a=uc.fromPoints([[e.x1+o,e.y1],[e.x1,e.y2],[e.x2,e.y2]],l).close();else if(i===Go)(a=new dc(l)).moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),a.moveTo(e.x1,e.y2).lineTo(e.x2,e.y1);else{var h=e.toRect();if(i===ls){var c=ul(t.borderRadius,h.width()/5);h.setCornerRadius(c)}a=uc.fromRect(h,l)}return n&&a.transform(Eh().rotate(-n,[r.x,r.y])),a.options.zIndex=t.zIndex,a},e.prototype.createElement=function(){var t=this,e=this.options.visual,i=this.pointData||{};return e?e({value:i.value,dataItem:i.dataItem,sender:this.getSender(),series:i.series,category:i.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:function(){return t.getElement()}}):this.getElement()},e.prototype.visualOptions=function(){var t=this.options;return{background:t.background,border:t.border,margin:t.margin,padding:t.padding,type:t.type,size:t.width,visible:t.visible}},e.prototype.createVisual=function(){this.visual=this.createElement()},e}(jc);vl(Fc,{type:$o,align:qo,vAlign:qo});const Vc=Fc;var Hc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._change=function(){this.optionsChange({field:"stops"})},e}(yh);const Wc=Hc;function Uc(t){return function(e){return bs(e)?(this.options.set(t,e),this):this.options.get(t)}}const qc=function(t,e){var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var i=0;i<e.length;i++)t[e[i]]=Uc(e[i])}(i.prototype,e),i};var $c=function(t){function e(e,i,n){t.call(this),this.options=new kh({offset:e,color:i,opacity:bs(n)?n:1}),this.options.addObserver(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t){if(bs(t))return t instanceof e?t:t.length>1?new e(t[0],t[1],t[2]):new e(t.offset,t.color,t.opacity)},e}(qc(Kl,["offset","color","opacity"]));const Gc=$c;var Kc=function(t){function e(e){void 0===e&&(e={}),t.call(this),this.stops=new Wc(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=ca()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Gradient"},e.prototype.userSpace=function(t){return bs(t)?(this._userSpace=t,this.optionsChange(),this):this._userSpace},e.prototype._createStops=function(t){void 0===t&&(t=[]);for(var e=[],i=0;i<t.length;i++)e.push(Gc.create(t[i]));return e},e.prototype.addStop=function(t,e,i){this.stops.push(new Gc(t,e,i))},e.prototype.removeStop=function(t){var e=this.stops.indexOf(t);e>=0&&this.stops.splice(e,1)},e.prototype.optionsChange=function(t){this.trigger("optionsChange",{field:"gradient"+(t?"."+t.field:""),value:this})},e.prototype.geometryChange=function(){this.optionsChange()},Object.defineProperties(e.prototype,i),e}(Kl);const Xc=Kc;var Yc=function(t){function e(e){void 0===e&&(e={}),t.call(this,e),this.start(e.start||new th),this.end(e.end||new th(1,0))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Zh(Xc,["start","end"]));const Zc=Yc;var Jc=function(t){function e(e){void 0===e&&(e={}),t.call(this,e),this.center(e.center||new th),this._radius=bs(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radius=function(t){return bs(t)?(this._radius=t,this.geometryChange(),this):this._radius},e.prototype.fallbackFill=function(t){return bs(t)?(this._fallbackFill=t,this.optionsChange(),this):this._fallbackFill},e}(Zh(Xc,["center"]));const Qc=Jc;var tp="radial";const ep={glass:{type:"linear",rotation:0,stops:[{offset:0,color:us,opacity:0},{offset:.25,color:us,opacity:.3},{offset:1,color:us,opacity:0}]},sharpBevel:{type:tp,stops:[{offset:0,color:us,opacity:.55},{offset:.65,color:us,opacity:0},{offset:.95,color:us,opacity:.25}]},roundedBevel:{type:tp,stops:[{offset:.33,color:us,opacity:.06},{offset:.83,color:us,opacity:.2},{offset:.95,color:us,opacity:0}]},roundedGlass:{type:tp,supportVML:!1,stops:[{offset:0,color:us,opacity:0},{offset:.5,color:us,opacity:.3},{offset:.99,color:us,opacity:0}]},sharpGlass:{type:tp,supportVML:!1,stops:[{offset:0,color:us,opacity:.2},{offset:.15,color:us,opacity:.15},{offset:.17,color:us,opacity:.35},{offset:.85,color:us,opacity:.05},{offset:.87,color:us,opacity:.15},{offset:.99,color:us,opacity:0}]},bubbleShadow:{type:tp,center:[.5,.5],radius:.5}};function ip(t,e){if(t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2)return e;var i=Math.min(t.x1,e.x1),n=Math.max(t.x1,e.x1),r=Math.min(t.x2,e.x2),o=Math.max(t.x2,e.x2),s=Math.min(t.y1,e.y1),a=Math.max(t.y1,e.y1),l=Math.min(t.y2,e.y2),h=Math.max(t.y2,e.y2),c=[];return c[0]=new ah(n,s,r,a),c[1]=new ah(i,a,n,l),c[2]=new ah(r,a,o,l),c[3]=new ah(n,l,r,h),t.x1===i&&t.y1===s||e.x1===i&&e.y1===s?(c[4]=new ah(i,s,n,a),c[5]=new ah(r,l,o,h)):(c[4]=new ah(r,s,o,a),c[5]=new ah(i,l,n,h)),Hs(c,(function(t){return t.height()>0&&t.width()>0}))[0]}var np=function(t){function e(e){t.call(this,e);var i=this.options;i.width=parseInt(i.width,10),i.height=parseInt(i.height,10),this.gradients={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(){var t=this.options,e=this.children,i=new ah(0,0,t.width,t.height);this.box=i.unpad(t.margin);for(var n=0;n<e.length;n++)e[n].reflow(i),i=ip(i,e[n].box)||new ah},e.prototype.createVisual=function(){this.visual=new Cc,this.createBackground()},e.prototype.createBackground=function(){var t=this.options,e=t.border||{},i=this.box.clone().pad(t.margin).unpad(e.width),n=uc.fromRect(i.toRect(),{stroke:{color:e.width?e.color:"",width:e.width,dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},zIndex:-10});this.visual.append(n)},e.prototype.getRoot=function(){return this},e.prototype.createGradient=function(t){var e,i=this.gradients,n=ll(t),r=ep[t.gradient];if(i[n])e=i[n];else{var o=Object.assign({},r,t);"linear"===r.type?e=new Zc(o):(t.innerRadius&&(o.stops=function(t){for(var e=t.stops,i=t.innerRadius/t.radius*100,n=e.length,r=[],o=0;o<n;o++){var s=Object.assign({},e[o]);s.offset=(s.offset*(100-i)+i)/100,r.push(s)}return r}(o)),(e=new Qc(o)).supportVML=!1!==r.supportVML),i[n]=e}return e},e.prototype.cleanGradients=function(){var t=this.gradients;for(var e in t)t[e]._observers=[]},e.prototype.size=function(){var t=this.options;return new ah(0,0,t.width,t.height)},e}(Bc);vl(np,{width:600,height:400,background:us,border:{color:Wo,width:0},margin:Is(5),zIndex:-2});const rp=np;var op=function(t){function e(e){t.call(this,e),this._initDirection()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initDirection=function(){var t=this.options;t.vertical?(this.groupAxis=fs,this.elementAxis=vs,this.groupSizeField=ds,this.elementSizeField=Jo,this.groupSpacing=t.spacing,this.elementSpacing=t.vSpacing):(this.groupAxis=vs,this.elementAxis=fs,this.groupSizeField=Jo,this.elementSizeField=ds,this.groupSpacing=t.vSpacing,this.elementSpacing=t.spacing)},e.prototype.reflow=function(t){this.box=t.clone(),this.reflowChildren()},e.prototype.reflowChildren=function(){var t=this,e=this,i=e.box,n=e.elementAxis,r=e.groupAxis,o=e.elementSizeField,s=e.groupSizeField,a=this.groupOptions(),l=a.groups,h=a.groupsSize,c=a.maxGroupElementsSize,p=l.length,u=i[r+1]+this.alignStart(h,i[s]());if(p){for(var d=u,f=0;f<p;f++){for(var v=l[f],m=v.groupElements,g=i[n+1],y=m.length,b=0;b<y;b++){var w=m[b],x=t.elementSize(w),_=d+t.alignStart(x[s],v.groupSize),k=new ah;k[r+1]=_,k[r+2]=_+x[s],k[n+1]=g,k[n+2]=g+x[o],w.reflow(k),g+=x[o]+t.elementSpacing}d+=v.groupSize+t.groupSpacing}i[r+1]=u,i[r+2]=u+h,i[n+2]=i[n+1]+c}},e.prototype.alignStart=function(t,e){var i=0,n=this.options.align;return n===as||n===Uo?i=e-t:n===qo&&(i=(e-t)/2),i},e.prototype.groupOptions=function(){for(var t=this,e=t.box,i=t.children,n=t.elementSizeField,r=t.groupSizeField,o=t.elementSpacing,s=t.groupSpacing,a=cl(e[n]()),l=i.length,h=[],c=0,p=0,u=0,d=0,f=[],v=0;v<l;v++){var m=i[v];m.box||m.reflow(e);var g=this.elementSize(m);this.options.wrap&&cl(p+o+g[n])>a&&(h.push({groupElements:f,groupSize:c,groupElementsSize:p}),d=Math.max(d,p),u+=s+c,c=0,p=0,f=[]),c=Math.max(c,g[r]),p>0&&(p+=o),p+=g[n],f.push(m)}return h.push({groupElements:f,groupSize:c,groupElementsSize:p}),{groups:h,groupsSize:u+=c,maxGroupElementsSize:d=Math.max(d,p)}},e.prototype.elementSize=function(t){return{width:t.box.width(),height:t.box.height()}},e.prototype.createVisual=function(){},e}(Bc);vl(op,{vertical:!0,wrap:!0,vSpacing:0,spacing:0});const sp=op;var ap=function(t){function e(e,i,n){void 0===i&&(i=new th),void 0===n&&(n={}),t.call(this,n),this.content(e),this.position(i),this.options.font||(this.options.font="12px sans-serif"),bs(this.options.fill)||this.fill("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Text"},e.prototype.content=function(t){return bs(t)?(this.options.set("content",t),this):this.options.get("content")},e.prototype.measure=function(){return Ya(this.content(),{font:this.options.get("font")})},e.prototype.rect=function(){var t=this.measure(),e=this.position().clone();return new rh(e,[t.width,t.height])},e.prototype.bbox=function(t){var e=Jl(this.currentTransform(t));return this.rect().bbox(e)},e.prototype.rawBBox=function(){return this.rect().bbox()},e.prototype._containsPoint=function(t){return this.rect().containsPoint(t)},Object.defineProperties(e.prototype,i),e}(Mh(Zh(Ah,["position"])));const lp=ap;var hp=lp,cp=function(t){function e(e,i){t.call(this,i),this.content=e,this.reflow(new ah)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=e.size=Ya(this.content,{font:e.font});this.baseline=i.baseline,this.box=new ah(t.x1,t.y1,t.x1+i.width,t.y1+i.height)},e.prototype.createVisual=function(){var t=this.options,e=t.font,i=t.color,n=t.opacity,r=t.cursor;this.visual=new hp(this.content,this.box.toRect().topLeft(),{font:e,fill:{color:i,opacity:n},cursor:r})},e}(Bc);vl(cp,{font:Xo,color:Wo});const pp=cp;function up(t){var e=t.origin,i=t.bottomRight();return new ah(e.x,e.y,i.x,i.y)}var dp=/\n/m,fp=function(t){function e(e,i,n){t.call(this,i),this.content=e,this.data=n,this._initContainer(),!1!==this.options._autoReflow&&this.reflow(new ah)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initContainer=function(){var t=this.options,e=String(this.content).split(dp),i=new sp({vertical:!0,align:t.align,wrap:!1}),n=As({},t,{opacity:1,animation:null});this.container=i,this.append(i);for(var r=0;r<e.length;r++){var o=new pp(e[r].trim(),n);i.append(o)}},e.prototype.reflow=function(e){var i=this.options,n=i.visual;if(this.container.options.align=i.align,n&&!this._boxReflow){var r=e;r.hasSize()||(this._boxReflow=!0,this.reflow(r),this._boxReflow=!1,r=this.box);var o=this.visual=n(this.visualContext(r));o&&(r=up(o.clippedBBox()||new rh),o.options.zIndex=i.zIndex),this.box=this.contentBox=this.paddingBox=r}else if(t.prototype.reflow.call(this,e),i.rotation){var s=Is(i.margin),a=this.box.unpad(s);this.targetBox=e,this.normalBox=a.clone(),(a=this.rotate()).translate(s.left-s.right,s.top-s.bottom),this.rotatedBox=a.clone(),a.pad(s)}},e.prototype.createVisual=function(){var t=this.options;if(this.visual=new Cc({transform:this.rotationTransform(),zIndex:t.zIndex,noclip:t.noclip}),this.hasBox()){var e=uc.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(e)}},e.prototype.renderVisual=function(){if(this.options.visible)if(this.options.visual){var e=this.visual;e&&!Qa(e.options.noclip)&&(e.options.noclip=this.options.noclip),this.addVisual(),this.createAnimation()}else t.prototype.renderVisual.call(this)},e.prototype.visualContext=function(t){var e=this,i={text:this.content,rect:t.toRect(),sender:this.getSender(),options:this.options,createVisual:function(){return e._boxReflow=!0,e.reflow(t),e._boxReflow=!1,e.getDefaultVisual()}};return this.data&&Object.assign(i,this.data),i},e.prototype.getDefaultVisual=function(){this.createVisual(),this.renderChildren();var t=this.visual;return delete this.visual,t},e.prototype.rotate=function(){var t=this.options;return this.box.rotate(t.rotation),this.align(this.targetBox,fs,t.align),this.align(this.targetBox,vs,t.vAlign),this.box},e.prototype.rotationTransform=function(){var t=this.options.rotation;if(!t)return null;var e=this.normalBox.center(),i=e.x,n=e.y,r=this.rotatedBox.center();return Eh().translate(r.x-i,r.y-n).rotate(t,[i,n])},e}(jc);const vp=fp;var mp=function(t){function e(e){t.call(this,e),this.append(new vp(this.options.text,Object.assign({},this.options,{vAlign:this.options.position})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(e){t.prototype.reflow.call(this,e),this.box.snapTo(e,fs)},e.buildTitle=function(t,i,n){var r,o=t;return"string"==typeof t&&(o={text:t}),(o=Object.assign({visible:!0},n,o))&&o.visible&&o.text&&(r=new e(o),i.append(r)),r},e}(Bc);vl(mp,{color:Wo,position:cs,align:qo,margin:Is(5),padding:Is(5)});const gp=mp;var yp=function(t){function e(e,i,n,r,o){t.call(this,i,o),this.text=i,this.value=e,this.index=n,this.dataItem=r,this.reflow(new ah)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.visualContext=function(e){var i=t.prototype.visualContext.call(this,e);return i.value=this.value,i.dataItem=this.dataItem,i.format=this.options.format,i.culture=this.options.culture,i},e.prototype.click=function(t,e){t.trigger("axisLabelClick",{element:rl(e),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})},e.prototype.rotate=function(){if(this.options.alignRotation!==qo){var e=this.normalBox.toRect(),i=this.rotationTransform();this.box=up(e.bbox(i.matrix()))}else t.prototype.rotate.call(this);return this.box},e.prototype.rotationTransform=function(){var e=this.options,i=e.rotation;if(!i)return null;if(e.alignRotation===qo)return t.prototype.rotationTransform.call(this);var n=Eh().rotate(i).matrix(),r=this.normalBox.toRect(),o=this.targetBox.toRect(),s=e.rotationOrigin||cs,a=s===cs||s===Uo?fs:vs,l=s===cs||s===Uo?vs:fs,h=s===cs||s===ts?o.origin:o.bottomRight(),c=r.topLeft().transformCopy(n),p=r.topRight().transformCopy(n),u=r.bottomRight().transformCopy(n),d=r.bottomLeft().transformCopy(n),f=rh.fromPoints(c,p,u,d),v={};v[l]=o.origin[l]-f.origin[l];var m,g,y=Math.abs(c[l]+v[l]-h[l]),b=Math.abs(p[l]+v[l]-h[l]);cl(y,Yo)===cl(b,Yo)?(m=c,g=p):b<y?(m=p,g=u):(m=c,g=d);var w=m[a]+(g[a]-m[a])/2;return v[a]=o.center()[a]-w,Eh().translate(v.x,v.y).rotate(i)},e}(vp);vl(yp,{_autoReflow:!1});const bp=yp;var wp=function(t){function e(e,i,n){t.call(this,i),this.fields=e,this.chartService=n,this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hide=function(){this.options.visible=!1},e.prototype.show=function(){this.options.visible=!0},e.prototype.render=function(){var t=this,e=this.options;if(e.visible){var i,n,r=e.label,o=e.icon,s=new ah,a=function(){return t},l=o.size,h=this.fields.text;if(Qa(r)&&r.visible){var c=Ns(r);c?h=c(this.fields):r.format&&(h=this.chartService.format.auto(r.format,h)),r.color||(r.color=r.position===Qo?"#fff":o.background),this.label=new vp(h,As({},r)),this.label.aliasFor=a,r.position!==Qo||Qa(l)||(o.type===$o?l=Math.max(this.label.box.width(),this.label.box.height()):(i=this.label.box.width(),n=this.label.box.height()),s.wrap(this.label.box))}o.width=i||l||7,o.height=n||l||7;var p=new Vc(As({},o));p.aliasFor=a,this.marker=p,this.append(p),this.label&&this.append(this.label),p.reflow(new ah),this.wrapperBox=s.wrap(p.box)}},e.prototype.reflow=function(t){var e,i,n,r=this,o=r.options,s=r.label,a=r.marker,l=r.wrapperBox,h=t.center(),c=o.line.length,p=o.position;o.visible&&($s(p,[ts,as])?p===ts?(n=l.alignTo(t,p).translate(-c,t.center().y-l.center().y),o.line.visible&&(e=[t.x1,h.y],this.linePoints=[e,[n.x2,h.y]],i=n.clone().wrapPoint(e))):(n=l.alignTo(t,p).translate(c,t.center().y-l.center().y),o.line.visible&&(e=[t.x2,h.y],this.linePoints=[e,[n.x1,h.y]],i=n.clone().wrapPoint(e))):p===Uo?(n=l.alignTo(t,p).translate(t.center().x-l.center().x,c),o.line.visible&&(e=[h.x,t.y2],this.linePoints=[e,[h.x,n.y1]],i=n.clone().wrapPoint(e))):(n=l.alignTo(t,p).translate(t.center().x-l.center().x,-c),o.line.visible&&(e=[h.x,t.y1],this.linePoints=[e,[h.x,n.y2]],i=n.clone().wrapPoint(e))),a&&a.reflow(n),s&&(s.reflow(n),a&&(o.label.position===ss&&s.box.alignTo(a.box,p),s.reflow(s.box))),this.contentBox=n,this.targetBox=t,this.box=i||n)},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.visual.options.noclip=this.options.noclip,this.options.visible&&this.createLine()},e.prototype.renderVisual=function(){var e=this,i=this.options,n=i.visual;i.visible&&n?(this.visual=n(Object.assign(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:i.background,border:i.background,icon:i.icon,label:i.label,line:i.line,position:i.position,visible:i.visible},createVisual:function(){e.createVisual(),e.renderChildren();var t=e.visual;return delete e.visual,t}})),this.addVisual()):t.prototype.renderVisual.call(this)},e.prototype.createLine=function(){var t=this.options.line;if(this.linePoints){var e=uc.fromPoints(this.linePoints,{stroke:{color:t.color,width:t.width,dashType:t.dashType}});ws(e),this.visual.append(e)}},e.prototype.click=function(t,e){var i=this.eventArgs(e);t.trigger("noteClick",i)||e.preventDefault()},e.prototype.over=function(t,e){var i=this.eventArgs(e);t.trigger("noteHover",i)||e.preventDefault()},e.prototype.out=function(t,e){var i=this.eventArgs(e);t.trigger("noteLeave",i)},e.prototype.eventArgs=function(t){var e=this.options;return Object.assign(this.fields,{element:rl(t),text:Qa(e.label)?e.label.text:"",visual:this.visual})},e}(jc);vl(wp,{icon:{visible:!0,type:$o},label:{position:Qo,visible:!0,align:qo,vAlign:qo},line:{visible:!0},visible:!0,position:cs,zIndex:2});const xp=wp;var _p={format:function(t,e){return e},toString:function(t){return t},parseDate:function(t){return new Date(t)},firstDay:function(){return 0}},kp=function(){},Sp={implementation:{configurable:!0}};kp.register=function(t){_p=t},Sp.implementation.get=function(){return _p},Object.defineProperties(kp,Sp);const Cp=kp;var Ep=/\{(\d+)(:[^\}]+)?\}/g,Tp=function(t){this._intlService=t},Ap={intl:{configurable:!0}};Ap.intl.get=function(){return this._intlService||Cp.implementation},Ap.intl.set=function(t){this._intlService=t},Tp.prototype.auto=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var n=this.intl;return ks(t)&&t.match(Zo)?n.format.apply(n,[t].concat(e)):n.toString(e[0],t)},Tp.prototype.localeAuto=function(t,e,i){var n=this.intl;return ks(t)&&t.match(Zo)?t.replace(Ep,(function(t,r,o){var s=e[parseInt(r,10)];return n.toString(s,o?o.substring(1):"",i)})):n.toString(e[0],t,i)},Object.defineProperties(Tp.prototype,Ap);const Mp=Tp;var Op=function(t,e){void 0===e&&(e={}),this._intlService=e.intlService,this.sender=e.sender||t,this.format=new Mp(e.intlService),this.chart=t,this.rtl=Boolean(e.rtl)},Dp={intl:{configurable:!0}};Dp.intl.get=function(){return this._intlService||Cp.implementation},Dp.intl.set=function(t){this._intlService=t,this.format.intl=t},Op.prototype.notify=function(t,e){this.chart&&this.chart.trigger(t,e)},Op.prototype.isPannable=function(t){var e=((this.chart||{}).options||{}).pannable;return e&&e.lock!==t},Object.defineProperties(Op.prototype,Dp);const Pp=Op;var Rp,Ip=function(){};Ip.register=function(t){Rp=t},Ip.create=function(t,e){if(Rp)return Rp.create(t,e)};const zp=Ip;function Lp(t,e){var i=t.tickX,n=t.tickY,r=t.position,o=new uc({stroke:{width:e.width,color:e.color}});return t.vertical?o.moveTo(i,r).lineTo(i+e.size,r):o.moveTo(r,n).lineTo(r,n+e.size),ws(o),o}function Bp(t,e){var i=t.lineStart,n=t.lineEnd,r=t.position,o=new uc({stroke:{width:e.width,color:e.color,dashType:e.dashType}});return t.vertical?o.moveTo(i,r).lineTo(n,r):o.moveTo(r,i).lineTo(r,n),ws(o),o}var Np=function(t){function e(e,i){void 0===i&&(i=new Pp),t.call(this,e),this.chartService=i,this.options.visible||(this.options=As({},this.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),this.options.minorTicks=As({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==ns},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType}),this.options.majorTicks=As({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==ns},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType}),this.initFields(),this.options._deferLabels||this.createLabels(),this.createTitle(),this.createNotes()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){},e.prototype.labelsRange=function(){return{min:this.options.labels.skip,max:this.labelsCount()}},e.prototype.normalizeLabelRotation=function(t){var e=t.rotation;Ms(e)&&(t.alignRotation=e.align,t.rotation=e.angle)},e.prototype.createLabels=function(){var t=this,e=this.options,i=e.vertical?as:qo,n=As({},e.labels,{align:i,zIndex:e.zIndex}),r=Math.max(1,n.step);if(this.clearLabels(),n.visible){this.normalizeLabelRotation(n),"auto"===n.rotation&&(n.rotation=0,e.autoRotateLabels=!0);for(var o=this.labelsRange(),s=o.min;s<o.max;s+=r){var a={index:s,count:o.max},l=t.createAxisLabel(s,n,a);l&&(t.append(l),t.labels.push(l))}}},e.prototype.clearLabels=function(){this.children=Hs(this.children,(function(t){return!(t instanceof bp)})),this.labels=[]},e.prototype.clearTitle=function(){var t=this;this.title&&(this.children=Hs(this.children,(function(e){return e!==t.title})),this.title=void 0)},e.prototype.clear=function(){this.clearLabels(),this.clearTitle()},e.prototype.lineBox=function(){var t=this.options,e=this.box,i=t.vertical,n=t.labels.mirror,r=n?e.x1:e.x2,o=n?e.y2:e.y1,s=t.line.width||0;return i?new ah(r,e.y1,r,e.y2-s):new ah(e.x1,o,e.x2-s,o)},e.prototype.createTitle=function(){var t=this.options,e=As({rotation:t.vertical?-90:0,text:"",zIndex:1,visualSize:!0},t.title);if(e.visible&&e.text){var i=new vp(e.text,e);this.append(i),this.title=i}},e.prototype.createNotes=function(){var t=this,e=this.options,i=e.notes,n=i.data||[];this.notes=[];for(var r=0;r<n.length;r++){var o=As({},i,n[r]);o.value=t.parseNoteValue(o.value);var s=new xp({value:o.value,text:o.label.text,dataItem:o},o,t.chartService);s.options.visible&&(Qa(s.options.position)?e.vertical&&!$s(s.options.position,[ts,as])?s.options.position=e.reverse?ts:as:e.vertical||$s(s.options.position,[cs,Uo])||(s.options.position=e.reverse?Uo:cs):e.vertical?s.options.position=e.reverse?ts:as:s.options.position=e.reverse?Uo:cs,t.append(s),t.notes.push(s))}},e.prototype.parseNoteValue=function(t){return t},e.prototype.renderVisual=function(){t.prototype.renderVisual.call(this),this.createPlotBands()},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.createBackground(),this.createLine()},e.prototype.gridLinesVisual=function(){var t=this._gridLines;return t||(t=this._gridLines=new Cc({zIndex:-2}),this.appendVisual(this._gridLines)),t},e.prototype.createTicks=function(t){var e=this.options,i=this.lineBox(),n=e.labels.mirror,r=e.majorTicks.visible?e.majorUnit:0,o={vertical:e.vertical};function s(e,r,s){var a=e.length,l=Math.max(1,r.step);if(r.visible)for(var h=r.skip;h<a;h+=l)Qa(s)&&h%s==0||(o.tickX=n?i.x2:i.x2-r.size,o.tickY=n?i.y1-r.size:i.y1,o.position=e[h],t.append(Lp(o,r)))}s(this.getMajorTickPositions(),e.majorTicks),s(this.getMinorTickPositions(),e.minorTicks,r/e.minorUnit)},e.prototype.createLine=function(){var t=this.options,e=t.line,i=this.lineBox();if(e.width>0&&e.visible){var n=new uc({stroke:{width:e.width,color:e.color,dashType:e.dashType}});n.moveTo(i.x1,i.y1).lineTo(i.x2,i.y2),t._alignLines&&ws(n);var r=this._lineGroup=new Cc;r.append(n),this.visual.append(r),this.createTicks(r)}},e.prototype.getActualTickSize=function(){var t=this.options,e=0;return t.majorTicks.visible&&t.minorTicks.visible?e=Math.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?e=t.majorTicks.size:t.minorTicks.visible&&(e=t.minorTicks.size),e},e.prototype.createBackground=function(){var t=this.options,e=this.box,i=t.background;i&&(this._backgroundPath=uc.fromRect(e.toRect(),{fill:{color:i},stroke:null}),this.visual.append(this._backgroundPath))},e.prototype.createPlotBands=function(){var t=this,e=this.options,i=e.plotBands||[],n=e.vertical,r=this.plotArea;if(0!==i.length){for(var o=this._plotbandGroup=new Cc({zIndex:-1}),s=Hs(this.pane.axes,(function(e){return e.options.vertical!==t.options.vertical}))[0],a=0;a<i.length;a++){var l=i[a],h=void 0,c=void 0,p=l.label,u=void 0;if(n?(h=(s||r.axisX).lineBox(),c=t.getSlot(l.from,l.to,!0)):(h=t.getSlot(l.from,l.to,!0),c=(s||r.axisY).lineBox()),p&&(p.vAlign=p.position||ts,u=t.createPlotBandLabel(p,l,new ah(h.x1,c.y1,h.x2,c.y2))),0!==h.width()&&0!==c.height()){var d=new rh([h.x1,c.y1],[h.width(),c.height()]),f=uc.fromRect(d,{fill:{color:l.color,opacity:l.opacity},stroke:null});o.append(f),u&&o.append(u)}}this.appendVisual(o)}},e.prototype.createPlotBandLabel=function(t,e,i){if(!1===t.visible)return null;var n,r=t.text;if(Qa(t)&&t.visible){var o=Ns(t);o?r=o({text:r,item:e}):t.format&&(r=this.chartService.format.auto(t.format,r)),t.color||(t.color=this.options.labels.color)}return(n=new vp(r,t)).reflow(i),n.renderVisual(),n.visual},e.prototype.createGridLines=function(t){var e=this.options,i=e.minorGridLines,n=e.majorGridLines,r=e.minorUnit,o=e.vertical,s=t.options.line.visible,a=n.visible?e.majorUnit:0,l=t.lineBox(),h=l[o?"y1":"x1"],c={lineStart:l[o?"x1":"y1"],lineEnd:l[o?"x2":"y2"],vertical:o},p=[],u=this.gridLinesVisual();function d(t,e,i){var n=t.length,r=Math.max(1,e.step);if(e.visible)for(var o=e.skip;o<n;o+=r){var a=cl(t[o]);$s(a,p)||o%i==0||s&&h===a||(c.position=a,u.append(Bp(c,e)),p.push(a))}}return d(this.getMajorTickPositions(),n),d(this.getMinorTickPositions(),i,a/r),u.children},e.prototype.reflow=function(t){for(var e=this,i=e.options,n=e.labels,r=e.title,o=i.vertical,s=n.length,a=o?ds:Jo,l=r?r.box[a]():0,h=this.getActualTickSize()+i.margin+l,c=((this.getRoot()||{}).box||t)[a](),p=0,u=0;u<s;u++){var d=n[u].box[a]();d+h<=c&&(p=Math.max(p,d))}this.box=o?new ah(t.x1,t.y1,t.x1+p+h,t.y2):new ah(t.x1,t.y1,t.x2,t.y1+p+h),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()},e.prototype.getLabelsTickPositions=function(){return this.getMajorTickPositions()},e.prototype.labelTickIndex=function(t){return t.index},e.prototype.arrangeLabels=function(){for(var t=this.options,e=this.labels,i=this.labelsBetweenTicks(),n=t.vertical,r=t.labels.mirror,o=this.getLabelsTickPositions(),s=0;s<e.length;s++){var a=e[s],l=this.labelTickIndex(a),h=n?a.box.height():a.box.width(),c=o[l],p=o[l+1],u=void 0,d=void 0;if(n){if(i)u=c+(p-c)/2-h/2;else u=c-h/2;d=u}else i?(u=c,d=p):d=(u=c-h/2)+h;this.positionLabel(a,r,u,d)}},e.prototype.positionLabel=function(t,e,i,n){void 0===n&&(n=i);var r,o=this.options,s=o.vertical,a=this.lineBox(),l=this.getActualTickSize()+o.margin;if(s){var h=a.x2;e?(h+=l,t.options.rotationOrigin=ts):(h-=l+t.box.width(),t.options.rotationOrigin=as),r=t.box.move(h,i)}else{var c=a.y1;e?(c-=l+t.box.height(),t.options.rotationOrigin=Uo):(c+=l,t.options.rotationOrigin=cs),r=new ah(i,c,n,c+t.box.height())}t.reflow(r)},e.prototype.autoRotateLabelAngle=function(t,e){return t.width()<e?0:t.height()>e?-90:-45},e.prototype.autoRotateLabels=function(){if(!this.options.autoRotateLabels||this.options.vertical)return!1;for(var t=this.getMajorTickPositions(),e=this.labels,i=Math.min(e.length,t.length-1),n=0,r=0;r<i;r++){var o=Math.abs(t[r+1]-t[r]),s=e[r].box,a=this.autoRotateLabelAngle(s,o);if(0!==a&&(n=a),-90===n)break}if(0!==n){for(var l=0;l<e.length;l++)e[l].options.rotation=n,e[l].reflow(new ah);return!0}},e.prototype.arrangeTitle=function(){var t=this.options,e=this.title,i=t.labels.mirror,n=t.vertical;e&&(n?(e.options.align=i?as:ts,e.options.vAlign=e.options.position):(e.options.align=e.options.position,e.options.vAlign=i?cs:Uo),e.reflow(this.box))},e.prototype.arrangeNotes=function(){for(var t=this,e=0;e<this.notes.length;e++){var i=t.notes[e],n=i.options.value,r=void 0;Qa(n)?(t.shouldRenderNote(n)?i.show():i.hide(),r=t.noteSlot(n)):i.hide(),i.reflow(r||t.lineBox())}},e.prototype.noteSlot=function(t){return this.getSlot(t)},e.prototype.alignTo=function(t){var e=t.lineBox(),i=this.options.vertical,n=i?vs:fs;this.box.snapTo(e,n),i?this.box.shrink(0,this.lineBox().height()-e.height()):this.box.shrink(this.lineBox().width()-e.width(),0),this.box[n+1]-=this.lineBox()[n+1]-e[n+1],this.box[n+2]-=this.lineBox()[n+2]-e[n+2]},e.prototype.axisLabelText=function(t,e,i){var n,r=this,o=Ns(e),s=function(){return e.format?r.chartService.format.localeAuto(e.format,[t],e.culture):t};o?n=o(Object.assign({},i,{get text(){return s()},value:t,format:e.format,culture:e.culture})):n=s();return n},e.prototype.slot=function(t,e,i){var n=this.getSlot(t,e,i);if(n)return n.toRect()},e.prototype.contentBox=function(){var t=this.box.clone(),e=this.labels;if(e.length){var i=this.options.vertical?vs:fs;if(this.chartService.isPannable(i)){var n=this.maxLabelOffset();t[i+1]-=n.start,t[i+2]+=n.end}else{e[0].options.visible&&t.wrap(e[0].box);var r=e[e.length-1];r.options.visible&&t.wrap(r.box)}}return t},e.prototype.maxLabelOffset=function(){for(var t=this.options,e=t.vertical,i=t.reverse,n=this.labelsBetweenTicks(),r=this.getLabelsTickPositions(),o=e?vs:fs,s=this.labels,a=i?1:0,l=i?0:1,h=0,c=0,p=0;p<s.length;p++){var u=s[p],d=this.labelTickIndex(u),f=void 0,v=void 0;n?(f=r[d+a],v=r[d+l]):f=v=r[d],h=Math.max(h,f-u.box[o+1]),c=Math.max(c,u.box[o+2]-v)}return{start:h,end:c}},e.prototype.limitRange=function(t,e,i,n,r){var o=this.options;if(t<i&&r<0&&(!Qa(o.min)||o.min<=i)||n<e&&r>0&&(!Qa(o.max)||n<=o.max))return null;if(e<i&&r>0||n<t&&r<0)return{min:t,max:e};var s=e-t,a=t,l=e;return t<i&&r<0?(a=al(t,i,n),l=al(t+s,i+s,n)):e>n&&r>0&&(l=al(e,i,n),a=al(e-s,i,n-s)),{min:a,max:l}},e.prototype.valueRange=function(){return{min:this.seriesMin,max:this.seriesMax}},e.prototype.lineDir=function(){var t=this.options;return(t.vertical?-1:1)*(t.reverse?-1:1)},e.prototype.lineInfo=function(){var t=this.options.vertical,e=this.lineBox(),i=t?e.height():e.width(),n=t?vs:fs,r=this.lineDir(),o=n+(1===r?1:2).toString();return{axis:n,axisOrigin:o,axisDir:r,lineBox:e,lineSize:i,lineStart:e[o]}},e.prototype.pointOffset=function(t){var e=this.lineInfo(),i=e.axis,n=e.axisDir,r=e.axisOrigin,o=e.lineBox,s=e.lineSize;return(n>0?t[i]-o[r]:o[r]-t[i])/s},e.prototype.scaleToDelta=function(t,e){var i=al(t,-.999,.999);return i>0?e*Math.min(1,i):e-e/(1+i)},e.prototype.labelsBetweenTicks=function(){return!this.options.justified},e.prototype.prepareUserOptions=function(){},e}(Bc);vl(Np,{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:Wo,visible:!0},title:{visible:!0,position:qo},majorTicks:{align:ss,size:4,skip:0,step:1},minorTicks:{align:ss,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:ss,minorTickType:ns,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:Wo,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1});const jp=Np;var Fp="milliseconds",Vp="seconds",Hp="minutes",Wp="hours",Up="days",qp="weeks",$p="months",Gp="years",Kp=1e3,Xp=6e4,Yp=36e5,Zp=864e5,Jp=6048e5,Qp=26784e5,tu=31536e6,eu={years:tu,months:Qp,weeks:Jp,days:Zp,hours:Yp,minutes:Xp,seconds:Kp,milliseconds:1};function iu(t,e){return t.getTime()-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xp}function nu(t,e){return new Date(t.getTime()+e)}function ru(t){var e;return t instanceof Date?e=t:t&&(e=new Date(t)),e}function ou(t,e){return 0===e&&23===t.getHours()&&(t.setHours(t.getHours()+2),!0)}function su(t,e,i,n){var r=t;if(t){var o=ru(t),s=o.getHours();i===Gp?ou(r=new Date(o.getFullYear()+e,0,1),0):i===$p?ou(r=new Date(o.getFullYear(),o.getMonth()+e,1),s):i===qp?(r=su(function(t,e){void 0===e&&(e=0);var i=0,n=t.getDay();if(!isNaN(n))for(;n!==e;)0===n?n=6:n--,i++;return nu(t,-i*Zp)}(o,n),7*e,Up),ou(r,s)):i===Up?ou(r=new Date(o.getFullYear(),o.getMonth(),o.getDate()+e),s):i===Wp?r=function(t,e){var i=new Date(t);i.setMinutes(0,0,0);var n=(t.getTimezoneOffset()-i.getTimezoneOffset())*Xp;return nu(i,n+e*Yp)}(o,e):i===Hp?(r=nu(o,e*Xp)).getSeconds()>0&&r.setSeconds(0):i===Vp?r=nu(o,e*Kp):i===Fp&&(r=nu(o,e)),i!==Fp&&r.getMilliseconds()>0&&r.setMilliseconds(0)}return r}function au(t,e,i){return su(ru(t),0,e,i)}function lu(t,e,i){var n=ru(t);return n&&au(n,e,i).getTime()===n.getTime()?n:su(n,1,e,i)}function hu(t,e){return t&&e?t.getTime()-e.getTime():-1}function cu(t,e){return t.getTime()-e}function pu(t){if(ms(t)){for(var e=[],i=0;i<t.length;i++)e.push(pu(t[i]));return e}if(t)return ru(t).getTime()}function uu(t,e){return t&&e?pu(t)===pu(e):t===e}function du(t,e,i){return iu(t,e)/eu[i]}function fu(t,e,i,n){var r=ru(t),o=ru(e);return(i===$p?r.getMonth()-o.getMonth()+12*(r.getFullYear()-o.getFullYear())+du(r,new Date(r.getFullYear(),r.getMonth()),Up)/new Date(r.getFullYear(),r.getMonth()+1,0).getDate():i===Gp?r.getFullYear()-o.getFullYear()+fu(r,new Date(r.getFullYear(),0),$p,1)/12:i===Up||i===qp?du(r,o,i):cu(r,e)/eu[i])/n}function vu(t,e,i){return i===Gp?e.getFullYear()-t.getFullYear():i===$p?12*vu(t,e,Gp)+e.getMonth()-t.getMonth():i===Up?Math.floor(cu(e,t)/Zp):Math.floor(cu(e,t)/eu[i])}function mu(t,e){return ks(e)&&t.parseDate(e)||ru(e)}function gu(t,e){if(ms(e)){for(var i=[],n=0;n<e.length;n++)i.push(mu(t,e[n]));return i}return mu(t,e)}function yu(t,e){return _s(t.weekStartDay)?t.weekStartDay:e&&e.firstDay?e.firstDay():0}var bu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this._ticks={}},e.prototype.categoriesHash=function(){return""},e.prototype.clone=function(){var t=new e(Object.assign({},this.options,{categories:this.options.srcCategories}),this.chartService);return t.createLabels(),t},e.prototype.initUserOptions=function(t){var e=t.categories||[],i=Qa(t.min),n=Qa(t.max);if(t.srcCategories=t.categories=e,(i||n)&&e.length){var r,o=i?Math.floor(t.min):0;r=n?t.justified?Math.floor(t.max)+1:Math.ceil(t.max):e.length,t.categories=t.categories.slice(o,r)}return t},e.prototype.rangeIndices=function(){var t=this.options,e=t.categories.length||1;return{min:_s(t.min)?t.min%1:0,max:_s(t.max)&&t.max%1!=0&&t.max<this.totalRange().max?e-(1-t.max%1):e-(t.justified?1:0)}},e.prototype.totalRangeIndices=function(t){var e,i=this.options,n=_s(i.min)?i.min:0;if(e=_s(i.max)?i.max:_s(i.min)?n+i.categories.length:this.totalRange().max||1,t){var r=this.totalRange();n=al(n,0,r.max),e=al(e,0,r.max)}return{min:n,max:e}},e.prototype.range=function(){var t=this.options;return{min:_s(t.min)?t.min:0,max:_s(t.max)?t.max:this.totalRange().max}},e.prototype.roundedRange=function(){return this.range()},e.prototype.totalRange=function(){var t=this.options;return{min:0,max:Math.max(this._seriesMax||0,t.srcCategories.length)-(t.justified?1:0)}},e.prototype.scaleOptions=function(){var t=this.rangeIndices(),e=t.min,i=t.max,n=this.lineBox();return{scale:(this.options.vertical?n.height():n.width())/(i-e||1)*(this.options.reverse?-1:1),box:n,min:e,max:i}},e.prototype.arrangeLabels=function(){t.prototype.arrangeLabels.call(this),this.hideOutOfRangeLabels()},e.prototype.hideOutOfRangeLabels=function(){var t=this.box,e=this.labels;if(e.length>0){var i=this.options.vertical?vs:fs,n=t[i+1],r=t[i+2],o=e[0],s=sl(e);(o.box[i+1]>r||o.box[i+2]<n)&&(o.options.visible=!1),(s.box[i+1]>r||s.box[i+2]<n)&&(s.options.visible=!1)}},e.prototype.getMajorTickPositions=function(){return this.getTicks().majorTicks},e.prototype.getMinorTickPositions=function(){return this.getTicks().minorTicks},e.prototype.getLabelsTickPositions=function(){return this.getTicks().labelTicks},e.prototype.tickIndices=function(t){for(var e=this.rangeIndices(),i=e.min,n=e.max,r=Math.ceil(n),o=Math.floor(i),s=[];o<=r;)s.push(o),o+=t;return s},e.prototype.getTickPositions=function(t){for(var e=this.options,i=e.vertical,n=e.reverse,r=this.scaleOptions(),o=r.scale,s=r.box,a=r.min,l=s[(i?vs:fs)+(n?2:1)],h=this.tickIndices(t),c=[],p=0;p<h.length;p++)c.push(l+cl(o*(h[p]-a),3));return c},e.prototype.getTicks=function(){var t=this.options,e=this._ticks,i=this.rangeIndices(),n=this.lineBox(),r=n.getHash()+i.min+","+i.max+t.reverse+t.justified;if(e._hash!==r){var o=t.minorTicks.visible||t.minorGridLines.visible;e._hash=r,e.labelTicks=this.getTickPositions(1),e.majorTicks=this.filterOutOfRangePositions(e.labelTicks,n),e.minorTicks=o?this.filterOutOfRangePositions(this.getTickPositions(.5),n):[]}return e},e.prototype.filterOutOfRangePositions=function(t,e){if(!t.length)return t;for(var i=this.options.vertical?vs:fs,n=function(t){return e[i+1]<=t&&t<=e[i+2]},r=t.length-1,o=0;!n(t[o])&&o<=r;)o++;for(var s=r;!n(t[s])&&s>=0;)s--;return t.slice(o,s+1)},e.prototype.lineInfo=function(){var t=this.options,e=t.vertical,i=t.reverse,n=this.lineBox(),r=e?n.height():n.width(),o=e?vs:fs,s=i?-1:1,a=o+(1===s?1:2).toString();return{axis:o,axisOrigin:a,axisDir:s,lineBox:n,lineSize:r,lineStart:n[a]}},e.prototype.lineDir=function(){return this.options.reverse?-1:1},e.prototype.getSlot=function(t,e,i){var n=this.options,r=n.reverse,o=n.justified,s=this.scaleOptions(),a=s.scale,l=s.box,h=s.min,c=this.lineInfo(),p=c.axis,u=c.lineStart,d=l.clone(),f=!Qa(e),v=ul(t,0),m=ul(e,v);m=Math.max(m-1,v);var g=u+(v-h)*a,y=u+((m=Math.max(v,m))+1-h)*a;return f&&o&&(y=g),i&&(g=al(g,l[p+1],l[p+2]),y=al(y,l[p+1],l[p+2])),d[p+1]=r?y:g,d[p+2]=r?g:y,d},e.prototype.limitSlot=function(t){var e=this.options.vertical?vs:fs,i=this.lineBox(),n=t.clone();return n[e+1]=al(t[e+1],i[e+1],i[e+2]),n[e+2]=al(t[e+2],i[e+1],i[e+2]),n},e.prototype.slot=function(e,i,n){var r=Math.floor(this.options.min||0),o=e,s=i;return"string"==typeof o?o=this.categoryIndex(o):_s(o)&&(o-=r),"string"==typeof s?s=this.categoryIndex(s):_s(s)&&(s-=r),t.prototype.slot.call(this,o,s,n)},e.prototype.pointCategoryIndex=function(t){var e=this.options,i=e.reverse,n=e.justified,r=e.vertical?vs:fs,o=this.scaleOptions(),s=o.scale,a=o.box,l=o.min,h=o.max,c=i?h:l,p=a[r+1],u=a[r+2],d=t[r];if(d<p||d>u)return null;var f=c+(d-p)/s,v=f%1;return n?f=Math.round(f):0===v&&f>0&&f--,Math.floor(f)},e.prototype.getCategory=function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.options.categories[e]},e.prototype.categoryIndex=function(t){return this.totalIndex(t)-Math.floor(this.options.min||0)},e.prototype.categoryAt=function(t,e){var i=this.options;return(e?i.srcCategories:i.categories)[t]},e.prototype.categoriesCount=function(){return(this.options.categories||[]).length},e.prototype.translateRange=function(t){var e=this.options,i=this.lineBox(),n=e.vertical?i.height():i.width(),r=e.categories.length,o=cl(t/(n/r),Yo);return{min:o,max:r+o}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),n=this.totalRangeIndices(),r=n.max-n.min,o=this.scaleToDelta(t,r),s=i*o,a=(1-i)*o,l=n.min+s,h=n.max-a;return h-l<.1&&(h=l+.1),{min:l,max:h}},e.prototype.zoomRange=function(t,e){var i=this.totalRange(),n=i.min,r=i.max,o=this.scaleRange(t,e);return{min:al(o.min,n,r),max:al(o.max,n,r)}},e.prototype.labelsCount=function(){var t=this.labelsRange();return t.max-t.min},e.prototype.labelsRange=function(){var t=this.options,e=t.justified,i=t.labels,n=this.totalRangeIndices(!0),r=n.min,o=n.max,s=Math.floor(r);return e?(r=Math.ceil(r),o=Math.floor(o)):(r=Math.floor(r),o=Math.ceil(o)),{min:(r>i.skip?i.skip+i.step*Math.ceil((r-i.skip)/i.step):i.skip)-s,max:(t.categories.length?o+(e?1:0):0)-s}},e.prototype.createAxisLabel=function(t,e,i){var n=this.options,r=n.dataItems?n.dataItems[t]:null,o=ul(n.categories[t],"");i.dataItem=r;var s=this.axisLabelText(o,e,i);return new bp(o,s,t,r,e)},e.prototype.shouldRenderNote=function(t){var e=this.totalRangeIndices();return Math.floor(e.min)<=t&&t<=Math.ceil(e.max)},e.prototype.noteSlot=function(t){var e=this.options,i=t-Math.floor(e.min||0);return this.getSlot(i)},e.prototype.arrangeNotes=function(){t.prototype.arrangeNotes.call(this),this.hideOutOfRangeNotes()},e.prototype.hideOutOfRangeNotes=function(){var t=this.notes,e=this.box;if(t&&t.length)for(var i=this.options.vertical?vs:fs,n=e[i+1],r=e[i+2],o=0;o<t.length;o++){var s=t[o];s.box&&(r<s.box[i+1]||s.box[i+2]<n)&&s.hide()}},e.prototype.pan=function(t){var e=this.totalRangeIndices(!0),i=this.scaleOptions().scale,n=cl(t/i,Yo),r=this.totalRange(),o=e.min+n,s=e.max+n;return this.limitRange(o,s,0,r.max,n)},e.prototype.pointsRange=function(t,e){var i=this.options,n=i.reverse,r=i.vertical?vs:fs,o=this.totalRangeIndices(!0),s=this.scaleOptions(),a=s.scale,l=s.box[r+(n?2:1)],h=t[r]-l,c=e[r]-l,p=o.min+h/a,u=o.min+c/a,d=Math.min(p,u),f=Math.max(p,u);if(f-d>=.01)return{min:d,max:f}},e.prototype.valueRange=function(){return this.range()},e.prototype.totalIndex=function(t){var e=this.options,i=this._categoriesMap?this._categoriesMap.get(t):function(t,e){if(t instanceof Date){for(var i=e.length,n=0;n<i;n++)if(uu(e[n],t))return n;return-1}return e.indexOf(t)}(t,e.srcCategories);return i},e.prototype.currentRangeIndices=function(){var t=this.options,e=0;return _s(t.min)&&(e=Math.floor(t.min)),{min:e,max:_s(t.max)?t.justified?Math.floor(t.max):Math.ceil(t.max)-1:this.totalCount()-1}},e.prototype.mapCategories=function(){if(!this._categoriesMap)for(var t=this._categoriesMap=new qs,e=this.options.srcCategories,i=0;i<e.length;i++)t.set(e[i],i)},e.prototype.totalCount=function(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)},e}(jp);vl(bu,{type:"category",vertical:!1,majorGridLines:{visible:!1,width:1,color:Wo},labels:{zIndex:1},justified:!1,_deferLabels:!0});const wu=bu;var xu=3e5,_u={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},ku=[Fp,Vp,Hp,Wp,Up,qp,$p,Gp],Su="fit";function Cu(t){var e=t._range;return e||((e=t._range=ml(t)).min=ru(e.min),e.max=ru(e.max)),e}var Eu=function(t){this.options=t};Eu.prototype.displayIndices=function(){return{min:0,max:1}},Eu.prototype.displayRange=function(){return{}},Eu.prototype.total=function(){return{}},Eu.prototype.valueRange=function(){return{}},Eu.prototype.valueIndex=function(){return-1},Eu.prototype.values=function(){return[]},Eu.prototype.totalIndex=function(){return-1},Eu.prototype.valuesCount=function(){return 0},Eu.prototype.totalCount=function(){return 0},Eu.prototype.dateAt=function(){return null};var Tu=function(t,e,i){this.options=i,i.baseUnitStep=i.baseUnitStep||1;var n=i.roundToBaseUnit,r=i.justified;this.start=su(t,0,i.baseUnit,i.weekStartDay);var o=this.roundToTotalStep(e),s=!r&&uu(e,o)&&!i.justifyEnd;this.end=this.roundToTotalStep(e,!r,s?1:0);var a=i.min||t;this.valueStart=this.roundToTotalStep(a),this.displayStart=n?this.valueStart:a;var l=i.max;if(l){var h=!r&&uu(l,this.roundToTotalStep(l))?-1:0;this.valueEnd=this.roundToTotalStep(l,!1,h),this.displayEnd=n?this.roundToTotalStep(l,!r):i.max}else this.valueEnd=o,this.displayEnd=n||s?this.end:e;this.valueEnd<this.valueStart&&(this.valueEnd=this.valueStart),this.displayEnd<=this.displayStart&&(this.displayEnd=this.roundToTotalStep(this.displayStart,!1,1))};function Au(t,e,i){for(var n,r,o,s=Cu(t.categories),a=(t.max||s.max)-(t.min||s.min),l=t.autoBaseUnitSteps,h=t.maxDateGroups,c=t.baseUnit===Su,p=e?ku.indexOf(e):0,u=c?ku[p++]:t.baseUnit,d=a/eu[u],f=d;!r||d>=h;){n=n||l[u].slice(0);do{o=n.shift()}while(o&&e===u&&o<i);if(o)d=f/(r=o);else{if(u===sl(ku)){r=Math.ceil(f/h);break}if(!c){d>h&&(r=Math.ceil(f/h));break}u=ku[p++]||sl(ku),f=a/eu[u],n=null}}t.baseUnitStep=r,t.baseUnit=u}function Mu(t){var e=(t.baseUnit||"").toLowerCase();return e!==Su&&!$s(e,ku)&&function(t){for(var e,i,n=t.categories,r=Qa(n)?n.length:0,o=es,s=0;s<r;s++){var a=n[s];if(a&&e){var l=iu(a,e);l>0&&(i=(o=Math.min(o,l))>=tu?Gp:o>=24192e5?$p:o>=Jp?qp:o>=Zp?Up:o>=Yp?Wp:o>=Xp?Hp:Vp)}e=a}t.baseUnit=i||Up}(t),e!==Su&&"auto"!==t.baseUnitStep||Au(t),t}Tu.prototype.displayRange=function(){return{min:this.displayStart,max:this.displayEnd}},Tu.prototype.displayIndices=function(){if(!this._indices){var t=this.options,e=t.baseUnit,i=t.baseUnitStep,n=fu(this.displayStart,this.valueStart,e,i),r=fu(this.displayEnd,this.valueStart,e,i);this._indices={min:n,max:r}}return this._indices},Tu.prototype.total=function(){return{min:this.start,max:this.end}},Tu.prototype.totalCount=function(){return this.totalIndex(this.end)+(this.options.justified?1:0)},Tu.prototype.valueRange=function(){return{min:this.valueStart,max:this.valueEnd}},Tu.prototype.valueIndex=function(t){var e=this.options;return Math.floor(fu(t,this.valueStart,e.baseUnit,e.baseUnitStep))},Tu.prototype.totalIndex=function(t){var e=this.options;return Math.floor(fu(t,this.start,e.baseUnit,e.baseUnitStep))},Tu.prototype.dateIndex=function(t){var e=this.options;return fu(t,this.valueStart,e.baseUnit,e.baseUnitStep)},Tu.prototype.valuesCount=function(){return this.valueIndex(this.valueEnd)+1},Tu.prototype.values=function(){var t=this._values;if(!t){var e=this.options,i=this.valueRange();this._values=t=[];for(var n=i.min;n<=i.max;)t.push(n),n=su(n,e.baseUnitStep,e.baseUnit,e.weekStartDay)}return t},Tu.prototype.dateAt=function(t,e){var i=this.options;return su(e?this.start:this.valueStart,i.baseUnitStep*t,i.baseUnit,i.weekStartDay)},Tu.prototype.roundToTotalStep=function(t,e,i){var n=this.options,r=n.baseUnit,o=n.baseUnitStep,s=n.weekStartDay,a=this.start,l=fu(t,a,r,o),h=e?Math.ceil(l):Math.floor(l);return i&&(h+=i),su(a,h*o,r,s)};var Ou=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(Object.assign({},this.options),this.chartService);return t.createLabels(),t},e.prototype.categoriesHash=function(){var t=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+t},e.prototype.initUserOptions=function(t){return t},e.prototype.initFields=function(){t.prototype.initFields.call(this);var e=this.chartService,i=e.intl,n=this.options,r=n.categories||[];if(r._parsed||((r=gu(i,r))._parsed=!0),n=As({roundToBaseUnit:!0},n,{categories:r,min:mu(i,n.min),max:mu(i,n.max),weekStartDay:yu(n,i)}),e.panning&&e.isPannable(n.vertical?vs:fs)&&(n.roundToBaseUnit=!1),n.userSetBaseUnit=n.userSetBaseUnit||n.baseUnit,n.userSetBaseUnitStep=n.userSetBaseUnitStep||n.baseUnitStep,this.options=n,n.srcCategories=r,r.length>0){var o=Cu(r),s=n.maxDivisions;if(this.dataRange=new Tu(o.min,o.max,Mu(n)),s){var a=this.dataRange.displayRange(),l=Object.assign({},n,{justified:!0,roundToBaseUnit:!1,baseUnit:"fit",min:a.min,max:a.max,maxDateGroups:s}),h=this.dataRange.options;Au(l,h.baseUnit,h.baseUnitStep),this.divisionRange=new Tu(o.min,o.max,l)}else this.divisionRange=this.dataRange}else n.baseUnit=n.baseUnit||Up,this.dataRange=this.divisionRange=new Eu(n);this.rangeLabels=[]},e.prototype.tickIndices=function(e){var i=this.dataRange,n=this.divisionRange,r=n.valuesCount();if(!this.options.maxDivisions||!r)return t.prototype.tickIndices.call(this,e);var o=[],s=n.values(),a=0;this.options.justified||(s=s.concat(n.dateAt(r)),a=.5);for(var l=0;l<s.length;l++)if(o.push(i.dateIndex(s[l])+a),1!==e&&l>=1){var h=o.length-1;o.splice(l,0,o[h-1]+(o[h]-o[h-1])*e)}return o},e.prototype.shouldRenderNote=function(t){var e=this.range(),i=this.options.categories||[];return hu(t,e.min)>=0&&hu(t,e.max)<=0&&i.length},e.prototype.parseNoteValue=function(t){return mu(this.chartService.intl,t)},e.prototype.noteSlot=function(t){return this.getSlot(t)},e.prototype.translateRange=function(t){var e=this.options,i=e.baseUnit,n=e.weekStartDay,r=e.vertical,o=this.lineBox(),s=r?o.height():o.width(),a=this.range(),l=s/(a.max-a.min),h=cl(t/l,Yo);if(a.min&&a.max){var c=nu(e.min||a.min,h),p=nu(e.max||a.max,h);a={min:su(c,0,i,n),max:su(p,0,i,n)}}return a},e.prototype.labelsRange=function(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}},e.prototype.pan=function(t){if(this.isEmpty())return null;var e=this.options,i=this.lineBox(),n=e.vertical?i.height():i.width(),r=this.dataRange.displayRange(),o=r.min,s=r.max,a=this.dataRange.total(),l=cl(t/(n/(s-o)),Yo)*(e.reverse?-1:1),h=nu(o,l),c=nu(s,l),p=this.limitRange(pu(h),pu(c),pu(a.min),pu(a.max),l);return p?(p.min=ru(p.min),p.max=ru(p.max),p.baseUnit=e.baseUnit,p.baseUnitStep=e.baseUnitStep||1,p.userSetBaseUnit=e.userSetBaseUnit,p.userSetBaseUnitStep=e.userSetBaseUnitStep,p):void 0},e.prototype.pointsRange=function(e,i){if(this.isEmpty())return null;var n=t.prototype.pointsRange.call(this,e,i),r=this.dataRange.displayRange(),o=this.dataRange.displayIndices(),s=cu(r.max,r.min)/(o.max-o.min),a=this.options;return{min:nu(r.min,n.min*s),max:nu(r.min,n.max*s),baseUnit:a.userSetBaseUnit||a.baseUnit,baseUnitStep:a.userSetBaseUnitStep||a.baseUnitStep}},e.prototype.scaleRange=function(t,e){if(this.isEmpty())return{};var i=this.options,n=i.userSetBaseUnit===Su,r=this.dataRange.total(),o=this.dataRange.displayRange(),s=o.min,a=o.max,l=Math.abs(this.pointOffset(e)),h=a-s,c=this.scaleToDelta(t,h),p=Math.round(l*c),u=Math.round((1-l)*c),d=this.dataRange.options.baseUnit,f=new Date(s.getTime()+p),v=new Date(a.getTime()-u);if(n){var m,g,y=i.autoBaseUnitSteps,b=i.maxDateGroups,w=sl(y[d])*b*eu[d],x=cu(a,s),_=cu(v,f),k=ku.indexOf(d);if(_<eu[d]&&d!==Fp)d=ku[k-1],f=nu(s,g=(x-(b-1)*(m=sl(y[d]))*eu[d])/2),v=nu(a,-g);else if(_>w&&d!==Gp){var S=0;do{k++,d=ku[k],S=0,g=2*eu[d];do{m=y[d][S],S++}while(S<y[d].length&&g*m<x)}while(d!==Gp&&g*m<x);(g=(g*m-x)/2)>0&&(f=nu(s,-g),v=nu(a,g),f=nu(f,al(v,r.min,r.max)-v),v=nu(v,al(f,r.min,r.max)-f))}}return f&&v&&cu(v,f)>0?{min:f,max:v,baseUnit:i.userSetBaseUnit||i.baseUnit,baseUnitStep:i.userSetBaseUnitStep||i.baseUnitStep}:void 0},e.prototype.zoomRange=function(t,e){var i=this.dataRange.total(),n=this.scaleRange(t,e);return n&&(n.min<i.min&&(n.min=i.min),n.max>i.max&&(n.max=i.max)),n},e.prototype.range=function(){return this.dataRange.displayRange()},e.prototype.createLabels=function(){t.prototype.createLabels.call(this),this.createRangeLabels()},e.prototype.clearLabels=function(){t.prototype.clearLabels.call(this),this.rangeLabels=[]},e.prototype.arrangeLabels=function(){this.arrangeRangeLabels(),t.prototype.arrangeLabels.call(this)},e.prototype.arrangeRangeLabels=function(){var t=this.options,e=this.rangeLabels;if(0!==e.length){var i=this.lineBox(),n=t.vertical,r=t.rangeLabels.mirror||t.labels.mirror,o=e[0];if(o){var s=n?i.y1-o.box.height()/2:i.x1;this.positionLabel(o,r,s)}var a=e[1];if(a){var l=n?i.y2-a.box.height()/2:i.x2;this.positionLabel(a,r,l)}}},e.prototype.autoRotateLabels=function(){t.prototype.autoRotateLabels.call(this),this.autoRotateRangeLabels()},e.prototype.hideOutOfRangeLabels=function(){t.prototype.hideOutOfRangeLabels.call(this),this.hideOverlappingLabels()},e.prototype.hideOverlappingLabels=function(){var t=this.rangeLabels,e=this.labels;if(0!==t.length){var i=t[0];if(i&&i.options.visible)for(var n=0;n<e.length;n++){if(!s(i,e[n]))break}var r=t[1];if(r&&r.options.visible)for(var o=e.length-1;o>0;--o){if(!s(r,e[o]))break}}function s(t,e){return!(e.options.visible&&!e.box.overlaps(t.box))&&(e.options.visible=!1,!0)}},e.prototype.contentBox=function(){for(var e=t.prototype.contentBox.call(this),i=this.rangeLabels,n=0;n<i.length;n++){var r=i[n];r.options.visible&&e.wrap(r.box)}return e},e.prototype.createAxisLabel=function(t,e,i){void 0===i&&(i={});var n=this.options,r=n.dataItems&&!n.maxDivisions?n.dataItems[t]:null,o=this.divisionRange.dateAt(t),s=e.dateFormats[this.divisionRange.options.baseUnit];e.format=e.format||s,i.dataItem=r;var a=this.axisLabelText(o,e,i);if(a)return new bp(o,a,t,r,e)},e.prototype.createRangeLabels=function(){var t=this,e=this.divisionRange,i=e.displayStart,n=e.displayEnd,r=this.options,o=Object.assign({},r.labels,r.rangeLabels,{align:qo,zIndex:r.zIndex});if(!0===o.visible){this.normalizeLabelRotation(o),o.alignRotation=qo,"auto"===o.rotation&&(o.rotation=0,r.autoRotateRangeLabels=!0);var s=o.dateFormats[this.divisionRange.options.baseUnit];o.format=o.format||s;var a=function(e,i,n){if(n){var r=new bp(i,n,e,null,o);t.append(r),t.rangeLabels.push(r)}};a(0,i,this.axisLabelText(i,o,{index:0,count:2})),a(1,n,this.axisLabelText(n,o,{index:1,count:2}))}},e.prototype.autoRotateRangeLabels=function(){var t=this,e=this.rangeLabels;if(this.options.autoRotateRangeLabels&&!this.options.vertical&&2===e.length){var i=function(e,i,n){var r=2*Math.abs(i[n+1]-i[n]),o=t.autoRotateLabelAngle(e.box,r);0!==o&&(e.options.rotation=o,e.reflow(new ah))},n=this.getMajorTickPositions();i(e[0],n,0),i(e[1],n,n.length-2)}},e.prototype.categoryIndex=function(t){return this.dataRange.valueIndex(t)},e.prototype.slot=function(t,e,i){var n=this.dataRange,r=t,o=e;r instanceof Date&&(r=n.dateIndex(r)),o instanceof Date&&(o=n.dateIndex(o));var s=this.getSlot(r,o,i);if(s)return s.toRect()},e.prototype.getSlot=function(e,i,n){var r=e,o=i;return typeof r===rs&&(r=this.categoryIndex(r)),typeof o===rs&&(o=this.categoryIndex(o)),t.prototype.getSlot.call(this,r,o,n)},e.prototype.valueRange=function(){var t=Cu(this.options.srcCategories);return{min:ru(t.min),max:ru(t.max)}},e.prototype.categoryAt=function(t,e){return this.dataRange.dateAt(t,e)},e.prototype.categoriesCount=function(){return this.dataRange.valuesCount()},e.prototype.rangeIndices=function(){return this.dataRange.displayIndices()},e.prototype.labelsBetweenTicks=function(){return!this.divisionRange.options.justified},e.prototype.prepareUserOptions=function(){this.isEmpty()||(this.options.categories=this.dataRange.values())},e.prototype.getCategory=function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.dataRange.dateAt(e)},e.prototype.totalIndex=function(t){return this.dataRange.totalIndex(t)},e.prototype.currentRangeIndices=function(){var t=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}},e.prototype.totalRange=function(){return this.dataRange.total()},e.prototype.totalCount=function(){return this.dataRange.totalCount()},e.prototype.isEmpty=function(){return!this.options.srcCategories.length},e.prototype.roundedRange=function(){if(!1!==this.options.roundToBaseUnit||this.isEmpty())return this.range();var t=this.options,e=Cu(t.srcCategories);return new Tu(e.min,e.max,Object.assign({},t,{justified:!1,roundToBaseUnit:!0,justifyEnd:t.justified})).displayRange()},e}(wu);vl(Ou,{type:Ko,labels:{dateFormats:_u},rangeLabels:{visible:!1},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});const Du=Ou;function Pu(t,e){return cl(Math.floor(t/e)*e,Yo)}function Ru(t,e){return cl(Math.ceil(t/e)*e,Yo)}function Iu(t){return Math.max(Math.min(t,xu),-3e5)}var zu=Math.pow(10,-9),Lu=function(t){function e(e,i,n,r){t.call(this,Object.assign({},n,{seriesMin:e,seriesMax:i}),r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=function(t,e,i){var n=i.narrowRange,r=function(t,e,i){if(!t&&!e)return 0;var n;if(t>=0&&e>=0){var r=t===e?0:t;if(!1===i||!i&&(e-r)/e>.2)return 0;n=Math.max(0,r-(e-r)/2)}else n=t;return n}(t,e,n),o=function(t,e,i){if(!t&&!e)return 1;var n;if(t<=0&&e<=0){var r=t===e?0:e,o=Math.abs((r-t)/r);if(!1===i||!i&&o>.2)return 0;n=Math.min(0,r-(t-r)/2)}else n=e;return n}(t,e,n),s=Ul(r,o),a={majorUnit:s};!1!==i.roundToMajorUnit&&(r<0&&Bu(r,s,1/3)&&(r-=s),o>0&&Bu(o,s,1/3)&&(o+=s));return a.min=Pu(r,s),a.max=Ru(o,s),a}(t.seriesMin,t.seriesMax,t);return this.totalOptions=function(t,e){return{min:Qa(e.min)?Math.min(t.min,e.min):t.min,max:Qa(e.max)?Math.max(t.max,e.max):t.max,majorUnit:t.majorUnit}}(e,t),function(t,e){var i,n,r=e;if(e){!function(t,e){for(var i=0;i<e.length;i++){var n=e[i];null===t[n]&&(t[n]=void 0)}}(e,["min","max"]),i=Qa(e.min),n=Qa(e.max);var o=i||n;o&&e.min===e.max&&(e.min>0?e.min=0:e.max=1),e.majorUnit?(t.min=Pu(t.min,e.majorUnit),t.max=Ru(t.max,e.majorUnit)):o&&(r=As(t,e),t.majorUnit=Ul(r.min,r.max))}t.minorUnit=(r.majorUnit||t.majorUnit)/5;var s=As(t,r);s.min>=s.max&&(i&&!n?s.max=s.min+s.majorUnit:!i&&n&&(s.min=s.max-s.majorUnit));return s}(e,t)},e.prototype.initFields=function(){this.totalMin=this.totalOptions.min,this.totalMax=this.totalOptions.max,this.totalMajorUnit=this.totalOptions.majorUnit,this.seriesMin=this.options.seriesMin,this.seriesMax=this.options.seriesMax},e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.startValue=function(){return 0},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.getDivisions=function(t){if(0===t)return 1;var e=this.options,i=e.max-e.min;return Math.floor(cl(i/t,3))+1},e.prototype.getTickPositions=function(t,e){var i=this.options,n=this.lineInfo(),r=n.axisDir,o=n.axisOrigin,s=n.lineBox,a=t*(n.lineSize/(i.max-i.min)),l=this.getDivisions(t),h=[],c=s[o],p=0;e&&(p=e/t);for(var u=0;u<l;u++)u%p!=0&&h.push(cl(c,3)),c+=a*r;return h},e.prototype.getMajorTickPositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.getMinorTickPositions=function(){return this.getTickPositions(this.options.minorUnit)},e.prototype.getSlot=function(t,e,i){void 0===i&&(i=!1);var n=this.options,r=this.lineInfo(),o=r.axis,s=r.axisDir,a=r.lineBox,l=r.lineSize,h=r.lineStart,c=s*(l/(n.max-n.min)),p=ul(t,e||0),u=ul(e,t||0);i&&(p=al(p,n.min,n.max),u=al(u,n.min,n.max));var d=Math.min(p,u)-n.min,f=Math.max(p,u)-n.min,v=new ah(a.x1,a.y1,a.x1,a.y1);return v[o+1]=Iu(h+c*(s>0?d:f)),v[o+2]=Iu(h+c*(s>0?f:d)),v},e.prototype.getValue=function(t){var e=this.options,i=Number(e.max),n=Number(e.min),r=this.pointOffset(t);return r<0||r>1?null:cl(n+r*(i-n),Yo)},e.prototype.translateRange=function(t){var e=this.options,i=e.vertical,n=e.reverse,r=e.max,o=e.min,s=this.lineInfo().lineSize,a=cl(t/(s/(r-o)),Yo);return!i&&!n||i&&n||(a=-a),{min:o+a,max:r+a,offset:a}},e.prototype.labelsCount=function(){return this.getDivisions(this.options.majorUnit)},e.prototype.createAxisLabel=function(t,e,i){var n=this.options,r=cl(n.min+t*n.majorUnit,Yo),o=this.axisLabelText(r,e,i);return new bp(r,o,t,null,e)},e.prototype.shouldRenderNote=function(t){var e=this.range();return e.min<=t&&t<=e.max},e.prototype.pan=function(t){var e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),n=this.getValue(e),r=Math.min(i,n),o=Math.max(i,n);if(this.isValidRange(r,o))return{min:r,max:o}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),n=this.options.max-this.options.min,r=this.scaleToDelta(t,n),o=i*r,s=(1-i)*r,a=cl(this.options.min+o,Yo),l=cl(this.options.max-s,Yo);return l-a<zu&&(l=a+zu),{min:a,max:l}},e.prototype.zoomRange=function(t,e){var i=this.totalMin,n=this.totalMax,r=this.scaleRange(t,e);return{min:al(r.min,i,n),max:al(r.max,i,n),narrowRange:!1}},e.prototype.isValidRange=function(t,e){return e-t>zu},e}(jp);function Bu(t,e,i){var n=cl(Math.abs(t%e),Yo);return 0===n||n>e*(1-i)}vl(Lu,{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:Wo},labels:{format:"#.####################"},zIndex:1});const Nu=Lu;var ju=function(t){function e(e,i,n,r){var o=ru(e),s=ru(i),a=r.intl,l=n||{};l=function(t,e,i){var n=i.min||t,r=i.max||e,o=i.baseUnit||(r&&n?function(t){var e=Wp;t>=tu?e=Gp:t>=Qp?e=$p:t>=Jp?e=qp:t>=Zp&&(e=Up);return e}(iu(r,n)):Wp),s=eu[o],a=i.weekStartDay||0,l=au(pu(n)-1,o,a)||ru(r),h=lu(pu(r)+1,o,a),c=(i.majorUnit?i.majorUnit:void 0)||Ru(Ul(l.getTime(),h.getTime()),s)/s,p=vu(l,h,o),u=Ru(p,c)-p,d=Math.floor(u/2),f=u-d;i.baseUnit||delete i.baseUnit;return i.baseUnit=i.baseUnit||o,i.min=i.min||su(l,-d,o,a),i.max=i.max||su(h,f,o,a),i.minorUnit=i.minorUnit||c/5,i.majorUnit=c,i}(o,s,l=As(l||{},{min:mu(a,l.min),max:mu(a,l.max),axisCrossingValue:gu(a,l.axisCrossingValues||l.axisCrossingValue),weekStartDay:yu(l,a)})),t.call(this,l,r),this.intlService=a,this.seriesMin=o,this.seriesMax=s;var h=l.weekStartDay||0;this.totalMin=pu(au(pu(o)-1,l.baseUnit,h)),this.totalMax=pu(lu(pu(s)+1,l.baseUnit,h))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.getDivisions=function(t){var e=this.options;return Math.floor(vu(e.min,e.max,e.baseUnit)/t+1)},e.prototype.getTickPositions=function(t){for(var e=this.options,i=this.lineInfo(),n=i.axisDir,r=i.lineSize,o=i.lineStart,s=this.getDivisions(t),a=r/cu(e.max,e.min),l=e.weekStartDay||0,h=[o],c=1;c<s;c++){var p=o+cu(su(e.min,c*t,e.baseUnit,l),e.min)*a*n;h.push(cl(p,3))}return h},e.prototype.getMajorTickPositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.getMinorTickPositions=function(){return this.getTickPositions(this.options.minorUnit)},e.prototype.getSlot=function(t,e,i){return Nu.prototype.getSlot.call(this,mu(this.intlService,t),mu(this.intlService,e),i)},e.prototype.getValue=function(t){var e=Nu.prototype.getValue.call(this,t);return null!==e?ru(e):null},e.prototype.labelsCount=function(){return this.getDivisions(this.options.majorUnit)},e.prototype.createAxisLabel=function(t,e,i){var n=this.options,r=t*n.majorUnit,o=n.weekStartDay||0,s=n.min;r>0&&(s=su(s,r,n.baseUnit,o));var a=e.dateFormats[n.baseUnit];e.format=e.format||a;var l=this.axisLabelText(s,e,i);return new bp(s,l,t,null,e)},e.prototype.translateRange=function(t){var e=this.options,i=this.lineBox(),n=e.vertical,r=e.reverse,o=n?i.height():i.width(),s=this.range(),a=o/cu(s.max,s.min),l=cl(t/a,Yo);return!n&&!r||n&&r||(l=-l),{min:nu(e.min,l),max:nu(e.max,l),offset:l}},e.prototype.shouldRenderNote=function(t){var e=this.range();return hu(t,e.min)>=0&&hu(t,e.max)<=0},e.prototype.pan=function(t){var e=this.translateRange(t,!0),i=this.limitRange(pu(e.min),pu(e.max),this.totalMin,this.totalMax,e.offset);if(i)return{min:ru(i.min),max:ru(i.max)}},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),n=this.getValue(e),r=Math.min(i,n),o=Math.max(i,n);return{min:ru(r),max:ru(o)}},e.prototype.scaleRange=function(t,e){var i=Math.abs(this.pointOffset(e)),n=this.options.max-this.options.min,r=this.scaleToDelta(t,n),o=i*r,s=(1-i)*r,a=ru(pu(this.options.min)+o),l=ru(pu(this.options.max)-s);return l-a<1e3&&(l=ru(pu(a)+1e3)),{min:a,max:l}},e.prototype.zoomRange=function(t,e){var i=this.scaleRange(t,e);return{min:ru(al(pu(i.min),this.totalMin,this.totalMax)),max:ru(al(pu(i.max),this.totalMin,this.totalMax))}},e}(jp);vl(ju,{type:Ko,majorGridLines:{visible:!0,width:1,color:Wo},labels:{dateFormats:_u}});const Fu=ju;var Vu=1e-6,Hu=function(t){function e(e,i,n,r){var o=As({majorUnit:10,min:e,max:i},n),s=o.majorUnit,a=function(t,e){var i,n=cl(Uu(t,e),Yo)%1;i=t<=0?e:0!==n&&(n<.3||n>.9)?Math.pow(e,Uu(t,e)+.2):Math.pow(e,Math.ceil(Uu(t,e)));return i}(i,s),l=function(t,e,i){var n=i.majorUnit,r=t;t<=0?r=e<=1?Math.pow(n,-2):1:i.narrowRange||(r=Math.pow(n,Math.floor(Uu(t,n))));return r}(e,i,o),h=function(t,e,i,n){var r=i.min,o=i.max;Qa(i.axisCrossingValue)&&i.axisCrossingValue<=0&&Wu();Qa(n.max)?n.max<=0&&Wu():o=e;Qa(n.min)?n.min<=0&&Wu():r=t;return{min:r,max:o}}(l,a,o,n);o.max=h.max,o.min=h.min,o.minorUnit=n.minorUnit||cl(s-1,Yo),t.call(this,o,r),this.totalMin=Qa(n.min)?Math.min(l,n.min):l,this.totalMax=Qa(n.max)?Math.max(a,n.max):a,this.logMin=cl(Uu(h.min,s),Yo),this.logMax=cl(Uu(h.max,s),Yo),this.seriesMin=e,this.seriesMax=i,this.createLabels()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.startValue=function(){return this.options.min},e.prototype.getSlot=function(t,e,i){var n=this,r=n.options,o=n.logMin,s=n.logMax,a=r.majorUnit,l=r.min,h=r.max,c=this.lineInfo(),p=c.axis,u=c.axisDir,d=c.lineBox,f=c.lineSize,v=c.lineStart,m=u*(f/(s-o)),g=ul(t,e||1),y=ul(e,t||1);if(g<=0||y<=0)return null;i&&(g=al(g,l,h),y=al(y,l,h)),g=Uu(g,a),y=Uu(y,a);var b=Math.min(g,y)-o,w=Math.max(g,y)-o,x=new ah(d.x1,d.y1,d.x1,d.y1);return x[p+1]=Iu(v+m*(u>0?b:w)),x[p+2]=Iu(v+m*(u>0?w:b)),x},e.prototype.getValue=function(t){var e=this,i=e.options,n=e.logMin,r=e.logMax,o=i.majorUnit,s=this.lineInfo(),a=s.axis,l=s.axisDir,h=s.lineStart,c=s.lineSize,p=(r-n)/c,u=l*(t[a]-h);if(u<0||u>c)return null;var d=n+u*p;return cl(Math.pow(o,d),Yo)},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.translateRange=function(t){var e=this,i=e.options,n=e.logMin,r=e.logMax,o=i.reverse,s=i.vertical,a=i.majorUnit,l=this.lineBox(),h=s?l.height():l.width(),c=cl(t/(h/(r-n)),Yo);return!s&&!o||s&&o||(c=-c),{min:Math.pow(a,n+c),max:Math.pow(a,r+c),offset:c}},e.prototype.labelsCount=function(){var t=Math.floor(this.logMax);return Math.floor(t-this.logMin)+1},e.prototype.getMajorTickPositions=function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),{step:1,skip:0}),t},e.prototype.createTicks=function(t){var e=this.options,i=e.majorTicks,n=e.minorTicks,r=e.vertical,o=e.labels.mirror,s=this.lineBox(),a={vertical:r};function l(e,i){a.tickX=o?s.x2:s.x2-i.size,a.tickY=o?s.y1-i.size:s.y1,a.position=e,t.append(Lp(a,i))}return i.visible&&this.traverseMajorTicksPositions(l,i),n.visible&&this.traverseMinorTicksPositions(l,n),[]},e.prototype.createGridLines=function(t){var e=this.options,i=e.minorGridLines,n=e.majorGridLines,r=e.vertical,o=t.lineBox(),s={lineStart:o[r?"x1":"y1"],lineEnd:o[r?"x2":"y2"],vertical:r},a=[],l=this.gridLinesVisual();function h(t,e){$s(t,a)||(s.position=t,l.append(Bp(s,e)),a.push(t))}return n.visible&&this.traverseMajorTicksPositions(h,n),i.visible&&this.traverseMinorTicksPositions(h,i),l.children},e.prototype.traverseMajorTicksPositions=function(t,e){for(var i=this.lineInfo(),n=i.lineStart,r=i.step,o=this.logMin,s=this.logMax,a=Math.ceil(o)+e.skip;a<=s;a+=e.step){t(cl(n+r*(a-o),Yo),e)}},e.prototype.traverseMinorTicksPositions=function(t,e){for(var i=this.options,n=i.min,r=i.max,o=i.minorUnit,s=i.majorUnit,a=this.lineInfo(),l=a.lineStart,h=a.step,c=this.logMin,p=this.logMax,u=Math.floor(c);u<p;u++)for(var d=this._minorIntervalOptions(u),f=e.skip;f<o;f+=e.step){var v=d.value+f*d.minorStep;if(v>r)break;if(v>=n)t(cl(l+h*(Uu(v,s)-c),Yo),e)}},e.prototype.createAxisLabel=function(t,e,i){var n=Math.ceil(this.logMin+t),r=Math.pow(this.options.majorUnit,n),o=this.axisLabelText(r,e,i);return new bp(r,o,t,null,e)},e.prototype.shouldRenderNote=function(t){var e=this.range();return e.min<=t&&t<=e.max},e.prototype.pan=function(t){var e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)},e.prototype.pointsRange=function(t,e){var i=this.getValue(t),n=this.getValue(e);return{min:Math.min(i,n),max:Math.max(i,n)}},e.prototype.scaleRange=function(t,e){var i=this.options.majorUnit,n=Uu(this.options.min,i),r=Uu(this.options.max,i),o=Math.abs(this.pointOffset(e)),s=r-n,a=this.scaleToDelta(t,s),l=Math.pow(i,n+o*a),h=Math.pow(i,r-(1-o)*a);return h-l<Vu&&(h=l+Vu),{min:l,max:h}},e.prototype.zoomRange=function(t,e){var i=this.scaleRange(t,e),n=this.totalMin,r=this.totalMax;return{min:al(i.min,n,r),max:al(i.max,n,r)}},e.prototype._minorIntervalOptions=function(t){var e=this.options,i=e.minorUnit,n=e.majorUnit,r=Math.pow(n,t);return{value:r,minorStep:(Math.pow(n,t+1)-r)/i}},e.prototype.lineInfo=function(){var e=t.prototype.lineInfo.call(this);return e.step=e.axisDir*(e.lineSize/(this.logMax-this.logMin)),e},e}(jp);function Wu(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function Uu(t,e){return Math.log(t)/Math.log(e)}vl(Hu,{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:Wo},zIndex:1,_deferLabels:!0});const qu=Hu;var $u={createGridLines:function(t){var e,i,n=this.options,r=Math.abs(this.box.center().y-t.lineBox().y1),o=[],s=!1;return n.majorGridLines.visible&&(e=this.majorGridLineAngles(t),s=!0,o=this.renderMajorGridLines(e,r,n.majorGridLines)),n.minorGridLines.visible&&(i=this.minorGridLineAngles(t,s),Za(o,this.renderMinorGridLines(i,r,n.minorGridLines,t,s))),o},renderMajorGridLines:function(t,e,i){return this.renderGridLines(t,e,i)},renderMinorGridLines:function(t,e,i,n,r){var o=this.radiusCallback&&this.radiusCallback(e,n,r);return this.renderGridLines(t,e,i,o)},renderGridLines:function(t,e,i,n){for(var r={stroke:{width:i.width,color:i.color,dashType:i.dashType}},o=this.box.center(),s=new yc([o.x,o.y],e),a=this.gridLinesVisual(),l=0;l<t.length;l++){var h=new uc(r);n&&(s.radius=n(t[l])),h.moveTo(s.center).lineTo(s.pointAt(t[l]+180)),a.append(h)}return a.children},gridLineAngles:function(t,e,i,n,r){var o=this,s=this.intervals(e,i,n,r),a=t.options,l=a.visible&&!1!==(a.line||{}).visible;return Js(s,(function(t){var e=o.intervalAngle(t);if(!l||90!==e)return e}))}};const Gu=$u;var Ku=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.range=function(){return{min:0,max:this.options.categories.length}},e.prototype.reflow=function(t){this.box=t,this.reflowLabels()},e.prototype.lineBox=function(){return this.box},e.prototype.reflowLabels=function(){for(var t=this.labels,e=this.options.labels,i=e.skip||0,n=e.step||1,r=new ah,o=0;o<t.length;o++){t[o].reflow(r);var s=t[o].box;t[o].reflow(this.getSlot(i+o*n).adjacentBox(0,s.width(),s.height()))}},e.prototype.intervals=function(t,e,i,n){void 0===n&&(n=!1);for(var r=this.options,o=r.categories.length/t||1,s=360/o,a=i||1,l=[],h=0,c=e||0;c<o;c+=a)h=r.reverse?360-c*s:c*s,h=cl(h,3)%360,n&&$s(h,n)||l.push(h);return l},e.prototype.majorIntervals=function(){return this.intervals(1)},e.prototype.minorIntervals=function(){return this.intervals(.5)},e.prototype.intervalAngle=function(t){return(360+t+this.options.startAngle)%360},e.prototype.majorAngles=function(){var t=this;return Js(this.majorIntervals(),(function(e){return t.intervalAngle(e)}))},e.prototype.createLine=function(){return[]},e.prototype.majorGridLineAngles=function(t){var e=this.options.majorGridLines;return this.gridLineAngles(t,1,e.skip,e.step)},e.prototype.minorGridLineAngles=function(t,e){var i=this.options,n=i.minorGridLines,r=i.majorGridLines,o=e?this.intervals(1,r.skip,r.step):null;return this.gridLineAngles(t,.5,n.skip,n.step,o)},e.prototype.radiusCallback=function(t,e,i){if(e.options.type!==Ho){var n=hl(360/(2*this.options.categories.length)),r=Math.cos(n)*t,o=this.majorAngles(),s=function(e){return!i&&$s(e,o)?t:r};return s}},e.prototype.createPlotBands=function(){for(var t=this.options.plotBands||[],e=this._plotbandGroup=new Cc({zIndex:-1}),i=0;i<t.length;i++){var n=t[i],r=this.plotBandSlot(n),o=this.getSlot(n.from),s=n.from-Math.floor(n.from);r.startAngle+=s*o.angle;var a=Math.ceil(n.to)-n.to;r.angle-=(a+s)*o.angle;var l=vc.current.createRing(r,{fill:{color:n.color,opacity:n.opacity},stroke:{opacity:n.opacity}});e.append(l)}this.appendVisual(e)},e.prototype.plotBandSlot=function(t){return this.getSlot(t.from,t.to-1)},e.prototype.getSlot=function(t,e){var i=this.options,n=i.justified,r=this.box,o=this.majorAngles(),s=o.length,a=360/s,l=t;i.reverse&&!n&&(l=(l+1)%s);var h=o[l=al(Math.floor(l),0,s-1)];n&&(h-=a/2)<0&&(h+=360);var c=a*(al(Math.ceil(e||l),l,s-1)-l+1);return new ch(r.center(),0,r.height()/2,h,c)},e.prototype.slot=function(t,e){var i=this.getSlot(t,e),n=i.startAngle+180,r=n+i.angle;return new Fh([i.center.x,i.center.y],{startAngle:n,endAngle:r,radiusX:i.radius,radiusY:i.radius})},e.prototype.pointCategoryIndex=function(t){for(var e=this.options.categories.length,i=null,n=0;n<e;n++){if(this.getSlot(n).containsPoint(t)){i=n;break}}return i},e}(wu);vl(Ku,{startAngle:90,labels:{margin:Is(10)},majorGridLines:{visible:!0},justified:!0}),As(Ku.prototype,Gu);const Xu=Ku;var Yu=function(t){function e(e,i){t.call(this,e,i);var n=this.options;n.minorUnit=n.minorUnit||n.majorUnit/2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDivisions=function(t){return Nu.prototype.getDivisions.call(this,t)-1},e.prototype.reflow=function(t){this.box=t,this.reflowLabels()},e.prototype.reflowLabels=function(){for(var t=this,e=t.options,i=t.labels,n=t.options.labels,r=n.skip||0,o=n.step||1,s=new ah,a=this.intervals(e.majorUnit,r,o),l=0;l<i.length;l++){i[l].reflow(s);var h=i[l].box;i[l].reflow(this.getSlot(a[l]).adjacentBox(0,h.width(),h.height()))}},e.prototype.lineBox=function(){return this.box},e.prototype.intervals=function(t,e,i,n){void 0===n&&(n=!1);for(var r=this.options.min,o=this.getDivisions(t),s=[],a=i||1,l=e||0;l<o;l+=a){var h=(360+r+l*t)%360;n&&$s(h,n)||s.push(h)}return s},e.prototype.majorIntervals=function(){return this.intervals(this.options.majorUnit)},e.prototype.minorIntervals=function(){return this.intervals(this.options.minorUnit)},e.prototype.intervalAngle=function(t){return(540-t-this.options.startAngle)%360},e.prototype.createLine=function(){return[]},e.prototype.majorGridLineAngles=function(t){var e=this.options.majorGridLines;return this.gridLineAngles(t,this.options.majorUnit,e.skip,e.step)},e.prototype.minorGridLineAngles=function(t,e){var i=this.options,n=i.minorGridLines,r=i.majorGridLines,o=e?this.intervals(i.majorUnit,r.skip,r.step):null;return this.gridLineAngles(t,i.minorUnit,n.skip,n.step,o)},e.prototype.plotBandSlot=function(t){return this.getSlot(t.from,t.to)},e.prototype.getSlot=function(t,e){var i=this.options,n=this.box,r=i.startAngle,o=al(t,i.min,i.max),s=al(e||o,o,i.max);if(i.reverse&&(o*=-1,s*=-1),(s=(540-s-r)%360)<(o=(540-o-r)%360)){var a=o;o=s,s=a}return new ch(n.center(),0,n.height()/2,o,s-o)},e.prototype.slot=function(t,e){void 0===e&&(e=t);var i,n,r=this.options,o=360-r.startAngle,s=this.getSlot(t,e),a=Math.min(t,e),l=Math.max(t,e);return r.reverse?(i=a,n=l):(i=360-l,n=360-a),i=(i+o)%360,n=(n+o)%360,new Fh([s.center.x,s.center.y],{startAngle:i,endAngle:n,radiusX:s.radius,radiusY:s.radius})},e.prototype.getValue=function(t){var e=this.options,i=this.box.center(),n=t.x-i.x,r=t.y-i.y,o=Math.round(tl(Math.atan2(r,n))),s=e.startAngle;return e.reverse||(o*=-1,s*=-1),(o+s+360)%360},e.prototype.valueRange=function(){return{min:0,max:2*Math.PI}},e}(jp);vl(Yu,{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:Is(10)},majorGridLines:{color:Wo,visible:!0,width:1},minorGridLines:{color:"#aaa"}}),As(Yu.prototype,Gu,{createPlotBands:Xu.prototype.createPlotBands,majorAngles:Xu.prototype.majorAngles,range:Nu.prototype.range,labelsCount:Nu.prototype.labelsCount,createAxisLabel:Nu.prototype.createAxisLabel});const Zu=Yu;var Ju={options:{majorGridLines:{visible:!0}},createPlotBands:function(){var t=this.options,e=t.majorGridLines.type,i=t.plotBands;void 0===i&&(i=[]);for(var n=this.plotArea.polarAxis,r=n.majorAngles(),o=n.box.center(),s=this._plotbandGroup=new Cc({zIndex:-1}),a=0;a<i.length;a++){var l=i[a],h={fill:{color:l.color,opacity:l.opacity},stroke:{opacity:l.opacity}},c=this.getSlot(l.from,l.to,!0),p=new ch(o,o.y-c.y2,o.y-c.y1,0,360),u=void 0;u=e===Ho?vc.current.createRing(p,h):uc.fromPoints(this.plotBandPoints(p,r),h).close(),s.append(u)}this.appendVisual(s)},plotBandPoints:function(t,e){for(var i=[],n=[],r=[t.center.x,t.center.y],o=new yc(r,t.innerRadius),s=new yc(r,t.radius),a=0;a<e.length;a++)i.push(o.pointAt(e[a]+180)),n.push(s.pointAt(e[a]+180));return i.reverse(),i.push(i[0]),n.push(n[0]),n.concat(i)},createGridLines:function(t){var e=this.options,i=this.radarMajorGridLinePositions(),n=t.majorAngles(),r=t.box.center(),o=[];if(e.majorGridLines.visible&&(o=this.renderGridLines(r,i,n,e.majorGridLines)),e.minorGridLines.visible){var s=this.radarMinorGridLinePositions();Za(o,this.renderGridLines(r,s,n,e.minorGridLines))}return o},renderGridLines:function(t,e,i,n){var r={stroke:{width:n.width,color:n.color,dashType:n.dashType}},o=n.skip;void 0===o&&(o=0);var s=n.step;void 0===s&&(s=0);for(var a=this.gridLinesVisual(),l=o;l<e.length;l+=s){var h=t.y-e[l];if(h>0){var c=new yc([t.x,t.y],h);if(n.type===Ho)a.append(new _c(c,r));else{for(var p=new uc(r),u=0;u<i.length;u++)p.lineTo(c.pointAt(i[u]+180));p.close(),a.append(p)}}}return a.children},getValue:function(t){var e=this.lineBox(),i=this.plotArea.polarAxis,n=i.majorAngles(),r=i.box.center(),o=t.distanceTo(r),s=o;if(this.options.majorGridLines.type!==Ho&&n.length>1){var a=t.x-r.x,l=t.y-r.y,h=(tl(Math.atan2(l,a))+540)%360;n.sort((function(t,e){return Qu(t,h)-Qu(e,h)}));var c=90-Qu(n[0],n[1])/2,p=180-Qu(h,n[0])-c;s=o*(Math.sin(hl(p))/Math.sin(hl(c)))}return this.axisType().prototype.getValue.call(this,new $l(e.x1,e.y2-s))}};function Qu(t,e){return 180-Math.abs(Math.abs(t-e)-180)}const td=Ju;var ed=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radarMajorGridLinePositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.radarMinorGridLinePositions=function(){var t=this.options,e=0;return t.majorGridLines.visible&&(e=t.majorUnit),this.getTickPositions(t.minorUnit,e)},e.prototype.axisType=function(){return t},e}(Nu);As(ed.prototype,td);const id=ed;var nd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radarMajorGridLinePositions=function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),this.options.majorGridLines),t},e.prototype.radarMinorGridLinePositions=function(){var t=[];return this.traverseMinorTicksPositions((function(e){t.push(e)}),this.options.minorGridLines),t},e.prototype.axisType=function(){return t},e}(qu);As(nd.prototype,td);const rd=nd;var od=function(t){function e(e){t.call(this),this.closed=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.process=function(t){var e=t.slice(0),i=[],n=this.closed,r=e.length;if(r>2&&(this.removeDuplicates(0,e),r=e.length),r<2||2===r&&e[0].equals(e[1]))return i;var o,s,a=e[0],l=e[1],h=e[2];for(i.push(new tc(a));a.equals(e[r-1]);)n=!0,e.pop(),r--;if(2===r){var c=this.tangent(a,l,fs,vs);return sl(i).controlOut(this.firstControlPoint(c,a,l,fs,vs)),i.push(new tc(l,this.secondControlPoint(c,a,l,fs,vs))),i}if(n){a=e[r-1],l=e[0],h=e[1];var p=this.controlPoints(a,l,h);o=p[1],s=p[0]}else{var u=this.tangent(a,l,fs,vs);o=this.firstControlPoint(u,a,l,fs,vs)}for(var d=o,f=0;f<=r-3;f++)if(this.removeDuplicates(f,e),f+3<=(r=e.length)){a=e[f],l=e[f+1],h=e[f+2];var v=this.controlPoints(a,l,h);sl(i).controlOut(d),d=v[1];var m=v[0];i.push(new tc(l,m))}if(n){a=e[r-2],l=e[r-1],h=e[0];var g=this.controlPoints(a,l,h);sl(i).controlOut(d),i.push(new tc(l,g[0])),sl(i).controlOut(g[1]),i.push(new tc(h,s))}else{var y=this.tangent(l,h,fs,vs);sl(i).controlOut(d),i.push(new tc(h,this.secondControlPoint(y,l,h,fs,vs)))}return i},e.prototype.removeDuplicates=function(t,e){for(;e[t+1]&&(e[t].equals(e[t+1])||e[t+1].equals(e[t+2]));)e.splice(t+1,1)},e.prototype.invertAxis=function(t,e,i){var n=!1;if(t.x===e.x)n=!0;else if(e.x===i.x)(e.y<i.y&&t.y<=e.y||i.y<e.y&&e.y<=t.y)&&(n=!0);else{var r=this.lineFunction(t,e),o=this.calculateFunction(r,i.x);t.y<=e.y&&i.y<=o||e.y<=t.y&&i.y>=o||(n=!0)}return n},e.prototype.isLine=function(t,e,i){var n=this.lineFunction(t,e),r=this.calculateFunction(n,i.x);return t.x===e.x&&e.x===i.x||cl(r,1)===cl(i.y,1)},e.prototype.lineFunction=function(t,e){var i=(e.y-t.y)/(e.x-t.x);return[t.y-i*t.x,i]},e.prototype.controlPoints=function(t,e,i){var n,r=fs,o=vs,s=!1,a=!1;if(this.isLine(t,e,i))n=this.tangent(t,e,fs,vs);else{var l={x:this.isMonotonicByField(t,e,i,fs),y:this.isMonotonicByField(t,e,i,vs)};if(l.x&&l.y)n=this.tangent(t,i,fs,vs),s=!0;else if(this.invertAxis(t,e,i)&&(r=vs,o=fs),l[r])n=0;else n=.01*(i[o]<t[o]&&t[o]<=e[o]||t[o]<i[o]&&e[o]<=t[o]?sd((i[o]-t[o])*(e[r]-t[r])):-sd((i[r]-t[r])*(e[o]-t[o]))),a=!0}var h=this.secondControlPoint(n,t,e,r,o);if(a){var c=r;r=o,o=c}var p=this.firstControlPoint(n,e,i,r,o);return s&&(this.restrictControlPoint(t,e,h,n),this.restrictControlPoint(e,i,p,n)),[h,p]},e.prototype.restrictControlPoint=function(t,e,i,n){t.y<e.y?e.y<i.y?(i.x=t.x+(e.y-t.y)/n,i.y=e.y):i.y<t.y&&(i.x=e.x-(e.y-t.y)/n,i.y=t.y):i.y<e.y?(i.x=t.x-(t.y-e.y)/n,i.y=e.y):t.y<i.y&&(i.x=e.x+(t.y-e.y)/n,i.y=t.y)},e.prototype.tangent=function(t,e,i,n){var r,o=e[i]-t[i],s=e[n]-t[n];return r=0===o?0:s/o,r},e.prototype.isMonotonicByField=function(t,e,i,n){return i[n]>e[n]&&e[n]>t[n]||i[n]<e[n]&&e[n]<t[n]},e.prototype.firstControlPoint=function(t,e,i,n,r){var o=e[n],s=.333*(i[n]-o);return this.point(o+s,e[r]+s*t,n,r)},e.prototype.secondControlPoint=function(t,e,i,n,r){var o=e[n],s=i[n],a=.333*(s-o);return this.point(s-a,i[r]-a*t,n,r)},e.prototype.point=function(t,e,i,n){var r=new th;return r[i]=t,r[n]=e,r},e.prototype.calculateFunction=function(t,e){for(var i=t.length,n=0,r=0;r<i;r++)n+=Math.pow(e,r)*t[r];return n},e}(na);function sd(t){return t<=0?-1:1}const ad=od;var ld=function(t){function e(e){t.call(this),this._axis=e,this.options=e.options}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.value=function(t){var e=this._axis,i=e.getCategory?e.getCategory(t):e.getValue(t);return i},e.prototype.slot=function(t,e,i){return void 0===i&&(i=!0),this._axis.slot(t,e,i)},e.prototype.range=function(){return this._axis.range()},e.prototype.valueRange=function(){return this._axis.valueRange()},e}(na);const hd=ld;function cd(t,e){for(var i=0;i<e.length;i++)if(e[i].options.name===t)return e[i].prepareUserOptions(),new hd(e[i])}var pd=function(t){this.visual=t.visual,this.chartsVisual=t.chartContainer.visual,this._pane=t};pd.prototype.findAxisByName=function(t){return cd(t,this._pane.axes)};const ud=pd;var dd=function(t){function e(e){t.call(this),this._plotArea=e,this.visual=e.visual,this.backgroundVisual=e._bgVisual}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(na);const fd=dd;function vd(t){for(var e=t.length,i=0,n=0;n<e;n++){_s(t[n])&&i++}return i}var md={min:function(t){for(var e=t.length,i=es,n=0;n<e;n++){var r=t[n];_s(r)&&(i=Math.min(i,r))}return i===es?t[0]:i},max:function(t){for(var e=t.length,i=is,n=0;n<e;n++){var r=t[n];_s(r)&&(i=Math.max(i,r))}return i===is?t[0]:i},sum:function(t){for(var e=t.length,i=0,n=0;n<e;n++){var r=t[n];_s(r)&&(i+=r)}return i},sumOrNull:function(t){var e=null;return vd(t)&&(e=md.sum(t)),e},count:function(t){for(var e=t.length,i=0,n=0;n<e;n++){var r=t[n];null!==r&&Qa(r)&&i++}return i},avg:function(t){var e=vd(t),i=t[0];return e>0&&(i=md.sum(t)/e),i},first:function(t){for(var e=t.length,i=0;i<e;i++){var n=t[i];if(null!==n&&Qa(n))return n}return t[0]}};const gd=md;function yd(t,e){return null===e?e:Vs(t)(e)}var bd=function(t){function e(){t.call(this),this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e,i){var n=this;void 0===e&&(e=[ps]),void 0===i&&(i={});for(var r=0;r<t.length;r++){var o=t[r];n._valueFields[o]=e,n._otherFields[o]=i,n._nullValue[o]=n._makeValue(e,null),n._undefinedValue[o]=n._makeValue(e,void 0)}},e.prototype.canonicalFields=function(t){return this.valueFields(t).concat(this.otherFields(t))},e.prototype.valueFields=function(t){return this._valueFields[t.type]||[ps]},e.prototype.otherFields=function(t){return this._otherFields[t.type]||[ps]},e.prototype.bindPoint=function(t,e,i){var n,r,o=t.data,s=Qa(i)?i:o[e],a={valueFields:{value:s}},l=this.valueFields(t),h=this._otherFields[t.type];if(null===s)r=this._nullValue[t.type];else if(Qa(s)){if(Array.isArray(s)){var c=s.slice(l.length);r=this._bindFromArray(s,l),n=this._bindFromArray(c,h)}else if("object"==typeof s){var p=this.sourceFields(t,l),u=this.sourceFields(t,h);r=this._bindFromObject(s,l,p),n=this._bindFromObject(s,h,u)}}else r=this._undefinedValue[t.type];return Qa(r)&&(1===l.length?a.valueFields.value=r[l[0]]:a.valueFields=r),a.fields=n||{},a},e.prototype._makeValue=function(t,e){for(var i={},n=t.length,r=0;r<n;r++){i[t[r]]=e}return i},e.prototype._bindFromArray=function(t,e){var i={};if(e)for(var n=Math.min(e.length,t.length),r=0;r<n;r++)i[e[r]]=t[r];return i},e.prototype._bindFromObject=function(t,e,i){void 0===i&&(i=e);var n={};if(e)for(var r=e.length,o=0;o<r;o++){var s=e[o],a=i[o];null!==a&&(n[s]=yd(a,t))}return n},e.prototype.sourceFields=function(t,e){var i=[];if(e)for(var n=e.length,r=0;r<n;r++){var o=e[r],s=o===ps?"field":o+"Field";i.push(null!==t[s]?t[s]||o:null)}return i},e}(na);bd.current=new bd;const wd=bd;var xd=/percent(?:\w*)\((\d+)\)/,_d=new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),kd=function(t){function e(e,i,n){t.call(this),this.initGlobalRanges(e,i,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initGlobalRanges=function(t,e,i){var n=e.data,r=_d.exec(t);if(r){this.valueGetter=this.createValueGetter(e,i);var o=this.getAverage(n),s=this.getStandardDeviation(n,o,!1),a=r[1]?parseFloat(r[1]):1,l={low:o.value-s*a,high:o.value+s*a};this.globalRange=function(){return l}}else if(t.indexOf&&t.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(e,i);var h=this.getStandardError(n,this.getAverage(n));this.globalRange=function(t){return{low:t-h,high:t+h}}}},e.prototype.createValueGetter=function(t,e){var i,n=t.data,r=wd.current,o=r.valueFields(t),s=Qa(n[0])?n[0]:{};if(ms(s))i=Vs("["+(e?o.indexOf(e):0)+"]");else if(_s(s))i=Vs();else if(typeof s===rs){i=Vs(r.sourceFields(t,o)[o.indexOf(e)])}return i},e.prototype.getErrorRange=function(t,e){var i,n,r;if(!Qa(e))return null;if(this.globalRange)return this.globalRange(t);if(ms(e))i=t-e[0],n=t+e[1];else if(_s(r=parseFloat(e)))i=t-r,n=t+r;else{if(!(r=xd.exec(e)))throw new Error("Invalid ErrorBar value: "+e);var o=t*(parseFloat(r[1])/100);i=t-Math.abs(o),n=t+Math.abs(o)}return{low:i,high:n}},e.prototype.getStandardError=function(t,e){return this.getStandardDeviation(t,e,!0)/Math.sqrt(e.count)},e.prototype.getStandardDeviation=function(t,e,i){for(var n=t.length,r=i?e.count-1:e.count,o=0,s=0;s<n;s++){var a=this.valueGetter(t[s]);_s(a)&&(o+=Math.pow(a-e.value,2))}return Math.sqrt(o/r)},e.prototype.getAverage=function(t){for(var e=t.length,i=0,n=0,r=0;r<e;r++){var o=this.valueGetter(t[r]);_s(o)&&(i+=o,n++)}return{value:i/n,count:n}},e}(na);const Sd=kd;var Cd=ta.browser||{},Ed=600,Td="fadeIn",Ad=.8,Md=Cd.msie?.001:0,Od="errorLow",Dd="errorHigh",Pd="zero",Rd="interpolate",Id="above",zd="below",Ld="smooth",Bd="step",Nd="area",jd="bar",Fd="boxPlot",Vd="bubble",Hd="bullet",Wd="candlestick",Ud="column",qd="donut",$d="funnel",Gd="heatmap",Kd="horizontalWaterfall",Xd="line",Yd="ohlc",Zd="pie",Jd="polarArea",Qd="polarLine",tf="polarScatter",ef="radarArea",nf="radarColumn",rf="radarLine",of="rangeArea",sf="rangeBar",af="rangeColumn",lf="scatter",hf="scatterLine",cf="verticalArea",pf="verticalBoxPlot",uf="verticalBullet",df="verticalLine",ff="verticalRangeArea",vf="waterfall",mf=[jd,Ud,Yd,Wd,Fd,pf,Hd,af,sf,vf,Kd],gf="seriesHover",yf="plotAreaHover",bf="plotAreaLeave",wf="drag",xf="dragEnd",_f="dragStart",kf="zoomStart",Sf="zoom",Cf="zoomEnd",Ef="selectStart",Tf="select",Af="selectEnd",Mf="showTooltip",Of="hideTooltip",Df="log",Pf="category",Rf="insideEnd",If="outsideEnd",zf="DOMMouseScroll mousewheel",Lf=function(t){function e(e,i,n,r,o,s){t.call(this,s),this.low=e,this.high=i,this.isVertical=n,this.chart=r,this.series=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e,i=this.options.endCaps,n=this.isVertical,r=this.getAxis().getSlot(this.low,this.high),o=t.center(),s=this.getCapsWidth(t,n),a=n?o.x:o.y,l=a-s,h=a+s;n?(e=[new $l(o.x,r.y1),new $l(o.x,r.y2)],i&&e.push(new $l(l,r.y1),new $l(h,r.y1),new $l(l,r.y2),new $l(h,r.y2)),this.box=new ah(l,r.y1,h,r.y2)):(e=[new $l(r.x1,o.y),new $l(r.x2,o.y)],i&&e.push(new $l(r.x1,l),new $l(r.x1,h),new $l(r.x2,l),new $l(r.x2,h)),this.box=new ah(r.x1,l,r.x2,h)),this.linePoints=e},e.prototype.getCapsWidth=function(t,e){var i=e?t.width():t.height();return Math.min(Math.floor(i/2),4)||4},e.prototype.createVisual=function(){var t=this,e=this.options,i=e.visual;i?this.visual=i({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:e.endCaps,color:e.color,line:e.line},createVisual:function(){t.createDefaultVisual();var e=t.visual;return delete t.visual,e}}):this.createDefaultVisual()},e.prototype.createDefaultVisual=function(){var e=this.options,i=this.linePoints,n={stroke:{color:e.color,width:e.line.width,dashType:e.line.dashType}};t.prototype.createVisual.call(this);for(var r=0;r<i.length;r+=2){var o=new uc(n).moveTo(i[r].x,i[r].y).lineTo(i[r+1].x,i[r+1].y);ws(o),this.visual.append(o)}},e}(Bc);vl(Lf,{animation:{type:Td,delay:Ed},endCaps:!0,line:{width:2},zIndex:1});const Bf=Lf;var Nf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAxis=function(){return this.chart.seriesValueAxis(this.series)},e}(Bf);const jf=Nf;function Ff(t,e,i,n){void 0===i&&(i={}),void 0===n&&(n=!1);var r=i.defaults=i.defaults||{},o=i.depth=i.depth||0,s=!1;if(i.excluded=i.excluded||[],o>5)return null;for(var a in t)if(!$s(a,i.excluded)&&t.hasOwnProperty(a)){var l=t[a];Cs(l)?(s=!0,n||(t[a]=ul(l(e),r[a]))):Ms(l)&&(n||(i.defaults=r[a]),i.depth++,s=Ff(l,e,i,n)||s,i.depth--)}return s}function Vf(t){for(var e=t.length,i=0,n=0;n<e;n++)i=Math.max(i,t[n].data.length);return i}var Hf=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this.categoryAxis=e.seriesCategoryAxis(i.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=As({},n,{vertical:!this.options.invertAxes},t)}return i},e.prototype.plotValue=function(t){if(!t)return 0;if(this.options.isStacked100&&_s(t.value)){for(var e=t.categoryIx,i=this.categoryPoints[e],n=[],r=0,o=0;o<i.length;o++){var s=i[o];if(s){var a=t.series.stack,l=s.series.stack;if(a&&l&&a.group!==l.group)continue;_s(s.value)&&(r+=Math.abs(s.value),n.push(Math.abs(s.value)))}}if(r>0)return t.value/r}return t.value},e.prototype.plotRange=function(t,e){void 0===e&&(e=0);var i=this.categoryPoints[t.categoryIx];if(this.options.isStacked){for(var n=this.plotValue(t),r=n>=0,o=e,s=!1,a=0;a<i.length;a++){var l=i[a];if(t===l)break;var h=t.series.stack,c=l.series.stack;if(h&&c){if(typeof h===hs&&h!==c)continue;if(h.group&&h.group!==c.group)continue}var p=this.plotValue(l);(p>=0&&r||p<0&&!r)&&(o+=p,n+=p,s=!0,this.options.isStacked100&&(n=Math.min(n,1)))}return s&&(o-=e),[o,n]}var u=t.series,d=this.seriesValueAxis(u),f=this.categoryAxisCrossingValue(d);return[f,Ss(t.value)?t.value:f]},e.prototype.stackLimits=function(t,e){for(var i=es,n=is,r=0;r<this.categoryPoints.length;r++){var o=this.categoryPoints[r];if(o)for(var s=0;s<o.length;s++){var a=o[s];if(a&&(a.series.stack===e||a.series.axis===t)){var l=this.plotRange(a,0)[1];Qa(l)&&isFinite(l)&&(n=Math.max(n,l),i=Math.min(i,l))}}}return{min:i,max:n}},e.prototype.updateStackRange=function(){var t=this,e=this.options,i=e.isStacked,n=e.series,r={};if(i)for(var o=0;o<n.length;o++){var s=n[o],a=s.axis,l=a+s.stack,h=r[l];if(!h){h=t.stackLimits(a,s.stack);var c=t.errorTotals;c&&(c.negative.length&&(h.min=Math.min(h.min,ml(c.negative).min)),c.positive.length&&(h.max=Math.max(h.max,ml(c.positive).max))),h.min!==es||h.max!==is?r[l]=h:h=null}h&&(t.valueAxisRanges[a]=h)}},e.prototype.addErrorBar=function(t,e,i){var n,r=t.value,o=t.series,s=t.seriesIx,a=t.options.errorBars,l=e.fields.errorLow,h=e.fields.errorHigh;_s(l)&&_s(h)?n={low:l,high:h}:a&&Qa(a.value)&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[s]=this.seriesErrorRanges[s]||new Sd(a.value,o,ps),n=this.seriesErrorRanges[s].getErrorRange(r,a.value)),n&&(t.low=n.low,t.high=n.high,this.addPointErrorBar(t,i))},e.prototype.addPointErrorBar=function(t,e){var i=!this.options.invertAxes,n=t.options.errorBars,r=t.series,o=t.low,s=t.high;if(this.options.isStacked){var a=this.stackedErrorRange(t,e);o=a.low,s=a.high}else{var l={categoryIx:e,series:r};this.updateRange({value:o},l),this.updateRange({value:s},l)}var h=new jf(o,s,i,this,r,n);t.errorBars=[h],t.append(h)},e.prototype.stackedErrorRange=function(t,e){var i=this.plotRange(t,0)[1]-t.value,n=t.low+i,r=t.high+i;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},n<0&&(this.errorTotals.negative[e]=Math.min(this.errorTotals.negative[e]||0,n)),r>0&&(this.errorTotals.positive[e]=Math.max(this.errorTotals.positive[e]||0,r)),{low:n,high:r}},e.prototype.addValue=function(t,e){var i=e.categoryIx,n=e.series,r=e.seriesIx,o=this.categoryPoints[i];o||(this.categoryPoints[i]=o=[]);var s=this.seriesPoints[r];s||(this.seriesPoints[r]=s=[]);var a=this.createPoint(t,e);a&&(Object.assign(a,e),a.owner=this,a.noteText=t.fields.noteText,Qa(a.dataItem)||(a.dataItem=n.data[i]),this.addErrorBar(a,t,i)),this.points.push(a),s.push(a),o.push(a),this.updateRange(t.valueFields,e)},e.prototype.evalPointOptions=function(t,e,i,n,r,o){var s={defaults:r._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]},a=this._evalSeries[o];Qa(a)||(this._evalSeries[o]=a=Ff(t,{},s,!0));var l=t;return a&&Ff(l=As({},l),{value:e,category:i,index:n,series:r,dataItem:r.data[n]},s),l},e.prototype.updateRange=function(t,e){var i=e.series.axis,n=t.value,r=this.valueAxisRanges[i];isFinite(n)&&null!==n&&((r=this.valueAxisRanges[i]=r||{min:es,max:is}).min=Math.min(r.min,n),r.max=Math.max(r.max,n))},e.prototype.seriesValueAxis=function(t){var e=this.plotArea,i=t.axis,n=i?e.namedValueAxes[i]:e.valueAxis;if(!n)throw new Error("Unable to locate value axis with name "+i);return n},e.prototype.reflow=function(t){var e=this,i=this.categorySlots=[],n=this.points,r=this.categoryAxis,o=0;this.traverseDataPoints((function(t,s){var a=s.categoryIx,l=s.series,h=e.seriesValueAxis(l),c=n[o++],p=i[a];if(p||(i[a]=p=e.categorySlot(r,a,h)),c){var u=e.plotRange(c,h.startValue()),d=e.valueSlot(h,u);if(d){var f=e.pointSlot(p,d);c.aboveAxis=e.aboveAxis(c,h),c.stackValue=u[1],e.options.isStacked100&&(c.percentage=e.plotValue(c)),e.reflowPoint(c,f)}else c.visible=!1}})),this.reflowCategories(i),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=t},e.prototype.valueSlot=function(t,e){return t.getSlot(e[0],e[1],!this.options.clip)},e.prototype.limitPoints=function(){for(var t=this.categoryPoints,e=t[0].concat(sl(t)),i=0;i<e.length;i++)e[i]&&this.limitPoint(e[i])},e.prototype.limitPoint=function(t){var e=this.categoryAxis.limitSlot(t.box);e.equals(t.box)||t.reflow(e)},e.prototype.aboveAxis=function(t,e){var i=this.categoryAxisCrossingValue(e),n=t.value;return e.options.reverse?n<i:n>=i},e.prototype.categoryAxisCrossingValue=function(t){var e=this.categoryAxis,i=t.options;return[].concat(i.axisCrossingValues||i.axisCrossingValue)[e.axisIndex||0]||0},e.prototype.reflowPoint=function(t,e){t.reflow(e)},e.prototype.reflowCategories=function(){},e.prototype.pointSlot=function(t,e){var i=this.options.invertAxes,n=i?e:t,r=i?t:e;return new ah(n.x1,r.y1,n.x2,r.y2)},e.prototype.categorySlot=function(t,e){return t.getSlot(e)},e.prototype.traverseDataPoints=function(t){for(var e=this,i=this.options.series,n=Vf(i),r=i.length,o=0;o<r;o++)e._outOfRangeCallback(i[o],"_outOfRangeMinPoint",o,t);for(var s=0;s<n;s++)for(var a=0;a<r;a++){var l=i[a],h=e.categoryAxis.categoryAt(s);t(e._bindPoint(l,a,s),{category:h,categoryIx:s,categoriesCount:n,series:l,seriesIx:a})}for(var c=0;c<r;c++)e._outOfRangeCallback(i[c],"_outOfRangeMaxPoint",c,t)},e.prototype._outOfRangeCallback=function(t,e,i,n){var r=t[e];if(r){var o=r.categoryIx;n(this._bindPoint(t,i,o,r.item),{category:r.category,categoryIx:o,series:t,seriesIx:i,dataItem:r.item})}},e.prototype._bindPoint=function(t,e,i,n){this._bindCache||(this._bindCache=[]);var r=this._bindCache[e];r||(r=this._bindCache[e]=[]);var o=r[i];return o||(o=r[i]=wd.current.bindPoint(t,i,n)),o},e.prototype.formatPointValue=function(t,e){return null===t.value?"":this.chartService.format.auto(e,t.value)},e.prototype.pointValue=function(t){return t.valueFields.value},e}(Bc);vl(Hf,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});const Wf=Hf;var Uf={click:function(t,e){return t.trigger("seriesClick",this.eventArgs(e))},hover:function(t,e){return t.trigger(gf,this.eventArgs(e))},over:function(t,e){return t.trigger("seriesOver",this.eventArgs(e))},out:function(t,e){return t.trigger("seriesLeave",this.eventArgs(e))},eventArgs:function(t){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:rl(t),originalEvent:t,point:this}}};const qf=Uf;var $f={createNote:function(){var t=this.options.notes,e=this.noteText||t.label.text;!1!==t.visible&&Qa(e)&&null!==e&&(this.note=new xp({value:this.value,text:e,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}};const Gf=$f;var Kf=function(t){function e(e,i){t.call(this),this.value=e,this.options=i,this.aboveAxis=ul(this.options.aboveAxis,!0),this.tooltipTracking=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options,e=t.markers,i=t.labels;if(!this._rendered){if(this._rendered=!0,e.visible&&e.size&&(this.marker=this.createMarker(),this.append(this.marker)),i.visible){var n=Ns(i),r=this.pointData(),o=this.value;n?o=n(r):i.format&&(o=this.formatValue(i.format)),this.label=new vp(o,As({align:qo,vAlign:qo,margin:{left:5,right:5},zIndex:ul(i.zIndex,this.series.zIndex)},i),r),this.append(this.label)}this.createNote(),this.errorBar&&this.append(this.errorBar)}},e.prototype.markerBorder=function(){var t=this.options.markers,e=t.background,i=As({color:this.color},t.border);return Qa(i.color)||(i.color=new Il(e).brightness(Ad).toHex()),i},e.prototype.createVisual=function(){},e.prototype.createMarker=function(){var t=this.options.markers;return new Vc({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:this.series.opacity||t.opacity,zIndex:ul(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})},e.prototype.markerBox=function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},e.prototype.reflow=function(t){var e=this.options,i=this.aboveAxis,n=e.vertical;this.render(),this.box=t;var r=t.clone();if(n?i?r.y1-=r.height():r.y2+=r.height():i?r.x1+=r.width():r.x2-=r.width(),this._childBox=r,this.marker&&this.marker.reflow(r),this.reflowLabel(r),this.errorBars)for(var o=0;o<this.errorBars.length;o++)this.errorBars[o].reflow(r);if(this.note){var s=this.markerBox();if(!e.markers.visible||!e.markers.size){var a=s.center();s=new ah(a.x,a.y,a.x,a.y)}this.note.reflow(s)}},e.prototype.reflowLabel=function(t){var e=this.options,i=this.label,n=e.labels.position;i&&(n=(n=n===Id?cs:n)===zd?Uo:n,i.reflow(t),i.box.alignTo(this.markerBox(),n),i.reflow(i.box))},e.prototype.createHighlight=function(){var t=this.options.highlight.markers,e=this.markerBorder().color,i=this.options.markers,n=i.size+(i.border.width||0)+(t.border.width||0),r=new Vc({type:i.type,width:n,height:n,rotation:i.rotation,background:t.color||e,border:{color:t.border.color,width:t.border.width,opacity:ul(t.border.opacity,1)},opacity:ul(t.opacity,1)});return r.reflow(this._childBox),r.getElement()},e.prototype.highlightVisual=function(){return(this.marker||{}).visual},e.prototype.highlightVisualArgs=function(){var t,e,i=this.marker;if(i)e=i.paddingBox.toRect(),t=i.visual;else{var n=this.options.markers.size,r=n/2,o=this.box.center();e=new rh([o.x-r,o.y-r],[n,n])}return{options:this.options,rect:e,visual:t}},e.prototype.tooltipAnchor=function(){var t=this.markerBox(),e=this.owner.pane.clipBox();if(!e||e.overlaps(t)){var i,n,r=t.x2+5;return this.aboveAxis?(i=t.y1,n=Uo):(i=t.y2,n=cs),{point:new $l(r,i),align:{horizontal:"left",vertical:n}}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.markerBox().overlaps(t)},e.prototype.unclipElements=function(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}},e}(Bc);Kf.prototype.defaults={vertical:!0,markers:{visible:!0,background:us,size:8,type:$o,border:{width:2},opacity:1},labels:{visible:!1,position:Id,margin:Is(3),padding:Is(4),animation:{type:Td,delay:Ed}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:100},errorBars:{line:{width:1}}},As(Kf.prototype,qf),As(Kf.prototype,Gf);const Xf=Kf;var Yf=function(t){function e(e,i,n){t.call(this),this.linePoints=e,this.series=i,this.seriesIx=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.points=function(){return this.toGeometryPoints(this.linePoints)},e.prototype.toGeometryPoints=function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i]&&!1!==t[i].visible&&e.push(t[i]._childBox.toRect().center());return e},e.prototype.createVisual=function(){var t=this,e=this.series.visual;e?(this.visual=e({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:function(){return t.segmentVisual(),t.visual}}),this.visual&&!Qa(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()},e.prototype.segmentVisual=function(){var t=this.options,e=this.series,i=e.color,n=e._defaults;Cs(i)&&n&&(i=n.color);var r=uc.fromPoints(this.points(),{stroke:{color:i,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});t.closed&&r.close(),this.visual=r},e.prototype.aliasFor=function(t,e){return this.parent.getNearestPoint(e.x,e.y,this.seriesIx)},e}(Bc);vl(Yf,{closed:!1});const Zf=Yf;var Jf={calculateStepPoints:function(t){for(var e=this.parent.plotArea.seriesCategoryAxis(this.series).options,i=e.justified,n=e.vertical,r=e.reverse,o=n?fs:vs,s=n?vs:fs,a=r?2:1,l=a,h=Qf(t[0],o,a,s,l),c=[h],p=1;p<t.length;p++){var u=Qf(t[p],o,a,s,l);if(h[o]!==u[o]){var d=new th;d[o]=h[o],d[s]=u[s],c.push(d,u)}h=u}return i?h!==sl(c)&&c.push(h):c.push(Qf(sl(t),o,a,s,r?1:2)),c}};function Qf(t,e,i,n,r){var o=t.box,s=new th;return s[e]=o[e+i],s[n]=o[n+r],s}const tv=Jf;var ev=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.points=function(){return this.calculateStepPoints(this.linePoints)},e}(Zf);As(ev.prototype,tv);const iv=ev;var nv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.segmentVisual=function(){var t=this.series,e=t._defaults,i=t.color;Cs(i)&&e&&(i=e.color);var n=new ad(this.options.closed).process(this.points()),r=new uc({stroke:{color:i,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});r.segments.push.apply(r.segments,n),this.visual=r},e}(Zf);const rv=nv;var ov={renderSegments:function(){var t,e=this,i=this.options,n=this.seriesPoints,r=i.series,o=n.length;this._segments=[];for(var s=0;s<o;s++){for(var a=r[s],l=e.sortPoints(n[s]),h=l.length,c=[],p=0;p<h;p++){var u=l[p];u?c.push(u):e.seriesMissingValues(a)!==Rd&&(c.length>1&&(t=e.createSegment(c,a,s,t),e._addSegment(t)),c=[])}c.length>1&&(t=e.createSegment(c,a,s,t),e._addSegment(t))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(t){this._segments.push(t),t.parent=this},sortPoints:function(t){return t},seriesMissingValues:function(t){var e=t.missingValues;return!e&&this.options.isStacked?Pd:e||Rd},getNearestPoint:function(t,e,i){for(var n,r=new $l(t,e),o=this.seriesPoints[i],s=es,a=0;a<o.length;a++){var l=o[a];if(l&&Qa(l.value)&&null!==l.value&&!1!==l.visible){var h=l.box.center().distanceTo(r);h<s&&(n=l,s=h)}}return n}};const sv=ov;var av=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this._setEnd(this.options.box.x1)},e.prototype.step=function(t){var e=this.options.box;this._setEnd(Ks(e.x1,e.x2,t))},e.prototype._setEnd=function(t){var e=this.element,i=e.segments,n=i[1].anchor(),r=i[2].anchor();e.suspend(),n.setX(t),e.resume(),r.setX(t)},e}(zc);vl(av,{duration:Ed}),Rc.current.register("clip",av);const lv=av;function hv(t){for(var e=0;e<t.length;e++)if(Qa(t[e].zIndex))return!0}var cv={createAnimation:function(){var t=this.getRoot();if(t&&!1!==(t.options||{}).transitions){var e=t.size(),i=uc.fromRect(e.toRect());this.visual.clip(i),this.animation=new lv(i,{box:e}),hv(this.options.series)&&this._setChildrenAnimation(i)}},_setChildrenAnimation:function(t){for(var e=this.animationPoints(),i=0;i<e.length;i++){var n=e[i];n&&n.visual&&Qa(n.visual.options.zIndex)&&n.visual.clip(t)}}};const pv=cv;var uv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.updateStackRange(),this.renderSegments()},e.prototype.pointType=function(){return Xf},e.prototype.createPoint=function(t,e){var i=e.categoryIx,n=e.category,r=e.series,o=e.seriesIx,s=this.seriesMissingValues(r),a=t.valueFields.value;if(!Qa(a)||null===a){if(s!==Pd)return null;a=0}var l=this.pointOptions(r,o);l=this.evalPointOptions(l,a,n,i,r,o);var h=t.fields.color||r.color;Cs(r.color)&&(h=l.color);var c=new Xf(a,l);return c.color=h,this.append(c),c},e.prototype.plotRange=function(t){var e=this.plotValue(t);if(this.options.isStacked)for(var i=t.categoryIx,n=this.categoryPoints[i],r=0;r<n.length;r++){var o=n[r];if(t===o)break;e+=this.plotValue(o),this.options.isStacked100&&(e=Math.min(e,1))}return[e,e]},e.prototype.createSegment=function(t,e,i){var n=e.style;return new(n===Bd?iv:n===Ld?rv:Zf)(t,e,i)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e.concat(this._segments)},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(Wf);As(uv.prototype,sv,pv);const dv=uv;var fv=function(t){function e(e,i,n,r,o){t.call(this,e,i,n),this.prevSegment=r,this.stackPoints=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createVisual=function(){var t=this.series,e=t._defaults,i=t.line||{},n=t.color;Cs(n)&&e&&(n=e.color),this.visual=new Cc({zIndex:t.zIndex}),this.createFill({fill:{color:n,opacity:t.opacity},stroke:null}),i.width>0&&!1!==i.visible&&this.createStroke({stroke:As({color:n,opacity:t.opacity,lineCap:"butt"},i)})},e.prototype.strokeSegments=function(){var t=this._strokeSegments;return t||(t=this._strokeSegments=this.createStrokeSegments()),t},e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.points())},e.prototype.stackSegments=function(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)},e.prototype.createStackSegments=function(t){return this.segmentsFromPoints(this.toGeometryPoints(t)).reverse()},e.prototype.segmentsFromPoints=function(t){return t.map((function(t){return new tc(t)}))},e.prototype.createStroke=function(t){var e=new uc(t);e.segments.push.apply(e.segments,this.strokeSegments()),this.visual.append(e)},e.prototype.hasStackSegment=function(){return this.prevSegment||this.stackPoints&&this.stackPoints.length},e.prototype.createFill=function(t){var e=this.strokeSegments(),i=e.slice(0),n=this.hasStackSegment();if(n){var r=this.stackSegments();Za(i,r)}var o=new uc(t);o.segments.push.apply(o.segments,i),!n&&e.length>1&&this.fillToAxes(o),this.visual.append(o)},e.prototype.fillToAxes=function(t){var e=this.parent,i=e.options.invertAxes,n=e.seriesValueAxis(this.series),r=e.categoryAxisCrossingValue(n),o=n.getSlot(r,r,!0),s=this.strokeSegments(),a=s[0].anchor(),l=sl(s).anchor(),h=i?o.x1:o.y1;i?t.lineTo(h,l.y).lineTo(h,a.y):t.lineTo(l.x,h).lineTo(a.x,h)},e}(Zf);const vv=fv;var mv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))},e.prototype.createStackSegments=function(t){return this.segmentsFromPoints(this.calculateStepPoints(t)).reverse()},e}(vv);As(mv.prototype,tv);const gv=mv;var yv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){var t=new ad(this.options.closed),e=this.points();return t.process(e)},e.prototype.createStackSegments=function(){for(var t=this.strokeSegments(),e=[],i=t.length-1;i>=0;i--){var n=t[i];e.push(new tc(n.anchor(),n.controlOut(),n.controlIn()))}return e},e}(vv);const bv=yv;var wv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i,n){var r,o,s=this.options.isStacked,a=(e.line||{}).style;s&&i>0&&n&&("gap"!==this.seriesMissingValues(e)?(o=n.linePoints,r=n):o=this._gapStackPoints(t,i,a));return new(a===Bd?gv:a===Ld?bv:vv)(t,e,i,r,o)},e.prototype.reflow=function(e){t.prototype.reflow.call(this,e);var i=this._stackPoints;if(i)for(var n=0;n<i.length;n++){var r=i[n],o=this.categoryAxis.getSlot(r.categoryIx);r.reflow(o)}},e.prototype._gapStackPoints=function(t,e,i){var n=this,r=this.seriesPoints,o=t[0].categoryIx,s=t.length;o<0&&(o=0,s--);var a=o+s,l=this.seriesOptions[0]._outOfRangeMinPoint?1:0,h=[];this._stackPoints=this._stackPoints||[];for(var c=o;c<a;c++){var p=c+l,u=e,d=void 0;do{d=r[--u][p]}while(u>0&&!d);if(d)i!==Bd&&c>o&&!r[u][p-1]&&h.push(n._previousSegmentPoint(c,p,p-1,u)),h.push(d),i!==Bd&&c+1<a&&!r[u][p+1]&&h.push(n._previousSegmentPoint(c,p,p+1,u));else{var f=n._createGapStackPoint(c);n._stackPoints.push(f),h.push(f)}}return h},e.prototype._previousSegmentPoint=function(t,e,i,n){for(var r,o=this.seriesPoints,s=n;s>0&&!r;)r=o[--s][i];return r?r=o[s][e]:(r=this._createGapStackPoint(t),this._stackPoints.push(r)),r},e.prototype._createGapStackPoint=function(t){var e=this.pointOptions({},0),i=new Xf(0,e);return i.categoryIx=t,i.series={},i},e.prototype.seriesMissingValues=function(t){return t.missingValues||Pd},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(dv);const xv=wv;var _v=function(t){function e(){t.call(this),this.axisRanges={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t){var e=this.axisRanges;for(var i in t){var n=t[i],r=e[i];e[i]=r=r||{min:es,max:is},r.min=Math.min(r.min,n.min),r.max=Math.max(r.max,n.max)}},e.prototype.reset=function(t){this.axisRanges[t]=void 0},e.prototype.query=function(t){return this.axisRanges[t]},e}(na);const kv=_v;var Sv=function(t){function e(e,i,n){t.call(this,i),this.textBox=new vp(e,this.options,n),this.append(this.textBox)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createVisual=function(){this.textBox.options.noclip=this.options.noclip},e.prototype.reflow=function(t){var e=this.options,i=e.vertical,n=e.aboveAxis,r=this.children[0],o=r.options,s=r.box,a=r.options.padding,l=t;o.align=i?qo:ts,o.vAlign=i?cs:qo,e.position===Rf?i?(o.vAlign=cs,!n&&s.height()<t.height()&&(o.vAlign=Uo)):o.align=n?as:ts:e.position===qo?(o.vAlign=qo,o.align=qo):"insideBase"===e.position?i?o.vAlign=n?Uo:cs:o.align=n?ts:as:e.position===If&&(i?l=n?new ah(t.x1,t.y1-s.height(),t.x2,t.y1):new ah(t.x1,t.y2,t.x2,t.y2+s.height()):(o.align=qo,l=n?new ah(t.x2,t.y1,t.x2+s.width(),t.y2):new ah(t.x1-s.width(),t.y1,t.x1,t.y2))),e.rotation||(i?a.left=a.right=(l.width()-r.contentBox.width())/2:a.top=a.bottom=(l.height()-r.contentBox.height())/2),r.reflow(l)},e.prototype.alignToClipBox=function(t){var e=this.options.vertical?vs:fs,i=e+"1",n=e+"2",r=this.children[0],o=this.parent.box;if(o[i]<t[i]||t[n]<o[n]){var s=r.paddingBox.clone();s[i]=Math.max(o[i],t[i]),s[n]=Math.min(o[n],t[n]),this.reflow(s)}},e}(Bc);vl(Sv,{position:If,margin:Is(3),padding:Is(4),color:Wo,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:Td,delay:Ed},zIndex:2});const Cv=Sv;function Ev(t){var e=t.overlay;return e&&e.gradient&&"none"!==e.gradient}var Tv=function(t){function e(e,i){t.call(this),this.options=i,this.color=i.color||us,this.aboveAxis=ul(this.options.aboveAxis,!0),this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},e.prototype.createLabel=function(){var t=this.options,e=t.labels;if(e.visible){var i,n=this.pointData(),r=Ns(e);i=r?r(n):this.formatValue(e.format),this.label=new Cv(i,As({vertical:t.vertical},e),n),this.append(this.label)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.reflow=function(t){this.render();var e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(var i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(t)},e.prototype.createVisual=function(){var e=this,i=this.box,n=this.options,r=n.visual;if(!1!==this.visible)if(t.prototype.createVisual.call(this),r){var o=this.rectVisual=r({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:i.toRect(),createVisual:function(){var t=new Cc;return e.createRect(t),t},options:n});o&&this.visual.append(o)}else i.width()>0&&i.height()>0&&this.createRect(this.visual)},e.prototype.createRect=function(t){var e=this.options,i=e.border,n=Qa(i.opacity)?i.opacity:e.opacity,r=this.box.toRect();r.size.width=Math.round(r.size.width);var o=this.rectVisual=uc.fromRect(r,{fill:{color:this.color,opacity:e.opacity},stroke:{color:this.getBorderColor(),width:i.width,opacity:n,dashType:i.dashType}}),s=this.box.width(),a=this.box.height();if((e.vertical?s:a)>6&&(ws(o),(s<1||a<1)&&(o.options.stroke.lineJoin="round")),t.append(o),Ev(e)){var l=this.createGradientOverlay(o,{baseColor:this.color},As({end:e.vertical?void 0:[0,1]},e.overlay));t.append(l)}},e.prototype.createHighlight=function(t){return ws(uc.fromRect(this.box.toRect(),t))},e.prototype.highlightVisual=function(){return this.rectVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},e.prototype.getBorderColor=function(){var t=this.color,e=this.options.border,i=e._brightness||Ad,n=e.color;return Qa(n)||(n=new Il(t).brightness(i).toHex()),n},e.prototype.tooltipAnchor=function(){var t,e,i=this,n=i.options,r=i.box,o=i.aboveAxis,s=this.owner.pane.clipBox()||r,a=ts,l=cs;if(n.vertical)t=Math.min(r.x2,s.x2)+5,o?e=Math.max(r.y1,s.y1):(e=Math.min(r.y2,s.y2),l=Uo);else{var h=Math.max(r.x1,s.x1),c=Math.min(r.x2,s.x2);n.isStacked?(l=Uo,o?(a=as,t=c):t=h,e=Math.max(r.y1,s.y1)-5):(o?t=c+5:(t=h-5,a=as),e=Math.max(r.y1,s.y1))}return{point:new $l(t,e),align:{horizontal:a,vertical:l}}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}},e}(Bc);As(Tv.prototype,qf),As(Tv.prototype,Gf),Tv.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}}};const Av=Tv;function Mv(t,e){t.forEach(e)}function Ov(t,e){for(var i=t.length,n=i-1;n>=0;n--)e(t[n],n-i-1)}var Dv=function(t){function e(e){t.call(this,e),this.forEach=e.rtl?Ov:Mv}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=e.vertical,n=e.gap,r=e.spacing,o=this.children,s=o.length,a=i?vs:fs,l=s+n+r*(s-1),h=(i?t.height():t.width())/l,c=t[a+1]+h*(n/2);this.forEach(o,(function(e,i){var n=(e.box||t).clone();n[a+1]=c,n[a+2]=c+h,e.reflow(n),i<s-1&&(c+=h*r),c+=h}))},e}(Bc);vl(Dv,{vertical:!1,gap:0,spacing:0});const Pv=Dv;var Rv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){for(var e=this.options.vertical?fs:vs,i=this.children,n=i.length,r=this.box=new ah,o=0;o<n;o++){var s=i[o];if(!1!==s.visible){var a=s.box.clone();a.snapTo(t,e),0===o&&(r=this.box=a.clone()),s.reflow(a),r.wrap(a)}}},e}(Bc);vl(Rv,{vertical:!0});const Iv=Rv;var zv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.updateStackRange()},e.prototype.pointType=function(){return Av},e.prototype.clusterType=function(){return Pv},e.prototype.stackType=function(){return Iv},e.prototype.stackLimits=function(e,i){return t.prototype.stackLimits.call(this,e,i)},e.prototype.createPoint=function(t,e){var i=e.categoryIx,n=e.category,r=e.series,o=e.seriesIx,s=this.options,a=this.children,l=s.isStacked,h=this.pointValue(t),c=this.pointOptions(r,o),p=c.labels;l&&p.position===If&&(p.position=Rf),c.isStacked=l;var u=t.fields.color||r.color;h<0&&c.negativeColor&&(u=c.negativeColor),c=this.evalPointOptions(c,h,n,i,r,o),Cs(r.color)&&(u=c.color);var d=new(this.pointType())(h,c);d.color=u;var f=a[i];f||(f=new(this.clusterType())({vertical:s.invertAxes,gap:s.gap,spacing:s.spacing,rtl:!s.invertAxes&&(this.chartService||{}).rtl}),this.append(f));l?this.getStackWrap(r,f).append(d):f.append(d);return d},e.prototype.getStackWrap=function(t,e){var i,n=t.stack,r=n&&n.group||n,o=e.children;if(typeof r===hs){for(var s=0;s<o.length;s++)if(o[s]._stackGroup===r){i=o[s];break}}else i=o[0];i||((i=new(this.stackType())({vertical:!this.options.invertAxes}))._stackGroup=r,e.append(i));return i},e.prototype.categorySlot=function(t,e,i){var n=this.options,r=t.getSlot(e),o=i.startValue();if(n.isStacked){var s=i.getSlot(o,o,!0),a=n.invertAxes?fs:vs;r[a+1]=r[a+2]=s[a+1]}return r},e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},e.prototype.createAnimation=function(){this._setAnimationOptions(),t.prototype.createAnimation.call(this),hv(this.options.series)&&this._setChildrenAnimation()},e.prototype._setChildrenAnimation=function(){for(var t=this.points,e=0;e<t.length;e++){var i=t[e],n=i.visual;n&&Qa(n.options.zIndex)&&(i.options.animation=this.options.animation,i.createAnimation())}},e.prototype._setAnimationOptions=function(){var t,e=this.options,i=e.animation||{};if(e.isStacked){var n=this.seriesValueAxis(e.series[0]);t=n.getSlot(n.startValue())}else t=this.categoryAxis.getSlot(0);i.origin=new th(t.x1,t.y1),i.vertical=!e.invertAxes},e}(Wf);vl(zv,{animation:{type:jd}});const Lv=zv;var Bv=function(t){function e(e,i){t.call(this,i),this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=e.options,n=e.value,r=e.owner.seriesValueAxis(i),o=r.getSlot(n.open,n.close),s=r.getSlot(n.low,n.high);o.x1=s.x1=t.x1,o.x2=s.x2=t.x2,this.realBody=o;var a=s.center().x,l=[];l.push([[a,s.y1],[a,o.y1]]),l.push([[a,o.y2],[a,s.y2]]),this.lines=l,this.box=s.clone().wrap(o),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()},e.prototype.reflowNote=function(){this.note&&this.note.reflow(this.box)},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()},e.prototype.mainVisual=function(t){var e=new Cc;return this.createBody(e,t),this.createLines(e,t),e},e.prototype.createBody=function(t,e){var i=uc.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&i.options.set("stroke",{color:this.getBorderColor(),width:e.border.width,dashType:e.border.dashType,opacity:ul(e.border.opacity,e.opacity)}),ws(i),t.append(i),Ev(e)&&t.append(this.createGradientOverlay(i,{baseColor:this.color},As({end:e.vertical?void 0:[0,1]},e.overlay)))},e.prototype.createLines=function(t,e){this.drawLines(t,e,this.lines,e.line)},e.prototype.drawLines=function(t,e,i,n){if(i)for(var r={stroke:{color:n.color||this.color,opacity:ul(n.opacity,e.opacity),width:n.width,dashType:n.dashType,lineCap:"butt"}},o=0;o<i.length;o++){var s=uc.fromPoints(i[o],r);ws(s),t.append(s)}},e.prototype.getBorderColor=function(){var t=this.options.border,e=t.color;return Qa(e)||(e=new Il(this.color).brightness(t._brightness).toHex()),e},e.prototype.createOverlay=function(){var t=uc.fromRect(this.box.toRect(),{fill:{color:us,opacity:0},stroke:null});this.visual.append(t)},e.prototype.createHighlight=function(){var t=this.options.highlight,e=this.color;this.color=t.color||this.color;var i=this.mainVisual(As({},this.options,{line:{color:this.getBorderColor()}},t));return this.color=e,i},e.prototype.highlightVisual=function(){return this._mainVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},e.prototype.tooltipAnchor=function(){var t=this.box,e=this.owner.pane.clipBox()||t;return{point:new $l(t.x2+5,Math.max(t.y1,e.y1)+5),align:{horizontal:ts,vertical:cs}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e}(Bc);vl(Bv,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}}),As(Bv.prototype,qf),As(Bv.prototype,Gf);const Nv=Bv;function jv(t){return vd(t)===t.length}var Fv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},e.prototype.addValue=function(t,e){var i,n=e.categoryIx,r=e.category,o=e.series,s=e.seriesIx,a=this.children,l=this.options,h=t.valueFields,c=jv(this.splitValue(h)),p=o.data[n],u=this.categoryPoints[n];u||(this.categoryPoints[n]=u=[]),c&&(i=this.createPoint(t,e));var d=a[n];d||(d=new Pv({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(d)),i&&(this.updateRange(h,e),d.append(i),i.categoryIx=n,i.category=r,i.series=o,i.seriesIx=s,i.owner=this,i.dataItem=p,i.noteText=t.fields.noteText),this.points.push(i),u.push(i)},e.prototype.pointType=function(){return Nv},e.prototype.createPoint=function(t,e){var i=e.categoryIx,n=e.category,r=e.series,o=e.seriesIx,s=this.pointType(),a=t.valueFields,l=As({},r),h=t.fields.color||r.color;l=this.evalPointOptions(l,a,n,i,r,o),r.type===Wd&&a.open>a.close&&(h=t.fields.downColor||r.downColor||r.color),Cs(r.color)&&(h=l.color),l.vertical=!this.options.invertAxes;var c=new s(a,l);return c.color=h,c},e.prototype.splitValue=function(t){return[t.low,t.open,t.close,t.high]},e.prototype.updateRange=function(t,e){var i=e.series.axis,n=this.splitValue(t),r=this.valueAxisRanges[i];r=this.valueAxisRanges[i]=r||{min:es,max:is},r=this.valueAxisRanges[i]={min:Math.min.apply(Math,n.concat([r.min])),max:Math.max.apply(Math,n.concat([r.max]))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.open,i.high,i.low,i.close,t.category)},e.prototype.animationPoints=function(){return this.points},e}(Wf);As(Fv.prototype,pv);const Vv=Fv;var Hv=function(t){function e(e,i){t.call(this,e,i),this.createNote()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e,i,n=this,r=n.options,o=n.value,s=n.owner.seriesValueAxis(r);this.boxSlot=i=s.getSlot(o.q1,o.q3),this.realBody=i,this.reflowBoxSlot(t),this.whiskerSlot=e=s.getSlot(o.lower,o.upper),this.reflowWhiskerSlot(t);var a=s.getSlot(o.median);if(o.mean){var l=s.getSlot(o.mean);this.meanPoints=this.calcMeanPoints(t,l)}this.whiskerPoints=this.calcWhiskerPoints(i,e),this.medianPoints=this.calcMedianPoints(t,a),this.box=e.clone().wrap(i),this.reflowNote()},e.prototype.reflowBoxSlot=function(t){this.boxSlot.x1=t.x1,this.boxSlot.x2=t.x2},e.prototype.reflowWhiskerSlot=function(t){this.whiskerSlot.x1=t.x1,this.whiskerSlot.x2=t.x2},e.prototype.calcMeanPoints=function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},e.prototype.calcWhiskerPoints=function(t,e){var i=e.center().x;return[[[i-5,e.y1],[i+5,e.y1],[i,e.y1],[i,t.y1]],[[i-5,e.y2],[i+5,e.y2],[i,e.y2],[i,t.y2]]]},e.prototype.calcMedianPoints=function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},e.prototype.renderOutliers=function(t){for(var e=this.value,i=e.outliers||[],n=3*Math.abs(e.q3-e.q1),r=[],o=t.markers||{},s=0;s<i.length;s++){var a=i[s],l=As({},(o=a<e.q3+n&&a>e.q1-n?t.outliers:t.extremes).border);Qa(l.color)||(Qa(this.color)?l.color=this.color:l.color=new Il(o.background).brightness(Ad).toHex());var h=new Vc({type:o.type,width:o.size,height:o.size,rotation:o.rotation,background:o.background,border:l,opacity:o.opacity});h.value=a,r.push(h)}return this.reflowOutliers(r),r},e.prototype.reflowOutliers=function(t){for(var e=this,i=this.owner.seriesValueAxis(this.options),n=this.box.center(),r=0;r<t.length;r++){var o=t[r].value,s=i.getSlot(o);e.options.vertical?s.move(n.x):s.move(void 0,n.y),e.box=e.box.wrap(s),t[r].reflow(s)}},e.prototype.mainVisual=function(e){for(var i=t.prototype.mainVisual.call(this,e),n=this.renderOutliers(e),r=0;r<n.length;r++){var o=n[r].getElement();o&&i.append(o)}return i},e.prototype.createLines=function(t,e){this.drawLines(t,e,this.whiskerPoints,e.whiskers),this.drawLines(t,e,this.medianPoints,e.median),this.drawLines(t,e,this.meanPoints,e.mean)},e.prototype.getBorderColor=function(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:t.prototype.getBorderColor.call(this)},e}(Nv);vl(Hv,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:Go,background:us,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:$o,background:us,border:{width:2,opacity:1},opacity:0}}),As(Hv.prototype,qf);const Wv=Hv;var Uv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowBoxSlot=function(t){this.boxSlot.y1=t.y1,this.boxSlot.y2=t.y2},e.prototype.reflowWhiskerSlot=function(t){this.whiskerSlot.y1=t.y1,this.whiskerSlot.y2=t.y2},e.prototype.calcMeanPoints=function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},e.prototype.calcWhiskerPoints=function(t,e){var i=e.center().y;return[[[e.x1,i-5],[e.x1,i+5],[e.x1,i],[t.x1,i]],[[e.x2,i-5],[e.x2,i+5],[e.x2,i],[t.x2,i]]]},e.prototype.calcMedianPoints=function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},e}(Wv);const qv=Uv;var $v=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addValue=function(t,e){var i,n=e.categoryIx,r=e.category,o=e.series,s=e.seriesIx,a=this.children,l=this.options,h=t.valueFields,c=jv(this.splitValue(h)),p=o.data[n],u=this.categoryPoints[n];u||(this.categoryPoints[n]=u=[]),c&&(i=this.createPoint(t,e));var d=a[n];d||(d=new Pv({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(d)),i&&(this.updateRange(h,e),d.append(i),i.categoryIx=n,i.category=r,i.series=o,i.seriesIx=s,i.owner=this,i.dataItem=p),this.points.push(i),u.push(i)},e.prototype.pointType=function(){return this.options.invertAxes?qv:Wv},e.prototype.splitValue=function(t){return[t.lower,t.q1,t.median,t.q3,t.upper]},e.prototype.updateRange=function(t,e){var i=e.series.axis,n=this.valueAxisRanges[i],r=this.splitValue(t).concat(this.filterOutliers(t.outliers));Qa(t.mean)&&(r=r.concat(t.mean)),n=this.valueAxisRanges[i]=n||{min:es,max:is},n=this.valueAxisRanges[i]={min:Math.min.apply(Math,r.concat([n.min])),max:Math.max.apply(Math,r.concat([n.max]))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,t.category)},e.prototype.filterOutliers=function(t){for(var e=(t||[]).length,i=[],n=0;n<e;n++){var r=t[n];Qa(r)&&null!==r&&i.push(r)}return i},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(Vv);const Gv=$v;var Kv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAxis=function(){var t=this.chart.seriesAxes(this.series);return this.isVertical?t.y:t.x},e}(Bf);const Xv=Kv;function Yv(t){return Qa(t)&&null!==t}var Zv=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]},e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.addErrorBar=function(t,e,i){var n,r=t.value[e],o=e+"Value",s=e+"ErrorLow",a=e+"ErrorHigh",l=i.seriesIx,h=i.series,c=t.options.errorBars,p=i[s],u=i[a];_s(r)&&(_s(p)&&_s(u)&&(n={low:p,high:u}),c&&Qa(c[o])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][l]=this.seriesErrorRanges[e][l]||new Sd(c[o],h,e),n=this.seriesErrorRanges[e][l].getErrorRange(r,c[o])),n&&this.addPointErrorBar(n,t,e))},e.prototype.addPointErrorBar=function(t,e,i){var n=t.low,r=t.high,o=e.series,s=e.options.errorBars,a=i===vs,l={};e[i+"Low"]=n,e[i+"High"]=r,e.errorBars=e.errorBars||[];var h=new Xv(n,r,a,this,o,s);e.errorBars.push(h),e.append(h),l[i]=n,this.updateRange(l,o),l[i]=r,this.updateRange(l,o)},e.prototype.addValue=function(t,e){var i,n=t.x,r=t.y,o=e.seriesIx,s=this.options.series[o],a=this.seriesMissingValues(s),l=this.seriesPoints[o],h=t;Yv(n)&&Yv(r)||(h=this.createMissingValue(h,a)),h&&((i=this.createPoint(h,e))&&(Object.assign(i,e),this.addErrorBar(i,fs,e),this.addErrorBar(i,vs,e)),this.updateRange(h,e.series)),this.points.push(i),l.push(i)},e.prototype.seriesMissingValues=function(t){return t.missingValues},e.prototype.createMissingValue=function(){},e.prototype.updateRange=function(t,e){var i=this.chartService.intl,n=e.xAxis,r=e.yAxis,o=t.x,s=t.y,a=this.xAxisRanges[n],l=this.yAxisRanges[r];Yv(o)&&(a=this.xAxisRanges[n]=a||{min:es,max:is},ks(o)&&(o=mu(i,o)),a.min=Math.min(a.min,o),a.max=Math.max(a.max,o)),Yv(s)&&(l=this.yAxisRanges[r]=l||{min:es,max:is},ks(s)&&(s=mu(i,s)),l.min=Math.min(l.min,s),l.max=Math.max(l.max,s))},e.prototype.evalPointOptions=function(t,e,i){var n=i.series,r=i.seriesIx,o={defaults:n._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]},s=this._evalSeries[r];Qa(s)||(this._evalSeries[r]=s=Ff(t,{},o,!0));var a=t;return s&&Ff(a=As({},t),{value:e,series:n,dataItem:i.dataItem},o),a},e.prototype.pointType=function(){return Xf},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=As({},n,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},e.prototype.createPoint=function(t,e){var i=e.series,n=this.pointOptions(i,e.seriesIx),r=e.color||i.color;n=this.evalPointOptions(n,t,e),Cs(i.color)&&(r=n.color);var o=new Xf(t,n);return o.color=r,this.append(o),o},e.prototype.seriesAxes=function(t){var e=t.xAxis,i=t.yAxis,n=this.plotArea,r=e?n.namedXAxes[e]:n.axisX,o=i?n.namedYAxes[i]:n.axisY;if(!r)throw new Error("Unable to locate X axis with name "+e);if(!o)throw new Error("Unable to locate Y axis with name "+i);return{x:r,y:o}},e.prototype.reflow=function(t){var e=this,i=this.points,n=!this.options.clip,r=0;this.traverseDataPoints((function(t,o){var s=i[r++],a=e.seriesAxes(o.series),l=a.x.getSlot(t.x,t.x,n),h=a.y.getSlot(t.y,t.y,n);if(s)if(l&&h){var c=e.pointSlot(l,h);s.reflow(c)}else s.visible=!1})),this.box=t},e.prototype.pointSlot=function(t,e){return new ah(t.x1,e.y1,t.x2,e.y2)},e.prototype.traverseDataPoints=function(t){for(var e=this.options.series,i=this.seriesPoints,n=0;n<e.length;n++){var r=e[n];i[n]||(i[n]=[]);for(var o=0;o<r.data.length;o++){var s=this._bindPoint(r,n,o),a=s.valueFields,l=s.fields;t(a,As({pointIx:o,series:r,seriesIx:n,dataItem:r.data[o],owner:this},l))}}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e},e}(Bc);vl(Zv,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0}),As(Zv.prototype,pv,{_bindPoint:Wf.prototype._bindPoint});const Jv=Zv;var Qv=function(t){function e(e,i){t.call(this,e,i),this.category=e.category}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createHighlight=function(){var t=this.options.highlight,e=t.border,i=this.options.markers,n=this.box.center(),r=(i.size+i.border.width+e.width)/2,o=new Cc,s=new _c(new yc([n.x,n.y+r/5+e.width/2],r+e.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})}),a=new _c(new yc([n.x,n.y],r),{stroke:{color:e.color||new Il(i.background).brightness(Ad).toHex(),width:e.width,opacity:e.opacity},fill:{color:i.background,opacity:t.opacity}});return o.append(s,a),o},e}(Xf);Qv.prototype.defaults=As({},Qv.prototype.defaults,{labels:{position:qo},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),Qv.prototype.defaults.highlight.zIndex=void 0;const tm=Qv;var em=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this._maxSize=is,t.prototype._initFields.call(this)},e.prototype.addValue=function(e,i){null!==e.size&&(e.size>0||e.size<0&&i.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(e.size)),t.prototype.addValue.call(this,e,i)):(this.points.push(null),this.seriesPoints[i.seriesIx].push(null))},e.prototype.reflow=function(e){this.updateBubblesSize(e),t.prototype.reflow.call(this,e)},e.prototype.pointType=function(){return tm},e.prototype.createPoint=function(t,e){var i=e.series,n=i.data.length,r=e.pointIx*(Ed/n),o={delay:r,duration:Ed-r,type:Vd},s=e.color||i.color;t.size<0&&i.negativeValues.visible&&(s=ul(i.negativeValues.color,s));var a=As({labels:{animation:{delay:r,duration:Ed-r}}},this.pointOptions(i,e.seriesIx),{markers:{type:$o,border:i.border,opacity:i.opacity,animation:o}});a=this.evalPointOptions(a,t,e),Cs(i.color)&&(s=a.color),a.markers.background=s;var l=new tm(t,a);return l.color=s,this.append(l),l},e.prototype.updateBubblesSize=function(t){for(var e=this.options.series,i=Math.min(t.width(),t.height()),n=0;n<e.length;n++)for(var r=e[n],o=this.seriesPoints[n],s=(r.minSize||Math.max(.02*i,10))/2,a=(r.maxSize||.2*i)/2,l=Math.PI*s*s,h=(Math.PI*a*a-l)/this._maxSize,c=0;c<o.length;c++){var p=o[c];if(p){var u=Math.abs(p.value.size)*h,d=Math.sqrt((l+u)/Math.PI),f=ul(p.options.zIndex,0)+(1-d/a);As(p.options,{zIndex:f,markers:{size:2*d,zIndex:f},labels:{zIndex:f+1}})}}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.size,t.category)},e.prototype.createAnimation=function(){},e.prototype.createVisual=function(){},e}(Jv);vl(em,{tooltip:{format:"{3}"},labels:{format:"{3}"}});const im=em;var nm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Vc);As(nm.prototype,qf);const rm=nm;var om=function(t){function e(e,i){t.call(this,i),this.aboveAxis=this.options.aboveAxis,this.color=i.color||us,this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options;this._rendered||(this._rendered=!0,Qa(this.value.target)&&(this.target=new rm({type:t.target.shape,background:t.target.color||this.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:cs,align:as}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createNote())},e.prototype.reflow=function(t){this.render();var e=this,i=e.options,n=e.target,r=e.owner,o=i.invertAxes,s=r.seriesValueAxis(this.options),a=r.categorySlot(r.categoryAxis,i.categoryIx,s),l=s.getSlot(this.value.target),h=o?l:a,c=o?a:l;if(n){var p=new ah(h.x1,c.y1,h.x2,c.y2);n.options.height=o?p.height():i.target.line.width,n.options.width=o?i.target.line.width:p.width(),n.reflow(p)}this.note&&this.note.reflow(t),this.box=t},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.options,i=uc.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&i.options.set("stroke",{color:e.border.color||this.color,width:e.border.width,dashType:e.border.dashType,opacity:ul(e.border.opacity,e.opacity)}),this.bodyVisual=i,ws(i),this.visual.append(i)},e.prototype.createAnimation=function(){this.bodyVisual&&(this.animation=zc.create(this.bodyVisual,this.options.animation))},e.prototype.createHighlight=function(t){return uc.fromRect(this.box.toRect(),t)},e.prototype.highlightVisual=function(){return this.bodyVisual},e.prototype.highlightVisualArgs=function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e}(Bc);om.prototype.tooltipAnchor=Av.prototype.tooltipAnchor,vl(om,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}<br />Target: {1}"}}),As(om.prototype,qf),As(om.prototype,Gf);const sm=om;var am=function(t){function e(e,i){!function(t){for(var e=t.series,i=0;i<e.length;i++){var n=e[i],r=n.data;!r||ms(r[0])||Ms(r[0])||(n.data=[r])}}(i),t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowCategories=function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].reflow(t[n])},e.prototype.plotRange=function(t){var e=t.series,i=this.seriesValueAxis(e),n=this.categoryAxisCrossingValue(i);return[n,t.value.current||n]},e.prototype.createPoint=function(t,e){var i=e.categoryIx,n=e.category,r=e.series,o=e.seriesIx,s=this.options,a=this.children,l=t.valueFields,h=As({vertical:!s.invertAxes,overlay:r.overlay,categoryIx:i,invertAxes:s.invertAxes},r),c=t.fields.color||r.color;h=this.evalPointOptions(h,l,n,i,r,o),Cs(r.color)&&(c=h.color);var p=new sm(l,h);p.color=c;var u=a[i];return u||(u=new Pv({vertical:s.invertAxes,gap:s.gap,spacing:s.spacing,rtl:!s.invertAxes&&(this.chartService||{}).rtl}),this.append(u)),u.append(p),p},e.prototype.updateRange=function(t,e){var i=t.current,n=t.target,r=e.series.axis,o=this.valueAxisRanges[r];Qa(i)&&!isNaN(i)&&Qa(n&&!isNaN(n))&&((o=this.valueAxisRanges[r]=o||{min:es,max:is}).min=Math.min(o.min,i,n),o.max=Math.max(o.max,i,n))},e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value.current,t.value.target)},e.prototype.pointValue=function(t){return t.valueFields.current},e.prototype.aboveAxis=function(t){return t.value.current>0},e.prototype.createAnimation=function(){var t=this.points;this._setAnimationOptions();for(var e=0;e<t.length;e++){var i=t[e];i.options.animation=this.options.animation,i.createAnimation()}},e}(Wf);am.prototype._setAnimationOptions=Lv.prototype._setAnimationOptions,vl(am,{animation:{type:jd}});const lm=am;var hm=function(t){function e(e,i){t.call(this),this.chartService=e,this.options=As({},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStyle=function(t,e){var i=t.background,n=t.border.color;if(e){var r=e.color||e.options.color;i=ul(i,r),n=ul(n,r)}var o=Is(t.padding||{},"auto");return{backgroundColor:i,borderColor:n,font:t.font,color:t.color,opacity:t.opacity,borderWidth:Os(t.border.width),paddingTop:Os(o.top),paddingBottom:Os(o.bottom),paddingLeft:Os(o.left),paddingRight:Os(o.right)}},e.prototype.show=function(t,e,i){t.format=e.format;var n=this.getStyle(e,i);t.style=n;var r=new Il(n.backgroundColor);Qa(e.color)||r.isDark()||(t.className="k-chart-tooltip-inverse"),this.chartService.notify(Mf,t),this.visible=!0},e.prototype.hide=function(){this.chartService&&this.chartService.notify(Of),this.visible=!1},e.prototype.destroy=function(){delete this.chartService},e}(na);vl(hm,{border:{width:1},opacity:1});const cm=hm;var pm=function(t){function e(e,i,n){t.call(this,e,n),this.crosshair=i,this.formatService=e.format,this.initAxisName()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initAxisName=function(){var t,e=this.crosshair.axis;t=e.plotArea.categoryAxis?e.getCategory?"categoryAxis":"valueAxis":e.options.vertical?"yAxis":"xAxis",this.axisName=t},e.prototype.showAt=function(t){var e=this.crosshair.axis,i=this.options,n=e[i.stickyMode?"getCategory":"getValue"](t),r=n;i.format?r=this.formatService.auto(i.format,n):e.options.type===Ko&&(r=this.formatService.auto(e.options.labels.dateFormats[e.options.baseUnit],n)),this.show({point:t,anchor:this.getAnchor(),crosshair:this.crosshair,value:r,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},e.prototype.hide=function(){this.chartService.notify(Of,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},e.prototype.getAnchor=function(){var t,e,i,n=this.crosshair,r=this.options,o=r.position,s=r.padding,a=!n.axis.options.vertical,l=n.line.bbox();return a?(t=qo,o===Uo?(e=cs,i=l.bottomLeft().translate(0,s)):(e=Uo,i=l.topLeft().translate(0,-s))):(e=qo,o===ts?(t=as,i=l.topLeft().translate(-s,0)):(t=ts,i=l.topRight().translate(s,0))),{point:i,align:{horizontal:t,vertical:e}}},e}(cm);vl(pm,{padding:10});const um=pm;var dm=function(t){function e(e,i,n){t.call(this,n),this.axis=i,this.stickyMode=i instanceof wu;var r=this.options.tooltip;r.visible&&(this.tooltip=new um(e,this,As({},r,{stickyMode:this.stickyMode})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.showAt=function(t){this.point=t,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(t)},e.prototype.hide=function(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()},e.prototype.moveLine=function(){var t,e=this.axis,i=this.point,n=e.options.vertical,r=this.getBox(),o=n?vs:fs,s=new th(r.x1,r.y1);if(t=n?new th(r.x2,r.y1):new th(r.x1,r.y2),i)if(this.stickyMode){var a=e.getSlot(e.pointCategoryIndex(i));s[o]=t[o]=a.center()[o]}else s[o]=t[o]=i[o];this.box=r,this.line.moveTo(s).lineTo(t)},e.prototype.getBox=function(){for(var t,e=this.axis,i=e.pane.axes,n=i.length,r=e.options.vertical,o=e.lineBox().clone(),s=r?fs:vs,a=0;a<n;a++){var l=i[a];l.options.vertical!==r&&(t?t.wrap(l.lineBox()):t=l.lineBox().clone())}return o[s+1]=t[s+1],o[s+2]=t[s+2],o},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.options;this.line=new uc({stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),t.prototype.destroy.call(this)},e}(Bc);vl(dm,{color:Wo,width:2,zIndex:-1,tooltip:{visible:!1}});const fm=dm;var vm=function(t){function e(e,i){t.call(this,e),this.pane=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shouldClip=function(){for(var t=this.children,e=t.length,i=0;i<e;i++)if(!0===t[i].options.clip)return!0;return!1},e.prototype._clipBox=function(){return this.pane.chartsBox()},e.prototype.createVisual=function(){if(this.visual=new Cc({zIndex:0}),this.shouldClip()){var t=(this.clipBox=this._clipBox()).toRect(),e=uc.fromRect(t);ws(e),this.visual.clip(e),this.unclipLabels()}},e.prototype.stackRoot=function(){return this},e.prototype.unclipLabels=function(){for(var t=this.children,e=this.clipBox,i=0;i<t.length;i++)for(var n=t[i].points||{},r=n.length,o=0;o<r;o++){var s=n[o];if(s&&!1!==s.visible&&s.overlapsBox&&s.overlapsBox(e))if(s.unclipElements)s.unclipElements();else{var a=s.label,l=s.note;a&&a.options.visible&&(a.alignToClipBox&&a.alignToClipBox(e),a.options.noclip=!0),l&&l.options.visible&&(l.options.noclip=!0)}}},e.prototype.destroy=function(){t.prototype.destroy.call(this),delete this.parent},e}(Bc);vm.prototype.isStackRoot=!0;const mm=vm;var gm=function(t){function e(e){t.call(this,e),this.id="pane"+ym++,this.createTitle(),this.content=new Bc,this.chartContainer=new mm({},this),this.append(this.content),this.axes=[],this.charts=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createTitle=function(){var t=this.options.title;Ms(t)&&(t=As({},t,{align:t.position,position:cs})),this.title=gp.buildTitle(t,this,e.prototype.options.title)},e.prototype.appendAxis=function(t){this.content.append(t),this.axes.push(t),t.pane=this},e.prototype.appendAxisAt=function(t,e){this.content.append(t),this.axes.splice(e,0,t),t.pane=this},e.prototype.appendChart=function(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this},e.prototype.empty=function(){var t=this.parent;if(t){for(var e=0;e<this.axes.length;e++)t.removeAxis(this.axes[e]);for(var i=0;i<this.charts.length;i++)t.removeChart(this.charts[i])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]},e.prototype.reflow=function(e){var i;sl(this.children)===this.content&&(i=this.children.pop()),t.prototype.reflow.call(this,e),i&&this.children.push(i),this.title&&(this.contentBox.y1+=this.title.box.height())},e.prototype.visualStyle=function(){var e=t.prototype.visualStyle.call(this);return e.zIndex=-10,e},e.prototype.renderComplete=function(){this.options.visible&&this.createGridLines()},e.prototype.stackRoot=function(){return this},e.prototype.clipRoot=function(){return this},e.prototype.createGridLines=function(){for(var t=this.axes,e=t.concat(this.parent.axes),i=[],n=[],r=0;r<t.length;r++)for(var o=t[r],s=o.options.vertical,a=s?i:n,l=0;l<e.length;l++)if(0===a.length){var h=e[l];s!==h.options.vertical&&Za(a,o.createGridLines(h))}},e.prototype.refresh=function(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()},e.prototype.chartsBox=function(){for(var t=this.axes,e=t.length,i=new ah,n=0;n<e;n++){var r=t[n],o=r.options.vertical?vs:fs,s=r.lineBox();i[o+1]=s[o+1],i[o+2]=s[o+2]}if(0===i.x2)for(var a=this.parent.axes,l=a.length,h=0;h<l;h++){var c=a[h];if(!c.options.vertical){var p=c.lineBox();i.x1=p.x1,i.x2=p.x2}}return i},e.prototype.clipBox=function(){return this.chartContainer.clipBox},e.prototype.notifyRender=function(){var t=this.getService();t&&t.notify("paneRender",{pane:new ud(this),index:this.paneIndex,name:this.options.name})},e}(jc),ym=1;gm.prototype.isStackRoot=!0,vl(gm,{zIndex:-1,shrinkToFit:!0,title:{align:ts},visible:!0});const bm=gm;function wm(t,e){null!==e&&t.push(e)}function xm(t,e,i){var n=e.visible;if(Qa(n))return n;var r=t.pointVisibility;return r?r[i]:void 0}function _m(t){for(var e=t.data,i=[],n=0,r=0,o=0;o<e.length;o++){var s=wd.current.bindPoint(t,o),a=s.valueFields.value;ks(a)&&(a=parseFloat(a)),_s(a)?(s.visible=!1!==xm(t,s.fields,o),s.value=Math.abs(a),i.push(s),s.visible&&(n+=s.value),0!==a&&r++):i.push(null)}return{total:n,points:i,count:r}}function km(t,e){return t&&e?t.toLowerCase()===e.toLowerCase():t===e}function Sm(t,e){for(var i=[],n=[].concat(e),r=0;r<t.length;r++){var o=t[r];$s(o.type,n)&&i.push(o)}return i}function Cm(t,e,i){if(null===e)return e;var n="_date_"+t,r=e[n];return r||(r=mu(i,Vs(t)(e)),e[n]=r),r}function Em(t,e){var i=t.type,n=e instanceof Date;return!i&&n||km(i,Ko)}function Tm(t){return 1===t.length?t[0]:t}var Am=/area/i;function Mm(t,e){var i=wd.current.bindPoint(t,null,e).valueFields;for(var n in i)if(Ss(i[n]))return!0}function Om(t){var e,i,n=t.start,r=t.dir,o=t.min,s=t.max,a=t.getter,l=t.hasItem,h=t.series,c=n;do{l(c+=r)&&(e=Mm(h,(i=a(c)).item))}while(o<=c&&c<=s&&!e);if(e)return i}function Dm(t,e,i,n,r){var o=e.min,s=e.max,a=o>0&&o<i,l=s+1<i;if(a||l){var h,c,p,u=function(t){return t.missingValues?t.missingValues:Am.test(t.type)||t.stack?Pd:Rd}(t);if(u!==Rd)a&&(h=n(o-1)),l&&(c=n(s+1));else a&&(h=Mm(t,(p=n(o-1)).item)?p:Om({start:o,dir:-1,min:0,max:i-1,getter:n,hasItem:r,series:t})),l&&(c=Mm(t,(p=n(s+1)).item)?p:Om({start:s,dir:1,min:0,max:i-1,getter:n,hasItem:r,series:t}));h&&(t._outOfRangeMinPoint=h),c&&(t._outOfRangeMaxPoint=c)}}var Pm=function(t){function e(e,i,n){t.call(this,i),this.initFields(e,i),this.series=e,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.items=[],this.axes=[],this.crosshairs=[],this.chartService=n,this.originalOptions=i,this.createPanes(),this.render(),this.createCrosshairs()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){},e.prototype.initSeries=function(){for(var t=this.series,e=0;e<t.length;e++)t[e].index=e},e.prototype.createPanes=function(){for(var t=this.options.title||{},e=this.options.paneDefaults,i=this.options.panes||[],n=Math.max(i.length,1),r=[],o=As({title:{color:t.color}},e),s=0;s<n;s++){var a=As({},o,i[s]);ks(a.title)&&(a.title=As({text:a.title},o.title));var l=new bm(a);l.paneIndex=s,r.push(l),this.append(l)}this.panes=r},e.prototype.crosshairOptions=function(t){return t.options.crosshair},e.prototype.createCrosshairs=function(t){var e=this;void 0===t&&(t=this.panes);for(var i=0;i<t.length;i++)for(var n=t[i],r=0;r<n.axes.length;r++){var o=n.axes[r],s=e.crosshairOptions(o);if(s&&s.visible){var a=new fm(e.chartService,o,s);e.crosshairs.push(a),n.content.append(a)}}},e.prototype.removeCrosshairs=function(t){for(var e=this.crosshairs,i=t.axes,n=e.length-1;n>=0;n--)for(var r=0;r<i.length;r++)if(e[n].axis===i[r]){e.splice(n,1);break}},e.prototype.hideCrosshairs=function(){for(var t=this.crosshairs,e=0;e<t.length;e++)t[e].hide()},e.prototype.findPane=function(t){for(var e,i=this.panes,n=0;n<i.length;n++)if(i[n].options.name===t){e=i[n];break}return e||i[0]},e.prototype.findPointPane=function(t){for(var e,i=this.panes,n=0;n<i.length;n++)if(i[n].box.containsPoint(t)){e=i[n];break}return e},e.prototype.appendAxis=function(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this},e.prototype.removeAxis=function(t){for(var e=[],i=0;i<this.axes.length;i++){var n=this.axes[i];t!==n?e.push(n):n.destroy()}this.axes=e},e.prototype.appendChart=function(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)},e.prototype.removeChart=function(t){for(var e=[],i=0;i<this.charts.length;i++){var n=this.charts[i];n!==t?e.push(n):n.destroy()}this.charts=e},e.prototype.addToLegend=function(t){for(var e=t.length,i=this.options.legend,n=i.labels||{},r=i.inactiveItems||{},o=r.labels||{},s=[],a=0;a<e;a++){var l=t[a],h=!1!==l.visible;if(!1!==l.visibleInLegend){var c=l.name,p=h?Ns(n):Ns(o)||Ns(n);p&&(c=p({text:Yv(c)?c:"",series:l}));var u=l._defaults,d=l.color;Cs(d)&&u&&(d=u.color);var f=void 0,v=void 0;h?(f={},v=d):(f={color:o.color,font:o.font},v=r.markers.color),Yv(c)&&""!==c&&s.push({text:c,labels:f,markerColor:v,series:l,active:h})}}Za(i.items,s)},e.prototype.groupAxes=function(t){for(var e=[],i=[],n=0;n<t.length;n++)for(var r=t[n].axes,o=0;o<r.length;o++){var s=r[o];s.options.vertical?i.push(s):e.push(s)}return{x:e,y:i,any:e.concat(i)}},e.prototype.groupSeriesByPane=function(){for(var t=this.series,e={},i=0;i<t.length;i++){var n=t[i],r=this.seriesPaneName(n);e[r]?e[r].push(n):e[r]=[n]}return e},e.prototype.filterVisibleSeries=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];!1!==n.visible&&e.push(n)}return e},e.prototype.reflow=function(t){var e=this.options.plotArea,i=this.panes,n=Is(e.margin);this.box=t.clone().unpad(n),this.reflowPanes(),this.detachLabels(),this.reflowAxes(i),this.reflowCharts(i)},e.prototype.redraw=function(t){var e=[].concat(t);this.initSeries();var i=this.getRoot();i&&i.cleanGradients();for(var n=0;n<e.length;n++)this.removeCrosshairs(e[n]),e[n].empty();this.render(e),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(e),this.createCrosshairs(e);for(var r=0;r<e.length;r++)e[r].refresh()},e.prototype.axisCrossingValues=function(t,e){for(var i=t.options,n=[].concat(i.axisCrossingValues||i.axisCrossingValue),r=e.length-n.length,o=n[0]||0,s=0;s<r;s++)n.push(o);return n},e.prototype.alignAxisTo=function(t,e,i,n){var r=t.getSlot(i,i,!0),o=t.options.reverse?2:1,s=e.getSlot(n,n,!0),a=e.options.reverse?2:1,l=t.box.translate(s[fs+a]-r[fs+o],s[vs+a]-r[vs+o]);t.pane!==e.pane&&l.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(l)},e.prototype.alignAxes=function(t,e){for(var i=this,n=t[0],r=e[0],o=this.axisCrossingValues(n,e),s=this.axisCrossingValues(r,t),a={},l={},h={},c={},p=0;p<e.length;p++){var u=e[p],d=u.pane,f=d.id,v=!1!==u.options.visible,m=zm(t,d)||n,g=o;m!==n&&(g=i.axisCrossingValues(m,e)),i.alignAxisTo(u,m,s[p],g[p]),u.options._overlap||(cl(u.lineBox().x1)===cl(m.lineBox().x1)&&(a[f]&&u.reflow(u.box.alignTo(a[f].box,ts).translate(-u.options.margin,0)),v&&(a[f]=u)),cl(u.lineBox().x2)===cl(m.lineBox().x2)&&(u._mirrored||(u.options.labels.mirror=!u.options.labels.mirror,u._mirrored=!0),i.alignAxisTo(u,m,s[p],g[p]),l[f]&&u.reflow(u.box.alignTo(l[f].box,as).translate(u.options.margin,0)),v&&(l[f]=u)),0!==p&&r.pane===u.pane&&(u.alignTo(r),u.reflow(u.box)))}for(var y=0;y<t.length;y++){var b=t[y],w=b.pane,x=w.id,_=!1!==b.options.visible,k=zm(e,w)||r,S=s;k!==r&&(S=i.axisCrossingValues(k,t)),i.alignAxisTo(b,k,o[y],S[y]),b.options._overlap||(cl(b.lineBox().y1)===cl(k.lineBox().y1)&&(b._mirrored||(b.options.labels.mirror=!b.options.labels.mirror,b._mirrored=!0),i.alignAxisTo(b,k,o[y],S[y]),h[x]&&b.reflow(b.box.alignTo(h[x].box,cs).translate(0,-b.options.margin)),_&&(h[x]=b)),cl(b.lineBox().y2,3)===cl(k.lineBox().y2,3)&&(c[x]&&b.reflow(b.box.alignTo(c[x].box,Uo).translate(0,b.options.margin)),_&&(c[x]=b)),0!==y&&(b.alignTo(n),b.reflow(b.box)))}},e.prototype.shrinkAxisWidth=function(t){for(var e=this.groupAxes(t).any,i=Im(e),n=0,r=0;r<t.length;r++){var o=t[r];o.axes.length>0&&(n=Math.max(n,i.width()-o.contentBox.width()))}if(0!==n)for(var s=0;s<e.length;s++){var a=e[s];a.options.vertical||a.reflow(a.box.shrink(n,0))}},e.prototype.shrinkAxisHeight=function(t){for(var e,i=0;i<t.length;i++){var n=t[i],r=n.axes,o=Math.max(0,Im(r).height()-n.contentBox.height());if(0!==o){for(var s=0;s<r.length;s++){var a=r[s];a.options.vertical&&a.reflow(a.box.shrink(0,o))}e=!0}}return e},e.prototype.fitAxes=function(t){for(var e=this.groupAxes(t).any,i=0,n=0;n<t.length;n++){var r=t[n],o=r.axes,s=r.contentBox;if(o.length>0){var a=Im(o),l=Math.max(s.y1-a.y1,s.y2-a.y2);i=Math.max(i,s.x1-a.x1);for(var h=0;h<o.length;h++){var c=o[h];c.reflow(c.box.translate(0,l))}}}for(var p=0;p<e.length;p++){var u=e[p];u.reflow(u.box.translate(i,0))}},e.prototype.reflowAxes=function(t){for(var e=this.groupAxes(t),i=0;i<t.length;i++)this.reflowPaneAxes(t[i]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t),this.autoRotateAxisLabels(e),this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t)&&this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t),this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t)&&this.alignAxes(e.x,e.y),this.fitAxes(t))},e.prototype.autoRotateAxisLabels=function(t){for(var e,i=this.panes,n=Lm(i),r=0;r<n.length;r++){n[r].autoRotateLabels()&&(e=!0)}if(e){for(var o=0;o<i.length;o++)this.reflowPaneAxes(i[o]);t.x.length>0&&t.y.length>0&&(this.alignAxes(t.x,t.y),this.shrinkAxisWidth(i))}},e.prototype.reflowPaneAxes=function(t){var e=t.axes,i=e.length;if(i>0)for(var n=0;n<i;n++)e[n].reflow(t.contentBox)},e.prototype.reflowCharts=function(t){for(var e=this.charts,i=e.length,n=this.box,r=0;r<i;r++){var o=e[r].pane;o&&!$s(o,t)||e[r].reflow(n)}},e.prototype.reflowPanes=function(){for(var t=this.box,e=this.panes,i=e.length,n=t.height(),r=0,o=t.y1,s=0;s<i;s++){var a=e[s],l=a.options.height;if(a.options.width=t.width(),a.options.height){if(l.indexOf&&l.indexOf("%")){var h=parseInt(l,10)/100;a.options.height=h*t.height()}a.reflow(t.clone()),n-=a.options.height}else r++}for(var c=0;c<i;c++){var p=e[c];p.options.height||(p.options.height=n/r)}for(var u=0;u<i;u++){var d=e[u],f=t.clone().move(t.x1,o);d.reflow(f),o+=d.options.height}},e.prototype.backgroundBox=function(){for(var t,e=this.axes,i=e.length,n=0;n<i;n++)for(var r=e[n],o=0;o<i;o++){var s=e[o];if(r.options.vertical!==s.options.vertical){var a=r.lineBox().clone().wrap(s.lineBox());t=t?t.wrap(a):a}}return t||this.box},e.prototype.chartsBoxes=function(){for(var t=this.panes,e=[],i=0;i<t.length;i++)e.push(t[i].chartsBox());return e},e.prototype.addBackgroundPaths=function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)t.paths.push(uc.fromRect(e[i].toRect()))},e.prototype.backgroundContainsPoint=function(t){for(var e=this.chartsBoxes(),i=0;i<e.length;i++)if(e[i].containsPoint(t))return!0},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e,i=this.options.plotArea,n=i.opacity,r=i.background,o=i.border;void 0===o&&(o={}),""!==(e=r)&&null!==e&&"none"!==e&&"transparent"!==e&&Qa(e)||(r=us,n=0);var s=this._bgVisual=new dc({fill:{color:r,opacity:n},stroke:{color:o.width?o.color:"",width:o.width,dashType:o.dashType},zIndex:-1});this.addBackgroundPaths(s),this.appendVisual(s)},e.prototype.pointsByCategoryIndex=function(t){var e=this.charts,i=[];if(null!==t)for(var n=0;n<e.length;n++){if("_navigator"!==e[n].pane.options.name){var r=e[n].categoryPoints[t];if(r&&r.length)for(var o=0;o<r.length;o++){var s=r[o];s&&Qa(s.value)&&null!==s.value&&i.push(s)}}}return i},e.prototype.pointsBySeriesIndex=function(t){return this.filterPoints((function(e){return e.series.index===t}))},e.prototype.pointsBySeriesName=function(t){return this.filterPoints((function(e){return e.series.name===t}))},e.prototype.filterPoints=function(t){for(var e=this.charts,i=[],n=0;n<e.length;n++)for(var r=e[n].points,o=0;o<r.length;o++){var s=r[o];s&&!1!==s.visible&&t(s)&&i.push(s)}return i},e.prototype.findPoint=function(t){for(var e=this.charts,i=0;i<e.length;i++)for(var n=e[i].points,r=0;r<n.length;r++){var o=n[r];if(o&&!1!==o.visible&&t(o))return o}},e.prototype.paneByPoint=function(t){for(var e=this.panes,i=0;i<e.length;i++){var n=e[i];if(n.box.containsPoint(t))return n}},e.prototype.detachLabels=function(){var t=this.groupAxes(this.panes),e=t.x,i=t.y;this.detachAxisGroupLabels(i,e),this.detachAxisGroupLabels(e,i)},e.prototype.detachAxisGroupLabels=function(t,e){for(var i=0,n=0;n<t.length;n++){var r=t[n],o=r.pane,s=zm(e,o)||e[0],a=n+i,l=this.createLabelAxis(r,a,s);if(l){i++;var h=o.axes.indexOf(r)+i;o.appendAxisAt(l,h)}}},e.prototype.createLabelAxis=function(t,e,i){var n=t.options.labels,r=n.position,o="end"!==r&&"start"!==r,s=n.visible;if(o||!1===s)return null;var a=this.groupAxes(this.panes),l=i.options.vertical?a.x:a.y,h=this.axisCrossingValues(i,l),c="end"===r,p=i.range(),u=c?p.max:p.min;if(al(h[e],p.min,p.max)-u==0)return null;h.splice(e+1,0,u),i.options.axisCrossingValues=h;var d=t.clone();return t.clear(),d.options.name=void 0,d.options.line.visible=!1,d.options.crosshair=void 0,d.options.notes=void 0,d.options.plotBands=void 0,d},e}(Bc);function Rm(t){return!t.pane.axes.some((function(e){return e.options.vertical===t.options.vertical&&e!==t&&!1!==e.options.visible}))}function Im(t){for(var e,i=t.length,n=0;n<i;n++){var r=t[n],o=!1!==r.options.visible;if(o||Rm(r)){var s=o?r.contentBox():r.lineBox();e?e.wrap(s):e=s.clone()}}return e||new ah}function zm(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(n&&n.pane===e)return n}}var Lm=function(t){return t.reduce((function(t,e){return t.concat(e.axes)}),[])};vl(Pm,{series:[],plotArea:{margin:{}},background:"",border:{color:Wo,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});const Bm=Pm;var Nm={hover:function(t,e){this._dispatchEvent(t,e,yf)},click:function(t,e){this._dispatchEvent(t,e,"plotAreaClick")}};const jm=Nm;var Fm=function(t){function e(e,i,n){t.call(this);var r=i.canonicalFields(e),o=i.valueFields(e),s=i.sourceFields(e,r),a=this._seriesFields=[],l=n.query(e.type),h=e.aggregate||l;this._series=e,this._binder=i;for(var c=0;c<r.length;c++){var p=r[c],u=void 0;if(Ms(h))u=h[p];else{if(0!==c&&!$s(p,o))break;u=h}u&&a.push({canonicalName:p,name:s[c],transform:Cs(u)?u:gd[u]})}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.aggregatePoints=function(t,e){var i=this._series,n=this._seriesFields,r=this._bindPoints(t||[]),o=r.dataItems[0],s={};if(o&&!_s(o)&&!ms(o)){var a=function(){};a.prototype=o,s=new a}for(var l=0;l<n.length;l++){var h=n[l],c=this._bindField(r.values,h.canonicalName),p=h.transform(c,i,r.dataItems,e);if(!(null===p||!Ms(p)||Qa(p.length)||p instanceof Date)){s=p;break}Qa(p)&&Vm(h.name,s,p)}return s},e.prototype._bindPoints=function(t){for(var e=this._binder,i=this._series,n=[],r=[],o=0;o<t.length;o++){var s=t[o];n.push(e.bindPoint(i,s)),r.push(i.data[s])}return{values:n,dataItems:r}},e.prototype._bindField=function(t,e){for(var i=[],n=t.length,r=0;r<n;r++){var o=t[r],s=o.valueFields,a=void 0;a=Qa(s[e])?s[e]:o.fields[e],i.push(a)}return i},e}(na);function Vm(t,e,i){var n=e,r=t;if(t.indexOf(".")>-1){for(var o=t.split(".");o.length>1;)r=o.shift(),Qa(n[r])||(n[r]={}),n=n[r];r=o.shift()}n[r]=i}const Hm=Fm;var Wm=function(t){function e(){t.call(this),this._defaults={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e){for(var i=0;i<t.length;i++)this._defaults[t[i]]=e},e.prototype.query=function(t){return this._defaults[t]},e}(na);Wm.current=new Wm;const Um=Wm;var qm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLabel=function(){var t=this.options.labels,e=As({},t,t.from),i=As({},t,t.to);e.visible&&(this.labelFrom=this._createLabel(e),this.append(this.labelFrom)),i.visible&&(this.labelTo=this._createLabel(i),this.append(this.labelTo))},e.prototype._createLabel=function(t){var e,i=Ns(t),n=this.pointData();return e=i?i(n):this.formatValue(t.format),new Cv(e,As({vertical:this.options.vertical},t),n)},e.prototype.reflow=function(t){this.render();var e=this,i=e.labelFrom,n=e.labelTo,r=e.value;this.box=t,i&&(i.options.aboveAxis=r.from>r.to,i.reflow(t)),n&&(n.options.aboveAxis=r.to>r.from,n.reflow(t)),this.note&&this.note.reflow(t)},e}(Av);qm.prototype.defaults=As({},qm.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});const $m=qm;var Gm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return $m},e.prototype.pointValue=function(t){return t.valueFields},e.prototype.formatPointValue=function(t,e){return null===t.value.from&&null===t.value.to?"":this.chartService.format.auto(e,t.value.from,t.value.to)},e.prototype.plotRange=function(t){return t?[t.value.from,t.value.to]:0},e.prototype.updateRange=function(t,e){var i=e.series.axis,n=t.from,r=t.to,o=this.valueAxisRanges[i];null!==t&&_s(n)&&_s(r)&&((o=this.valueAxisRanges[i]=o||{min:es,max:is}).min=Math.min(o.min,n),o.max=Math.max(o.max,n),o.min=Math.min(o.min,r),o.max=Math.max(o.max,r))},e.prototype.aboveAxis=function(t){var e=t.value;return e.from<e.to},e}(Lv);Gm.prototype.plotLimits=Wf.prototype.plotLimits;const Km=Gm;var Xm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.aliasFor=function(){return this.parent},e}(Xf);const Ym=Xm;var Zm="auto",Jm=function(t){function e(e,i){t.call(this),this.value=e,this.options=i,this.aboveAxis=ul(this.options.aboveAxis,!0),this.tooltipTracking=!0,this.initLabelsFormat()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){if(!this._rendered){this._rendered=!0;var t=this.options,e=t.markers,i=t.labels,n=this.value,r=this.fromPoint=new Ym(n,As({},this.options,{labels:i.from,markers:e.from})),o=this.toPoint=new Ym(n,As({},this.options,{labels:i.to,markers:e.to}));this.copyFields(r),this.copyFields(o),this.append(r),this.append(o)}},e.prototype.reflow=function(t){this.render();var e=t.from,i=t.to;this.positionLabels(e,i),this.fromPoint.reflow(e),this.toPoint.reflow(i),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())},e.prototype.createHighlight=function(){var t=new Cc;return t.append(this.fromPoint.createHighlight()),t.append(this.toPoint.createHighlight()),t},e.prototype.highlightVisual=function(){return this.visual},e.prototype.highlightVisualArgs=function(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}},e.prototype.tooltipAnchor=function(){var t=this.owner.pane.clipBox();if(!t||t.overlaps(this.box)){var e,i,n,r=this.box,o=r.center();return this.options.vertical?(e=o.x,i=r.y1-5,n=Uo):(e=r.x2+5,i=o.y,n=qo),{point:new $l(e,i),align:{horizontal:"left",vertical:n}}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.unclipElements=function(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()},e.prototype.initLabelsFormat=function(){var t=this.options.labels;t.format||(t.from&&t.from.format||(t.from=Object.assign({},t.from,{format:"{0}"})),t.to&&t.to.format||(t.to=Object.assign({},t.to,{format:"{1}"})))},e.prototype.positionLabels=function(t,e){var i,n,r=this.options,o=r.labels,s=r.vertical;o.position===Zm&&(s?e.y1<=t.y1?(n=Id,i=zd):(n=zd,i=Id):e.x1<=t.x1?(n=ts,i=as):(n=as,i=ts),o.from&&o.from.position||(this.fromPoint.options.labels.position=i),o.to&&o.to.position||(this.toPoint.options.labels.position=n))},e.prototype.copyFields=function(t){t.dataItem=this.dataItem,t.category=this.category,t.series=this.series,t.color=this.color,t.owner=this.owner},e}(Bc);As(Jm.prototype,qf),As(Jm.prototype,Gf),Jm.prototype.defaults={markers:{visible:!1,background:us,size:8,type:$o,border:{width:2},opacity:1},labels:{visible:!1,margin:Is(3),padding:Is(4),animation:{type:Td,delay:Ed},position:Zm},notes:{label:{}},highlight:{markers:{border:{color:us,width:2}},zIndex:100},tooltip:{format:"{0} - {1}"}};const Qm=Jm;var tg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),t},e.prototype.createStroke=function(t){var e=new uc(t),i=new uc(t);e.segments.push.apply(e.segments,this.strokeSegments()),i.segments.push.apply(i.segments,this.stackSegments()),this.visual.append(e),this.visual.append(i)},e.prototype.hasStackSegment=function(){return!0},e.prototype.fromPoints=function(){return this.linePoints.map((function(t){return t.fromPoint}))},e.prototype.toPoints=function(){return this.linePoints.map((function(t){return t.toPoint}))},e}(vv);const eg=tg;var ig=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.createCurveSegments(this.toPoints())},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),t},e.prototype.createCurveSegments=function(t){return(new ad).process(this.toGeometryPoints(t))},e}(eg);const ng=ig;var rg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()))).reverse(),t},e}(eg);As(rg.prototype,tv);const og=rg;var sg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.renderSegments()},e.prototype.pointType=function(){return Qm},e.prototype.createPoint=function(t,e){var i=e.categoryIx,n=e.category,r=e.series,o=e.seriesIx,s=t.valueFields;if(!Yv(s.from)&&!Yv(s.to)){if(this.seriesMissingValues(r)!==Pd)return null;s={from:0,to:0}}var a=this.pointOptions(r,o);a=this.evalPointOptions(a,s,n,i,r,o);var l=t.fields.color||r.color;Cs(r.color)&&(l=a.color);var h=new Qm(s,a);return h.color=l,this.append(h),h},e.prototype.createSegment=function(t,e,i){var n=(e.line||{}).style;return new("smooth"===n?ng:"step"===n?og:eg)(t,e,i)},e.prototype.plotRange=function(t,e){return t?[t.value.from,t.value.to]:[e,e]},e.prototype.valueSlot=function(t,e){var i=t.getSlot(e[0],e[0],!this.options.clip),n=t.getSlot(e[1],e[1],!this.options.clip);if(i&&n)return{from:i,to:n}},e.prototype.pointSlot=function(t,e){var i,n,r=e.from,o=e.to;return this.options.invertAxes?(i=new ah(r.x1,t.y1,r.x2,t.y2),n=new ah(o.x1,t.y1,o.x2,t.y2)):(i=new ah(t.x1,r.y1,t.x2,r.y2),n=new ah(t.x1,o.y1,t.x2,o.y2)),{from:i,to:n}},e.prototype.addValue=function(e,i){var n=e.valueFields;_s(n.from)||(n.from=n.to),_s(n.to)||(n.to=n.from),t.prototype.addValue.call(this,e,i)},e.prototype.updateRange=function(t,e){if(null!==t&&_s(t.from)&&_s(t.to)){var i=e.series.axis,n=this.valueAxisRanges[i]=this.valueAxisRanges[i]||{min:es,max:is},r=t.from,o=t.to;n.min=Math.min(n.min,r,o),n.max=Math.max(n.max,r,o)}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.from,i.to)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++){var n=t[i];n&&(e.push((n.fromPoint||{}).marker),e.push((n.toPoint||{}).marker))}return e.concat(this._segments)},e}(Wf);As(sg.prototype,sv,pv);const ag=sg;var lg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=e.options,n=e.value,r=e.owner.seriesValueAxis(i),o=[],s=[],a=[],l=r.getSlot(n.low,n.high),h=r.getSlot(n.open,n.open),c=r.getSlot(n.close,n.close);h.x1=c.x1=l.x1=t.x1,h.x2=c.x2=l.x2=t.x2;var p=l.center().x;o.push([h.x1,h.y1]),o.push([p,h.y1]),s.push([p,c.y1]),s.push([c.x2,c.y1]),a.push([p,l.y1]),a.push([p,l.y2]),this.lines=[o,s,a],this.box=l.clone().wrap(h.clone().wrap(c)),this.reflowNote()},e.prototype.createBody=function(){},e}(Nv);const hg=lg;var cg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return hg},e}(Vv);const pg=cg;var ug=function(t){function e(e,i,n){t.call(this),this.from=e,this.to=i,this.series=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linePoints=function(){var t=this.from,e=this.from.box,i=this.to.box,n=[];if(t.isVertical){var r=t.aboveAxis?e.y1:e.y2;n.push([e.x1,r],[i.x2,r])}else{var o=t.aboveAxis?e.x2:e.x1;n.push([o,e.y1],[o,i.y2])}return n},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.series.line||{},i=uc.fromPoints(this.linePoints(),{stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}});ws(i),this.visual.append(i)},e}(Bc);vl(ug,{animation:{type:Td,delay:Ed}});const dg=ug;var fg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.createSegments()},e.prototype.traverseDataPoints=function(t){for(var e=this.options.series,i=Vf(e),n=!this.options.invertAxes,r=0;r<e.length;r++)for(var o=e[r],s=0,a=0,l=0;l<i;l++){var h=wd.current.bindPoint(o,l),c=h.valueFields.value,p=h.fields.summary,u=s,d=void 0;p?"total"===p.toLowerCase()?(h.valueFields.value=s,u=0,d=s):(h.valueFields.value=a,d=u-a,a=0):_s(c)&&(a+=c,d=s+=c),t(h,{category:this.categoryAxis.categoryAt(l),categoryIx:l,series:o,seriesIx:r,total:s,runningTotal:a,from:u,to:d,isVertical:n})}},e.prototype.updateRange=function(e,i){t.prototype.updateRange.call(this,{value:i.to},i)},e.prototype.aboveAxis=function(t){return t.value>=0},e.prototype.plotRange=function(t){return[t.from,t.to]},e.prototype.createSegments=function(){for(var t=this.options.series,e=this.seriesPoints,i=this.segments=[],n=0;n<t.length;n++){var r=t[n],o=e[n];if(o)for(var s=void 0,a=0;a<o.length;a++){var l=o[a];if(l&&s){var h=new dg(s,l,r);i.push(h),this.append(h)}s=l}}},e}(Lv);const vg=fg;var mg=[Nd,cf,of,ff],gg=[Xd,df].concat(mg),yg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(t){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new kv,t.length>0){this.invertAxes=$s(t[0].type,[jd,Hd,df,cf,ff,sf,Kd,pf]);for(var e=0;e<t.length;e++){var i=t[e].stack;if(i&&"100%"===i.type){this.stack100=!0;break}}}},e.prototype.render=function(t){void 0===t&&(t=this.panes),this.createCategoryAxes(t),this.aggregateCategories(t),this.createCategoryAxesLabels(t),this.createCharts(t),this.createValueAxes(t)},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e instanceof wu?delete this.namedCategoryAxes[i]:(this.valueAxisRangeTracker.reset(i),delete this.namedValueAxes[i]),e===this.categoryAxis&&delete this.categoryAxis,e===this.valueAxis&&delete this.valueAxis},e.prototype.createCharts=function(t){for(var e=this,i=this.groupSeriesByPane(),n=0;n<t.length;n++){var r=t[n],o=i[r.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);if(s)for(var a=e.groupSeriesByCategoryAxis(s),l=0;l<a.length;l++)e.createChartGroup(a[l],r)}},e.prototype.createChartGroup=function(t,e){this.createAreaChart(Sm(t,[Nd,cf]),e),this.createRangeAreaChart(Sm(t,[of,ff]),e),this.createBarChart(Sm(t,[Ud,jd]),e),this.createRangeBarChart(Sm(t,[af,sf]),e),this.createBulletChart(Sm(t,[Hd,uf]),e),this.createCandlestickChart(Sm(t,Wd),e),this.createBoxPlotChart(Sm(t,[Fd,pf]),e),this.createOHLCChart(Sm(t,Yd),e),this.createWaterfallChart(Sm(t,[vf,Kd]),e),this.createLineChart(Sm(t,[Xd,df]),e)},e.prototype.aggregateCategories=function(t){var e=this,i=this.srcSeries||this.series,n=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(var r=0;r<i.length;r++){var o=i[r],s=e.seriesCategoryAxis(o),a=e.findPane(s.options.pane);o=(km(s.options.type,Ko)||o.categoryField)&&$s(a,t)?e.aggregateSeries(o,s):e.filterSeries(o,s),n.push(o)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=i,this.series=n},e.prototype.filterSeries=function(t,e){var i=(t.data||{}).length;if(e._seriesMax=Math.max(e._seriesMax||0,i),!_s(e.options.min)&&!_s(e.options.max))return t;var n=e.currentRangeIndices(),r=$s(t.type,gg),o=As({},t);return o.data=(o.data||[]).slice(n.min,n.max+1),r&&Dm(o,n,i,(function(i){return{item:t.data[i],category:e.categoryAt(i,!0),categoryIx:i-n.min}}),(function(e){return Qa(t.data[e])})),o},e.prototype.clearSeriesPointsCache=function(){this._seriesPointsCache={}},e.prototype.seriesSourcePoints=function(t,e){var i=t.index+";"+e.categoriesHash();if(this._seriesPointsCache[i])return this._currentPointsCache[i]=this._seriesPointsCache[i],this._seriesPointsCache[i];var n=e.options,r=n.srcCategories,o=km(n.type,Ko),s=t.data,a=o?Cm:yd,l=[];o||e.mapCategories();for(var h=0;h<s.length;h++){var c=void 0;if(c=t.categoryField?a(t.categoryField,s[h],this.chartService.intl):r[h],Qa(c)&&null!==c){var p=e.totalIndex(c);l[p]=l[p]||{items:[],category:c},l[p].items.push(h)}}return this._currentPointsCache[i]=l,l},e.prototype.aggregateSeries=function(t,e){if(!t.data.length)return t;for(var i=this.seriesSourcePoints(t,e),n=As({},t),r=new Hm(As({},t),wd.current,Um.current),o=n.data=[],s=e.options.dataItems||[],a=e.currentRangeIndices(),l=function(t){var n=t-a.min,o=i[t];if(o||(o=i[t]={}),o.categoryIx=n,!o.item){var s=e.categoryAt(t,!0);o.category=s,o.item=r.aggregatePoints(o.items,s)}return o},h=a.min;h<=a.max;h++){var c=l(h);o[c.categoryIx]=c.item,c.items&&c.items.length&&(s[c.categoryIx]=c.item)}return $s(n.type,gg)&&Dm(n,a,e.totalCount(),l,(function(t){return i[t]})),e.options.dataItems=s,n},e.prototype.appendChart=function(e,i){var n=e.options.series,r=this.seriesCategoryAxis(n[0]),o=r.options.categories,s=Math.max(0,Vf(n)-o.length);if(s>0)for(o=r.options.categories=r.options.categories.slice(0);s--;)o.push("");this.valueAxisRangeTracker.update(e.valueAxisRanges),t.prototype.appendChart.call(this,e,i)},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.axis,n=Hs([].concat(e.valueAxis),(function(t){return t.name===i}))[0],r=((e.panes||[{}])[0]||{}).name||"default";return(n||{}).pane||r},e.prototype.seriesCategoryAxis=function(t){var e=t.categoryAxis,i=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+e);return i},e.prototype.stackableChartOptions=function(t,e){var i=t.stack;return{isStacked:i,isStacked100:i&&"100%"===i.type,clip:e.options.clip}},e.prototype.groupSeriesByCategoryAxis=function(t){for(var e=[],i={},n=0;n<t.length;n++){var r=t[n].categoryAxis||"$$default$$";i.hasOwnProperty(r)||(i[r]=!0,e.push(r))}for(var o=[],s=0;s<e.length;s++){var a=wg(t,e[s],s);0!==a.length&&o.push(a)}return o},e.prototype.createBarChart=function(t,e){if(0!==t.length){var i=t[0],n=new Lv(this,Object.assign({series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},e.prototype.createRangeBarChart=function(t,e){if(0!==t.length){var i=t[0],n=new Km(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,e)}},e.prototype.createBulletChart=function(t,e){if(0!==t.length){var i=t[0],n=new lm(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=t[0],n=new dv(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=t[0],n=new xv(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},e.prototype.createRangeAreaChart=function(t,e){if(0!==t.length){var i=new ag(this,{invertAxes:this.invertAxes,series:t,clip:e.options.clip});this.appendChart(i,e)}},e.prototype.createOHLCChart=function(t,e){if(0!==t.length){var i=t[0],n=new pg(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},e.prototype.createCandlestickChart=function(t,e){if(0!==t.length){var i=t[0],n=new Vv(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},e.prototype.createBoxPlotChart=function(t,e){if(0!==t.length){var i=t[0],n=new Gv(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},e.prototype.createWaterfallChart=function(t,e){if(0!==t.length){var i=t[0],n=new vg(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,e)}},e.prototype.axisRequiresRounding=function(t,e){for(var i=Sm(this.series,mf),n=0;n<this.series.length;n++){var r=this.series[n];if($s(r.type,mg)){var o=r.line;o&&o.style===Bd&&i.push(r)}}for(var s=0;s<i.length;s++){var a=i[s].categoryAxis||"";if(a===t||!a&&0===e)return!0}},e.prototype.aggregatedAxis=function(t,e){for(var i=this.series,n=0;n<i.length;n++){var r=i[n].categoryAxis||"";if((r===t||!r&&0===e)&&i[n].categoryField)return!0}},e.prototype.createCategoryAxesLabels=function(){for(var t=this.axes,e=0;e<t.length;e++)t[e]instanceof wu&&t[e].createLabels()},e.prototype.createCategoryAxes=function(t){for(var e=this,i=this.invertAxes,n=[].concat(this.options.categoryAxis),r=[],o=0;o<n.length;o++){var s=n[o];if($s(e.findPane(s.pane),t)){var a=s.name,l=s.categories;void 0===l&&(l=[]),s=As({vertical:i,reverse:!i&&e.chartService.rtl,axisCrossingValue:i?es:0},s),Qa(s.justified)||(s.justified=e.isJustified()),e.axisRequiresRounding(a,o)&&(s.justified=!1);var h=void 0;if(h=Em(s,l[0])?new Du(s,e.chartService):new wu(s,e.chartService),n[o].categories=h.options.srcCategories,a){if(e.namedCategoryAxes[a])throw new Error("Category axis with name "+a+" is already defined");e.namedCategoryAxes[a]=h}h.axisIndex=o,r.push(h),e.appendAxis(h)}}var c=this.categoryAxis||r[0];this.categoryAxis=c,i?this.axisY=c:this.axisX=c},e.prototype.isJustified=function(){for(var t=this.series,e=0;e<t.length;e++){if(!$s(t[e].type,mg))return!1}return!0},e.prototype.createValueAxes=function(t){var e=this,i=this.valueAxisRangeTracker,n=i.query(),r=[].concat(this.options.valueAxis),o=this.invertAxes,s={vertical:!o,reverse:o&&this.chartService.rtl},a=[];this.stack100&&(s.roundToMajorUnit=!1,s.labels={format:"P0"});for(var l=0;l<r.length;l++){var h=r[l];if($s(e.findPane(h.pane),t)){var c=h.name,p=km(h.type,Df)?{min:.1,max:1}:{min:0,max:1},u=i.query(c)||n||p;0===l&&u&&n&&(u.min=Math.min(u.min,n.min),u.max=Math.max(u.max,n.max));var d=new(km(h.type,Df)?qu:Nu)(u.min,u.max,As({},s,h),e.chartService);if(c){if(e.namedValueAxes[c])throw new Error("Value axis with name "+c+" is already defined");e.namedValueAxes[c]=d}d.axisIndex=l,a.push(d),e.appendAxis(d)}}var f=this.valueAxis||a[0];this.valueAxis=f,o?this.axisX=f:this.axisY=f},e.prototype._dispatchEvent=function(t,e,i){var n=t._eventCoordinates(e),r=new $l(n.x,n.y),o=this.pointPane(r),s=[],a=[];if(o){for(var l=o.axes,h=0;h<l.length;h++){var c=l[h];c.getValue?wm(a,c.getValue(r)):wm(s,c.getCategory(r))}0===s.length&&wm(s,this.categoryAxis.getCategory(r)),s.length>0&&a.length>0&&t.trigger(i,{element:rl(e),originalEvent:e,category:Tm(s),value:Tm(a)})}},e.prototype.pointPane=function(t){for(var e=this.panes,i=0;i<e.length;i++){var n=e[i];if(n.contentBox.containsPoint(t))return n}},e.prototype.updateAxisOptions=function(t,e){bg(this.options,t,e),bg(this.originalOptions,t,e)},e}(Bm);function bg(t,e,i){As([].concat(e instanceof wu?t.categoryAxis:t.valueAxis)[e.axisIndex],i)}function wg(t,e,i){return Hs(t,(function(t){return 0===i&&!t.categoryAxis||t.categoryAxis===e}))}vl(yg,{categoryAxis:{},valueAxis:{}}),As(yg.prototype,jm);const xg=yg;function _g(t,e){var i,n=0;if(!e||e<=0)return t;var r=function(){var r=Sa()-n,o=arguments,s=function(){t.apply(null,o),n=Sa()};if(!n)return s();i&&clearTimeout(i),r>e?s():i=setTimeout(s,e-r)};return r.cancel=function(){clearTimeout(i)},r}var kg=function(t){function e(){t.call(this),this._events={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(t,e,i){var n=arguments,r=this,o=Cg(t),s=Sg(e),a=o.length;if(void 0===e){for(var l in t)r.bind(l,t[l]);return this}for(var h=function(t){var a=o[t],l=s?e:e[a];if(l){if(i){var h=l;(l=function(){r.unbind(a,l),h.apply(r,n)}).original=h}(r._events[a]=r._events[a]||[]).push(l)}},c=0;c<a;c++)h(c);return this},e.prototype.one=function(t,e){return this.bind(t,e,!0)},e.prototype.first=function(t,e){for(var i=Cg(t),n=Sg(e),r=0,o=i.length;r<o;r++){var s=i[r],a=n?e:e[s];if(a)(this._events[s]=this._events[s]||[]).unshift(a)}return this},e.prototype.trigger=function(t,e){void 0===e&&(e={});var i=this._events[t];if(i){var n=i.length;e.sender=this,e._defaultPrevented=!1,e.preventDefault=Eg,e.isDefaultPrevented=Tg,i=i.slice();for(var r=0;r<n;r++)i[r].call(this,e);return!0===e._defaultPrevented}return!1},e.prototype.unbind=function(t,e){var i=this._events[t];if(void 0===t)this._events={};else if(i)if(e)for(var n=i.length-1;n>=0;n--)i[n]!==e&&i[n].original!==e||i.splice(n,1);else this._events[t]=[];return this},e}(na);function Sg(t){return"function"==typeof t}function Cg(t){return"string"==typeof t?[t]:t}function Eg(){this._defaultPrevented=!0}function Tg(){return!0===this._defaultPrevented}var Ag=["click","mouseenter","mouseleave","mousemove","resize"],Mg=function(t){function e(e,i){t.call(this),this.options=Object.assign({},i),this.element=e,this.element._kendoExportVisual=this.exportVisual.bind(this),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._mousemove=this._handler("mousemove"),this._visual=new Cc,Pa(e,this.options),this.bind(Ag,this.options),this._enableTracking()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t){this._visual.children.push(t)},e.prototype.clear=function(){this._visual.children=[]},e.prototype.destroy=function(){this._visual=null,this.element._kendoExportVisual=null,this.unbind()},e.prototype.eventTarget=function(t){for(var e,i=ba(t);!e&&i&&(e=i._kendoNode,i!==this.element);)i=i.parentElement;if(e)return e.srcElement},e.prototype.exportVisual=function(){return this._visual},e.prototype.getSize=function(){return Pa(this.element)},e.prototype.currentSize=function(t){if(!t)return this._size;this._size=t},e.prototype.setSize=function(t){Pa(this.element,t),this.currentSize(t),this._resize()},e.prototype.resize=function(t){var e=this.getSize(),i=this.currentSize();(t||(e.width>0||e.height>0)&&(!i||e.width!==i.width||e.height!==i.height))&&(this.currentSize(e),this._resize(e,t),this.trigger("resize",e))},e.prototype.size=function(t){if(!t)return this.getSize();this.setSize(t)},e.prototype.suspendTracking=function(){this._suspendedTracking=!0},e.prototype.resumeTracking=function(){this._suspendedTracking=!1},e.prototype._enableTracking=function(){},e.prototype._resize=function(){},e.prototype._handler=function(t){var e=this;return function(i){var n=e.eventTarget(i);n&&!e._suspendedTracking&&e.trigger(t,{element:n,originalEvent:i,type:t})}},e.prototype._elementOffset=function(){var t=this.element,e=Ia(t),i=Ma(t),n=i.left,r=i.top;return{left:n+e.left,top:r+e.top}},e.prototype._surfacePoint=function(t){var e=this._elementOffset(),i=ya(t),n=i.x-e.left,r=i.y-e.top,o=ja(this.element).invert();return new th(n,r).transform(o)},e}(kg);const Og=Mg;var Dg=function(t){function e(e){t.call(this),this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.srcElement&&this.srcElement.removeObserver(this);for(var t=this.childNodes,e=0;e<t.length;e++)this.childNodes[e].destroy();this.parent=null},e.prototype.load=function(){},e.prototype.observe=function(){this.srcElement&&this.srcElement.addObserver(this)},e.prototype.append=function(t){this.childNodes.push(t),t.parent=this},e.prototype.insertAt=function(t,e){this.childNodes.splice(e,0,t),t.parent=this},e.prototype.remove=function(t,e){for(var i=t+e,n=t;n<i;n++)this.childNodes[n].removeSelf();this.childNodes.splice(t,e)},e.prototype.removeSelf=function(){this.clear(),this.destroy()},e.prototype.clear=function(){this.remove(0,this.childNodes.length)},e.prototype.invalidate=function(){this.parent&&this.parent.invalidate()},e.prototype.geometryChange=function(){this.invalidate()},e.prototype.optionsChange=function(){this.invalidate()},e.prototype.childrenChange=function(t){"add"===t.action?this.load(t.items,t.index):"remove"===t.action&&this.remove(t.index,t.items.length),this.invalidate()},e}(na);const Pg=Dg;function Rg(t,e){return bs(e)&&null!==e?" "+t+'="'+e+'" ':""}function Ig(t){for(var e="",i=0;i<t.length;i++)e+=Rg(t[i][0],t[i][1]);return e}function zg(t){for(var e="",i=0;i<t.length;i++){var n=t[i][1];bs(n)&&(e+=t[i][0]+":"+n+";")}if(""!==e)return e}const Lg={};var Bg="http://www.w3.org/2000/svg",Ng="none",jg=function(t,e){t.innerHTML=e};if("undefined"!=typeof document){var Fg=document.createElement("div"),Vg="undefined"!=typeof DOMParser;Fg.innerHTML="<svg xmlns='http://www.w3.org/2000/svg'></svg>",Vg&&Fg.firstChild.namespaceURI!==Bg&&(jg=function(t,e){var i=(new DOMParser).parseFromString(e,"text/xml"),n=document.adoptNode(i.documentElement);t.innerHTML="",t.appendChild(n)})}const Hg=jg;var Wg="transform",Ug={clip:"clip-path",fill:"fill"};function qg(t,e){return"clip"===t||"fill"===t&&(!e||"Gradient"===e.nodeType)}var $g=function(t){function e(e,i){t.call(this,e),this.definitions={},this.options=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),t.prototype.destroy.call(this)},e.prototype.load=function(t,e){for(var i=this,n=0;n<t.length;n++){var r=t[n],o=r.children,s=new Lg[r.nodeType](r,i.options);bs(e)?i.insertAt(s,e):i.append(s),s.createDefinitions(),o&&o.length>0&&s.load(o);var a=i.element;a&&s.attachTo(a,e)}},e.prototype.root=function(){for(var t=this;t.parent;)t=t.parent;return t},e.prototype.attachTo=function(t,e){var i=document.createElement("div");Hg(i,"<svg xmlns='"+Bg+"' version='1.1'>"+this.render()+"</svg>");var n=i.firstChild.firstChild;n&&(bs(e)?t.insertBefore(n,t.childNodes[e]||null):t.appendChild(n),this.setElement(n))},e.prototype.setElement=function(t){this.element&&(this.element._kendoNode=null),this.element=t,this.element._kendoNode=this;for(var e=this.childNodes,i=0;i<e.length;i++){var n=t.childNodes[i];e[i].setElement(n)}},e.prototype.clear=function(){this.clearDefinitions(),this.element&&(this.element.innerHTML="");for(var t=this.childNodes,e=0;e<t.length;e++)t[e].destroy();this.childNodes=[]},e.prototype.removeSelf=function(){if(this.element){var e=this.element.parentNode;e&&e.removeChild(this.element),this.element=null}t.prototype.removeSelf.call(this)},e.prototype.template=function(){return this.renderChildren()},e.prototype.render=function(){return this.template()},e.prototype.renderChildren=function(){for(var t=this.childNodes,e="",i=0;i<t.length;i++)e+=t[i].render();return e},e.prototype.optionsChange=function(e){var i=e.field,n=e.value;"visible"===i?this.css("display",n?"":Ng):Ug[i]&&qg(i,n)?this.updateDefinition(i,n):"opacity"===i?this.attr("opacity",n):"cursor"===i?this.css("cursor",n):"id"===i&&(n?this.attr("id",n):this.removeAttr("id")),t.prototype.optionsChange.call(this,e)},e.prototype.attr=function(t,e){this.element&&this.element.setAttribute(t,e)},e.prototype.allAttr=function(t){for(var e=0;e<t.length;e++)this.attr(t[e][0],t[e][1])},e.prototype.css=function(t,e){this.element&&(this.element.style[t]=e)},e.prototype.allCss=function(t){for(var e=0;e<t.length;e++)this.css(t[e][0],t[e][1])},e.prototype.removeAttr=function(t){this.element&&this.element.removeAttribute(t)},e.prototype.mapTransform=function(t){var e=[];return t&&e.push([Wg,"matrix("+t.matrix().toString(6)+")"]),e},e.prototype.renderTransform=function(){return Ig(this.mapTransform(this.srcElement.transform()))},e.prototype.transformChange=function(t){t?this.allAttr(this.mapTransform(t)):this.removeAttr(Wg)},e.prototype.mapStyle=function(){var t=this.srcElement.options,e=[["cursor",t.cursor]];return!1===t.visible&&e.push(["display",Ng]),e},e.prototype.renderStyle=function(){return Rg("style",zg(this.mapStyle(!0)))},e.prototype.renderOpacity=function(){return Rg("opacity",this.srcElement.options.opacity)},e.prototype.renderId=function(){return Rg("id",this.srcElement.options.id)},e.prototype.createDefinitions=function(){var t=this.srcElement,e=this.definitions;if(t){var i,n=t.options;for(var r in Ug){var o=n.get(r);o&&qg(r,o)&&(e[r]=o,i=!0)}i&&this.definitionChange({action:"add",definitions:e})}},e.prototype.definitionChange=function(t){this.parent&&this.parent.definitionChange(t)},e.prototype.updateDefinition=function(t,e){var i=this.definitions,n=i[t],r=Ug[t],o={};n&&(o[t]=n,this.definitionChange({action:"remove",definitions:o}),delete i[t]),e?(o[t]=e,this.definitionChange({action:"add",definitions:o}),i[t]=e,this.attr(r,this.refUrl(e.id))):n&&this.removeAttr(r)},e.prototype.clearDefinitions=function(){var t=this.definitions;this.definitionChange({action:"remove",definitions:t}),this.definitions={}},e.prototype.renderDefinitions=function(){return Ig(this.mapDefinitions())},e.prototype.mapDefinitions=function(){var t=this.definitions,e=[];for(var i in t)e.push([Ug[i],this.refUrl(t[i].id)]);return e},e.prototype.refUrl=function(t){var e=(this.options||{}).skipBaseHref,i=this.baseUrl().replace(/'/g,"\\'");return"url("+(e?"":i)+"#"+t+")"},e.prototype.baseUrl=function(){return function(){var t=document.getElementsByTagName("base")[0],e=document.location.href,i="";if(t&&!(ta.browser||{}).msie){var n=e.indexOf("#");-1!==n&&(e=e.substring(0,n)),i=e}return i}()},e}(Pg);const Gg=$g;var Kg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<stop "+this.renderOffset()+" "+this.renderStyle()+" />"},e.prototype.renderOffset=function(){return Rg("offset",this.srcElement.offset())},e.prototype.mapStyle=function(){var t=this.srcElement;return[["stop-color",t.color()],["stop-opacity",t.opacity()]]},e.prototype.optionsChange=function(t){"offset"===t.field?this.attr(t.field,t.value):"color"!==t.field&&"opacity"!==t.field||this.css("stop-"+t.field,t.value)},e}(Gg);const Xg=Kg;const Yg=function(t){function e(e){t.call(this,e),this.id=e.id,this.loadStops()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadStops=function(){for(var t=this.srcElement.stops,e=this.element,i=0;i<t.length;i++){var n=new Xg(t[i]);this.append(n),e&&n.attachTo(e)}},e.prototype.optionsChange=function(t){"gradient.stops"===t.field?(Pg.prototype.clear.call(this),this.loadStops()):"gradient"===t.field&&this.allAttr(this.mapCoordinates())},e.prototype.renderCoordinates=function(){return Ig(this.mapCoordinates())},e.prototype.mapSpace=function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]},e}(Gg);var Zg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<linearGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</linearGradient>"},e.prototype.mapCoordinates=function(){var t=this.srcElement,e=t.start(),i=t.end();return[["x1",e.x],["y1",e.y],["x2",i.x],["y2",i.y],this.mapSpace()]},e}(Yg);const Jg=Zg;var Qg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<radialGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</radialGradient>"},e.prototype.mapCoordinates=function(){var t=this.srcElement,e=t.center(),i=t.radius();return[["cx",e.x],["cy",e.y],["r",i],this.mapSpace()]},e}(Yg);const ty=Qg;const ey=function(t){function e(e){t.call(this),this.srcElement=e,this.id=e.id,this.load([e])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<clipPath id='"+this.id+"'>"+this.renderChildren()+"</clipPath>"},e}(Gg);var iy=function(t){function e(){t.call(this),this.definitionMap={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.attachTo=function(t){this.element=t},e.prototype.template=function(){return"<defs>"+this.renderChildren()+"</defs>"},e.prototype.definitionChange=function(t){var e=t.definitions,i=t.action;"add"===i?this.addDefinitions(e):"remove"===i&&this.removeDefinitions(e)},e.prototype.createDefinition=function(t,e){var i;return"clip"===t?i=ey:"fill"===t&&(e instanceof Zc?i=Jg:e instanceof Qc&&(i=ty)),new i(e)},e.prototype.addDefinitions=function(t){for(var e in t)this.addDefinition(e,t[e])},e.prototype.addDefinition=function(t,e){var i=this.element,n=this.definitionMap,r=e.id,o=n[r];if(o)o.count++;else{var s=this.createDefinition(t,e);n[r]={element:s,count:1},this.append(s),i&&s.attachTo(this.element)}},e.prototype.removeDefinitions=function(t){for(var e in t)this.removeDefinition(t[e])},e.prototype.removeDefinition=function(t){var e=this.definitionMap,i=t.id,n=e[i];n&&(n.count--,0===n.count&&(this.remove(this.childNodes.indexOf(n.element),1),delete e[i]))},e}(Gg);const ny=iy;var ry=function(t){function e(e){t.call(this),this.options=e,this.defs=new ny}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.attachTo=function(t){this.element=t,this.defs.attachTo(t.firstElementChild)},e.prototype.clear=function(){Pg.prototype.clear.call(this)},e.prototype.template=function(){return this.defs.render()+this.renderChildren()},e.prototype.definitionChange=function(t){this.defs.definitionChange(t)},e}(Gg);const oy=ry;var sy={dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},ay="solid",ly="butt",hy={"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},cy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){this.attr("d",this.renderData()),this.invalidate()},e.prototype.optionsChange=function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case"transform":this.transformChange(e.value);break;default:var i=hy[e.field];i&&this.attr(i,e.value)}t.prototype.optionsChange.call(this,e)},e.prototype.content=function(){this.element&&(this.element.textContent=this.srcElement.content())},e.prototype.renderData=function(){return this.printPath(this.srcElement)},e.prototype.printPath=function(t){var e=this,i=t.segments,n=i.length;if(n>0){for(var r,o,s=[],a=1;a<n;a++){var l=e.segmentType(i[a-1],i[a]);l!==o&&(o=l,s.push(l)),"L"===l?s.push(e.printPoints(i[a].anchor())):s.push(e.printPoints(i[a-1].controlOut(),i[a].controlIn(),i[a].anchor()))}return r="M"+this.printPoints(i[0].anchor())+" "+s.join(" "),t.options.closed&&(r+="Z"),r}},e.prototype.printPoints=function(){for(var t=arguments,e=t.length,i=[],n=0;n<e;n++)i.push(t[n].toString(3));return i.join(" ")},e.prototype.segmentType=function(t,e){return t.controlOut()&&e.controlIn()?"C":"L"},e.prototype.mapStroke=function(t){var e=[];return t&&!wa(t.color)?(e.push(["stroke",t.color]),e.push(["stroke-width",t.width]),e.push(["stroke-linecap",this.renderLinecap(t)]),e.push(["stroke-linejoin",t.lineJoin]),bs(t.opacity)&&e.push(["stroke-opacity",t.opacity]),bs(t.dashType)&&e.push(["stroke-dasharray",this.renderDashType(t)])):e.push(["stroke",Ng]),e},e.prototype.renderStroke=function(){return Ig(this.mapStroke(this.srcElement.options.stroke))},e.prototype.renderDashType=function(t){var e=t.dashType,i=t.width;if(void 0===i&&(i=1),e&&e!==ay){for(var n=sy[e.toLowerCase()],r=[],o=0;o<n.length;o++)r.push(n[o]*i);return r.join(" ")}},e.prototype.renderLinecap=function(t){var e=t.dashType,i=t.lineCap;return e&&"solid"!==e?ly:i},e.prototype.mapFill=function(t){var e=[];return t&&"Gradient"===t.nodeType||(t&&!wa(t.color)?(e.push(["fill",t.color]),bs(t.opacity)&&e.push(["fill-opacity",t.opacity])):e.push(["fill",Ng])),e},e.prototype.renderFill=function(){return Ig(this.mapFill(this.srcElement.options.fill))},e.prototype.template=function(){return"<path "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" "+Rg("d",this.renderData())+this.renderStroke()+this.renderFill()+this.renderDefinitions()+this.renderTransform()+"></path>"},e}(Gg);const py=cy;var uy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderData=function(){return this.printPath(this.srcElement.toPath())},e}(py);const dy=uy;var fy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.center();this.attr("cx",t.x),this.attr("cy",t.y),this.attr("r",this.radius()),this.invalidate()},e.prototype.center=function(){return this.srcElement.geometry().center},e.prototype.radius=function(){return this.srcElement.geometry().radius},e.prototype.template=function(){return"<circle "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+"cx='"+this.center().x+"' cy='"+this.center().y+"' r='"+this.radius()+"'"+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+this.renderTransform()+" ></circle>"},e}(py);const vy=fy;var my=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<g"+(this.renderId()+this.renderTransform()+this.renderStyle()+this.renderOpacity()+this.renderDefinitions())+">"+this.renderChildren()+"</g>"},e.prototype.optionsChange=function(e){"transform"===e.field&&this.transformChange(e.value),t.prototype.optionsChange.call(this,e)},e}(Gg);const gy=my;var yy=/&/g,by=/</g,wy=/"/g,xy=/'/g,_y=/>/g;function ky(t){return String(t).replace(yy,"&amp;").replace(by,"&lt;").replace(_y,"&gt;").replace(wy,"&quot;").replace(xy,"&#39;")}var Sy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){this.allAttr(this.mapPosition()),this.invalidate()},e.prototype.optionsChange=function(e){"src"===e.field&&this.allAttr(this.mapSource()),t.prototype.optionsChange.call(this,e)},e.prototype.mapPosition=function(){var t=this.srcElement.rect(),e=t.topLeft();return[["x",e.x],["y",e.y],["width",t.width()+"px"],["height",t.height()+"px"]]},e.prototype.renderPosition=function(){return Ig(this.mapPosition())},e.prototype.mapSource=function(t){var e=this.srcElement.src();return t&&(e=ky(e)),[["xlink:href",e]]},e.prototype.renderSource=function(){return Ig(this.mapSource(!0))},e.prototype.template=function(){return"<image preserveAspectRatio='none' "+this.renderId()+" "+this.renderStyle()+" "+this.renderTransform()+" "+this.renderOpacity()+this.renderPosition()+" "+this.renderSource()+" "+this.renderDefinitions()+"></image>"},e}(py);const Cy=Sy;var Ey=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderData=function(){var t=this.srcElement.paths;if(t.length>0){for(var e=[],i=0;i<t.length;i++)e.push(this.printPath(t[i]));return e.join(" ")}},e}(py);const Ty=Ey;var Ay=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.srcElement.geometry();this.attr("x",t.origin.x),this.attr("y",t.origin.y),this.attr("width",t.size.width),this.attr("height",t.size.height),this.attr("rx",t.cornerRadius[0]),this.attr("ry",t.cornerRadius[1]),this.invalidate()},e.prototype.size=function(){return this.srcElement.geometry().size},e.prototype.origin=function(){return this.srcElement.geometry().origin},e.prototype.rx=function(){return this.srcElement.geometry().cornerRadius[0]},e.prototype.ry=function(){return this.srcElement.geometry().cornerRadius[1]},e.prototype.template=function(){return"<rect "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" x='"+this.origin().x+"' y='"+this.origin().y+"' rx='"+this.rx()+"' ry='"+this.ry()+"' width='"+this.size().width+"' height='"+this.size().height+"' "+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+" "+this.renderTransform()+" />"},e}(py);const My=Ay;var Oy=/&(?:[a-zA-Z]+|#\d+);/g;function Dy(t){if(!t||"string"!=typeof t||!Oy.test(t))return t;var e=Dy._element;return Oy.lastIndex=0,t.replace(Oy,(function(t){return e.innerHTML=t,e.textContent||e.innerText}))}"undefined"!=typeof document&&(Dy._element=document.createElement("span"));var Py=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.pos();this.attr("x",t.x),this.attr("y",t.y),this.invalidate()},e.prototype.optionsChange=function(e){"font"===e.field?(this.attr("style",zg(this.mapStyle())),this.geometryChange()):"content"===e.field&&t.prototype.content.call(this,this.srcElement.content()),t.prototype.optionsChange.call(this,e)},e.prototype.mapStyle=function(e){var i=t.prototype.mapStyle.call(this,e),n=this.srcElement.options.font;return e&&(n=ky(n)),i.push(["font",n],["white-space","pre"]),i},e.prototype.pos=function(){var t=this.srcElement.position(),e=this.srcElement.measure();return t.clone().setY(t.y+e.baseline)},e.prototype.renderContent=function(){var t=this.srcElement.content();return Wa(t=ky(t=Dy(t)))},e.prototype.renderTextAnchor=function(){var t;return!(this.options||{}).rtl||ta.browser.msie||ta.browser.edge||(t="end"),Rg("text-anchor",t)},e.prototype.template=function(){return"<text "+this.renderId()+" "+this.renderTextAnchor()+" "+this.renderStyle()+" "+this.renderOpacity()+"x='"+this.pos().x+"' y='"+this.pos().y+"' "+this.renderStroke()+" "+this.renderTransform()+" "+this.renderDefinitions()+this.renderFill()+">"+this.renderContent()+"</text>"},e}(py);const Ry=Py;Lg.Arc=dy,Lg.Circle=vy,Lg.Group=gy,Lg.Image=Cy,Lg.MultiPath=Ty,Lg.Path=py,Lg.Rect=My,Lg.Text=Ry;var Iy=function(t){function e(e,i){t.call(this,e,i),this._root=new oy(Object.assign({rtl:"rtl"===Oa(e,"direction").direction},this.options)),Hg(this.element,this._template()),this._rootElement=this.element.firstElementChild,function(t){var e;try{e=t.getScreenCTM?t.getScreenCTM():null}catch(t){}if(e){var i=-e.e%1,n=-e.f%1,r=t.style;0===i&&0===n||(r.left=i+"px",r.top=n+"px")}}(this._rootElement),this._root.attachTo(this._rootElement),Aa(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove}),this.resize()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{configurable:!0}};return i.type.get=function(){return"svg"},e.prototype.destroy=function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,Ra(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove})),t.prototype.destroy.call(this)},e.prototype.translate=function(t){var e=Math.round(t.x)+" "+Math.round(t.y)+" "+this._size.width+" "+this._size.height;this._offset=t,this._rootElement.setAttribute("viewBox",e)},e.prototype.draw=function(e){t.prototype.draw.call(this,e),this._root.load([e])},e.prototype.clear=function(){t.prototype.clear.call(this),this._root.clear()},e.prototype.svg=function(){return"<?xml version='1.0' ?>"+this._template()},e.prototype.exportVisual=function(){var t=this._visual,e=this._offset;if(e){var i=new Cc;i.children.push(t),i.transform(Eh().translate(-e.x,-e.y)),t=i}return t},e.prototype._resize=function(){this._offset&&this.translate(this._offset)},e.prototype._template=function(){return"<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+Bg+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+this._root.render()+"</svg>"},Object.defineProperties(e.prototype,i),e}(Og);const zy=Iy;const Ly={};function By(t,e){var i=e.segments;if(0!==i.length){var n=i[0],r=n.anchor();t.moveTo(r.x,r.y);for(var o=1;o<i.length;o++){r=(n=i[o]).anchor();var s=i[o-1].controlOut(),a=n.controlIn();s&&a?t.bezierCurveTo(s.x,s.y,a.x,a.y,r.x,r.y):t.lineTo(r.x,r.y)}e.options.closed&&t.closePath()}}var Ny=function(t){function e(e){t.call(this,e),e&&this.initClip()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initClip=function(){var t=this.srcElement.clip();t&&(this.clip=t,t.addObserver(this))},e.prototype.clear=function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),t.prototype.clear.call(this)},e.prototype.clearClip=function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},e.prototype.setClip=function(t){this.clip&&(t.beginPath(),By(t,this.clip),t.clip())},e.prototype.optionsChange=function(e){"clip"===e.field&&(this.clearClip(),this.initClip()),t.prototype.optionsChange.call(this,e)},e.prototype.setTransform=function(t){if(this.srcElement){var e=this.srcElement.transform();e&&t.transform.apply(t,e.matrix().toArray(6))}},e.prototype.loadElements=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n],o=r.children,s=new Ly[r.nodeType](r,i);o&&o.length>0&&s.load(o,e,i),bs(e)?this.insertAt(s,e):this.append(s)}},e.prototype.load=function(t,e,i){this.loadElements(t,e,i),this.invalidate()},e.prototype.setOpacity=function(t){if(this.srcElement){var e=this.srcElement.opacity();bs(e)&&this.globalAlpha(t,e)}},e.prototype.globalAlpha=function(t,e){var i=e;i&&t.globalAlpha&&(i*=t.globalAlpha),t.globalAlpha=i},e.prototype.visible=function(){var t=this.srcElement;return!t||t&&!1!==t.options.visible},e}(Pg);const jy=Ny;var Fy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){if(this.visible()){t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t);for(var e=this.childNodes,i=0;i<e.length;i++){var n=e[i];n.visible()&&n.renderTo(t)}t.restore()}},e}(kc(jy,"childNodes"));const Vy=Fy;var Hy=function(t){function e(e,i){t.call(this),this.canvas=e,this.size=i,this.ctx=e.getContext("2d");var n=this._invalidate.bind(this);this.invalidate=_g((function(){Oc(n)}),16.666666666666668)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this.canvas=null,this.ctx=null},e.prototype.load=function(t,e,i){this.loadElements(t,e,i),this._invalidate()},e.prototype._rescale=function(t){var e=this.canvas,i=this.size;e.width=i.width*t,e.height=i.height*t,this.ctx.scale(t,t)},e.prototype._devicePixelRatio=function(){return"number"==typeof window.devicePixelRatio?window.devicePixelRatio:1},e.prototype._invalidate=function(t){if(this.ctx){var e=t&&t.fixedScale?1:this._devicePixelRatio();this._rescale(e),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx)}},e}(kc(Vy,"childNodes"));const Wy=Hy;var Uy=function(t){function e(){t.call(this),this.shapes=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._add=function(t,e){this.shapes.push({bbox:e,shape:t}),t._quadNode=this},e.prototype.pointShapes=function(t){for(var e=this.shapes,i=e.length,n=[],r=0;r<i;r++)e[r].bbox.containsPoint(t)&&n.push(e[r].shape);return n},e.prototype.insert=function(t,e){this._add(t,e)},e.prototype.remove=function(t){for(var e=this.shapes,i=e.length,n=0;n<i;n++)if(e[n].shape===t){e.splice(n,1);break}},e}(na);const qy=Uy;var $y=function(t){function e(e){t.call(this),this.children=[],this.rect=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.inBounds=function(t){var e=this.rect,i=e.bottomRight(),n=t.bottomRight(),r=e.origin.x<=t.origin.x&&e.origin.y<=t.origin.y&&n.x<=i.x&&n.y<=i.y;return r},e.prototype.pointShapes=function(e){for(var i=this.children,n=i.length,r=t.prototype.pointShapes.call(this,e),o=0;o<n;o++)oa(r,i[o].pointShapes(e));return r},e.prototype.insert=function(t,e){var i=this.children,n=!1;if(this.inBounds(e)){if(this.shapes.length<4)this._add(t,e);else{i.length||this._initChildren();for(var r=0;r<i.length;r++)if(i[r].insert(t,e)){n=!0;break}n||this._add(t,e)}n=!0}return n},e.prototype._initChildren=function(){var t=this.rect,i=this.children,n=t.center(),r=t.width()/2,o=t.height()/2;i.push(new e(new rh([t.origin.x,t.origin.y],[r,o])),new e(new rh([n.x,t.origin.y],[r,o])),new e(new rh([t.origin.x,n.y],[r,o])),new e(new rh([n.x,n.y],[r,o])))},e}(qy);const Gy=$y;var Ky=3e3,Xy=function(t){function e(){t.call(this),this.initRoots()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initRoots=function(){this.rootMap={},this.root=new qy,this.rootElements=[]},e.prototype.clear=function(){for(var t=this.rootElements,e=0;e<t.length;e++)this.remove(t[e]);this.initRoots()},e.prototype.pointShape=function(t){var e=(this.rootMap[Math.floor(t.x/Ky)]||{})[Math.floor(t.y/Ky)],i=this.root.pointShapes(t);e&&(i=i.concat(e.pointShapes(t))),this.assignZindex(i),i.sort(Yy);for(var n=0;n<i.length;n++)if(i[n].containsPoint(t))return i[n]},e.prototype.assignZindex=function(t){for(var e=0;e<t.length;e++){for(var i=t[e],n=0,r=Math.pow(1e4,75),o=[];i;)o.push(i),i=i.parent;for(;o.length;)n+=(((i=o.pop()).parent?i.parent.children:this.rootElements).indexOf(i)+1)*r,r/=1e4;t[e]._zIndex=n}},e.prototype.optionsChange=function(t){"transform"!==t.field&&"stroke.width"!==t.field||this.bboxChange(t.element)},e.prototype.geometryChange=function(t){this.bboxChange(t.element)},e.prototype.bboxChange=function(t){if("Group"===t.nodeType)for(var e=0;e<t.children.length;e++)this.bboxChange(t.children[e]);else t._quadNode&&t._quadNode.remove(t),this._insertShape(t)},e.prototype.add=function(t){var e=Array.isArray(t)?t.slice(0):[t];oa(this.rootElements,e),this._insert(e)},e.prototype.childrenChange=function(t){if("remove"===t.action)for(var e=0;e<t.items.length;e++)this.remove(t.items[e]);else this._insert(Array.prototype.slice.call(t.items,0))},e.prototype._insert=function(t){for(var e;t.length>0;)(e=t.pop()).addObserver(this),"Group"===e.nodeType?oa(t,e.children):this._insertShape(e)},e.prototype._insertShape=function(t){var e=t.bbox();if(e){var i=this.getSectors(e),n=i[0][0],r=i[1][0];if(this.inRoot(i))this.root.insert(t,e);else{var o=this.rootMap;o[n]||(o[n]={}),o[n][r]||(o[n][r]=new Gy(new rh([n*Ky,r*Ky],[Ky,Ky]))),o[n][r].insert(t,e)}}},e.prototype.remove=function(t){if(t.removeObserver(this),"Group"===t.nodeType)for(var e=t.children,i=0;i<e.length;i++)this.remove(e[i]);else t._quadNode&&(t._quadNode.remove(t),delete t._quadNode)},e.prototype.inRoot=function(t){return t[0].length>1||t[1].length>1},e.prototype.getSectors=function(t){for(var e=t.bottomRight(),i=Math.floor(e.x/Ky),n=Math.floor(e.y/Ky),r=[[],[]],o=Math.floor(t.origin.x/Ky);o<=i;o++)r[0].push(o);for(var s=Math.floor(t.origin.y/Ky);s<=n;s++)r[1].push(s);return r},e}(na);function Yy(t,e){return t._zIndex<e._zIndex?1:t._zIndex>e._zIndex?-1:0}const Zy=Xy;var Jy=function(t){t.bind("mouseenter",this._mouseenter.bind(this)),t.bind("mouseleave",this._mouseleave.bind(this)),this.element=t.element};Jy.prototype.clear=function(){this._resetCursor()},Jy.prototype.destroy=function(){this._resetCursor(),delete this.element},Jy.prototype._mouseenter=function(t){var e=this._shapeCursor(t);e?(this._current||(this._defaultCursor=this._getCursor()),this._setCursor(e)):this._resetCursor()},Jy.prototype._mouseleave=function(){this._resetCursor()},Jy.prototype._shapeCursor=function(t){for(var e=t.element;e&&!bs(e.options.cursor);)e=e.parent;if(e)return e.options.cursor},Jy.prototype._getCursor=function(){if(this.element)return this.element.style.cursor},Jy.prototype._setCursor=function(t){this.element&&(this.element.style.cursor=t,this._current=t)},Jy.prototype._resetCursor=function(){this._current&&(this._setCursor(this._defaultCursor||""),delete this._current)};const Qy=Jy;var tb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),this.renderPoints(t,this.srcElement),this.setLineDash(t),this.setLineCap(t),this.setLineJoin(t),this.setFill(t),this.setStroke(t),t.restore()},e.prototype.setFill=function(t){var e=this.srcElement.options.fill,i=!1;return e&&("Gradient"===e.nodeType?(this.setGradientFill(t,e),i=!0):wa(e.color)||(t.fillStyle=e.color,t.save(),this.globalAlpha(t,e.opacity),t.fill(),t.restore(),i=!0)),i},e.prototype.setGradientFill=function(t,e){var i,n=this.srcElement.rawBBox();if(e instanceof Zc){var r=e.start(),o=e.end();i=t.createLinearGradient(r.x,r.y,o.x,o.y)}else if(e instanceof Qc){var s=e.center();i=t.createRadialGradient(s.x,s.y,0,s.x,s.y,e.radius())}!function(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=Pl(n.color());r.a*=n.opacity(),t.addColorStop(n.offset(),r.toCssRgba())}}(i,e.stops),t.save(),e.userSpace()||t.transform(n.width(),0,0,n.height(),n.origin.x,n.origin.y),t.fillStyle=i,t.fill(),t.restore()},e.prototype.setStroke=function(t){var e=this.srcElement.options.stroke;if(e&&!wa(e.color)&&e.width>0)return t.strokeStyle=e.color,t.lineWidth=Ta(e.width,1),t.save(),this.globalAlpha(t,e.opacity),t.stroke(),t.restore(),!0},e.prototype.dashType=function(){var t=this.srcElement.options.stroke;if(t&&t.dashType)return t.dashType.toLowerCase()},e.prototype.setLineDash=function(t){var e=this.dashType();if(e&&e!==ay){var i=sy[e];t.setLineDash?t.setLineDash(i):(t.mozDash=i,t.webkitLineDash=i)}},e.prototype.setLineCap=function(t){var e=this.dashType(),i=this.srcElement.options.stroke;e&&e!==ay?t.lineCap=ly:i&&i.lineCap&&(t.lineCap=i.lineCap)},e.prototype.setLineJoin=function(t){var e=this.srcElement.options.stroke;e&&e.lineJoin&&(t.lineJoin=e.lineJoin)},e.prototype.renderPoints=function(t,e){By(t,e)},e}(jy);const eb=tb;var ib=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){By(t,this.srcElement.toPath())},e}(eb);const nb=ib;var rb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){var e=this.srcElement.geometry(),i=e.center,n=e.radius;t.arc(i.x,i.y,n,0,2*Math.PI)},e}(eb);const ob=rb;var sb=function(t){function e(e,i){t.call(this,e),this.onLoad=this.onLoad.bind(this),this.onError=this.onError.bind(this),this.loading=la();var n=this.img=new Image;i&&!/^data:/i.test(e.src())&&(n.crossOrigin=i),n.src=e.src(),n.complete?this.onLoad():(n.onload=this.onLoad,n.onerror=this.onError)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){"resolved"===this.loading.state()&&(t.save(),this.setTransform(t),this.setClip(t),this.drawImage(t),t.restore())},e.prototype.optionsChange=function(e){"src"===e.field?(this.loading=la(),this.img.src=this.srcElement.src()):t.prototype.optionsChange.call(this,e)},e.prototype.onLoad=function(){this.loading.resolve(),this.invalidate()},e.prototype.onError=function(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},e.prototype.drawImage=function(t){var e=this.srcElement.rect(),i=e.topLeft();t.drawImage(this.img,i.x,i.y,e.width(),e.height())},e}(eb);const ab=sb;var lb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){for(var e=this.srcElement.paths,i=0;i<e.length;i++)By(t,e[i])},e}(eb);const hb=lb;var cb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(e){var i=this.srcElement.geometry(),n=i.cornerRadius,r=n[0],o=n[1];if(0===r&&0===o){var s=i.origin,a=i.size;e.rect(s.x,s.y,a.width,a.height)}else t.prototype.renderPoints.call(this,e,uc.fromRect(i))},e}(eb);const pb=cb;var ub=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){var e=this.srcElement,i=e.position(),n=e.measure();t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),t.font=e.options.font,t.textAlign="left",this.setFill(t)&&t.fillText(e.content(),i.x,i.y+n.baseline),this.setStroke(t)&&(this.setLineDash(t),t.strokeText(e.content(),i.x,i.y+n.baseline)),t.restore()},e}(eb);const db=ub;Ly.Arc=nb,Ly.Circle=ob,Ly.Group=Vy,Ly.Image=ab,Ly.MultiPath=hb,Ly.Path=eb,Ly.Rect=pb,Ly.Text=db;var fb=function(t){function e(e,i){t.call(this,e,i),this.element.innerHTML=this._template(this);var n=this.element.firstElementChild,r=Pa(e);n.width=r.width,n.height=r.height,this._rootElement=n,this._root=new Wy(n,r),this._mouseTrackHandler=this._trackMouse.bind(this),Aa(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{configurable:!0}};return i.type.get=function(){return"canvas"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._root&&(this._root.destroy(),this._root=null),this._searchTree&&(this._searchTree.clear(),delete this._searchTree),this._cursor&&(this._cursor.destroy(),delete this._cursor),Ra(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})},e.prototype.draw=function(e){t.prototype.draw.call(this,e),this._root.load([e],void 0,this.options.cors),this._searchTree&&this._searchTree.add([e])},e.prototype.clear=function(){t.prototype.clear.call(this),this._root.clear(),this._searchTree&&this._searchTree.clear(),this._cursor&&this._cursor.clear()},e.prototype.eventTarget=function(t){if(this._searchTree){var e=this._surfacePoint(t);return this._searchTree.pointShape(e)}},e.prototype.image=function(){var t=this._root,e=this._rootElement,i=[];t.traverse((function(t){t.loading&&i.push(t.loading)}));var n=la(),r=function(){t._invalidate({fixedScale:!0});try{var i=e.toDataURL();n.resolve(i)}catch(t){n.reject(t)}};return Ca(i).then(r,r),n},e.prototype.suspendTracking=function(){t.prototype.suspendTracking.call(this),this._searchTree&&(this._searchTree.clear(),delete this._searchTree)},e.prototype.resumeTracking=function(){if(t.prototype.resumeTracking.call(this),!this._searchTree){this._searchTree=new Zy;for(var e=this._root.childNodes,i=[],n=0;n<e.length;n++)i.push(e[n].srcElement);this._searchTree.add(i)}},e.prototype._resize=function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.size=this._size,this._root.invalidate()},e.prototype._template=function(){return"<canvas style='width: 100%; height: 100%;'></canvas>"},e.prototype._enableTracking=function(){this._searchTree=new Zy,this._cursor=new Qy(this),t.prototype._enableTracking.call(this)},e.prototype._trackMouse=function(t){if(!this._suspendedTracking){var e=this.eventTarget(t);if("click"!==t.type){var i=this._currentShape;i&&i!==e&&this.trigger("mouseleave",{element:i,originalEvent:t,type:"mouseleave"}),e&&i!==e&&this.trigger("mouseenter",{element:e,originalEvent:t,type:"mouseenter"}),this.trigger("mousemove",{element:e,originalEvent:t,type:"mousemove"}),this._currentShape=e}else e&&this.trigger("click",{element:e,originalEvent:t,type:"click"})}},Object.defineProperties(e.prototype,i),e}(Og);const vb=fb;var mb,gb,yb=function(){return"undefined"!=typeof document},bb=function(t){function e(){t.call(this),this._items=[{name:"svg",type:zy},{name:"canvas",type:vb}]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={support:{configurable:!0},current:{configurable:!0}};return i.support.get=function(){return gb||(gb={canvas:yb()&&document.createElement("canvas").getContext,svg:yb()&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}),gb},i.current.get=function(){return mb||(mb=new e),mb},e.prototype.create=function(t,e){var i=this._items,n=i[0];if(e&&e.type)for(var r=e.type.toLowerCase(),o=0;o<i.length;o++)if(i[o].name===r){n=i[o];break}if(n)return new n.type(t,e);ra("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG and Canvas. User agent: "+navigator.userAgent)},Object.defineProperties(e,i),e}(na);const wb=bb;var xb=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={support:{configurable:!0}};return i.support.get=function(){return wb.support},e.create=function(t,e){return wb.current.create(t,e)},Object.defineProperties(e,i),e}(Og);const _b=xb;var kb=function(t){function e(){t.call(this),this._points=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._points=[]},e.prototype.show=function(t,e){var i=[].concat(t);this.hide();for(var n=0;n<i.length;n++){var r=i[n];r&&r.toggleHighlight&&r.hasHighlight()&&(this.togglePointHighlight(r,!0,e),this._points.push(r))}},e.prototype.togglePointHighlight=function(t,e,i){var n=(t.options.highlight||{}).toggle;if(n){var r={category:t.category,series:t.series,dataItem:t.dataItem,value:t.value,stackValue:t.stackValue,preventDefault:Sb,visual:t.highlightVisual(),show:e};n(r),r._defaultPrevented||t.toggleHighlight(e,i)}else t.toggleHighlight(e,i)},e.prototype.hide=function(){for(var t=this._points;t.length;)this.togglePointHighlight(t.pop(),!1)},e.prototype.isHighlighted=function(t){for(var e=this._points,i=0;i<e.length;i++){if(t===e[i])return!0}return!1},e}(na);function Sb(){this._defaultPrevented=!0}const Cb=kb;function Eb(t,e){var i=(e||"").toLowerCase(),n=t.event;return"none"===i&&!(n.ctrlKey||n.shiftKey||n.altKey)||n[i+"Key"]}function Tb(t){for(var e={},i=0;i<t.length;i++){var n=t[i];n.axis.options.name&&(e[n.axis.options.name]={min:n.range.min,max:n.range.max})}return e}var Ab=function(t){function e(e,i){t.call(this),this.plotArea=e,this.options=As({},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.start=function(t){return this._active=Eb(t,this.options.key),this._active},e.prototype.move=function(t){if(this._active){var e=this.axisRanges=this._panAxes(t,fs).concat(this._panAxes(t,vs));if(e.length)return this.axisRanges=e,Tb(e)}},e.prototype.end=function(){var t=this._active;return this._active=!1,t},e.prototype.pan=function(){var t=this.plotArea,e=this.axisRanges;if(e.length){for(var i=0;i<e.length;i++){var n=e[i];t.updateAxisOptions(n.axis,n.range)}t.redraw(t.panes)}},e.prototype.destroy=function(){delete this.plotArea},e.prototype._panAxes=function(t,e){var i=this.plotArea,n=-t[e].delta,r=(this.options.lock||"").toLowerCase(),o=[];if(0!==n&&(r||"").toLowerCase()!==e)for(var s=i.axes,a=0;a<s.length;a++){var l=s[a];if(e===fs&&!l.options.vertical||e===vs&&l.options.vertical){var h=l.pan(n);h&&(h.limitRange=!0,o.push({axis:l,range:h}))}}return o},e}(na);Ab.prototype.options={key:"none",lock:"none"};const Mb=Ab;var Ob=function(t){function e(e,i){t.call(this),this.chart=e,this.options=As({},this.options,i),this.createElement()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createElement=function(){var t=this._marquee=document.createElement("div");t.className="k-marquee";var e=document.createElement("div");e.className="k-marquee-color",t.appendChild(e)},e.prototype.removeElement=function(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)},e.prototype.setStyles=function(t){Rs(this._marquee,t)},e.prototype.start=function(t){if(Eb(t,this.options.key)){var e=this.chart,i=e._eventCoordinates(t),n=this._zoomPane=e._plotArea.paneByPoint(i),r=n?n.chartsBox().clone():null;if(n&&r){var o=this._elementOffset();return r.translate(o.left,o.top),this._zoomPaneClipBox=r,document.body.appendChild(this._marquee),this.setStyles({left:t.pageX+1,top:t.pageY+1,width:0,height:0}),!0}}return!1},e.prototype._elementOffset=function(){var t=this.chart.element,e=Rs(t,["paddingLeft","paddingTop"]),i=e.paddingLeft,n=e.paddingTop,r=el(t);return{left:i+r.left,top:n+r.top}},e.prototype.move=function(t){this._zoomPane&&this.setStyles(this._selectionPosition(t))},e.prototype.end=function(t){if(this._zoomPane){var e=this._elementOffset(),i=this._selectionPosition(t);i.left-=e.left,i.top-=e.top;var n={x:i.left,y:i.top},r={x:i.left+i.width,y:i.top+i.height};return this._updateAxisRanges(n,r),this.removeElement(),delete this._zoomPane,Tb(this.axisRanges)}},e.prototype.zoom=function(){var t=this.axisRanges;if(t&&t.length){for(var e=this.chart._plotArea,i=0;i<t.length;i++){var n=t[i];e.updateAxisOptions(n.axis,n.range)}e.redraw(e.panes)}},e.prototype.destroy=function(){this.removeElement(),delete this._marquee,delete this.chart},e.prototype._updateAxisRanges=function(t,e){for(var i=(this.options.lock||"").toLowerCase(),n=[],r=this._zoomPane.axes,o=0;o<r.length;o++){var s=r[o],a=s.options.vertical;if((i!==fs||a)&&(i!==vs||!a)&&Qa(s.axisIndex)){var l=s.pointsRange(t,e);l&&n.push({axis:s,range:l})}}this.axisRanges=n},e.prototype._selectionPosition=function(t){var e=this._zoomPaneClipBox,i={x:t.x.startLocation,y:t.y.startLocation},n=t.x.location,r=t.y.location,o=(this.options.lock||"").toLowerCase(),s=Math.min(i.x,n),a=Math.min(i.y,r),l=Math.abs(i.x-n),h=Math.abs(i.y-r);return o===fs&&(s=e.x1,l=e.width()),o===vs&&(a=e.y1,h=e.height()),n>e.x2&&(l=e.x2-i.x),n<e.x1&&(l=i.x-e.x1),r>e.y2&&(h=e.y2-i.y),r<e.y1&&(h=i.y-e.y1),{left:Math.max(s,e.x1),top:Math.max(a,e.y1),width:l,height:h}},e}(na);Ob.prototype.options={key:"shift",lock:"none"};const Db=Ob;var Pb=function(t){function e(e,i){t.call(this),this.chart=e,this.options=As({rate:.3},this.options,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateRanges=function(t,e){for(var i=(this.options.lock||"").toLowerCase(),n=[],r=this.chart._plotArea.axes,o=0;o<r.length;o++){var s=r[o],a=s.options.vertical;if((i!==fs||a)&&(i!==vs||!a)&&s.zoomRange){var l=al(this.options.rate,.01,.9),h=s.zoomRange(-t*l,e);h&&n.push({axis:s,range:h})}}return this.axisRanges=n,Tb(n)},e.prototype.zoom=function(){var t=this.axisRanges,e=this.chart._plotArea;if(t&&t.length&&e.updateAxisOptions){for(var i=0;i<t.length;i++){var n=t[i];e.updateAxisOptions(n.axis,n.range)}e.redraw(e.panes)}},e.prototype.destroy=function(){delete this.chart},e}(na);const Rb=Pb;function Ib(t,e,i,n,r){return"start"===i?e.origin[n]:"end"===i?e.origin[n]+e.size[r]-t:e.origin[n]+(e.size[r]-t)/2}function zb(t,e,i,n,r){return"start"===i?e.origin[n]+e.size[r]-t:"end"===i?e.origin[n]:e.origin[n]+(e.size[r]-t)/2}var Lb={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:!0,revers:!1},Bb=function(t,e){t.forEach(e)},Nb=function(t,e){for(var i=t.length-1;i>=0;i--)e(t[i],i)},jb=function(t){function e(e,i){t.call(this,Object.assign({},Lb,i)),this._rect=e,this._fieldMap={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rect=function(t){return t?(this._rect=t,this):this._rect},e.prototype._initMap=function(){var t=this.options,e=this._fieldMap;"horizontal"===t.orientation?(e.sizeField="width",e.groupsSizeField="height",e.groupAxis="x",e.groupsAxis="y"):(e.sizeField="height",e.groupsSizeField="width",e.groupAxis="y",e.groupsAxis="x"),t.reverse?(this.forEach=Nb,this.justifyAlign=zb):(this.forEach=Bb,this.justifyAlign=Ib)},e.prototype.reflow=function(){if(this._rect&&0!==this.children.length){this._initMap(),this.options.transform&&this.transform(null);for(var t,e,i,n=this.options,r=this._rect,o=this._initGroups(),s=o.groups,a=o.groupsSize,l=this._fieldMap,h=l.sizeField,c=l.groupsSizeField,p=l.groupAxis,u=l.groupsAxis,d=new th,f=new th,v=new ih,m=Ib(a,r,n.alignContent,u,c),g=function(r,o){var s=e.elements[o];f[p]=t,f[u]=Ib(r.size[c],i,n.alignItems,u,c),function(t,e,i){var n=i.transform()||Eh(),r=n.matrix();r.e+=t.x-e.origin.x,r.f+=t.y-e.origin.y,n.matrix(r),i.transform(n)}(f,r,s),t+=r.size[h]+n.spacing},y=0;y<s.length;y++)e=s[y],d[p]=t=this.justifyAlign(e.size,r,n.justifyContent,p,h),d[u]=m,v[h]=e.size,v[c]=e.lineSize,i=new rh(d,v),this.forEach(e.bboxes,g),m+=e.lineSize+n.lineSpacing;if(!n.wrap&&e.size>r.size[h]){var b=r.size[h]/i.size[h],w=i.topLeft().scale(b,b),x=Ib(i.size[c]*b,r,n.alignContent,u,c),_=Eh();"x"===p?_.translate(r.origin.x-w.x,x-w.y):_.translate(x-w.x,r.origin.y-w.y),_.scale(b,b),this.transform(_)}}},e.prototype._initGroups=function(){for(var t=this,e=this.options,i=this.children,n=e.lineSpacing,r=e.wrap,o=e.spacing,s=this._fieldMap.sizeField,a=this._newGroup(),l=[],h=function(){l.push(a),c+=a.lineSize+n},c=-n,p=0;p<i.length;p++){var u=i[p],d=i[p].clippedBBox();u.visible()&&d&&(r&&a.size+d.size[s]+o>t._rect.size[s]?0===a.bboxes.length?(t._addToGroup(a,d,u),h(),a=t._newGroup()):(h(),a=t._newGroup(),t._addToGroup(a,d,u)):t._addToGroup(a,d,u))}return a.bboxes.length&&h(),{groups:l,groupsSize:c}},e.prototype._addToGroup=function(t,e,i){t.size+=e.size[this._fieldMap.sizeField]+this.options.spacing,t.lineSize=Math.max(e.size[this._fieldMap.groupsSizeField],t.lineSize),t.bboxes.push(e),t.elements.push(i)},e.prototype._newGroup=function(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}},e}(Cc);const Fb=jb;var Vb=function(t){function e(e,i){t.call(this,e),this.chartService=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.children,e=this.options,i=e.vertical;this.visual=new Fb(null,{spacing:i?0:e.spacing,lineSpacing:i?e.spacing:0,orientation:i?"vertical":"horizontal",reverse:e.rtl,alignItems:i?"start":"center"});for(var n=0;n<t.length;n++){var r=t[n];r.reflow(new ah),r.renderVisual()}},e.prototype.reflow=function(t){this.visual.rect(t.toRect()),this.visual.reflow();var e=this.visual.clippedBBox();this.box=e?up(e):new ah},e.prototype.renderVisual=function(){this.addVisual()},e.prototype.createVisual=function(){},e}(Bc);const Hb=Vb;var Wb=function(t){function e(e){t.call(this,e),this.createContainer(),e.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createContainer=function(){this.container=new sp({vertical:!1,wrap:!1,align:qo,spacing:this.options.spacing}),this.append(this.container)},e.prototype.createMarker=function(){this.container.append(new Vc(this.markerOptions()))},e.prototype.markerOptions=function(){var t=this.options,e=t.markerColor;return As({},t.markers,{background:e,border:{color:e}})},e.prototype.createLabel=function(){var t=this.options,e=As({},t.labels);this.container.append(new vp(t.text,e))},e.prototype.renderComplete=function(){t.prototype.renderComplete.call(this);var e=this.options.cursor||{},i=this._itemOverlay=uc.fromRect(this.container.box.toRect(),{fill:{color:us,opacity:0},stroke:null,cursor:e.style||e});this.appendVisual(i)},e.prototype.click=function(t,e){var i=this.eventArgs(e);!t.trigger("legendItemClick",i)&&e&&"contextmenu"===e.type&&e.preventDefault()},e.prototype.over=function(t,e){var i=this.eventArgs(e);return t.trigger("legendItemHover",i)||t._legendItemHover(i.seriesIndex,i.pointIndex),!0},e.prototype.out=function(t,e){t._unsetActivePoint(),t.trigger("legendItemLeave",this.eventArgs(e))},e.prototype.eventArgs=function(t){var e=this.options;return{element:rl(t),text:e.text,series:e.series,seriesIndex:e.series.index,pointIndex:e.pointIndex}},e.prototype.renderVisual=function(){var e=this,i=this.options,n=i.visual;n?(this.visual=n({active:i.active,series:i.series,sender:this.getSender(),pointIndex:i.pointIndex,options:{markers:this.markerOptions(),labels:i.labels},createVisual:function(){e.createVisual(),e.renderChildren(),e.renderComplete();var t=e.visual;return delete e.visual,t}}),this.addVisual()):t.prototype.renderVisual.call(this)},e}(jc);const Ub=Wb;var qb="horizontal",$b="custom",Gb=function(t){function e(e,i){void 0===i&&(i={}),t.call(this,e),this.chartService=i,$s(this.options.position,[cs,as,Uo,ts,$b])||(this.options.position=as),this.createContainers(),this.createLegendTitle(e.title),this.createItems()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createContainers=function(){var t=this.options,e=t.position,i=t.align,n=e,r=qo;e===$b?n=ts:$s(e,[cs,Uo])?(n="start"===i?ts:"end"===i?as:qo,r=e):i&&("start"===i?r=cs:"end"===i&&(r=Uo)),this.container=new jc({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:r,align:n,zIndex:t.zIndex,shrinkToFit:!0}),this.hasTitle()?this.itemsContainer=new jc({vAlign:r,align:n,zIndex:t.zIndex,shrinkToFit:!0}):this.itemsContainer=this.container,this.append(this.container)},e.prototype.createItems=function(){var t=this.getService(),e=this.options,i=this.isVertical(),n=new Hb({vertical:i,spacing:e.spacing,rtl:t.rtl},t),r=e.items;e.reverse&&(r=r.slice(0).reverse());for(var o=r.length,s=0;s<o;s++){var a=r[s];n.append(new Ub(As({},{markers:e.markers,labels:e.labels,rtl:t.rtl},e.item,a)))}n.render(),this.itemsContainer.append(n)},e.prototype.isVertical=function(){var t=this.options,e=t.orientation,i=t.position;return i===$b&&e!==qb||(Qa(e)?e!==qb:$s(i,[ts,as]))},e.prototype.hasItems=function(){return this.container.children[0].children.length>0},e.prototype.reflow=function(t){var e=this.options,i=t.clone();this.hasItems()?(e.position===$b?(this.containerCustomReflow(i),this.box=i):this.containerReflow(i),this.hasTitle()&&this.title.reflow(new ah(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))):this.box=i},e.prototype.containerReflow=function(t){var e=this.options,i=this.container,n=e.position,r=e.width,o=e.height,s=n===cs||n===Uo?fs:vs,a=this.isVertical(),l=t.clone(),h=t.clone();n!==ts&&n!==as||(h.y1=l.y1=0),a&&o?(h.y2=h.y1+o,h.align(l,vs,i.options.vAlign)):!a&&r&&(h.x2=h.x1+r,h.align(l,fs,i.options.align)),i.reflow(h);var c=(h=i.box).clone();(e.offsetX||e.offsetY)&&(h.translate(e.offsetX,e.offsetY),i.reflow(h)),c[s+1]=t[s+1],c[s+2]=t[s+2],this.box=c},e.prototype.containerCustomReflow=function(t){var e=this.options,i=this.container,n=e.offsetX,r=e.offsetY,o=e.width,s=e.height,a=this.isVertical(),l=t.clone();a&&s?l.y2=l.y1+s:!a&&o&&(l.x2=l.x1+o),i.reflow(l),l=i.box,i.reflow(new ah(n,r,n+l.width(),r+l.height()))},e.prototype.renderVisual=function(){this.hasItems()&&t.prototype.renderVisual.call(this)},e.prototype.createLegendTitle=function(t){var e=As({},{color:Wo,position:cs,align:qo},t),i=e.text;if(t&&!1!==t.visible){if(Qa(e)&&e.visible){var n=Ns(e);n?i=n({text:i}):e.format&&(i=this.chartService.format.auto(e.format,i))}this.title=new vp(i,e),this.createTitleLayout(),this.appendTitleLayoutContent()}},e.prototype.createTitleLayout=function(){this.layout=new sp({vertical:!0,wrap:!1}),this.container.append(this.layout)},e.prototype.hasTitle=function(){return Boolean(this.options.title&&!1!==this.options.title.visible)},e.prototype.appendTitleLayoutContent=function(){this.options.title.position===Uo?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))},e}(Bc);vl(Gb,{position:as,items:[],offsetX:0,offsetY:0,margin:Is(5),padding:Is(5),border:{color:Wo,width:0},item:{cursor:"pointer",spacing:6},spacing:6,background:"",zIndex:1,markers:{border:{width:0},width:15,height:3,type:"rect",align:ts,vAlign:qo}});const Kb=Gb;var Xb=function(t){function e(){t.call(this),this._registry=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e){this._registry.push({type:t,seriesTypes:e})},e.prototype.create=function(t,e,i){for(var n,r=this._registry,o=r[0],s=0;s<r.length;s++){var a=r[s];if((n=Sm(t,a.seriesTypes)).length>0){o=a;break}}return new o.type(n,e,i)},e}(na);Xb.current=new Xb;const Yb=Xb;function Zb(t){var e=document.createElement("div");return t&&(e.className=t),e}function Jb(t){for(var e=t;e&&!Ws(e,"k-handle");)e=e.parentNode;return e}var Qb=function(t){function e(e,i,n,r){t.call(this);var o=e.element;this.options=As({},this.options,n),this.chart=e,this.observer=r,this.chartElement=o,this.categoryAxis=i,this._dateAxis=this.categoryAxis instanceof Du,this.initOptions(),this.visible=this.options.visible&&o.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onPane=function(t){return this.categoryAxis.pane===t},e.prototype.createElements=function(){var t=this.options,e=this.wrapper=Zb("k-selector");Rs(e,{top:t.offset.top,left:t.offset.left,width:t.width,height:t.height,direction:"ltr"});var i=this.selection=Zb("k-selection");this.leftMask=Zb("k-mask"),this.rightMask=Zb("k-mask"),e.appendChild(this.leftMask),e.appendChild(this.rightMask),e.appendChild(i),i.appendChild(Zb("k-selection-bg"));var n=this.leftHandle=Zb("k-handle k-left-handle"),r=this.rightHandle=Zb("k-handle k-right-handle");n.appendChild(Zb()),r.appendChild(Zb()),i.appendChild(n),i.appendChild(r),this.chartElement.appendChild(e);var o=Rs(i,["borderLeftWidth","borderRightWidth","height"]),s=Rs(n,"height").height,a=Rs(r,"height").height;t.selection={border:{left:o.borderLeftWidth,right:o.borderRightWidth}},Rs(n,{top:(o.height-s)/2}),Rs(r,{top:(o.height-a)/2}),e.style.cssText=e.style.cssText},e.prototype.bindEvents=function(){var t;!1!==this.options.mousewheel&&(this._mousewheelHandler=this._mousewheel.bind(this),Ja(this.wrapper,((t={})[zf]=this._mousewheelHandler,t))),this._domEvents=zp.create(this.wrapper,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},e.prototype.initOptions=function(){var t=this.options,e=this.categoryAxis.pane.chartsBox(),i=this.chart.chartService.intl;this._dateAxis&&As(t,{min:mu(i,t.min),max:mu(i,t.max),from:mu(i,t.from),to:mu(i,t.to)});var n=Rs(this.chartElement,["paddingLeft","paddingTop"]),r=n.paddingLeft,o=n.paddingTop;this.options=As({},{width:e.width(),height:e.height()+.1,padding:{left:r,top:o},offset:{left:e.x1+r,top:e.y1+o},from:t.min,to:t.max},t)},e.prototype.destroy=function(){var t;this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper&&(this._mousewheelHandler&&(pl(this.wrapper,((t={})[zf]=this._mousewheelHandler,t)),this._mousewheelHandler=null),this.chartElement.removeChild(this.wrapper),this.wrapper=null)},e.prototype._rangeEventArgs=function(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}},e.prototype._start=function(t){var e=this.options,i=rl(t);if(!this._state&&i){this.chart._unsetActivePoint(),this._state={moveTarget:Jb(i)||i,startLocation:t.x?t.x.location:0,range:{from:this._index(e.from),to:this._index(e.to)}};var n=this._rangeEventArgs({from:this._index(e.from),to:this._index(e.to)});this.trigger(Ef,n)&&(this._state=null)}},e.prototype._press=function(t){var e;(e=this._state?this._state.moveTarget:Jb(rl(t)))&&gs(e,"k-handle-active")},e.prototype._move=function(t){if(this._state){var e=this,i=e._state,n=e.options,r=e.categoryAxis,o=i.range,s=i.moveTarget,a=r.options.reverse,l=this._index(n.from),h=this._index(n.to),c=this._index(n.min),p=this._index(n.max),u=i.startLocation-t.x.location,d=o.from,f=o.to,v=o.to-o.from,m=Rs(this.wrapper,"width").width/(r.categoriesCount()-1),g=Math.round(u/m)*(a?-1:1);if(s){var y=Ws(s,"k-left-handle"),b=Ws(s,"k-right-handle");Ws(s,"k-selection k-selection-bg")?(o.from=Math.min(Math.max(c,l-g),p-v),o.to=Math.min(o.from+v,p)):y&&!a||b&&a?(o.from=Math.min(Math.max(c,l-g),p-1),o.to=Math.max(o.from+1,o.to)):(y&&a||b&&!a)&&(o.to=Math.min(Math.max(c+1,h-g),p),o.from=Math.min(o.to-1,o.from)),o.from===d&&o.to===f||(this.move(o.from,o.to),this.trigger(Tf,this._rangeEventArgs(o)))}}},e.prototype._end=function(){if(this._state){var t=this._state.moveTarget;t&&(n="k-handle-active",(i=t)&&i.className&&(i.className=i.className.replace(n,"").replace(ys," ")));var e=this._state.range;this.set(e.from,e.to),this.trigger(Af,this._rangeEventArgs(e)),delete this._state}var i,n},e.prototype._tap=function(t){var e=this.options,i=this.categoryAxis,n=this.chart._eventCoordinates(t),r=i.pointCategoryIndex(new $l(n.x,i.box.y1)),o=this._index(e.from),s=this._index(e.to),a=this._index(e.min),l=this._index(e.max),h=s-o,c=o+h/2,p={},u=3===t.event.which,d=Math.round(c-r);this._state||u||(this.chart._unsetActivePoint(),i.options.justified||d--,p.from=Math.min(Math.max(a,o-d),l-h),p.to=Math.min(p.from+h,l),this._start(t),this._state&&(this._state.range=p,this.trigger(Tf,this._rangeEventArgs(p)),this._end()))},e.prototype._mousewheel=function(t){var e=this,i=ia(t);if(this._start({target:this.selection}),this._state){var n=this._state.range;t.preventDefault(),t.stopPropagation(),Math.abs(i)>1&&(i*=3),this.options.mousewheel.reverse&&(i*=-1),this.expand(i)&&this.trigger(Tf,{axis:this.categoryAxis.options,delta:i,originalEvent:t,from:this._value(n.from),to:this._value(n.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){e._end()}),150)}},e.prototype._gesturestart=function(t){var e=this.options;this._state={range:{from:this._index(e.from),to:this._index(e.to)}};var i=this._rangeEventArgs(this._state.range);this.trigger(Ef,i)?this._state=null:t.preventDefault()},e.prototype._gestureend=function(){this._state&&(this.trigger(Af,this._rangeEventArgs(this._state.range)),delete this._state)},e.prototype._gesturechange=function(t){var e=this,i=e.chart,n=e._state,r=e.options,o=e.categoryAxis,s=n.range,a=i._toModelCoordinates(t.touches[0].x.location).x,l=i._toModelCoordinates(t.touches[1].x.location).x,h=Math.min(a,l),c=Math.max(a,l);t.preventDefault(),s.from=o.pointCategoryIndex(new $l(h))||r.min,s.to=o.pointCategoryIndex(new $l(c))||r.max,this.move(s.from,s.to),this.trigger(Tf,this._rangeEventArgs(s))},e.prototype._index=function(t){var e=t;return t instanceof Date&&(e=this.categoryAxis.categoryIndex(t)),e},e.prototype._value=function(t){var e=t;return this._dateAxis&&(e=this.categoryAxis.categoryAt(t))>this.options.max&&(e=this.options.max),e},e.prototype._slot=function(t){var e=this.categoryAxis,i=this._index(t);return e.getSlot(i,i,!0)},e.prototype.move=function(t,e){var i=this.options,n=this.categoryAxis.options.reverse,r=i.offset,o=i.padding,s=i.selection.border,a=n?e:t,l=n?t:e,h="x"+(n?2:1),c=this._slot(a),p=cl(c[h]-r.left+o.left);Rs(this.leftMask,{width:p}),Rs(this.selection,{left:p}),c=this._slot(l);var u=cl(i.width-(c[h]-r.left+o.left));Rs(this.rightMask,{width:u});var d=i.width-u;d!==i.width&&(d+=s.right),Rs(this.rightMask,{left:d}),Rs(this.selection,{width:Math.max(i.width-(p+u)-s.right,0)})},e.prototype.set=function(t,e){var i=this.options,n=this._index(i.min),r=this._index(i.max),o=al(this._index(t),n,r),s=al(this._index(e),o+1,r);i.visible&&this.move(o,s),i.from=this._value(o),i.to=this._value(s)},e.prototype.expand=function(t){var e=this.options,i=this._index(e.min),n=this._index(e.max),r=e.mousewheel.zoom,o=this._index(e.from),s=this._index(e.to),a={from:o,to:s},l=As({},a);if(this._state&&(a=this._state.range),r!==as&&(a.from=al(al(o-t,0,s-1),i,n)),r!==ts&&(a.to=al(al(s+t,a.from+1,n),i,n)),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0},e.prototype.zoom=function(t,e){var i=this.options,n=this._index(i.min),r=this._index(i.max),o=this._index(i.from),s=this._index(i.to),a={from:o,to:s},l=As({},a),h=this.categoryAxis.options.reverse,c=fs+(h?"2":"1"),p=this.categoryAxis.lineBox(),u=Math.abs(p[c]-e.x),d=p.width(),f=cl(u/d,2),v=cl(f*t),m=cl((1-f)*t);if(this._state&&(a=this._state.range),a.from=al(al(o-v,0,s-1),n,r),a.to=al(al(s+m,a.from+1,r),n,r),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0},e.prototype.trigger=function(t,e){return(this.observer||this.chart).trigger(t,e)},e}(na);vl(Qb,{visible:!0,mousewheel:{zoom:"both"},min:is,max:es});const tw=Qb;var ew=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.show=function(e){if(e&&e.tooltipAnchor&&(!this._current||this._current!==e)){var i=As({},this.options,e.options.tooltip),n=e.tooltipAnchor();n?(this._current=e,t.prototype.show.call(this,{point:e,anchor:n},i,e)):this.hide()}},e.prototype.hide=function(){delete this._current,t.prototype.hide.call(this)},e}(cm);const iw=ew;var nw=function(t){function e(e,i){t.call(this,e.chartService,i),this.plotArea=e,this.formatService=e.chartService.format}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.showAt=function(t,e){var i=Hs(t,(function(t){var e=t.series.tooltip;return!(e&&!1===e.visible)}));if(i.length>0){var n=i[0],r=this.plotArea.categoryAxis.getSlot(n.categoryIx),o=e?this._slotAnchor(e,r):this._defaultAnchor(n,r);this.show({anchor:o,shared:!0,points:t,category:n.category,categoryText:this.formatService.auto(this.options.categoryFormat,n.category),series:this.plotArea.series},this.options)}},e.prototype._slotAnchor=function(t,e){return this.plotArea.categoryAxis.options.vertical||(t.x=e.center().x),{point:t,align:{horizontal:"left",vertical:"center"}}},e.prototype._defaultAnchor=function(t,e){var i=t.owner.pane.chartsBox(),n=this.plotArea.categoryAxis.options.vertical,r=i.center(),o=e.center();return{point:n?new $l(r.x,o.y):new $l(o.x,r.y),align:{horizontal:"center",vertical:"center"}}},e}(cm);vl(nw,{categoryFormat:"{0:d}"});const rw=nw;var ow=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.element,e=this.options;if(t.bbox()){this.origin=e.origin;var i=e.vertical?vs:fs,n=this.fromScale=new th(1,1);n[i]=Md,t.transform(Eh().scale(n.x,n.y))}else this.abort()},e.prototype.step=function(t){var e=Ks(this.fromScale.x,1,t),i=Ks(this.fromScale.y,1,t);this.element.transform(Eh().scale(e,i,this.origin))},e.prototype.abort=function(){t.prototype.abort.call(this),this.element.transform(null)},e}(zc);vl(ow,{duration:Ed}),Rc.current.register(jd,ow);var sw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.center=this.element.bbox().center();this.element.transform(Eh().scale(Md,Md,t))},e.prototype.step=function(t){this.element.transform(Eh().scale(t,t,this.center))},e}(zc);vl(sw,{easing:"easeOutElastic"}),Rc.current.register(Vd,sw);var aw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this.fadeTo=this.element.opacity(),this.element.opacity(0)},e.prototype.step=function(t){this.element.opacity(t*this.fadeTo)},e}(zc);vl(aw,{duration:200,easing:"linear"}),Rc.current.register(Td,aw);var lw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this.element.transform(Eh().scale(Md,Md,this.options.center))},e.prototype.step=function(t){this.element.transform(Eh().scale(t,t,this.options.center))},e}(zc);vl(lw,{easing:"easeOutElastic",duration:Ed}),Rc.current.register(Zd,lw);var hw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.renderSegments()},e.prototype.createSegment=function(t,e,i){return new(e.style===Ld?rv:Zf)(t,e,i)},e.prototype.animationPoints=function(){return t.prototype.animationPoints.call(this).concat(this._segments)},e.prototype.createMissingValue=function(t,e){if(e===Pd){var i={x:t.x,y:t.y};return Yv(i.x)||(i.x=0),Yv(i.y)||(i.y=0),i}},e}(Jv);As(hw.prototype,sv);const cw=hw;var pw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new kv,this.yAxisRangeTracker=new kv},e.prototype.render=function(t){var e=this;void 0===t&&(t=this.panes);for(var i=this.groupSeriesByPane(),n=0;n<t.length;n++){var r=t[n],o=i[r.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);s&&(e.createScatterChart(Sm(s,lf),r),e.createScatterLineChart(Sm(s,hf),r),e.createBubbleChart(Sm(s,Vd),r))}this.createAxes(t)},e.prototype.appendChart=function(e,i){this.xAxisRangeTracker.update(e.xAxisRanges),this.yAxisRangeTracker.update(e.yAxisRanges),t.prototype.appendChart.call(this,e,i)},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e.options.vertical?(this.yAxisRangeTracker.reset(i),delete this.namedYAxes[i]):(this.xAxisRangeTracker.reset(i),delete this.namedXAxes[i]),e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.xAxis,n=Hs([].concat(e.xAxis),(function(t){return t.name===i}))[0],r=t.yAxis,o=Hs([].concat(e.yAxis),(function(t){return t.name===r}))[0],s=(e.panes||[{}])[0].name||"default";return(n||{}).pane||(o||{}).pane||s},e.prototype.createScatterChart=function(t,e){t.length>0&&this.appendChart(new Jv(this,{series:t,clip:e.options.clip}),e)},e.prototype.createScatterLineChart=function(t,e){t.length>0&&this.appendChart(new cw(this,{series:t,clip:e.options.clip}),e)},e.prototype.createBubbleChart=function(t,e){t.length>0&&this.appendChart(new im(this,{series:t,clip:e.options.clip}),e)},e.prototype.createXYAxis=function(t,e,i){for(var n,r=t.name,o=e?this.namedYAxes:this.namedXAxes,s=e?this.yAxisRangeTracker:this.xAxisRangeTracker,a=As({reverse:!e&&this.chartService.rtl},t,{vertical:e}),l=km(a.type,Df),h=s.query(),c=l?{min:.1,max:1}:{min:0,max:1},p=s.query(r)||h||c,u=[a.min,a.max],d=this.series,f=0;f<d.length;f++){var v=d[f],m=v[e?"yAxis":"xAxis"];if(m===a.name||0===i&&!m){var g=wd.current.bindPoint(v,0).valueFields;u.push(g[e?"y":"x"]);break}}0===i&&h&&(p.min=Math.min(p.min,h.min),p.max=Math.max(p.max,h.max));for(var y=0;y<u.length;y++)if(u[y]instanceof Date){n=!0;break}var b=new(km(a.type,Ko)||!a.type&&n?Fu:l?qu:Nu)(p.min,p.max,a,this.chartService);if(b.axisIndex=i,r){if(o[r])throw new Error((e?"Y":"X")+" axis with name "+r+" is already defined");o[r]=b}return this.appendAxis(b),b},e.prototype.createAxes=function(t){for(var e=this,i=this.options,n=[].concat(i.xAxis),r=[],o=[].concat(i.yAxis),s=[],a=0;a<n.length;a++){$s(e.findPane(n[a].pane),t)&&r.push(e.createXYAxis(n[a],!1,a))}for(var l=0;l<o.length;l++){$s(e.findPane(o[l].pane),t)&&s.push(e.createXYAxis(o[l],!0,l))}this.axisX=this.axisX||r[0],this.axisY=this.axisY||s[0]},e.prototype._dispatchEvent=function(t,e,i){for(var n=t._eventCoordinates(e),r=new $l(n.x,n.y),o=this.axes,s=o.length,a=[],l=[],h=0;h<s;h++){var c=o[h],p=c.options.vertical?l:a,u=c.getValue(r);null!==u&&p.push(u)}a.length>0&&l.length>0&&t.trigger(i,{element:rl(e),originalEvent:e,x:Tm(a),y:Tm(l)})},e.prototype.updateAxisOptions=function(t,e){var i=t.options.vertical,n=this.groupAxes(this.panes),r=(i?n.y:n.x).indexOf(t);uw(this.options,r,i,e),uw(this.originalOptions,r,i,e)},e}(Bm);function uw(t,e,i,n){As([].concat(i?t.yAxis:t.xAxis)[e],n)}vl(pw,{xAxis:{},yAxis:{}}),As(pw.prototype,jm);const dw=pw;var fw=function(t){function e(e,i,n){t.call(this,n),this.value=e,this.sector=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options.labels,e=this.owner.chartService,i=this.value;if(!this._rendered&&!1!==this.visible){this._rendered=!0;var n=Ns(t),r=this.pointData();if(n?i=n(r):t.format&&(i=e.format.auto(t.format,i)),t.visible&&(i||0===i)){if(t.position===qo||t.position===Rf)t.color||(t.color=zl(this.options.color)),t.background||(t.background=this.options.color);else{var o=e.theme.seriesDefaults.labels;t.color=t.color||o.color,t.background=t.background||o.background}this.label=new vp(i,As({},t,{align:qo,vAlign:"",animation:{type:Td,delay:this.animationDelay}}),r),this.append(this.label)}}},e.prototype.reflow=function(t){this.render(),this.box=t,this.reflowLabel()},e.prototype.reflowLabel=function(){var t=this.options.labels,e=this.label,i=this.sector.clone(),n=t.distance,r=i.middle();if(e){var o,s=e.box.height(),a=e.box.width();if(t.position===qo)i.radius=Math.abs((i.radius-s)/2)+s,o=i.point(r),e.reflow(new ah(o.x,o.y-s/2,o.x,o.y));else if(t.position===Rf)i.radius=i.radius-s/2,o=i.point(r),e.reflow(new ah(o.x,o.y-s/2,o.x,o.y));else{var l;(o=i.clone().expand(n).point(r)).x>=i.center.x?(l=o.x+a,e.orientation=as):(l=o.x-a,e.orientation=ts),e.reflow(new ah(l,o.y-s,o.x,o.y))}}},e.prototype.createVisual=function(){var e=this,i=this.sector,n=this.options;if(t.prototype.createVisual.call(this),this.value)if(n.visual){var r=(i.startAngle+180)%360,o=n.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new th(i.center.x,i.center.y),radius:i.radius,innerRadius:i.innerRadius,startAngle:r,endAngle:r+i.angle,options:n,sender:this.getSender(),createVisual:function(){var t=new Cc;return e.createSegmentVisual(t),t}});o&&this.visual.append(o)}else this.createSegmentVisual(this.visual)},e.prototype.createSegmentVisual=function(t){var e=this.sector,i=this.options,n=i.border||{},r=n.width>0?{stroke:{color:n.color,width:n.width,opacity:n.opacity,dashType:n.dashType}}:{},o=i.color,s={color:o,opacity:i.opacity},a=this.createSegment(e,As({fill:s,stroke:{opacity:i.opacity},zIndex:i.zIndex},r));t.append(a),Ev(i)&&t.append(this.createGradientOverlay(a,{baseColor:o,fallbackFill:s},As({center:[e.center.x,e.center.y],innerRadius:e.innerRadius,radius:e.radius,userSpace:!0},i.overlay)))},e.prototype.createSegment=function(t,e){return e.singleSegment?new _c(new yc(new th(t.center.x,t.center.y),t.radius),e):vc.current.createRing(t,e)},e.prototype.createAnimation=function(){var e=this.options,i=this.sector.center;As(e,{animation:{center:[i.x,i.y],delay:this.animationDelay}}),t.prototype.createAnimation.call(this)},e.prototype.createHighlight=function(t){var e=this.options.highlight||{},i=e.border||{};return this.createSegment(this.sector,As({},t,{fill:{color:e.color,opacity:e.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color}}))},e.prototype.highlightVisual=function(){return this.visual.children[0]},e.prototype.highlightVisualArgs=function(){var t=this.sector;return{options:this.options,radius:t.radius,innerRadius:t.innerRadius,center:new th(t.center.x,t.center.y),startAngle:t.startAngle,endAngle:t.angle+t.startAngle,visual:this.visual}},e.prototype.tooltipAnchor=function(){var t=this.sector.clone().expand(5),e=t.middle();return{point:t.point(e),align:gw(e+180)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}},e}(Bc),vw=cl(hl(30),Yo),mw=cl(hl(60),Yo);function gw(t){var e=hl(t),i=cl(Math.sin(e),Yo),n=cl(Math.cos(e),Yo);return{horizontal:Math.abs(i)>mw?qo:n<0?as:ts,vertical:Math.abs(i)<vw?qo:i<0?Uo:cs}}vl(fw,{color:us,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:Xo,margin:Is(.5),align:$o,zIndex:1,position:If},animation:{type:Zd},highlight:{visible:!0,border:{width:1}},visible:!0}),As(fw.prototype,qf);const yw=fw;var bw={createLegendItem:function(t,e,i){var n=this.options.legend||{},r=n.labels||{},o=n.inactiveItems||{},s=o.labels||{};if(i&&!1!==i.visibleInLegend){var a,l,h=!1!==i.visible,c=h?Ns(r):Ns(s)||Ns(r),p=i.category;c&&(p=c({text:p,series:i.series,dataItem:i.dataItem,percentage:i.percentage,value:t})),h?(a={},l=e.color):(a={color:s.color,font:s.font},l=(o.markers||{}).color),Yv(p)&&""!==p&&this.legendItems.push({active:h,pointIndex:i.index,text:p,series:i.series,markerColor:l,labels:a})}}};const ww=bw;var xw=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this.points=[],this.legendItems=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.traverseDataPoints=function(t){var e=this.options,i=this.plotArea.options.seriesColors;void 0===i&&(i=[]);for(var n=i.length,r=e.series,o=r.length,s=0;s<o;s++){var a=r[s],l=a.data,h=_m(a),c=h.total,p=h.points,u=h.count,d=360/c,f=void 0;isFinite(d)||(f=360/u);var v=void 0;v=Qa(a.startAngle)?a.startAngle:e.startAngle,s!==o-1&&a.labels.position===If&&(a.labels.position=qo);for(var m=0;m<p.length;m++){var g=p[m];if(g){var y=g.fields,b=g.value,w=g.visible,x=0!==b?f||b*d:0,_=1!==l.length&&Boolean(y.explode);Cs(a.color)||(a.color=y.color||i[m%n]),t(g.valueFields.value,new ch(null,0,0,v,x),{owner:this,category:Qa(y.category)?y.category:"",index:m,series:a,seriesIx:s,dataItem:l[m],percentage:0!==c?b/c:0,explode:_,visibleInLegend:y.visibleInLegend,visible:w,zIndex:o-s,animationDelay:this.animationDelay(m,s,o)}),!1!==w&&(v+=x)}}}},e.prototype.evalSegmentOptions=function(t,e,i){var n=i.series;Ff(t,{value:e,series:n,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:n._defaults,excluded:["data","content","template","visual","toggle"]})},e.prototype.addValue=function(t,e,i){var n=As({},i.series,{index:i.index});if(this.evalSegmentOptions(n,t,i),this.createLegendItem(t,n,i),!1!==i.visible){var r=new yw(t,e,n);Object.assign(r,i),this.append(r),this.points.push(r)}},e.prototype.reflow=function(t){var e=this,i=e.options,n=e.points,r=e.seriesConfigs;void 0===r&&(r=[]);var o=n.length,s=t.clone(),a=Math.min(s.width(),s.height()),l=a/2,h=a-.85*a,c=new ah(s.x1,s.y1,s.x1+a,s.y1+a),p=c.center(),u=s.center(),d=i.series.length,f=[],v=[],m=ul(i.padding,h);this.targetBox=t,m=m>l-5?l-5:m,c.translate(u.x-p.x,u.y-p.y);for(var g=l-m,y=new $l(g+c.x1+m,g+c.y1+m),b=0;b<o;b++){var w=n[b],x=w.sector,_=w.seriesIx;if(x.radius=g,x.center=y,r.length){var k=r[_];x.innerRadius=k.innerRadius,x.radius=k.radius}_===d-1&&w.explode&&(x.center=x.clone().setRadius(.15*x.radius).point(x.middle())),w.reflow(c);var S=w.label;S&&S.options.position===If&&_===d-1&&(S.orientation===as?v.push(S):f.push(S))}f.length>0&&(f.sort(this.labelComparator(!0)),this.leftLabelsReflow(f)),v.length>0&&(v.sort(this.labelComparator(!1)),this.rightLabelsReflow(v)),this.box=c},e.prototype.leftLabelsReflow=function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},e.prototype.rightLabelsReflow=function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},e.prototype.distanceBetweenLabels=function(t){var e=sl(this.points),i=e.sector,n=t.length-1,r=i.radius+e.options.labels.distance,o=[],s=t[0].box,a=cl(s.y1-(i.center.y-r-s.height()-s.height()/2));o.push(a);for(var l=0;l<n;l++){var h=t[l+1].box;s=t[l].box,a=cl(h.y1-s.y2),o.push(a)}return a=cl(i.center.y+r-t[n].box.y2-t[n].box.height()/2),o.push(a),o},e.prototype.distributeLabels=function(t,e){for(var i,n,r,o=t.length,s=0;s<o;s++)for(r=-t[s],i=n=s;r>0&&(i>=0||n<o);)r=this._takeDistance(t,s,--i,r),r=this._takeDistance(t,s,++n,r);this.reflowLabels(t,e)},e.prototype._takeDistance=function(t,e,i,n){var r=n;if(t[i]>0){var o=Math.min(t[i],r);r-=o,t[i]-=o,t[e]+=o}return r},e.prototype.reflowLabels=function(t,e){var i,n=sl(this.points),r=n.sector,o=n.options.labels,s=e.length,a=o.distance,l=r.center.y-(r.radius+a)-e[0].box.height();t[0]+=2;for(var h=0;h<s;h++){var c=e[h],p=c.box;l+=t[h],i=this.hAlignLabel(p.x2,r.clone().expand(a),l,l+p.height(),c.orientation===as),c.orientation===as?(o.align!==$o&&(i=r.radius+r.center.x+a),c.reflow(new ah(i+p.width(),l,i,l))):(o.align!==$o&&(i=r.center.x-r.radius-a),c.reflow(new ah(i-p.width(),l,i,l))),l+=p.height()}},e.prototype.createVisual=function(){var e=this,i=this.options.connectors,n=this.points,r=n.length;t.prototype.createVisual.call(this),this._connectorLines=[];for(var o=0;o<r;o++){var s=n[o],a=s.sector,l=s.label,h=a.middle(),c=(s.options.connectors||{}).color||i.color;if(l){var p=new uc({stroke:{color:c,width:i.width},animation:{type:Td,delay:s.animationDelay}});if(l.options.position===If){var u=l.box,d=a.center,f=a.point(h),v=new $l(u.x1,u.center().y),m=void 0,g=void 0,y=void 0;f=a.clone().expand(i.padding).point(h),p.moveTo(f.x,f.y),l.orientation===as?(y=_w(d,f,v,g=new $l(u.x1-i.padding,u.center().y)),v=new $l(g.x-4,g.y),(y=y||v).x=Math.min(y.x,v.x),e.pointInCircle(y,a.center,a.radius+4)||y.x<a.center.x?(m=a.center.x+a.radius+4,s.options.labels.align!==Ud?m<v.x?p.lineTo(m,f.y):p.lineTo(f.x+8,f.y):p.lineTo(m,f.y),p.lineTo(v.x,g.y)):(y.y=g.y,p.lineTo(y.x,y.y))):(y=_w(d,f,v,g=new $l(u.x2+i.padding,u.center().y)),v=new $l(g.x+4,g.y),(y=y||v).x=Math.max(y.x,v.x),e.pointInCircle(y,a.center,a.radius+4)||y.x>a.center.x?(m=a.center.x-a.radius-4,s.options.labels.align!==Ud?m>v.x?p.lineTo(m,f.y):p.lineTo(f.x-8,f.y):p.lineTo(m,f.y),p.lineTo(v.x,g.y)):(y.y=g.y,p.lineTo(y.x,y.y))),p.lineTo(g.x,g.y),e._connectorLines.push(p),e.visual.append(p)}}}},e.prototype.renderVisual=function(){if(t.prototype.renderVisual.call(this),gl(this.options.series,(function(t){return t.autoFit}))){var e=this.targetBox,i=this.box.center(),n=this.visual.bbox();if(!n)return;var r=n.bottomRight(),o=Math.min((i.y-e.y1)/(i.y-n.origin.y),(e.y2-i.y)/(r.y-i.y),(i.x-e.x1)/(i.x-n.origin.x),(e.x2-i.x)/(r.x-i.x));o<1&&this.visual.transform(Eh().scale(o,o,[i.x,i.y]))}},e.prototype.labelComparator=function(t){var e=t?-1:1;return function(t,i){return((t.parent.sector.middle()+270)%360-(i.parent.sector.middle()+270)%360)*e}},e.prototype.hAlignLabel=function(t,e,i,n,r){var o=e.radius,s=e.center,a=s.x,l=s.y,h=Math.min(Math.abs(l-i),Math.abs(l-n));return h>o?t:a+Math.sqrt(o*o-h*h)*(r?1:-1)},e.prototype.pointInCircle=function(t,e,i){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(i,2)},e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value)},e.prototype.animationDelay=function(t){return 70*t},e.prototype.stackRoot=function(){return this},e}(Bc);function _w(t,e,i,n){var r,o=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),s=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!==s){var a=o/s;r=new $l(t.x+a*(e.x-t.x),t.y+a*(e.y-t.y))}return r}vl(xw,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),As(xw.prototype,ww),xw.prototype.isStackRoot=!0;const kw=xw;var Sw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createPieChart(this.series)},e.prototype.createPieChart=function(t){var e=t[0],i=new kw(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},e.prototype.appendChart=function(e,i){t.prototype.appendChart.call(this,e,i),Za(this.options.legend.items,e.legendItems)},e}(Bm);const Cw=Sw;var Ew=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowLabel=function(){var e=this.options.labels,i=this.label,n=this.sector.clone(),r=n.middle();if(i){var o=i.box.height();if(e.position===qo){n.radius-=(n.radius-n.innerRadius)/2;var s=n.point(r);i.reflow(new ah(s.x,s.y-o/2,s.x,s.y))}else t.prototype.reflowLabel.call(this)}},e.prototype.createSegment=function(t,e){return vc.current.createRing(t,e)},e}(yw);vl(Ew,{overlay:{gradient:"roundedGlass"},labels:{position:qo},animation:{type:Zd}}),As(Ew.prototype,qf);const Tw=Ew;var Aw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addValue=function(t,e,i){var n=As({},i.series,{index:i.index});if(this.evalSegmentOptions(n,t,i),this.createLegendItem(t,n,i),t&&!1!==i.visible){var r=new Tw(t,e,n);Object.assign(r,i),this.append(r),this.points.push(r)}},e.prototype.reflow=function(e){for(var i,n=this.options,r=e.clone(),o=Math.min(r.width(),r.height()),s=o/2,a=o-.85*o,l=n.series,h=l.length,c=ul(n.padding,a),p=s-(c=c>s-5?s-5:c),u=0,d=0;d<h;d++){var f=l[d];0===d&&Qa(f.holeSize)&&(i=f.holeSize,p-=f.holeSize),Qa(f.size)?p-=f.size:u++,Qa(f.margin)&&d!==h-1&&(p-=f.margin)}Qa(i)||(p-=i=.75*((s-c)/(h+.75)));var v,m=i,g=0;this.seriesConfigs=[];for(var y=0;y<h;y++){var b=l[y];v=(m+=g)+ul(b.size,p/u),this.seriesConfigs.push({innerRadius:m,radius:v}),g=b.margin||0,m=v}t.prototype.reflow.call(this,e)},e.prototype.animationDelay=function(t,e,i){return 50*t+Ed*(e+1)/(i+1)},e}(kw);vl(Aw,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});const Mw=Aw;var Ow=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createDonutChart(this.series)},e.prototype.createDonutChart=function(t){var e=t[0],i=new Mw(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},e}(Cw);const Dw=Ow;var Pw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.valueAxisRangeTracker=new kv},e.prototype.render=function(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()},e.prototype.alignAxes=function(){var t=this.valueAxis,e=t.range(),i=t.options.reverse?e.max:e.min,n=t.getSlot(i),r=this.polarAxis.getSlot(0).center,o=t.box.translate(r.x-n.x1,r.y-n.y1);t.reflow(o)},e.prototype.createValueAxis=function(){var t,e,i=this.valueAxisRangeTracker,n=i.query(),r=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});r.type===Df?(t=rd,e={min:.1,max:1}):(t=id,e={min:0,max:1});var o=i.query(name)||n||e;o&&n&&(o.min=Math.min(o.min,n.min),o.max=Math.max(o.max,n.max));var s=new t(o.min,o.max,r,this.chartService);this.valueAxis=s,this.appendAxis(s)},e.prototype.reflowAxes=function(){var t=this,e=t.options.plotArea,i=t.valueAxis,n=t.polarAxis,r=t.box,o=.15*Math.min(r.width(),r.height()),s=Is(e.padding||{},o),a=r.clone().unpad(s),l=a.clone();l.y2=l.y1+Math.min(l.width(),l.height()),l.align(a,vs,qo);var h=l.clone().shrink(0,l.height()/2);n.reflow(l),i.reflow(h);var c=i.lineBox().height()-i.box.height();i.reflow(i.box.unpad({top:c})),this.axisBox=l,this.alignAxes(l)},e.prototype.backgroundBox=function(){return this.box},e.prototype.detachLabels=function(){},e}(Bm);const Rw=Pw;var Iw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointSlot=function(t,e){var i=t.center.y-e.y1,n=$l.onCircle(t.center,t.startAngle,i);return new ah(n.x,n.y,n.x,n.y)},e}(Jv);vl(Iw,{clip:!1});const zw=Iw;var Lw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(cw);Lw.prototype.pointSlot=zw.prototype.pointSlot,vl(Lw,{clip:!1});const Bw=Lw;var Nw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(t){var e=this._polarAxisCenter();t.lineTo(e.x,e.y)},e.prototype._polarAxisCenter=function(){return this.parent.plotArea.polarAxis.box.center()},e.prototype.strokeSegments=function(){var t=this._strokeSegments;if(!t){var e=this._polarAxisCenter(),i=new ad(!1),n=this.points();n.push(e),(t=this._strokeSegments=i.process(n)).pop()}return t},e}(bv);const jw=Nw;var Fw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(t){var e=this.parent.plotArea.polarAxis.box.center(),i=new tc([e.x,e.y]);t.segments.unshift(i),t.segments.push(i)},e}(vv);const Vw=Fw;var Hw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i){return(e.line||{}).style===Ld?new jw(t,e,i):new Vw(t,e,i)},e.prototype.createMissingValue=function(t,e){var i;return Yv(t.x)&&e!==Rd&&(i={x:t.x,y:t.y},e===Pd&&(i.y=0)),i},e.prototype.seriesMissingValues=function(t){return t.missingValues||Pd},e.prototype._hasMissingValuesGap=function(){for(var t=this.options.series,e=0;e<t.length;e++)if("gap"===this.seriesMissingValues(t[e]))return!0},e.prototype.sortPoints=function(t){if(t.sort(Ww),this._hasMissingValuesGap())for(var e=0;e<t.length;e++){var i=t[e];if(i)Yv(i.value.y)||"gap"!==this.seriesMissingValues(i.series)||delete t[e]}return t},e}(Bw);function Ww(t,e){return t.value.x-e.value.x}const Uw=Hw;var qw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createPolarAxis=function(){var t=new Zu(this.options.xAxis,this.chartService);this.polarAxis=t,this.axisX=t,this.appendAxis(t)},e.prototype.valueAxisOptions=function(t){return As(t,{majorGridLines:{type:Ho},minorGridLines:{type:Ho}},this.options.yAxis)},e.prototype.createValueAxis=function(){t.prototype.createValueAxis.call(this),this.axisY=this.valueAxis},e.prototype.appendChart=function(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),Bm.prototype.appendChart.call(this,t,e)},e.prototype.createCharts=function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createLineChart(Sm(t,[Qd]),e),this.createScatterChart(Sm(t,[tf]),e),this.createAreaChart(Sm(t,[Jd]),e)},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=new Bw(this,{series:t});this.appendChart(i,e)}},e.prototype.createScatterChart=function(t,e){if(0!==t.length){var i=new zw(this,{series:t});this.appendChart(i,e)}},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=new Uw(this,{series:t});this.appendChart(i,e)}},e.prototype._dispatchEvent=function(t,e,i){var n=t._eventCoordinates(e),r=new $l(n.x,n.y),o=this.axisX.getValue(r),s=this.axisY.getValue(r);null!==o&&null!==s&&t.trigger(i,{element:rl(e),x:o,y:s})},e.prototype.createCrosshairs=function(){},e}(Rw);vl(qw,{xAxis:{},yAxis:{}}),As(qw.prototype,jm);const $w=qw;var Gw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointSlot=function(t,e){var i=t.center.y-e.y1,n=$l.onCircle(t.center,t.middle(),i);return new ah(n.x,n.y,n.x,n.y)},e.prototype.renderSegments=function(){if(t.prototype.renderSegments.call(this),this._segments&&this._segments.length>1)for(var e=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e[n.seriesIx]=e[n.seriesIx]||[],e[n.seriesIx].push(n)}return e}(this._segments),i=0;i<e.length;i++){var n=e[i];if(n&&n.length>1){var r=n[0].linePoints[0],o=sl(n),s=sl(o.linePoints),a=0===r.categoryIx,l=s.categoryIx===s.categoriesCount-1;a&&l&&sl(n).linePoints.push(r)}}},e.prototype.createSegment=function(t,e,i){var n=new(e.style===Ld?rv:Zf)(t,e,i),r=this.seriesMissingValues(e);return t.length!==e.data.length&&r!==Rd||(n.options.closed=!0),n},e}(dv);vl(Gw,{clip:!1,limitPoints:!1});const Kw=Gw;var Xw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(){},e}(bv);const Yw=Xw;var Zw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(){},e}(vv);const Jw=Zw;var Qw=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,i,n){var r,o,s,a=this.options.isStacked,l=(e.line||{}).style;return a&&i>0&&n&&(o=n.linePoints.slice(0),r=n),l===Ld?(s=new Yw(t,e,i,r,o)).options.closed=!0:(t.push(t[0]),s=new Jw(t,e,i,r,o)),s},e.prototype.seriesMissingValues=function(t){return t.missingValues||Pd},e}(Kw);const tx=Qw;var ex=function(t){function e(e,i){t.call(this,e,null,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Tw);vl(ex,{overlay:{gradient:"none"},labels:{distance:10}});const ix=ex;var nx=function(t){function e(e){t.call(this,e),this.forEach=e.rtl?Ov:Mv}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,i=this.children,n=e.gap,r=e.spacing,o=i.length,s=o+n+r*(o-1),a=t.angle/s,l=t.startAngle+a*(n/2);this.forEach(i,(function(e){var i=t.clone();i.startAngle=l,i.angle=a,e.sector&&(i.radius=e.sector.radius),e.reflow(i),e.sector=i,l+=a+a*r}))},e}(Bc);vl(nx,{gap:1,spacing:0});const rx=nx;var ox=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options.reverse,i=this.children,n=i.length,r=e?n-1:0,o=e?-1:1;this.box=new ah;for(var s=r;s>=0&&s<n;s+=o){var a=i[s].sector;a.startAngle=t.startAngle,a.angle=t.angle}},e}(Bc);const sx=ox;var ax=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return ix},e.prototype.clusterType=function(){return rx},e.prototype.stackType=function(){return sx},e.prototype.categorySlot=function(t,e){return t.getSlot(e)},e.prototype.pointSlot=function(t,e){var i=t.clone(),n=t.center.y;return i.radius=n-e.y1,i.innerRadius=n-e.y2,i},e.prototype.reflowPoint=function(t,e){t.sector=e,t.reflow()},e.prototype.createAnimation=function(){this.options.animation.center=this.box.toRect().center(),t.prototype.createAnimation.call(this)},e}(Lv);ax.prototype.reflow=Wf.prototype.reflow,vl(ax,{clip:!1,limitPoints:!1,animation:{type:"pie"}});const lx=ax;var hx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createPolarAxis=function(){var t=new Xu(this.options.categoryAxis,this.chartService);this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t),this.aggregateCategories(),this.createCategoryAxesLabels()},e.prototype.valueAxisOptions=function(t){return this._hasBarCharts&&As(t,{majorGridLines:{type:Ho},minorGridLines:{type:Ho}}),this._isStacked100&&As(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),As(t,this.options.valueAxis)},e.prototype.aggregateCategories=function(){xg.prototype.aggregateCategories.call(this,this.panes)},e.prototype.createCategoryAxesLabels=function(){xg.prototype.createCategoryAxesLabels.call(this,this.panes)},e.prototype.filterSeries=function(t){return t},e.prototype.createCharts=function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createAreaChart(Sm(t,[ef]),e),this.createLineChart(Sm(t,[rf]),e),this.createBarChart(Sm(t,[nf]),e)},e.prototype.chartOptions=function(t){var e={series:t},i=t[0];if(i){var n=this.filterVisibleSeries(t),r=i.stack;e.isStacked=r&&n.length>1,e.isStacked100=r&&"100%"===r.type&&n.length>1,e.isStacked100&&(this._isStacked100=!0)}return e},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var i=new tx(this,this.chartOptions(t));this.appendChart(i,e)}},e.prototype.createLineChart=function(t,e){if(0!==t.length){var i=new Kw(this,this.chartOptions(t));this.appendChart(i,e)}},e.prototype.createBarChart=function(t,e){if(0!==t.length){var i=t[0],n=this.chartOptions(t);n.gap=i.gap,n.spacing=i.spacing;var r=new lx(this,n);this.appendChart(r,e),this._hasBarCharts=!0}},e.prototype.seriesCategoryAxis=function(){return this.categoryAxis},e.prototype._dispatchEvent=function(t,e,i){var n=t._eventCoordinates(e),r=new $l(n.x,n.y),o=this.categoryAxis.getCategory(r),s=this.valueAxis.getValue(r);null!==o&&null!==s&&t.trigger(i,{element:rl(e),category:o,value:s})},e.prototype.createCrosshairs=function(){},e}(Rw);As(hx.prototype,jm,{appendChart:xg.prototype.appendChart,aggregateSeries:xg.prototype.aggregateSeries,seriesSourcePoints:xg.prototype.seriesSourcePoints}),vl(hx,{categoryAxis:{categories:[]},valueAxis:{}});const cx=hx;var px=function(t){function e(e,i,n){t.call(this,i),this.value=e,this.options.index=n.index}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.points,i=this.children[0];this.box=new ah(e[0].x,e[0].y,e[1].x,e[2].y),i&&i.reflow(new ah(t.x1,e[0].y,t.x2,e[2].y))},e.prototype.createVisual=function(){var e,i=this,n=this.options;t.prototype.createVisual.call(this),(e=n.visual?n.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:n,sender:this.getSender(),createVisual:function(){return i.createPath()}}):this.createPath())&&this.visual.append(e)},e.prototype.createPath=function(){var t=this.options,e=t.border;return uc.fromPoints(this.points,{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.color,opacity:e.opacity,width:e.width}}).close()},e.prototype.createHighlight=function(t){return uc.fromPoints(this.points,t)},e.prototype.highlightVisual=function(){return this.visual.children[0]},e.prototype.highlightVisualArgs=function(){var t=uc.fromPoints(this.points).close();return{options:this.options,path:t}},e.prototype.tooltipAnchor=function(){var t=this.box;return{point:new $l(t.center().x,t.y1),align:{horizontal:"center",vertical:"top"}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e}(Bc);vl(px,{color:us,border:{width:1}}),As(px.prototype,qf);const ux=px;var dx=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.points=[],this.labels=[],this.legendItems=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value)},e.prototype.render=function(){var t=this,e=this.options,i=this.plotArea.options.seriesColors;void 0===i&&(i=[]);var n=e.series[0],r=n.data;if(r)for(var o=_m(n),s=o.total,a=o.points,l=0;l<a.length;l++){var h=a[l];if(h){var c=h.fields;Cs(n.color)||(n.color=c.color||i[l%i.length]),c=As({index:l,owner:t,series:n,dataItem:r[l],percentage:h.value/s},c,{visible:h.visible});var p=h.valueFields.value,u=t.createSegment(p,c),d=t.createLabel(p,c);u&&d&&u.append(d)}}},e.prototype.evalSegmentOptions=function(t,e,i){var n=i.series;Ff(t,{value:e,series:n,dataItem:i.dataItem,index:i.index},{defaults:n._defaults,excluded:["data","content","template","toggle","visual"]})},e.prototype.createSegment=function(t,e){var i=As({},e.series);if(this.evalSegmentOptions(i,t,e),this.createLegendItem(t,i,e),!1!==e.visible){var n=new ux(t,i,e);return Object.assign(n,e),this.append(n),this.points.push(n),n}},e.prototype.createLabel=function(t,e){var i=e.series,n=e.dataItem,r=As({},this.options.labels,i.labels),o=t;if(r.visible){var s=Ns(r),a={dataItem:n,value:t,percentage:e.percentage,category:e.category,series:i};s?o=s(a):r.format&&(o=this.plotArea.chartService.format.auto(r.format,o)),r.color||(r.color=zl(i.color),r.background||(r.background=i.color)),this.evalSegmentOptions(r,t,e);var l=new vp(o,As({vAlign:r.position},r),a);return this.labels.push(l),l}},e.prototype.labelPadding=function(){for(var t=this.labels,e={left:0,right:0},i=0;i<t.length;i++){var n=t[i].options.align;if(n!==qo){var r=t[i].box.width();n===ts?e.left=Math.max(e.left,r):e.right=Math.max(e.right,r)}}return e},e.prototype.dynamicSlopeReflow=function(t,e,i){for(var n=this.options,r=this.points,o=r.length,s=r[0],a=s,l=0;l<r.length;l++)r[l].percentage>a.percentage&&(a=r[l]);for(var h=s.percentage/a.percentage*e,c=(e-h)/2,p=0,u=0;u<o;u++){var d=r[u].percentage,f=r[u+1],v=f?f.percentage:d,m=r[u].points=[],g=n.dynamicHeight?i*d:i/o,y=void 0;y=al(y=d?(e-h*(v/d))/2:v?0:e/2,0,e),m.push(new th(t.x1+c,t.y1+p)),m.push(new th(t.x1+e-c,t.y1+p)),m.push(new th(t.x1+e-y,t.y1+g+p)),m.push(new th(t.x1+y,t.y1+g+p)),c=y,p+=g+n.segmentSpacing,h=al(e-2*y,0,e)}},e.prototype.constantSlopeReflow=function(t,e,i){for(var n=this.options,r=this.points,o=r.length,s=n.neckRatio<=1,a=s?n.neckRatio*e:e,l=s?0:(e-e/n.neckRatio)/2,h=((s?e:e-2*l)-a)/2,c=0,p=0;p<o;p++){var u=r[p].points=[],d=r[p].percentage,f=n.dynamicHeight?h*d:h/o,v=n.dynamicHeight?i*d:i/o;u.push(new th(t.x1+l,t.y1+c)),u.push(new th(t.x1+e-l,t.y1+c)),u.push(new th(t.x1+e-l-f,t.y1+v+c)),u.push(new th(t.x1+l+f,t.y1+v+c)),l+=f,c+=v+n.segmentSpacing}},e.prototype.reflow=function(t){var e=this.points,i=e.length;if(i){var n=this.options,r=t.clone().unpad(this.labelPadding()),o=r.height()-n.segmentSpacing*(i-1),s=r.width();n.dynamicSlope?this.dynamicSlopeReflow(r,s,o):this.constantSlopeReflow(r,s,o);for(var a=0;a<i;a++)e[a].reflow(t)}},e}(Bc);vl(dx,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:qo,position:qo,zIndex:1}}),As(dx.prototype,ww);const fx=dx;var vx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createFunnelChart(this.series)},e.prototype.createFunnelChart=function(t){var e=t[0],i=new fx(this,{series:t,legend:this.options.legend,neckRatio:e.neckRatio,dynamicHeight:e.dynamicHeight,dynamicSlope:e.dynamicSlope,segmentSpacing:e.segmentSpacing,highlight:e.highlight});this.appendChart(i)},e.prototype.appendChart=function(e,i){t.prototype.appendChart.call(this,e,i),Za(this.options.legend.items,e.legendItems)},e}(Bm);const mx=vx;const gx=function(t,e){void 0===e&&(e=.05);var i=Pl(t),n=1-e;return function(t){var e=i.toHSL(),r=100-e.l,o=n-t;return e.l+=Math.min(o*r,r),e.toCss()}};var yx=function(t){function e(e,i){t.call(this),this.options=i,this.color=i.color||us,this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())},e.prototype.createLabel=function(){var t=this.options.labels;if(t.visible){var e,i=this.pointData(),n=Ns(t),r=t.color;e=n?n(i):this.formatValue(t.format),r||(r=zl(this.color)),this.label=new vp(e,As({align:qo,vAlign:qo,margin:{left:5,right:5},zIndex:ul(t.zIndex,this.series.zIndex)},t,{color:r}),i),this.append(this.label)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.reflow=function(t){this.render();var e=this.label;this.box=t,e&&e.reflow(this.markerBox()),this.note&&this.note.reflow(t),this.marker.reflow(this.markerBox())},e.prototype.markerBox=function(){var t=this.options.markers,e=t.border,i=this.box.toRect(),n=ul(t.type,"rect")===ls,r=ul(e.width,n?1:0),o=Math.round(r/2);if(t.size){var s=i.center();i.size.width=i.size.height=t.size,i.origin.x=Math.round(s.x-i.size.width/2),i.origin.y=Math.round(s.y-i.size.height/2)}return i.size.width-=r,i.size.height-=r,i.origin.y+=o+.5,i.origin.x+=o+.5,up(i)},e.prototype.markerBorder=function(){var t=this.options,e=t.markers.border,i=ul(e.opacity,t.opacity);return{color:e.color||this.color,width:e.width,opacity:i,dashType:e.dashType}},e.prototype.createMarker=function(){var t=this.options,e=t.markers,i=new Vc({type:ul(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:this.color,border:this.markerBorder(),borderRadius:e.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:ul(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=i,this.append(i)},e.prototype.createHighlight=function(t){var e=this.options,i=this.options.highlight.markers||this.options.markers,n=new Vc({type:ul(i.type,"rect"),width:i.size,height:i.size,rotation:i.rotation,background:i.color||this.color,border:this.markerBorder(),borderRadius:i.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:ul(e.zIndex,this.series.zIndex)});n.reflow(this.markerBox());var r=n.getElement();return r.options.fill=t.fill,r.options.stroke=t.stroke,r},e.prototype.highlightVisual=function(){return this.rectVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},e.prototype.tooltipAnchor=function(){var t=this.box.center().x,e=this.box.y1-5;return{point:new $l(t,e),align:{horizontal:qo,vertical:Uo}}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.unclipElements=function(){},e.prototype.pointData=function(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}},e}(Bc);As(yx.prototype,qf),As(yx.prototype,Gf),yx.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}}};const bx=yx;var wx=function(t){function e(e,i){t.call(this,i),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this.points=[],this.seriesOptions=[],this.valueRange={min:es,max:is},this._evalSeries=[]},e.prototype.render=function(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))},e.prototype.setRange=function(){for(var t=this,e=this.options.series,i=0;i<e.length;i++)for(var n=e[i],r=0;r<n.data.length;r++){var o=t._bindPoint(n,i,r).valueFields;Qa(o.value)&&null!==o.value&&(t.valueRange.min=Math.min(t.valueRange.min,o.value),t.valueRange.max=Math.max(t.valueRange.max,o.value))}},e.prototype.addValue=function(t,e){var i;t&&Qa(t.value)&&null!==t.value&&(i=this.createPoint(t,e))&&Object.assign(i,e),this.points.push(i)},e.prototype.evalPointOptions=function(t,e,i){var n=i.series,r=i.seriesIx,o={defaults:n._defaults,excluded:["data","tooltip","content","template","visual","toggle"]},s=this._evalSeries[r];Qa(s)||(this._evalSeries[r]=s=Ff(t,{},o,!0));var a=t;return s&&Ff(a=As({},t),{value:e,series:n,dataItem:i.dataItem,min:this.valueRange.min,max:this.valueRange.max},o),a},e.prototype.pointType=function(){return bx},e.prototype.pointOptions=function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[e]=i=As({},n,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},e.prototype.createPoint=function(t,e){var i=e.series,n=this.pointOptions(i,e.seriesIx),r=e.color||i.color;if(n=this.evalPointOptions(n,t,e),Cs(i.color))r=n.color;else if(0!==this.valueRange.max){r=gx(r)(t.value/this.valueRange.max)}var o=new bx(t,n);return o.color=r,this.append(o),o},e.prototype.seriesAxes=function(t){var e=t.xAxis,i=t.yAxis,n=this.plotArea,r=e?n.namedXAxes[e]:n.axisX,o=i?n.namedYAxes[i]:n.axisY;if(!r)throw new Error("Unable to locate X axis with name "+e);if(!o)throw new Error("Unable to locate Y axis with name "+i);return{xAxis:r,yAxis:o}},e.prototype.reflow=function(t){var e=this,i=this.points,n=!this.options.clip,r=0;this.traverseDataPoints((function(t,o){var s=i[r++],a=e.seriesAxes(o.series),l=a.xAxis,h=a.yAxis,c=l.categoryIndex(t.x),p=h.categoryIndex(t.y),u=l.getSlot(c,c,n),d=h.getSlot(p,p,n);if(s)if(u&&d){var f=e.pointSlot(u,d);s.reflow(f)}else s.visible=!1})),this.box=t},e.prototype.pointSlot=function(t,e){return new ah(t.x1,e.y1,t.x2,e.y2)},e.prototype.traverseDataPoints=function(t){for(var e=this,i=this.options.series,n=0;n<i.length;n++)for(var r=i[n],o=e.seriesAxes(r),s=o.xAxis,a=o.yAxis,l=s.currentRangeIndices(),h=a.currentRangeIndices(),c=0;c<r.data.length;c++){var p=e._bindPoint(r,n,c),u=p.valueFields,d=p.fields,f=s.totalIndex(u.x),v=a.totalIndex(u.y),m=l.min<=f&&f<=l.max,g=h.min<=v&&v<=h.max;m&&g&&t(u,As({pointIx:c,series:r,seriesIx:n,dataItem:r.data[c],owner:e},d))}},e.prototype.formatPointValue=function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.value)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e},e}(Bc);vl(wx,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0}),As(wx.prototype,{_bindPoint:Wf.prototype._bindPoint});const xx=wx;var _x=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.namedXAxes={},this.namedYAxes={}},e.prototype.render=function(t){void 0===t&&(t=this.panes),this.bindCategories(),this.createAxes(t),this.createCharts(t),this.createAxisLabels()},e.prototype.bindCategories=function(){for(var t=this.srcSeries||this.series,e=0;e<t.length;e++){for(var i=t[e],n=i.data||[],r=this.seriesAxes(i),o=r.xAxis,s=r.yAxis,a=Vl(o.categories||[]),l=Vl(s.categories||[]),h=0;h<n.length;h++){var c=wd.current.bindPoint(i,h).valueFields,p=c.x,u=c.y;a.has(p)||a.add(p),l.has(u)||l.add(u)}o.categories=a.values(),s.categories=l.values()}},e.prototype.createCharts=function(t){for(var e=this,i=this.groupSeriesByPane(),n=0;n<t.length;n++){var r=t[n],o=i[r.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);s&&e.createHeatmapChart(Sm(s,[Gd]),r)}},e.prototype.createHeatmapChart=function(t,e){var i=new xx(this,{series:t});this.appendChart(i,e)},e.prototype.seriesPaneName=function(t){var e=this.options,i=t.xAxis,n=Hs([].concat(e.xAxis),(function(t){return t.name===i}))[0],r=t.yAxis,o=Hs([].concat(e.yAxis),(function(t){return t.name===r}))[0],s=(e.panes||[{}])[0].name||"default";return(n||{}).pane||(o||{}).pane||s},e.prototype.seriesAxes=function(t){var e,i,n=this.options,r=[].concat(n.xAxis),o=t.xAxis;e=o?r.find((function(t){return t.name===o})):r[0];var s=[].concat(n.yAxis),a=t.yAxis;if(i=a?s.find((function(t){return t.name===a})):s[0],!e)throw new Error("Unable to locate X axis with name "+o);if(!i)throw new Error("Unable to locate Y axis with name "+a);return{xAxis:e,yAxis:i}},e.prototype.createAxisLabels=function(){for(var t=this.axes,e=0;e<t.length;e++)t[e].createLabels()},e.prototype.createXYAxis=function(t,e,i){for(var n,r=t.name,o=e?this.namedYAxes:this.namedXAxes,s=Object.assign({axisCrossingValue:0},t,{vertical:e,reverse:e||this.chartService.rtl?!t.reverse:t.reverse,justified:!1}),a=s.categories?s.categories[0]:null,l=[s.min,s.max,a],h=this.series,c=0;c<h.length;c++){var p=h[c],u=p[e?"yAxis":"xAxis"];if(u===s.name||0===i&&!u){var d=wd.current.bindPoint(p,0).valueFields;l.push(d[e?"y":"x"]);break}}for(var f=0;f<l.length;f++)if(l[f]instanceof Date){n=!0;break}var v=new(km(s.type,Ko)||!s.type&&n?Du:wu)(s,this.chartService);if(v.axisIndex=i,r){if(o[r])throw new Error((e?"Y":"X")+" axis with name "+r+" is already defined");o[r]=v}return this.appendAxis(v),v.mapCategories(),v},e.prototype.createAxes=function(t){for(var e=this,i=this.options,n=[].concat(i.xAxis),r=[],o=[].concat(i.yAxis),s=[],a=0;a<n.length;a++){$s(e.findPane(n[a].pane),t)&&r.push(e.createXYAxis(n[a],!1,a))}for(var l=0;l<o.length;l++){$s(e.findPane(o[l].pane),t)&&s.push(e.createXYAxis(o[l],!0,l))}this.axisX=this.axisX||r[0],this.axisY=this.axisY||s[0]},e.prototype.removeAxis=function(e){var i=e.options.name;t.prototype.removeAxis.call(this,e),e.options.vertical?delete this.namedYAxes[i]:delete this.namedXAxes[i],e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY},e.prototype._dispatchEvent=function(t,e,i){for(var n=t._eventCoordinates(e),r=new $l(n.x,n.y),o=this.axes,s=o.length,a=[],l=[],h=0;h<s;h++){var c=o[h];wm(c.options.vertical?l:a,c.getCategory(r))}a.length>0&&l.length>0&&t.trigger(i,{element:rl(e),originalEvent:e,x:Tm(a),y:Tm(l)})},e.prototype.updateAxisOptions=function(t,e){var i=t.options.vertical,n=this.groupAxes(this.panes),r=(i?n.y:n.x).indexOf(t);kx(this.options,r,i,e),kx(this.originalOptions,r,i,e)},e.prototype.crosshairOptions=function(t){return Object.assign({},t.options.crosshair,{zIndex:0})},e}(Bm);function kx(t,e,i,n){As([].concat(i?t.yAxis:t.xAxis)[e],n)}vl(_x,{xAxis:{},yAxis:{}}),As(_x.prototype,jm);const Sx=_x;var Cx="color",Ex="first",Tx="max",Ax="min",Mx="noteText";Yb.current.register(xg,[jd,Ud,Xd,df,Nd,cf,Wd,Yd,Hd,uf,Fd,pf,af,sf,vf,Kd,of,ff]),Yb.current.register(dw,[lf,hf,Vd]),Yb.current.register(Cw,[Zd]),Yb.current.register(Dw,[qd]),Yb.current.register(mx,[$d]),Yb.current.register($w,[Jd,Qd,tf]),Yb.current.register(cx,[ef,nf,rf]),Yb.current.register(Sx,[Gd]),wd.current.register([jd,Ud,Xd,df,Nd,cf],[ps],[Pf,Cx,Mx,Od,Dd]),wd.current.register([af,sf,of,ff],["from","to"],[Pf,Cx,Mx]),wd.current.register([vf,Kd],[ps],[Pf,Cx,Mx,"summary"]),wd.current.register([Jd,Qd,tf],[fs,vs],[Cx]),wd.current.register([ef,nf,rf],[ps],[Cx]),wd.current.register([$d],[ps],[Pf,Cx,"visibleInLegend","visible"]),Um.current.register([jd,Ud,Xd,df,Nd,cf,vf,Kd],{value:Tx,color:Ex,noteText:Ex,errorLow:Ax,errorHigh:Tx}),Um.current.register([af,sf,of,ff],{from:Ax,to:Tx,color:Ex,noteText:Ex}),Um.current.register([ef,nf,rf],{value:Tx,color:Ex}),wd.current.register([lf,hf,Vd],[fs,vs],[Cx,Mx,"xErrorLow","xErrorHigh","yErrorLow","yErrorHigh"]),wd.current.register([Vd],[fs,vs,"size"],[Cx,Pf,Mx]),wd.current.register([Gd],[fs,vs,ps],[Cx,Mx]),wd.current.register([Wd,Yd],["open","high","low","close"],[Pf,Cx,"downColor",Mx]),Um.current.register([Wd,Yd],{open:Tx,high:Tx,low:Ax,close:Tx,color:Ex,downColor:Ex,noteText:Ex}),wd.current.register([Fd,pf],["lower","q1","median","q3","upper","mean","outliers"],[Pf,Cx,Mx]),Um.current.register([Fd,pf],{lower:Tx,q1:Tx,median:Tx,q3:Tx,upper:Tx,mean:Tx,outliers:Ex,color:Ex,noteText:Ex}),wd.current.register([Hd,uf],["current","target"],[Pf,Cx,"visibleInLegend",Mx]),Um.current.register([Hd,uf],{current:Tx,target:Tx,color:Ex,noteText:Ex}),wd.current.register([Zd,qd],[ps],[Pf,Cx,"explode","visibleInLegend","visible"]);var Ox=[Pf,ps,fs,vs],Dx=function(t){function e(e,i,n,r){var o=this;void 0===r&&(r={}),t.call(this),this.observers=[],this.addObserver(r.observer),this.chartService=new Pp(this,r),this.chartService.theme=n,this._initElement(e);var s=As({},this.options,i);this._originalOptions=As({},s),this._theme=n,this._initTheme(s,n),this._initHandlers(),this._initSurface(),this.bindCategories(),fl.preloadFonts(i,(function(){o.fontLoaded=!0,o._destroyed||(o.trigger("init"),o._redraw(),o._attachEvents())}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initElement=function(t){for(this._setElementClass(t),t.style.position="relative";t.firstChild;)t.removeChild(t.firstChild);this.element=t},e.prototype._setElementClass=function(t){gs(t,"k-chart")},e.prototype._initTheme=function(t,e){for(var i=[],n=t.series||[],r=0;r<n.length;r++)i.push(Object.assign({},n[r]));t.series=i,function(t){for(var e=Ox,i=0;i<e.length;i++){var n=e[i]+"Axes";t[n]&&(t[e[i]+"Axis"]=t[n],delete t[n])}}(t),this.applyDefaults(t,e),null===t.seriesColors&&delete t.seriesColors,this.options=As({},e,t),this.applySeriesColors()},e.prototype.getSize=function(){var t=this.options.chartArea||{};return{width:t.width?parseInt(t.width,10):Math.floor(this.element.offsetWidth),height:t.height?parseInt(t.height,10):Math.floor(this.element.offsetHeight)}},e.prototype.resize=function(t){var e=this.getSize(),i=this._size,n=e.width>0||e.height>0;t||n&&(!i||e.width!==i.width||e.height!==i.height)?(this._size=e,this._resize(e,t),this.trigger("resize",e)):n&&this._selections&&gl(this._selections,(function(t){return!t.visible}))&&(this._destroySelections(),this._setupSelection())},e.prototype._resize=function(){this._noTransitionsRedraw()},e.prototype.redraw=function(t){if(this.applyDefaults(this.options),this.applySeriesColors(),t){var e=this._model._plotArea,i=e.findPane(t);e.redraw(i)}else this._redraw()},e.prototype.getAxis=function(t){return cd(t,this._plotArea.axes)},e.prototype.findAxisByName=function(t){return this.getAxis(t)},e.prototype.findPaneByName=function(t){for(var e=this._plotArea.panes,i=0;i<e.length;i++)if(e[i].options.name===t)return new ud(e[i])},e.prototype.findPaneByIndex=function(t){var e=this._plotArea.panes;if(e[t])return new ud(e[t])},e.prototype.plotArea=function(){return new fd(this._plotArea)},e.prototype.toggleHighlight=function(t,e){var i,n,r,o=this._plotArea,s=(o.srcSeries||o.series||[])[0];Cs(e)?i=o.filterPoints(e):(Ms(e)?(n=e.series,r=e.category):n=r=e,i=s.type===qd?Px(o.pointsBySeriesName(n),r):s.type===Zd||s.type===$d?Px((o.charts[0]||{}).points,r):o.pointsBySeriesName(n));i&&this.togglePointsHighlight(t,i)},e.prototype.togglePointsHighlight=function(t,e){for(var i=this._highlight,n=0;n<e.length;n++)i.togglePointHighlight(e[n],t)},e.prototype.showTooltip=function(t){var e,i,n=this._sharedTooltip(),r=this._tooltip,o=this._plotArea;if(Cs(t)?(e=o.findPoint(t))&&n&&(i=e.categoryIx):n&&Qa(t)&&(i=o.categoryAxis.categoryIndex(t)),n){if(i>=0){var s=this._plotArea.pointsByCategoryIndex(i);r.showAt(s)}}else e&&r.show(e)},e.prototype.hideTooltip=function(){this._tooltip.hide()},e.prototype._initSurface=function(){var t=this.surface,e=this._surfaceWrap(),i=this.options.chartArea||{};i.width&&il(e,{width:i.width}),i.height&&il(e,{height:i.height}),t&&t.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(this._destroySurface(),this.surface=_b.create(e,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler))},e.prototype._surfaceWrap=function(){return this.element},e.prototype._redraw=function(){var t=this._getModel();this._size={width:t.options.width,height:t.options.height},this._destroyView(),this._model=t,this._plotArea=t._plotArea,t.renderVisual(),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.setup()})),this._initSurface(),this.surface.draw(t.visual),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.play()})),this._tooltip=this._createTooltip(),this._highlight=new Cb,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this.trigger("render"),Bx(this._plotArea.panes),this._navState||this._cancelDomEvents()},e.prototype.exportVisual=function(t){var e;if(t&&(t.width||t.height||t.options)){var i=this.options,n=As({},t.options,{chartArea:{width:t.width,height:t.height}});Lx(this._originalOptions,n),this.options=As({},this._originalOptions,n),this._initTheme(this.options,this._theme),this.bindCategories();var r=this._getModel();r.renderVisual(),Bx(r._plotArea.panes),e=r.visual,this.options=i}else e=this.surface.exportVisual();return e},e.prototype._sharedTooltip=function(){return this._plotArea instanceof xg&&this.options.tooltip&&this.options.tooltip.shared},e.prototype._createPannable=function(){var t=this.options;!1!==t.pannable&&(this._pannable=new Mb(this._plotArea,t.pannable))},e.prototype._createZoomSelection=function(){var t=this.options.zoomable,e=(t||{}).selection;!1!==t&&!1!==e&&(this._zoomSelection=new Db(this,e))},e.prototype._createMousewheelZoom=function(){var t=this.options.zoomable,e=(t||{}).mousewheel;!1!==t&&!1!==e&&(this._mousewheelZoom=new Rb(this,e))},e.prototype._toggleDragZoomEvents=function(){var t=this.options.pannable,e=this.options.zoomable,i=(e||{}).selection,n=(e||{}).mousewheel,r=!(t||!1!==e&&!1!==i||this.requiresHandlers([_f,wf,xf])),o=(!1===e||!1===n)&&!this.requiresHandlers([kf,Sf,Cf]),s=this.element;this._dragZoomEnabled&&r&&o?(s.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):this._dragZoomEnabled||r&&o||(s.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!r,!o)},e.prototype._toggleDomEvents=function(t,e){var i=this.domEvents;i&&(i.toggleDrag&&i.toggleDrag(t),i.toggleZoom&&i.toggleZoom(e))},e.prototype._createTooltip=function(){var t=this.options.tooltip;return this._sharedTooltip()?this._createSharedTooltip(t):new iw(this.chartService,t)},e.prototype._createSharedTooltip=function(t){return new rw(this._plotArea,t)},e.prototype.applyDefaults=function(t,e){!function(t,e){var i,n,r,o=(e||{}).axisDefaults||{};function s(t){var e=(t||{}).color||n.color,r=As({},o,o[i],n,n[i],{line:{color:e},labels:{color:e},title:{color:e}},t);return delete r[i],r}for(var a=0;a<Ox.length;a++)i=Ox[a]+"Axis",n=t.axisDefaults||{},r=(r=[].concat(t[i])).map(s),t[i]=r.length>1?r:r[0]}(t,e),function(t,e){var i=t.series,n=i.length,r=t.seriesDefaults,o=As({},t.seriesDefaults),s=e?As({},e.seriesDefaults):{},a=As({},s);Rx(o),Rx(a);for(var l=0;l<n;l++){var h=i[l].type||t.seriesDefaults.type,c=As({data:[]},a,s[h],{tooltip:t.tooltip},o,r[h]);i[l]._defaults=c,i[l]=As({},c,i[l]),i[l].data=i[l].data||[]}}(t,e)},e.prototype.applySeriesColors=function(){for(var t=this.options,e=t.series,i=t.seriesColors||[],n=0;n<e.length;n++){var r=e[n],o=i[n%i.length],s=r._defaults;r.color=r.color||o,s&&(s.color=s.color||o)}},e.prototype._getModel=function(){var t=this.options,e=this._createPlotArea(),i=new rp(this._modelOptions());return i.chart=this,i._plotArea=e,gp.buildTitle(t.title,i),t.legend&&t.legend.visible&&i.append(new Kb(e.options.legend,this.chartService)),i.append(e),i.reflow(),i},e.prototype._modelOptions=function(){var t=this.options,e=this.getSize();return As({transitions:t.transitions,width:e.width||600,height:e.height||400},t.chartArea)},e.prototype._createPlotArea=function(t){var e=this.options;return Yb.current.create(t?[]:e.series,e,this.chartService)},e.prototype._setupSelection=function(){for(var t=this._plotArea.axes,e=this._selections=[],i=0;i<t.length;i++){var n=t[i],r=n.options;if(n instanceof wu&&r.select&&!r.vertical){var o=n.range(),s=new tw(this,n,As({min:o.min,max:o.max},r.select));e.push(s)}}},e.prototype._selectStart=function(t){return this.trigger(Ef,t)},e.prototype._select=function(t){return this.trigger(Tf,t)},e.prototype._selectEnd=function(t){return this.trigger(Af,t)},e.prototype._initHandlers=function(){this._clickHandler=this._click.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemove=_g(this._mousemove.bind(this),20)},e.prototype.addObserver=function(t){t&&this.observers.push(t)},e.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},e.prototype.requiresHandlers=function(t){for(var e=this.observers,i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0},e.prototype.trigger=function(t,e){void 0===e&&(e={}),t===Mf&&(e.anchor.point=this._toDocumentCoordinates(e.anchor.point)),e.sender=this;for(var i=this.observers,n=!1,r=0;r<i.length;r++)i[r].trigger(t,e)&&(n=!0);return n},e.prototype._attachEvents=function(){var t,e,i=this.element;this._touchAction=i.style.touchAction,Ja(i,((t={}).contextmenu=this._clickHandler,t[zf]=this._mousewheelHandler,t.mouseleave=this._mouseleaveHandler,t)),this._shouldAttachMouseMove()&&Ja(i,((e={}).mousemove=this._mousemove,e)),this.domEvents=zp.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()},e.prototype._mouseleave=function(t){this._hoveredPoint&&(this._hoveredPoint.out(this,t),this._hoveredPoint=null),this._plotArea.hovered&&(this.trigger(bf),this._plotArea.hovered=!1)},e.prototype._cancelDomEvents=function(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()},e.prototype._gesturestart=function(t){this._mousewheelZoom&&!this._stopChartHandlers(t)&&(this._gestureDistance=t.distance,this._unsetActivePoint(),this.surface.suspendTracking())},e.prototype._gestureend=function(t){this._zooming&&!this._stopChartHandlers(t)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger(Cf,{}))},e.prototype._gesturechange=function(t){var e=this._mousewheelZoom;if(e&&!this._stopChartHandlers(t)){t.preventDefault();var i=this._gestureDistance,n=-t.distance/i+1;if(Math.abs(n)>=.1){n=Math.round(10*n),this._gestureDistance=t.distance;var r={delta:n,axisRanges:Ix(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(kf,r)){var o=this._eventCoordinates(t);this._zooming||(this._zooming=!0),(r.axisRanges=e.updateRanges(n,o))&&!this.trigger(Sf,r)&&e.zoom()}}}},e.prototype._mouseout=function(t){if(t.element){var e=this._drawingChartElement(t.element,t);e&&e.leave&&e.leave(this,t.originalEvent)}},e.prototype._start=function(t){var e=this._eventCoordinates(t);!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(e)&&(this.requiresHandlers([_f,wf,xf])&&this._startNavigation(t,e,_f),this._pannable&&this._pannable.start(t)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(t)&&this.trigger(kf,{axisRanges:Ix(this._plotArea.axes),originalEvent:t}))},e.prototype._move=function(t){var e=this._navState,i=this._pannable;if(!this._stopChartHandlers(t)){if(i){var n=i.move(t);n&&!this.trigger(wf,{axisRanges:n,originalEvent:t})&&i.pan()}else if(e){for(var r={},o=e.axes,s=0;s<o.length;s++){var a=o[s];if(a.options.name){var l=a.options.vertical?t.y:t.x,h=l.startLocation-l.location;0!==h&&(r[a.options.name]=a.translateRange(h))}}e.axisRanges=r,this.trigger(wf,{axisRanges:r,originalEvent:t})}this._zoomSelection&&this._zoomSelection.move(t)}},e.prototype._end=function(t){if(!this._stopChartHandlers(t)){var e=this._pannable;if(e&&e.end(t)?(this.surface.resumeTracking(),this.trigger(xf,{axisRanges:Ix(this._plotArea.axes),originalEvent:t}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(t,xf),this._zoomSelection){var i=this._zoomSelection.end(t);i&&!this.trigger(Sf,{axisRanges:i,originalEvent:t})&&(this._zoomSelection.zoom(),this.trigger(Cf,{axisRanges:i,originalEvent:t}))}}},e.prototype._stopChartHandlers=function(t){var e=this._selections||[];if(!e.length)return!1;var i=this._eventCoordinates(t),n=this._plotArea.paneByPoint(i);if(n)for(var r=0;r<e.length;r++)if(e[r].onPane(n))return!0},e.prototype._mousewheelZoomRate=function(){var t=(this.options.zoomable||{}).mousewheel||{};return ul(t.rate,.3)},e.prototype._mousewheel=function(t){var e=this,i=ia(t),n=this._mousewheelZoom,r=this._eventCoordinates(t);if(!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(r))if(n){var o={delta:i,axisRanges:Ix(this._plotArea.axes),originalEvent:t};!this._zooming&&this.trigger(kf,o)||(t.preventDefault(),this._zooming||(this._unsetActivePoint(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),o.axisRanges=n.updateRanges(i,r),o.axisRanges&&!this.trigger(Sf,o)&&n.zoom(),this._mwTimeout=setTimeout((function(){e.trigger(Cf,o),e._zooming=!1,e.surface&&e.surface.resumeTracking()}),150))}else{var s=this._navState;if(!s)this._startNavigation(t,r,kf)||(s=this._navState);if(s){var a=s.totalDelta||i;s.totalDelta=a+i;for(var l=this._navState.axes,h={},c=0;c<l.length;c++){var p=l[c],u=p.options.name;u&&(h[u]=p.scaleRange(-a*e._mousewheelZoomRate(),r))}this.trigger(Sf,{delta:i,axisRanges:h,originalEvent:t}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){e._endNavigation(t,Cf)}),150)}}},e.prototype._startNavigation=function(t,e,i){var n=this._model._plotArea,r=n.findPointPane(e),o=n.axes.slice(0);if(r){var s=Ix(o);this.trigger(i,{axisRanges:s,originalEvent:t})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._navState={axisRanges:s,pane:r,axes:o})}},e.prototype._endNavigation=function(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)},e.prototype._getChartElement=function(t,e){var i=this.surface.eventTarget(t);if(i)return this._drawingChartElement(i,t,e)},e.prototype._drawingChartElement=function(t,e,i){for(var n,r=t;r&&!n;)n=r.chartElement,r=r.parent;if(n)return n.aliasFor&&(n=n.aliasFor(e,this._eventCoordinates(e))),i&&(n=n.closest(i))&&n.aliasFor&&(n=n.aliasFor()),n},e.prototype._eventCoordinates=function(t){var e=nl(t);return this._toModelCoordinates(e.x,e.y)},e.prototype._elementPadding=function(){if(!this._padding){var t=Rs(this.element,["paddingLeft","paddingTop"]),e=t.paddingLeft,i=t.paddingTop;this._padding={top:i,left:e}}return this._padding},e.prototype._toDocumentCoordinates=function(t){var e=this._elementPadding(),i=el(this.element);return{left:cl(t.x+e.left+i.left),top:cl(t.y+e.top+i.top)}},e.prototype._toModelCoordinates=function(t,e){var i=this.element,n=el(i),r=this._elementPadding(),o=function(t){if(!t)return yl.unit();for(var e=wl(t),i=t.parentElement;i;){var n=wl(i);e=e.multiplyCopy(n),i=i.parentElement}return e.b=e.c=e.e=e.f=0,e}(i).invert(),s=new th(t-n.left-r.left,e-n.top-r.top).transform(o);return new $l(s.x,s.y)},e.prototype._tap=function(t){var e=this,i=this.surface.eventTarget(t),n=this._drawingChartElement(i,t),r=this._sharedTooltip();this._startHover(i,t)||r||this._unsetActivePoint(),r&&this._trackSharedTooltip(this._eventCoordinates(t),t,!0),this._propagateClick(n,t),this.handlingTap=!0,setTimeout((function(){e.handlingTap=!1}),0)},e.prototype._click=function(t){var e=this._getChartElement(t);this._propagateClick(e,t)},e.prototype._propagateClick=function(t,e){for(var i=t;i;)i.click&&i.click(this,e),i=i.parent},e.prototype._startHover=function(t,e){if(this._suppressHover)return!1;var i=this._drawingChartElement(t,e,(function(t){return(t.hover||t.over)&&!(t instanceof Bm)})),n=this._activePoint,r=this._plotArea.series.length>1,o=this._hasInactiveOpacity();return this._updateHoveredPoint(i,e),i&&n!==i&&i.hover?(this._activePoint=i,this._sharedTooltip()||i.hover(this,e)||(this._displayTooltip(i),o?this._displayInactiveOpacity(i,r):this._highlight.show(i))):!i&&o&&(r&&this._activeChartInstance&&(this._updateSeriesOpacity(i,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null),i},e.prototype._displayTooltip=function(t){As({},this.options.tooltip,t.options.tooltip).visible&&this._tooltip.show(t)},e.prototype._displayInactiveOpacity=function(t,e,i){var n=this._activeChartInstance=this._chartInstanceFromPoint(t);if(n)if(e)this._updateSeriesOpacity(t),this._applySeriesOpacity(n.children,null,!0),this._applySeriesOpacity(n.children,t.series),this._highlight.show(i||t);else{var r;if(!n.supportsPointInactiveOpacity())return void this._highlight.show(t);(r=this._getInactivePoints(t,n))&&r.length&&this._highlight.show(r,1-this._getInactiveOpacityForSeries(t.series))}},e.prototype._getInactivePoints=function(t,e){return this._getAllPointsOfType(e,t.constructor).filter((function(e){return e!==t}))},e.prototype._getAllPointsOfType=function(t,e){for(var i=[],n=0;n<t.children.length;n++){var r=t.children[n];r.constructor===e?i.push(r):r.children&&r.children.length&&(i=i.concat(this._getAllPointsOfType(r,e)))}return i},e.prototype._updateHoveredPoint=function(t,e){var i=this._hoveredPoint;i&&i!==t&&(i.out(this,e),this._hoveredPoint=null),t&&i!==t&&t.over&&(this._hoveredPoint=t,t.over(this,e))},e.prototype._updateSeriesOpacity=function(t,e){for(var i=this._plotArea,n=i.series.length,r=0;r<n;r++){var o=i.series[r],s=this._getDefaultOpacityForSeries(o),a=this._getInactiveOpacityForSeries(o);e||o===t.series?(o.opacity=s,o.line&&(o.line.opacity=s)):(o.defaultOpacity=s,o.opacity=a,o.line&&(o.line.opacity=a))}},e.prototype._applySeriesOpacity=function(t,e,i,n){for(var r=0;r<t.length;r++){var o=t[r],s=o.series||n;if(s&&(s.highlight||{}).visible&&o.visual){var a=n?n.opacity:o.series.opacity;(s!==e||i)&&o.visual.opacity(i?1:a)}o.children&&o.children.length&&this._applySeriesOpacity(o.children,e,i,o.series)}},e.prototype._chartInstanceFromPoint=function(t){for(var e=t.parent;e&&!e.plotArea;)e=e.parent;return e},e.prototype._hasInactiveOpacity=function(){var t=void 0!==this.options.seriesDefaults.highlight.inactiveOpacity,e=this.options.series.filter((function(t){return void 0!==t.highlight.inactiveOpacity})).length>0;return t||e},e.prototype._getInactiveOpacityForSeries=function(t){var e=this.options.seriesDefaults.highlight.inactiveOpacity;return t.highlight.inactiveOpacity||e||t.opacity||1},e.prototype._getDefaultOpacityForSeries=function(t){return t.defaultOpacity||t.opacity||1},e.prototype._mouseover=function(t){var e,i=this._startHover(t.element,t.originalEvent);i&&i.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),Ja(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)))},e.prototype._mouseMoveTracking=function(t){var e,i=this,n=i.options,r=i._tooltip,o=i._highlight,s=i._activePoint,a=this._eventCoordinates(t);if(this._plotArea.box.containsPoint(a)){if(s&&s.tooltipTracking&&s.series&&s.parent.getNearestPoint){var l=s.parent.getNearestPoint(a.x,a.y,s.seriesIx);if(l&&l!==s)if(this._activePoint=l,!l.hover(this,t))As({},n.tooltip,l.options.tooltip).visible&&r.show(l),o.show(l)}}else pl(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)),this._unsetActivePoint(),this._mouseMoveTrackHandler=null},e.prototype._mousemove=function(t){var e=this._eventCoordinates(t),i=this._plotArea;if(this._trackCrosshairs(e),i.hover){var n=i.backgroundContainsPoint(e);n?(i.hovered=!0,this._plotArea.hover(this,t)):i.hovered&&!n&&(this.trigger(bf),i.hovered=!1)}this._sharedTooltip()&&this._trackSharedTooltip(e,t)},e.prototype._trackCrosshairs=function(t){for(var e=this._plotArea.crosshairs,i=0;i<e.length;i++){var n=e[i];n.box.containsPoint(t)?n.showAt(t):n.hide()}},e.prototype._trackSharedTooltip=function(t,e,i){if(!this._suppressHover){var n=this,r=n.options.tooltip,o=n._plotArea,s=n._plotArea.categoryAxis,a=n._tooltip,l=n._highlight;if(o.backgroundContainsPoint(t)){var h=s.pointCategoryIndex(t);if(h!==this._tooltipCategoryIx||!this._sharedHighlight&&i){var c=o.pointsByCategoryIndex(h),p=c.map((function(t){return t.eventArgs(e)})),u=p[0]||{};u.categoryPoints=p,c.length>0&&!this.trigger(gf,u)?(r.visible&&a.showAt(c,t),l.show(c),this._sharedHighlight=!0):a.hide(),this._tooltipCategoryIx=h}else i&&this._sharedHighlight&&(l.hide(),a.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(l.hide(),a.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}},e.prototype.hideElements=function(t){var e=this._plotArea;this._mousemove.cancel(),e.hideCrosshairs(),this._unsetActivePoint(t)},e.prototype._unsetActivePoint=function(t){var e=this._tooltip,i=this._highlight;this._activePoint=null,this._hoveredPoint=null,!e||t&&t.keepTooltipOpen||e.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,i&&i.hide()},e.prototype._deferRedraw=function(){this._redraw()},e.prototype._clearRedrawTimeout=function(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)},e.prototype.bindCategories=function(){for(var t=this.options,e=[].concat(t.categoryAxis),i=0;i<e.length;i++){var n=e[i];!1!==n.autoBind&&this.bindCategoryAxisFromSeries(n,i)}},e.prototype.bindCategoryAxisFromSeries=function(t,e){for(var i,n=this.options.series,r=n.length,o=new qs,s=[],a=!1,l=0;l<r;l++){var h=n[l],c=h.categoryAxis===t.name||!h.categoryAxis&&0===e,p=h.data,u=p.length,d=h.categoryField&&c;if(a=d||a,d&&u>0)for(var f=(i=Em(t,yd(h.categoryField,p[0])))?Cm:yd,v=0;v<u;v++){var m=p[v],g=f(h.categoryField,m,this.chartService.intl);!i&&o.get(g)||(s.push([g,m]),i||o.set(g,!0))}}if(s.length>0){i&&(s=function(t,e){void 0===e&&(e=hu);for(var i=function(t,e){void 0===e&&(e=hu);for(var i=1,n=t.length;i<n;i++)if(e(t[i],t[i-1])<0){t.sort(e);break}return t}(t,e),n=i.length,r=n>0?[i[0]]:[],o=1;o<n;o++)0!==e(i[o],sl(r))&&r.push(i[o]);return r}(s,(function(t,e){return hu(t[0],e[0])})));var y=function(t){for(var e=t.length,i=[],n=0;n<e;n++)for(var r=t[n],o=r.length,s=0;s<o;s++)i[s]=i[s]||[],i[s].push(r[s]);return i}(s);t.categories=y[0]}else a&&(t.categories=[])},e.prototype._isBindable=function(t){for(var e=wd.current.valueFields(t),i=!0,n=0;n<e.length;n++){var r=e[n];if(r===ps?r="field":r+="Field",!Qa(t[r])){i=!1;break}}return i},e.prototype._noTransitionsRedraw=function(){var t,e=this.options;!1!==e.transitions&&(e.transitions=!1,t=!0),this._redraw(),t&&(e.transitions=!0)},e.prototype._legendItemHover=function(t,e){var i,n=this._plotArea,r=this._highlight,o=(n.srcSeries||n.series)[t];if(i=$s(o.type,[Zd,qd,$d])?n.findPoint((function(i){return i.series.index===t&&i.index===e})):n.pointsBySeriesIndex(t),this._hasInactiveOpacity()&&o.visible&&i){var s=n.series.length>1,a=i.length?i[0]:i;this._displayInactiveOpacity(a,s,i)}else r.show(i)},e.prototype._shouldAttachMouseMove=function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([yf,bf])},e.prototype.updateMouseMoveHandler=function(){var t,e;pl(this.element,((t={}).mousemove=this._mousemove,t)),this._shouldAttachMouseMove()&&Ja(this.element,((e={}).mousemove=this._mousemove,e))},e.prototype.applyOptions=function(t,e){Lx(this._originalOptions,t),this._originalOptions=As(this._originalOptions,t),this.options=As({},this._originalOptions),e&&(this._theme=e,this.chartService.theme=e),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()},e.prototype.setOptions=function(t,e){this.applyOptions(t,e),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler()},e.prototype.setDirection=function(t){this.chartService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&this._destroySurface()},e.prototype.setIntlService=function(t){this.chartService.intl=t},e.prototype.noTransitionsRedraw=function(){this._noTransitionsRedraw()},e.prototype.destroy=function(){var t,e;this._destroyed=!0,pl(this.element,((t={}).contextmenu=this._clickHandler,t[zf]=this._mousewheelHandler,t.mousemove=this._mousemove,t.mouseleave=this._mouseleaveHandler,t)),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler&&pl(document,((e={}).mousemove=this._mouseMoveTrackHandler,e)),this._destroyView(),this._destroySurface(),this._clearRedrawTimeout()},e.prototype._destroySurface=function(){var t=this.surface;t&&(t.unbind("mouseenter",this._surfaceMouseenterHandler),t.unbind("mouseleave",this._surfaceMouseleaveHandler),t.destroy(),this.surface=null)},e.prototype._destroySelections=function(){var t=this._selections;if(t)for(;t.length>0;)t.shift().destroy()},e.prototype._destroyView=function(){var t=this._model;t&&(t.destroy(),this._model=null),this._unsetActivePoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)},e}(na);function Px(t,e){if(t)for(var i=0;i<t.length;i++)if(t[i].category===e)return[t[i]]}function Rx(t){delete t.bar,delete t.column,delete t.rangeColumn,delete t.line,delete t.verticalLine,delete t.pie,delete t.donut,delete t.area,delete t.verticalArea,delete t.scatter,delete t.scatterLine,delete t.bubble,delete t.candlestick,delete t.ohlc,delete t.boxPlot,delete t.bullet,delete t.verticalBullet,delete t.polarArea,delete t.polarLine,delete t.radarArea,delete t.radarLine,delete t.waterfall}function Ix(t){for(var e={},i=0;i<t.length;i++){var n=t[i],r=n.options.name;r&&(e[r]=n.range())}return e}var zx=["data","categories"];function Lx(t,e){for(var i in e)if(!$s(i,zx)&&e.hasOwnProperty(i)){var n=e[i],r=t[i];if(Qa(r)){var o=null===n;o||!Qa(n)?(delete t[i],o&&delete e[i]):r&&Ms(n)&&Ms(r)&&Lx(r,n)}}}function Bx(t){for(var e=0;e<t.length;e++)t[e].notifyRender()}vl(Dx,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},seriesDefaults:{type:Ud,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1});const Nx=Dx;var jx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._slotAnchor=function(t,e){var i=this.plotArea.categoryAxis.options.vertical,n=i?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};return{point:i?new $l(this.plotArea.box.x2,e.center().y):new $l(e.center().x,-2),align:n}},e.prototype._defaultAnchor=function(t,e){return this._slotAnchor({},e)},e}(rw);const Fx=jx;var Vx=[jd,Hd];function Hx(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e[i]=n.style.display,n.style.display="none"}return e}function Wx(t,e){for(var i=0;i<t.length;i++)t[i].style.display=e[i]}function Ux(t){return _s(t)?[t]:t}var qx=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._setElementClass=function(t){gs(t,"k-sparkline")},e.prototype._initElement=function(e){t.prototype._initElement.call(this,e),this._initialWidth=Math.floor(il(e).width)},e.prototype._resize=function(){var e=this.element,i=Hx(e.childNodes);this._initialWidth=Math.floor(il(e).width),Wx(e.childNodes,i),t.prototype._resize.call(this)},e.prototype._modelOptions=function(){var t=this.options,e=this._surfaceWrap(),i=Hx(e.childNodes),n=document.createElement("span");n.innerHTML="&nbsp;",e.appendChild(n);var r=As({width:this._autoWidth,height:il(e).height,transitions:t.transitions},t.chartArea,{inline:!0,align:!1});return il(e,{width:r.width,height:r.height}),e.removeChild(n),Wx(e.childNodes,i),this.surface&&this.surface.resize(),r},e.prototype._surfaceWrap=function(){if(!this.stage){var t=this.stage=document.createElement("span");this.element.appendChild(t)}return this.stage},e.prototype._createPlotArea=function(e){var i=t.prototype._createPlotArea.call(this,e);return this._autoWidth=this._initialWidth||this._calculateWidth(i),i},e.prototype._calculateWidth=function(t){for(var e=this.options,i=Is(e.chartArea.margin),n=t.charts,r=this._surfaceWrap(),o=0,s=0;s<n.length;s++){var a=n[s],l=(a.options.series||[])[0];if(l){if(l.type===jd)return 150;if(l.type===Hd)return 150;if(l.type===Zd)return il(r).height;var h=a.categoryAxis;if(h){var c=h.categoriesCount()*(!a.options.isStacked&&$s(l.type,[Ud,uf])?a.seriesOptions.length:1);o=Math.max(o,c)}}}var p=o*e.pointWidth;return p>0&&(p+=i.left+i.right),p},e.prototype._createSharedTooltip=function(t){return new Fx(this._plotArea,t)},e.normalizeOptions=function(t){var e=Ux(t);return(e=ms(e)?{seriesDefaults:{data:e}}:As({},e)).series||(e.series=[{data:Ux(e.data)}]),As(e,{seriesDefaults:{type:e.type}}),($s(e.series[0].type,Vx)||$s(e.seriesDefaults.type,Vx))&&(e=As({},{categoryAxis:{crosshair:{visible:!1}}},e)),e},e}(Nx);vl(qx,{chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]});var $x=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this._initialOpacity=parseFloat(Rs(this.element,"opacity").opacity)},e.prototype.step=function(t){Rs(this.element,{opacity:String(Ks(this._initialOpacity,0,t))})},e.prototype.abort=function(){t.prototype.abort.call(this),Rs(this.element,{display:"none",opacity:String(this._initialOpacity)})},e.prototype.cancel=function(){t.prototype.abort.call(this),Rs(this.element,{opacity:String(this._initialOpacity)})},e}(zc);const Gx=$x;function Kx(t,e){var i=document.createElement("div");return i.className=t,e&&(i.style.cssText=e),i}var Xx=function(t){function e(e,i,n){t.call(this),this.options=As({},this.options,n),this.container=e,this.chartService=i;var r=Rs(e,["paddingLeft","paddingTop"]);this.chartPadding={top:r.paddingTop,left:r.paddingLeft},this.createElements(),e.appendChild(this.element)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createElements=function(){var t=this.element=Kx("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;"),e=this.tooltip=Kx("k-tooltip k-chart-tooltip"),i=this.scroll=Kx("k-scroll");e.innerHTML="&nbsp;",t.appendChild(e),t.appendChild(i)},e.prototype.show=function(t,e,i){var n=this,r=n.element,o=n.options,s=n.scroll,a=n.tooltip,l=ru(pu(t)+pu(e-t)/2),h=.4*i.width(),c=i.center().x-h,p=(i.center().x-c)/(o.max-o.min),u=l-o.min,d=this.chartService.intl.format(o.format,t,e),f=Ns(o);this.clearHideTimeout(),this._visible||(Rs(r,{visibility:"hidden",display:"block"}),this._visible=!0),f&&(d=f({from:t,to:e})),a.innerHTML=d,Rs(a,{left:i.center().x-a.offsetWidth/2,top:i.y1});var v=Rs(a,["marginTop","borderTopWidth","height"]);Rs(s,{width:h,left:c+u*p,top:i.y1+v.marginTop+v.borderTopWidth+v.height/2}),Rs(r,{visibility:"visible"})},e.prototype.clearHideTimeout=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideAnimation&&this._hideAnimation.cancel()},e.prototype.hide=function(){var t=this;this.clearHideTimeout(),this._hideTimeout=setTimeout((function(){t._visible=!1,t._hideAnimation=new Gx(t.element),t._hideAnimation.setup(),t._hideAnimation.play()}),this.options.hideDelay)},e.prototype.destroy=function(){this.clearHideTimeout(),this.container&&this.container.removeChild(this.element),delete this.container,delete this.chartService,delete this.element,delete this.tooltip,delete this.scroll},e}(na);vl(Xx,{format:"{0:d} - {1:d}",hideDelay:500});const Yx=Xx;var Zx="_navigator",Jx=Zx,Qx=function(t){function e(e){var i;t.call(this),this.chart=e;var n=this.options=As({},this.options,e.options.navigator),r=n.select;r&&(r.from=this.parseDate(r.from),r.to=this.parseDate(r.to)),Qa(n.hint.visible)||(n.hint.visible=n.visible),this.chartObserver=new Zs(this,((i={}).drag="_drag",i.dragEnd="_dragEnd",i.zoom="_zoom",i.zoomEnd="_zoomEnd",i)),e.addObserver(this.chartObserver)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseDate=function(t){return mu(this.chart.chartService.intl,t)},e.prototype.clean=function(){this.selection&&(this.selection.destroy(),this.selection=null),this.hint&&(this.hint.destroy(),this.hint=null)},e.prototype.destroy=function(){this.chart&&(this.chart.removeObserver(this.chartObserver),delete this.chart),this.clean()},e.prototype.redraw=function(){this._redrawSelf(),this.initSelection()},e.prototype.initSelection=function(){var t,e=this.chart,i=this.options,n=this.mainAxis(),r=n.roundedRange(),o=r.min,s=r.max,a=i.select,l=a.from,h=a.to,c=a.mousewheel,p=(t=n,t_.prototype=t,new t_);0!==n.categoriesCount()&&(this.clean(),p.box=n.box,this.selection=new tw(e,p,{min:o,max:s,from:l||o,to:h||s,mousewheel:ul(c,{zoom:"left"}),visible:i.visible},new Zs(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"})),i.hint.visible&&(this.hint=new Yx(e.element,e.chartService,{min:o,max:s,template:Ns(i.hint),format:i.hint.format})))},e.prototype.setRange=function(){var t=this.chart._createPlotArea(!0).namedCategoryAxes._navigator.roundedRange(),e=t.min,i=t.max,n=this.options.select||{},r=n.from||e;r<e&&(r=e);var o=n.to||i;o>i&&(o=i),this.options.select=As({},n,{from:r,to:o}),this.filterAxes()},e.prototype._redrawSelf=function(t){var e=this.chart._plotArea;e&&e.redraw(sl(e.panes),t)},e.prototype.redrawSlaves=function(){var t=this.chart,e=t._plotArea,i=e.panes.slice(0,-1);e.srcSeries=t.options.series,e.options.categoryAxis=t.options.categoryAxis,e.clearSeriesPointsCache(),e.redraw(i)},e.prototype._drag=function(t){var e,i=this.chart,n=this.selection,r=i._eventCoordinates(t.originalEvent),o=this.mainAxis(),s=o.roundedRange(),a=o.pane.box.containsPoint(r),l=i._plotArea.categoryAxis,h=t.axisRanges[l.options.name],c=this.options.select;if(h&&!a&&n){e=c.from&&c.to?pu(c.to)-pu(c.from):pu(n.options.to)-pu(n.options.from);var p=ru(al(pu(h.min),s.min,pu(s.max)-e)),u=ru(al(pu(p)+e,pu(s.min)+e,s.max));this.options.select={from:p,to:u},this.options.liveDrag&&(this.filterAxes(),this.redrawSlaves()),n.set(p,u),this.showHint(p,u)}},e.prototype._dragEnd=function(){this.filterAxes(),this.filter(),this.redrawSlaves(),this.hint&&this.hint.hide()},e.prototype.readSelection=function(){var t=this.selection.options,e=t.from,i=t.to,n=this.options.select;n.from=e,n.to=i},e.prototype.filterAxes=function(){var t=this.options.select;void 0===t&&(t={});for(var e=this.chart.options.categoryAxis,i=t.from,n=t.to,r=0;r<e.length;r++){var o=e[r];o.pane!==Zx&&(o.min=i,o.max=n)}},e.prototype.filter=function(){var t=this.chart,e=this.options.select;if(t.requiresHandlers(["navigatorFilter"])){var i=this.mainAxis(),n={from:e.from,to:e.to};if("category"!==i.options.type){var r=new Du(As({baseUnit:"fit"},t.options.categoryAxis[0],{categories:[e.from,e.to]}),t.chartService).options;n.from=su(r.min,-r.baseUnitStep,r.baseUnit),n.to=su(r.max,r.baseUnitStep,r.baseUnit)}this.chart.trigger("navigatorFilter",n)}},e.prototype._zoom=function(t){var e=this,i=e.chart._plotArea.categoryAxis,n=e.selection,r=e.options,o=r.select,s=r.liveDrag,a=this.mainAxis(),l=t.delta;if(n){var h=a.categoryIndex(n.options.from),c=a.categoryIndex(n.options.to),p=this.chart._eventCoordinates(t.originalEvent);t.originalEvent.preventDefault(),Math.abs(l)>1&&(l*=3),c-h>1?(n.zoom(l,p),this.readSelection()):(i.options.min=o.from,o.from=i.scaleRange(-t.delta*this.chart._mousewheelZoomRate(),p).min),s&&(this.filterAxes(),this.redrawSlaves()),n.set(o.from,o.to),this.showHint(this.options.select.from,this.options.select.to)}},e.prototype._zoomEnd=function(t){this._dragEnd(t)},e.prototype.showHint=function(t,e){var i=this.chart._plotArea;this.hint&&this.hint.show(t,e,i.backgroundBox())},e.prototype._selectStart=function(t){return this.chart._selectStart(t)},e.prototype._select=function(t){return this.showHint(t.from,t.to),this.chart._select(t)},e.prototype._selectEnd=function(t){return this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filter(),this.redrawSlaves(),this.chart._selectEnd(t)},e.prototype.mainAxis=function(){var t=this.chart._plotArea;if(t)return t.namedCategoryAxes._navigator},e.prototype.select=function(t,e){var i=this.options.select;return t&&e&&(i.from=this.parseDate(t),i.to=this.parseDate(e),this.filterAxes(),this.filter(),this.redrawSlaves(),this.selection.set(t,e)),{from:i.from,to:i.to}},e.setup=function(t,i){if(void 0===t&&(t={}),void 0===i&&(i={}),!t.__navi){t.__navi=!0;var n=As({},i.navigator,t.navigator),r=t.panes=[].concat(t.panes),o=As({},n.pane,{name:Zx});n.visible||(o.visible=!1,o.height=.1),r.push(o),e.attachAxes(t,n),e.attachSeries(t,n,i)}},e.attachAxes=function(t,e){var i=e.series||[],n=t.categoryAxis=[].concat(t.categoryAxis),r=t.valueAxis=[].concat(t.valueAxis),o=0===Sm(i,mf).length,s=As({type:"date",pane:Zx,roundToBaseUnit:!o,justified:o,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:e.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}}),a=e.categoryAxis;n.push(As({},s,{maxDateGroups:200},a,{name:Jx,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),As({},s,a,{name:"_navigator_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:!0}),As({},s,a,{name:"_navigator_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:!1,mirror:!0},_overlap:!0})),r.push(As({name:Jx,pane:Zx,majorGridLines:{visible:!1},visible:!1},e.valueAxis))},e.attachSeries=function(t,e,i){for(var n=t.series=t.series||[],r=[].concat(e.series||[]),o=i.seriesColors,s=e.seriesDefaults,a=0;a<r.length;a++)n.push(As({color:o[a%o.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},s,r[a],{axis:Jx,categoryAxis:Jx,autoBind:e.autoBindElements}))},e}(na);function t_(){}const e_=Qx;var i_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyDefaults=function(e,i){var n=il(this.element).width||600,r=i,o={seriesDefaults:{categoryField:e.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:Math.floor(n/28)}}};r&&(r=As({},r,o)),e_.setup(e,r),t.prototype.applyDefaults.call(this,e,r)},e.prototype._setElementClass=function(t){gs(t,"k-chart k-stockchart")},e.prototype.setOptions=function(e){this.destroyNavigator(),t.prototype.setOptions.call(this,e)},e.prototype.noTransitionsRedraw=function(){var t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t},e.prototype._resize=function(){this.noTransitionsRedraw()},e.prototype._redraw=function(){var t=this.navigator;!this._dirty()&&t&&t.options.partialRedraw?t.redrawSlaves():this._fullRedraw()},e.prototype._dirty=function(){var t=this.options,e=Hs([].concat(t.series,t.navigator.series),(function(t){return t&&t.visible})).length,i=this._seriesCount!==e;return this._seriesCount=e,i},e.prototype._fullRedraw=function(){var e=this.navigator;e||(e=this.navigator=new e_(this),this.trigger("navigatorCreated",{navigator:e})),e.clean(),e.setRange(),t.prototype._redraw.call(this),e.initSelection()},e.prototype._trackSharedTooltip=function(e){var i=this._plotArea.paneByPoint(e);i&&i.options.name===Zx?this._unsetActivePoint():t.prototype._trackSharedTooltip.call(this,e)},e.prototype.bindCategories=function(){t.prototype.bindCategories.call(this),this.copyNavigatorCategories()},e.prototype.copyNavigatorCategories=function(){for(var t,e=[].concat(this.options.categoryAxis),i=0;i<e.length;i++){var n=e[i];n.name===Jx?t=n.categories:t&&n.pane===Zx&&(n.categories=t)}},e.prototype.destroyNavigator=function(){this.navigator&&(this.navigator.destroy(),this.navigator=null)},e.prototype.destroy=function(){this.destroyNavigator(),t.prototype.destroy.call(this)},e.prototype._stopChartHandlers=function(e){var i=this._eventCoordinates(e),n=this._plotArea.paneByPoint(i);return t.prototype._stopChartHandlers.call(this,e)||n&&n.options.name===Zx},e.prototype._toggleDragZoomEvents=function(){this._dragZoomEnabled||(this.element.style.touchAction="none",this._dragZoomEnabled=!0)},e}(Nx);vl(i_,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}});const n_=i_;var r_=150,o_="arrowPointer",s_="barPointer",a_=.5,l_=Math.PI/180,h_="inside",c_="linear",p_="outside",u_="radialPointer",d_="radialRangePointer";function f_(t,e){var i=t.getOrigin(),n=t.getSize(),r=Is(e);return t.setOrigin([i.x-r.left,i.y-r.top]),t.setSize([n.width+(r.left+r.right),n.height+(r.top+r.bottom)]),t}var v_=Cc,m_=uc,g_=lp;function y_(t,e){var i=t.box,n=t.children[0].box,r=e.border||{},o=e.background||"",s=m_.fromRect(new rh([i.x1,i.y1],[i.width(),i.height()]),{stroke:{}}),a=new g_(t.text,new th(n.x1,n.y1),{font:e.font,fill:{color:e.color}}),l=f_(a.bbox().clone(),e.padding),h=m_.fromRect(l,{stroke:{color:r.width?r.color:"",width:r.width,opacity:r.opacity,dashType:r.dashType,lineJoin:"round",lineCap:"round"},fill:{color:o}}),c=new v_;return c.append(s),c.append(h),c.append(a),c}function b_(t,e,i){var n=Qa(t.from)?t.from:is,r=Qa(t.to)?t.to:es;return t.from=Math.max(Math.min(r,n),e),t.to=Math.min(Math.max(r,n),i),t}function w_(t,e){var i=Is(e);return i.left=-i.left,i.top=-i.top,i.right=-i.right,i.bottom=-i.bottom,f_(t,i)}var x_=uc,__=_b,k_=function(t){function e(e,i,n,r){void 0===r&&(r={}),t.call(this),this.element=e,this.theme=n,this.contextService=new Pp(this,r),this._originalOptions=As({},this.options,i),this.options=As({},this._originalOptions),this._initTheme(n),this.redraw()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.surface&&(this.surface.destroy(),this.surface=null),delete this.element,delete this.surfaceElement},e.prototype.value=function(t){var e=this.pointers[0];if(0===arguments.length)return e.value();e.value(t),this._setValueOptions(t)},e.prototype._draw=function(){var t=this.surface;t.clear(),t.draw(this._visuals)},e.prototype.exportVisual=function(){return this._visuals},e.prototype.allValues=function(t){var e=this.pointers,i=[];if(0===arguments.length){for(var n=0;n<e.length;n++)i.push(e[n].value());return i}if(ms(t))for(var r=0;r<t.length;r++)_s(t[r])&&e[r].value(t[r]);this._setValueOptions(t)},e.prototype._setValueOptions=function(t){for(var e=[].concat(this.options.pointer),i=[].concat(t),n=0;n<i.length;n++)e[n].value=i[n]},e.prototype.resize=function(){this.noTransitionsRedraw()},e.prototype.noTransitionsRedraw=function(){var t=this.options.transitions;this._toggleTransitions(!1),this.redraw(),this._toggleTransitions(t)},e.prototype.redraw=function(){var t=this._surfaceSize(),e=new rh([0,0],[t.width,t.height]);this._initSurface(),this.gaugeArea=this._createGaugeArea(),this._createModel();var i=w_(e.bbox(),this._gaugeAreaMargin);this.reflow(i)},e.prototype.setOptions=function(t,e){this._originalOptions=As(this._originalOptions,t),this.options=As({},this._originalOptions),this._initTheme(e),this.redraw()},e.prototype.setDirection=function(t){this.contextService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&(this.surface.destroy(),this.surface=null)},e.prototype.setIntlService=function(t){this.contextService.intl=t},e.prototype._initTheme=function(t){var e=t||this.theme||{};this.theme=e,this.options=As({},e,this.options);var i=this.options,n=i.pointer;if(ms(n)){for(var r=[],o=0;o<n.length;o++)r.push(As({},e.pointer,n[o]));i.pointer=r}},e.prototype._createGaugeArea=function(){var t=this.options.gaugeArea,e=this.surface.size(),i=t.border||{},n=new rh([0,0],[e.width,e.height]);return this._gaugeAreaMargin=t.margin||5,i.width>0&&(n=w_(n,i.width)),x_.fromRect(n,{stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType,lineJoin:"round",lineCap:"round"},fill:{color:t.background}})},e.prototype._initSurface=function(){var t=this.options,e=this.surface,i=this._surfaceElement(),n=this._surfaceSize();il(i,n),e&&e.options.type===t.renderAs?(this.surface.clear(),this.surface.resize()):(e&&e.destroy(),this.surface=__.create(i,{type:t.renderAs}))},e.prototype._surfaceSize=function(){var t=this.options,e=this._getSize();return t.gaugeArea&&As(e,t.gaugeArea),e},e.prototype._surfaceElement=function(){return this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement)),this.surfaceElement},e.prototype.getSize=function(){return this._getSize()},e.prototype._getSize=function(){var t=this.element,e=this._defaultSize(),i=t.offsetWidth,n=t.offsetHeight;return i||(i=e.width),n||(n=e.height),{width:i,height:n}},e.prototype._defaultSize=function(){return{width:200,height:200}},e.prototype._toggleTransitions=function(t){this.options.transitions=t;for(var e=0;e<this.pointers.length;e++)this.pointers[e].options.animation.transitions=t},e}(na);vl(k_,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}});const S_=k_;var C_=uc,E_=Cc,T_=th;function A_(t,e){var i,n,r=t.position,o=t.tickX,s=t.tickY;return t.vertical?(i=new T_(o,r),n=new T_(o+e.size,r)):(i=new T_(r,s),n=new T_(r,s+e.size)),new C_({stroke:{color:e.color,width:e.width}}).moveTo(i).lineTo(n)}function M_(t,e,i,n){var r=e.length;if(n.visible)for(var o=i.mirror,s=i.lineBox,a=n.skip;a<r;a+=n.step)a%n.skipUnit!=0&&(i.tickX=o?s.x2:s.x2-n.size,i.tickY=o?s.y1-n.size:s.y1,i.position=e[a],t.append(A_(i,n)))}var O_=function(t){function e(e,i){var n=e||{};!Qa(n.reverse)&&!1===n.vertical&&(i||{}).rtl&&(n=Object.assign({},n,{reverse:!0})),t.call(this,0,1,n,i),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=As({},this.options,t);return(e=As({},e,{labels:{mirror:e.mirror}})).majorUnit=e.majorUnit||Ul(e.min,e.max),e},e.prototype.initFields=function(){},e.prototype.render=function(){var t=this.elements=new E_,e=this.renderLabels(),i=this.renderLine(),n=this.renderTicks(),r=this.renderRanges();return t.append(i,e,n,r),t},e.prototype.renderRanges=function(){for(var t=this,e=this.options,i=e.min,n=e.max,r=e.vertical,o=e.labels.mirror,s=e.ranges||[],a=new E_,l=s.length,h=e.rangeSize||e.minorTicks.size/2,c=0;c<l;c++){var p=b_(s[c],i,n),u=t.getSlot(p.from,p.to),d=r?t.lineBox():u,f=r?u:t.lineBox();r?d.x1-=h*(o?-1:1):f.y2+=h*(o?-1:1),a.append(C_.fromRect(new rh([d.x1,f.y1],[d.x2-d.x1,f.y2-f.y1]),{fill:{color:p.color,opacity:p.opacity},stroke:{}}))}return a},e.prototype.renderLabels=function(){for(var t=this.labels,e=this.options,i=new E_,n=0;n<t.length;n++)i.append(y_(t[n],e.labels));return i},e.prototype.renderLine=function(){var t=this.options.line,e=this.lineBox(),i=new E_;if(t.width>0&&t.visible){var n=new C_({stroke:{color:t.color,dashType:t.dashType,width:t.width}});n.moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),i.append(n)}return i},e.prototype.renderTicks=function(){var t=new E_,e=this.options,i=e.majorTicks.visible?e.majorUnit:0,n={vertical:e.vertical,mirror:e.labels.mirror,lineBox:this.lineBox()};return M_(t,this.getMajorTickPositions(),n,e.majorTicks),M_(t,this.getMinorTickPositions(),n,As({},{skipUnit:i/e.minorUnit},e.minorTicks)),t},e}(Nu);vl(O_,{min:0,max:50,majorTicks:{size:15,align:h_,color:Wo,width:a_,visible:!0},minorTicks:{size:10,align:h_,color:Wo,width:a_,visible:!0},line:{width:a_},labels:{position:h_,padding:2},mirror:!1,_alignLines:!1});const D_=O_;var P_=function(t){function e(e,i){t.call(this);var n=e.options,r=n.min,o=n.max,s=this.options=As({},this.options,i);s.fill=s.color,this.scale=e,Qa(s.value)?s.value=al(s.value,r,o):s.value=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.value=function(t){var e=this.options,i=e.value;if(0===arguments.length)return i;var n=this.scale.options,r=n.min,o=n.max;e._oldValue=Qa(e._oldValue)?e.value:r,e.value=al(t,r,o),this.elements&&this.repaint()},e}(na);vl(P_,{color:Wo});const R_=P_;var I_=function(t){function e(e,i){t.call(this,e,i),this.options=As({track:{visible:Qa(i.track)}},this.options)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(){var t,e,i,n=this.options,r=this.scale,o=r.options,s=o.mirror,a=o.vertical,l=r.lineBox(),h=n.track.size||n.size,c=n.size/2,p=Is(n.margin),u=a?p[s?"left":"right"]:p[s?"bottom":"top"];u=s?-u:u,a?(i=new ah(l.x1+u,l.y1,l.x1+u,l.y2),s?i.x1-=h:i.x2+=h,n.shape!==s_&&(t=e=new ah(l.x2+u,l.y1-c,l.x2+u,l.y2+c))):(i=new ah(l.x1,l.y1-u,l.x2,l.y1-u),s?i.y2+=h:i.y1-=h,n.shape!==s_&&(t=e=new ah(l.x1-c,l.y1-u,l.x2+c,l.y1-u))),this.trackBox=i,this.pointerRangeBox=e,this.box=t||i.clone().pad(n.border.width)},e.prototype.getElementOptions=function(){var t=this.options;return{fill:{color:t.color,opacity:t.opacity},stroke:Qa(t.border)?{color:t.border.width?t.border.color||t.color:"",width:t.border.width,dashType:t.border.dashType,opacity:t.opacity}:null}},e.prototype._margin=function(){var t=this.scale,e=this.options,i=t.options,n=i.mirror,r=i.vertical,o=Is(e.margin);return r?o[n?"left":"right"]:o[n?"bottom":"top"]},e}(R_);vl(I_,{shape:s_,track:{border:{width:1}},color:Wo,border:{width:1},opacity:1,margin:Is(3),animation:{type:s_},visible:!0});const z_=I_;var L_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.options,e=t.margin,i=t.from,n=t.to,r=t.vertical,o=r?"x1":"y1";t.mirror===r?(i[o]-=e,n[o]-=e):(i[o]+=e,n[o]+=e);var s=this.fromScale=new th(i.x1,i.y1),a=this.toScale=new th(n.x1,n.y1);0!==t.duration&&(t.duration=Math.max(s.distanceTo(a)/t.duration*1e3,1))},e.prototype.step=function(t){var e=Ks(this.fromScale.x,this.toScale.x,t),i=Ks(this.fromScale.y,this.toScale.y,t);this.element.transform(Eh().translate(e,i))},e}(zc);vl(L_,{easing:c_,duration:250}),Rc.current.register(o_,L_);const B_=L_;var N_=th,j_=uc,F_=function(t){function e(e,i){t.call(this,e,i),Qa(this.options.size)||(this.options.size=.6*this.scale.options.majorTicks.size)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointerShape=function(){var t=this.scale,e=this.options.size,i=e/2,n=t.options.mirror?-1:1;return t.options.vertical?[new N_(0,0-i),new N_(0-n*e,0),new N_(0,0+i)]:[new N_(0-i,0),new N_(0,0+n*e),new N_(0+i,0)]},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=new B_(this.elements,As(e.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:this._margin(e.margin),from:t.getSlot(e._oldValue),to:t.getSlot(e.value)}));!1===e.animation.transitions&&(i.options.duration=0),i.setup(),i.play()},e.prototype.render=function(){var t=this.scale,e=this.options,i=this.getElementOptions(),n=this.pointerShape(e.value);e.animation.type=o_;var r=new j_({stroke:i.stroke,fill:i.fill}).moveTo(n[0]).lineTo(n[1]).lineTo(n[2]).close(),o=t.getSlot(e.value);return r.transform(Eh().translate(o.x1,o.y1)),this.elements=r,r},e}(z_);const V_=F_;var H_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.options,e=this.axis=t.vertical?vs:fs,i=this.to=t.newPoints[0][e],n=this.from=t.oldPoints[0][e];0!==t.duration&&(t.duration=Math.max(Math.abs(i-n)/t.speed*1e3,1)),this._set(n)},e.prototype.step=function(t){var e=Ks(this.from,this.to,t);this._set(e)},e.prototype._set=function(t){var e="set"+this.axis.toUpperCase(),i=this.options.newPoints;i[0][e](t),i[1][e](t)},e}(zc);vl(H_,{easing:c_,speed:250}),Rc.current.register(s_,H_);const W_=H_;var U_=Cc,q_=uc,$_=function(t){function e(e,i){t.call(this,e,i),Qa(this.options.size)||(this.options.size=.3*this.scale.options.majorTicks.size)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointerShape=function(t){var e=this.scale,i=this.options,n=e.options,r=n.mirror,o=n.vertical,s=r===o?-1:1,a=i.size*s,l=e.getSlot(e.options.min),h=e.getSlot(t),c=o?vs:fs,p=o?fs:vs,u=this._margin()*s,d=new th;d[c]=l[c+"1"],d[p]=l[p+"1"];var f=new th;f[c]=h[c+"1"],f[p]=h[p+"1"],o?(d.translate(u,0),f.translate(u,0)):(d.translate(0,u),f.translate(0,u));var v=f.clone(),m=d.clone();return o?(v.translate(a,0),m.translate(a,0)):(v.translate(0,a),m.translate(0,a)),[d,f,v,m]},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=this.pointerShape(e.value),n=this.pointerPath,r=this.pointerShape(e._oldValue);n.moveTo(i[0]).lineTo(i[1]).lineTo(i[2]).lineTo(i[3]).close();var o=new W_(n,As(e.animation,{reverse:t.options.reverse,vertical:t.options.vertical,oldPoints:[r[1],r[2]],newPoints:[i[1],i[2]]}));!1===e.animation.transitions&&(o.options.duration=0),o.setup(),o.play()},e.prototype.render=function(){var t=new U_,e=this.getElementOptions();this.options.track.visible&&t.append(this.renderTrack());var i=this.pointerPath=new q_({stroke:e.stroke,fill:e.fill});return t.append(i),this.elements=t,t},e.prototype.renderTrack=function(){var t=this.options.track,e=t.border||{},i=this.trackBox.clone().pad(e.width||0);return new q_.fromRect(i.toRect(),{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.width?e.color||t.color:"",width:e.width,dashType:e.dashType}})},e}(z_);const G_=$_;var K_=Cc,X_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.pointers,i=t.origin.x,n=t.origin.y,r=new ah(i,n,i+t.width(),n+t.height());this.scale.reflow(r),this._shrinkScaleWidth(r);for(var o=0;o<e.length;o++)e[o].reflow();this.bbox=this._getBox(r),this._alignElements(),this._shrinkElements(),this._buildVisual(),this._draw()},e.prototype._buildVisual=function(){var t=new K_,e=this.scale.render(),i=this.pointers;t.append(this.gaugeArea),t.append(e);for(var n=0;n<i.length;n++){var r=i[n];t.append(r.render()),r.value(r.options.value)}this._visuals=t},e.prototype._createModel=function(){var t=this.options,e=this.scale=new D_(t.scale,this.contextService);this.pointers=[];var i=t.pointer;i=ms(i)?i:[i];for(var n=0;n<i.length;n++){var r=As({},i[n],{animation:{transitions:t.transitions}}),o="arrow"===r.shape?V_:G_;this.pointers.push(new o(e,r))}},e.prototype._defaultSize=function(){var t=this.options.scale.vertical;return{width:t?60:200,height:t?200:60}},e.prototype._getBox=function(t){for(var e,i=this.scale,n=this.pointers,r=t.center(),o=n[0].box.clone().wrap(i.box),s=0;s<n.length;s++)o.wrap(n[s].box.clone());return i.options.vertical?(e=o.width()/2,o=new ah(r.x-e,t.y1,r.x+e,t.y2)):(e=o.height()/2,o=new ah(t.x1,r.y-e,t.x2,r.y+e)),o},e.prototype._alignElements=function(){for(var t,e=this.scale,i=this.pointers,n=e.box,r=i[0].box.clone().wrap(e.box),o=this.bbox,s=0;s<i.length;s++)r.wrap(i[s].box.clone());e.options.vertical?(t=o.center().x-r.center().x,e.reflow(new ah(n.x1+t,o.y1,n.x2+t,o.y2))):(t=o.center().y-r.center().y,e.reflow(new ah(n.x1,n.y1+t,n.x2,n.y2+t)));for(var a=0;a<i.length;a++)i[a].reflow(this.bbox)},e.prototype._shrinkScaleWidth=function(t){var e=this.scale;if(!e.options.vertical){var i=e.contentBox().width()-t.width();i>0&&(e.box.shrink(i,0),e.box.alignTo(t,"center"),e.reflow(e.box))}},e.prototype._shrinkElements=function(){for(var t=this.scale,e=this.pointers,i=t.box.clone(),n=t.options.vertical?"y":"x",r=e[0].box,o=0;o<e.length;o++)r.wrap(e[o].box.clone());i[n+1]+=Math.max(i[n+1]-r[n+1],0),i[n+2]-=Math.max(r[n+2]-i[n+2],0),t.reflow(i);for(var s=0;s<e.length;s++)e[s].reflow(this.bbox)},e}(S_);vl(X_,{transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}});const Y_=X_;var Z_=function(t){function e(e,i){void 0===e&&(e=new Fh),void 0===i&&(i={}),t.call(this,i),this.geometry(e),bs(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Arc"},e.prototype._bbox=function(t){return this._geometry.bbox(t)},e.prototype.rawBBox=function(){return this.geometry().bbox()},e.prototype.toPath=function(){var t=new uc,e=this.geometry().curvePoints();if(e.length>0){t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;i+=3)t.curveTo(e[i],e[i+1],e[i+2])}return t},e.prototype._containsPoint=function(t){return this.geometry().containsPoint(t)},e.prototype._isOnPath=function(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)},Object.defineProperties(e.prototype,i),e}(Mh(Dh(wc(Ah))));var J_=180,Q_=Z_,tk=uc,ek=Cc;function ik(t,e,i,n){var r=new ek,o=t.center,s=t.getRadiusX();if(n.visible)for(var a=0;a<e.length;a++){var l=t.pointAt(e[a]),h=new th(o.x+s-n.size,o.y).rotate(e[a],o);r.append(new tk({stroke:{color:n.color,width:n.width}}).moveTo(l).lineTo(h))}return r}function nk(t,e,i,n){return{from:t,to:e,color:i,opacity:n}}var rk=function(t){function e(e,i){t.call(this,0,1,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=As({},this.options,t);return e.majorUnit=e.majorUnit||Ul(e.min,e.max),e.minorUnit=e.minorUnit||e.majorUnit/10,e},e.prototype.initFields=function(){},e.prototype.render=function(t,e){var i=this.renderArc(t,e);this.bbox=i.bbox(),this.labelElements=this.renderLabels(),this.ticks=this.renderTicks(),this.ranges=this.renderRanges()},e.prototype.reflow=function(t){var e=t.center(),i=Math.min(t.height(),t.width())/2;if(!Qa(this.bbox))return this.render(e,i);this.bbox=this.arc.bbox(),this.radius(this.arc.getRadiusX()),this.repositionRanges(),this.renderLabels()},e.prototype.slotAngle=function(t){var e=this.options,i=e.min,n=e.max,r=e.reverse,o=e.startAngle,s=e.endAngle,a=s-o;return(r?s-(t-i)/(n-i)*a:(t-i)/(n-i)*a+o)+J_},e.prototype.hasRanges=function(){var t=this.options.ranges;return t&&t.length},e.prototype.ticksSize=function(){var t=this.options,e=t.majorTicks,i=t.minorTicks,n=0;return e.visible&&(n=e.size),i.visible&&(n=Math.max(i.size,n)),n},e.prototype.labelsCount=function(){var e=t.prototype.labelsCount.call(this),i=this.options;return i.endAngle-i.startAngle>=360&&i.max%i.majorUnit==0&&(e-=1),e},e.prototype.renderLabels=function(){var t=this,e=this.options,i=this.arc.clone(),n=i.getRadiusX(),r=this.tickAngles(i,e.majorUnit),o=e.rangeSize=e.rangeSize||.1*n,s=new ek,a=.05*n;Qa(e.rangeDistance)?a=e.rangeDistance:e.rangeDistance=a;var l=e.labels,h=l.position===h_,c=Qa(this.labelElements);h&&(n-=this.ticksSize(),this.hasRanges()&&!c&&(n-=o+a),i.setRadiusX(n).setRadiusY(n));for(var p=this.labels,u=p.length,d=Is(l.padding),f=(d.left+d.right)/2,v=(d.top+d.bottom)/2,m=0;m<u;m++){var g=p[m],y=g.box.width()/2,b=g.box.height()/2,w=r[m],x=(w-J_)*l_,_=i.pointAt(w),k=_.x+Math.cos(x)*(y+f)*(h?1:-1),S=_.y+Math.sin(x)*(b+v)*(h?1:-1);g.reflow(new ah(k-y,S-b,k+y,S+b));var C=new th(g.box.x1,g.box.y1),E=void 0;if(c){var T=(E=t.labelElements.children[m]).bbox().origin,A=E.transform()||Eh();A.translate(C.x-T.x,C.y-T.y),E.transform(A)}else E=y_(g,e.labels),s.append(E);t.bbox=rh.union(t.bbox,E.bbox())}return s},e.prototype.repositionRanges=function(){var t=this.ranges.children;if(t.length>0){var e=this.options,i=e.rangeDistance,n=e.rangeSize,r=this.getRangeRadius();this.options.labels.position===h_&&(r+=n+i);for(var o=r+n/2,s=0;s<t.length;s++)t[s]._geometry.setRadiusX(o).setRadiusY(o);this.bbox=rh.union(this.bbox,this.ranges.bbox())}},e.prototype.renderRanges=function(){var t=this,e=this.rangeSegments(),i=e.length,n=new ek;if(i){var r=this.options,o=r.rangeSize,s=r.reverse,a=r.rangeDistance,l=this.getRangeRadius();this.radius(this.radius()-o-a);for(var h=0;h<i;h++){var c=e[h],p=t.slotAngle(c[s?"to":"from"]),u=t.slotAngle(c[s?"from":"to"]);u-p!=0&&n.append(t.createRange(p,u,l,c))}}return n},e.prototype.createRange=function(t,e,i,n){var r=this.options.rangeSize,o=new Fh(this.arc.center,{radiusX:i+r/2,radiusY:i+r/2,startAngle:t,endAngle:e});return new Q_(o,{stroke:{width:r,color:n.color,opacity:n.opacity,lineCap:n.lineCap}})},e.prototype.rangeSegments=function(){var t=this.options,e=t.ranges||[],i=e.length,n=[];if(i){var r=t.min,o=t.max,s=t.rangePlaceholderColor;n.push(nk(r,o,s));for(var a=0;a<i;a++)for(var l=b_(e[a],r,o),h=n.length,c=0;c<h;c++){var p=n[c];if(p.from<=l.from&&l.from<=p.to){n.push(nk(l.from,l.to,l.color,l.opacity)),p.from<=l.to&&l.to<=p.to&&n.push(nk(l.to,p.to,s,l.opacity)),p.to=l.from;break}}}return n},e.prototype.getRangeRadius=function(){var t=this.arc,e=this.options,i=e.rangeSize,n=e.rangeDistance,r=e.majorTicks.size;return e.labels.position===p_?t.getRadiusX()-r-n-i:t.getRadiusX()-i},e.prototype.renderArc=function(t,e){var i=this.options;return this.arc=new Fh(t,{radiusX:e,radiusY:e,startAngle:i.startAngle+J_,endAngle:i.endAngle+J_})},e.prototype.renderTicks=function(){var t=this.arc,e=this.options,i=t.clone();this.majorTickAngles=this.tickAngles(t,e.majorUnit),this.majorTicks=ik(i,this.majorTickAngles,e.majorUnit,e.majorTicks);var n=new ek;n.append(this.majorTicks);var r=e.majorTicks.size,o=e.minorTicks.size;if(this._tickDifference=r-o,e.labels.position===p_){var s=i.getRadiusX();i.setRadiusX(s-r+o).setRadiusY(s-r+o)}return this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(t,e.minorUnit)),this.minorTicks=ik(i,this.minorTickAngles,e.minorUnit,e.minorTicks),n.append(this.minorTicks),n},e.prototype.normalizeTickAngles=function(t){for(var e=this.options,i=e.majorUnit/e.minorUnit,n=t.length-1;n>=0;n--)n%i==0&&t.splice(n,1);return t},e.prototype.tickAngles=function(t,e){var i=this.options,n=i.reverse,r=i.max-i.min,o=t.endAngle-t.startAngle,s=r/e,a=t.startAngle,l=o/s;n&&(a+=o,l=-l),o>=360&&i.max%e==0&&(s-=1);for(var h=[],c=0;c<s;c++)h.push(cl(a,3)),a+=l;return cl(a)<=t.endAngle&&h.push(a),h},e.prototype.radius=function(t){if(!t)return this.arc.getRadiusX();this.arc.setRadiusX(t).setRadiusY(t),this.repositionTicks(this.majorTicks.children,this.majorTickAngles),this.repositionTicks(this.minorTicks.children,this.minorTickAngles,!0)},e.prototype.repositionTicks=function(t,e,i){var n=i&&this._tickDifference||0,r=this.arc,o=r.getRadiusX();i&&this.options.labels.position===p_&&0!==n&&(r=this.arc.clone()).setRadiusX(o-n).setRadiusY(o-n);for(var s=0;s<t.length;s++){var a=r.pointAt(e[s]),l=t[s].segments,h=a.x-l[0].anchor().x,c=a.y-l[0].anchor().y;t[s].transform((new Eh).translate(h,c))}},e}(Nu);vl(rk,{min:0,max:100,majorTicks:{size:15,align:h_,color:Wo,width:a_,visible:!0},minorTicks:{size:10,align:h_,color:Wo,width:a_,visible:!0},startAngle:-30,endAngle:210,labels:{position:h_,padding:2}});const ok=rk;var sk=function(t){function e(e,i){t.call(this,e,i);var n=this.options;n.duration=Math.max(Math.abs(n.newAngle-n.oldAngle)/n.duration*1e3,1)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.step=function(t){var e=this.options,i=Ks(e.oldAngle,e.newAngle,t);this.element.transform(Eh().rotate(i,e.center))},e}(zc);vl(sk,{easing:c_,duration:r_}),Rc.current.register(u_,sk);const ak=sk;var lk=_c,hk=Cc,ck=uc,pk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setAngle=function(t){this.elements.transform(Eh().rotate(t,this.center))},e.prototype.repaint=function(){var t=this.scale,e=this.options,i=t.slotAngle(e._oldValue),n=t.slotAngle(e.value);!1===e.animation.transitions?this.setAngle(n):new ak(this.elements,As(e.animation,{oldAngle:i,newAngle:n})).play()},e.prototype.render=function(){var t=this.scale,e=this.options,i=new hk;return!1!==e.animation&&As(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),i.append(this._renderNeedle(),this._renderCap()),this.elements=i,this.setAngle(l_),i},e.prototype.reflow=function(t){var e=this.center=t.center,i=al(this.options.length||1,.1,1.5),n=this.radius=t.getRadiusX()*i,r=this.capSize=Math.round(n*this.options.cap.size);this.bbox=rh.fromPoints(new th(e.x-r,e.y-r),new th(e.x+r,e.y+r))},e.prototype._renderNeedle=function(){var t=this.scale.options.minorTicks.size,e=this.center,i=this.options.color,n=new ck({fill:{color:i},stroke:{color:i,width:a_}});return n.moveTo(e.x+this.radius-t,e.y).lineTo(e.x,e.y-this.capSize/2).lineTo(e.x,e.y+this.capSize/2).close(),n},e.prototype._renderCap=function(){var t=this.options,e=t.cap.color||t.color,i=new yc(this.center,this.capSize);return new lk(i,{fill:{color:e},stroke:{color:e}})},e}(R_);vl(pk,{cap:{size:.05},arrow:{width:16,height:14},animation:{type:u_,duration:r_}});const uk=pk;var dk=Cc,fk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,i=this.pointers;this.scale.reflow(t),this._initialPlotArea=this.scale.bbox;for(var n=0;n<i.length;n++)i[n].reflow(e.scale.arc),e._initialPlotArea=rh.union(e._initialPlotArea,i[n].bbox);this.fitScale(t),this.alignScale(t),this._buildVisual(this.gaugeArea,i,this.scale),this._draw()},e.prototype._buildVisual=function(t,e,i){var n=this._visuals=new dk;n.append(t),n.append(i.ticks),n.append(i.ranges),this._buildPointers(e),n.append(i.labelElements)},e.prototype._buildPointers=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.render(),this._visuals.append(i.elements),i.value(i.options.value)}},e.prototype.fitScale=function(t){for(var e,i,n,r,o,s=this,a=this.scale.arc,l=this._initialPlotArea,h=Math.abs(this.getDiff(l,t)),c=cl(h,3),p=cl(-h,3),u=0,d=0;!(!(d++<100)||(u=o===n?u+1:0)>5||c!==r&&0<=(e=s.getPlotBox(c,t,a))&&e<=2||p!==r&&0<=(n=s.getPlotBox(p,t,a))&&n<=2||(r=e>0&&n>0?2*c:e<0&&n<0?2*p:cl((c+p)/2||1,3),0<=(i=s.getPlotBox(r,t,a))&&i<=2));)o=n,i>0?(p=r,n=i):(c=r,e=i)},e.prototype.getPlotBox=function(t,e,i){var n=this.scale,r=this.pointers,o=i.getRadiusX(),s=i.clone();s.setRadiusX(o+t).setRadiusY(o+t),n.arc=s,n.reflow(e),this.plotBbox=n.bbox;for(var a=0;a<r.length;a++)r[a].reflow(s),this.plotBbox=rh.union(this.plotBbox,r[a].bbox);return this.getDiff(this.plotBbox,e)},e.prototype.getDiff=function(t,e){return Math.min(e.width()-t.width(),e.height()-t.height())},e.prototype.alignScale=function(t){var e=this.plotBbox.center(),i=t.center(),n=e.x-i.x,r=e.y-i.y,o=this.scale,s=this.pointers;o.arc.center.x-=n,o.arc.center.y-=r,o.reflow(t);for(var a=0;a<s.length;a++)s[a].reflow(o.arc),this.plotBbox=rh.union(o.bbox,s[a].bbox)},e.prototype._createModel=function(){var t=this.options,e=t.pointer,i=this.scale=new ok(t.scale,this.contextService);this.pointers=[];for(var n=ms(e)?e:[e],r=0;r<n.length;r++){var o=new uk(i,As({},n[r],{animation:{transitions:t.transitions}}));this.pointers.push(o)}},e}(S_);vl(fk,{transitions:!0,gaugeArea:{background:""}});const vk=fk;var mk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rangeSegments=function(){var t=this.options;return[{from:t.min,to:t.max,color:t.rangePlaceholderColor,lineCap:t.rangeLineCap}]},e.prototype.hasRanges=function(){return!0},e.prototype.placeholderRangeAngle=function(t){var e=this.ranges.children[0].geometry();this.options.reverse?e.setEndAngle(t):e.setStartAngle(t)},e.prototype.addRange=function(t,e,i){var n=this.options.reverse,r=this.slotAngle(n?e:t),o=this.slotAngle(n?t:e),s=this.createRange(r,o,this.getRangeRadius(),i);return this.ranges.append(s),s},e}(ok);vl(mk,{min:0,max:100,majorTicks:{visible:!1},minorTicks:{visible:!1},labels:{visible:!1},startAngle:0,endAngle:180,rangeLineCap:"round"});const gk=mk;var yk=function(t){function e(e,i){t.call(this,e,i);var n=this.options,r=Math.abs(n.newAngle-n.oldAngle)/n.duration*1e3;n.duration=al(r,r_,800);var o=e.elements.options.get("stroke.color"),s=e.currentColor();o!==s&&(this.startColor=new Il(o),this.color=new Il(s))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.step=function(t){var e=this,i=e.options,n=e.startColor,r=e.color,o=Ks(i.oldAngle,i.newAngle,t);if(this.element.angle(o),r){var s=cl(Ks(n.r,r.r,t)),a=cl(Ks(n.g,r.g,t)),l=cl(Ks(n.b,r.b,t));this.element.stroke(new Il(s,a,l).toHex())}},e}(zc);vl(yk,{easing:c_,duration:r_}),Rc.current.register(d_,yk);const bk=yk;var wk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.repaint=function(){var t=this.scale,e=this.options,i=t.slotAngle(e._oldValue),n=t.slotAngle(e.value);this.animation&&this.animation.abort(),!1===e.animation.transitions?(this.angle(n),this.stroke(this.currentColor())):(this.animation=new bk(this,As(e.animation,{oldAngle:i,newAngle:n})),this.animation.play())},e.prototype.angle=function(t){var e=this.elements.geometry();this.scale.options.reverse?e.setStartAngle(t):e.setEndAngle(t),this.scale.placeholderRangeAngle(t)},e.prototype.stroke=function(t){this.elements.stroke(t)},e.prototype.render=function(){if(!this.elements){var t=this.scale,e=this.options;!1!==e.animation&&As(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),this.elements=t.addRange(t.options.min,this.options.value,{color:this.currentColor(),opacity:e.opacity,lineCap:t.options.rangeLineCap})}},e.prototype.currentColor=function(){var t=this.scale.options,e=t.min,i=t.max,n=this.options,r=n.colors,o=n.color,s=n.value,a=_s(s)?s:e;if(r)for(var l=0;l<r.length;l++){var h=r[l],c=h.color,p=h.from;void 0===p&&(p=e);var u=h.to;if(void 0===u&&(u=i),p<=a&&a<=u)return c}return o},e.prototype.reflow=function(){this.render(),this.bbox=this.elements.bbox()},e}(R_);vl(wk,{animation:{type:d_,duration:r_}});const xk=wk;var _k=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initTheme=function(e){t.prototype._initTheme.call(this,e),this.options.color=this.options.color||(this.theme.pointer||{}).color},e.prototype._createModel=function(){var t=this.options,e=this.scale=new gk(t.scale,this.contextService),i=new xk(e,As({},{colors:t.colors,color:t.color,value:t.value,opacity:t.opacity,animation:{transitions:t.transitions}}));this.pointers=[i]},e.prototype._buildPointers=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.render(),i.value(i.options.value)}},e.prototype._setValueOptions=function(t){this.options.value=t},e.prototype.currentColor=function(){var t=this.pointers[0];if(t)return t.currentColor()},e.prototype.centerLabelPosition=function(t,e){var i=this.getSize(),n=this.scale.arc.center,r=n.x-t/2,o=n.y-e/2;if(t<i.width){var s=r+t;r=Math.max(r,0),s>i.width&&(r-=s-i.width)}if(e<i.height){var a=this.scale.bbox,l=a.bottomRight().y,h=o+e;o=Math.max(o,a.origin.y),h>l&&(o-=h-l)}return{left:r,top:o}},e}(vk);const kk=_k;var Sk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._createModel=function(){var e=this.options.scale;"number"!=typeof e.startAngle&&(e.startAngle=90),e.endAngle=e.startAngle+360,t.prototype._createModel.call(this)},e}(kk);const Ck=Sk;var Ek=function(t){function e(e){t.call(this),this.setOptions(e),this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){},e.prototype.setOptions=function(t){this.options=Object.assign({},this.options,t),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0},e.prototype.encode=function(t,e,i){var n=Qa(t)?String(t):t;return this.initValue(n,e,i),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}},e.prototype.initValue=function(){},e.prototype.addQuietZone=function(){this.pattern.push(this.options.quietZoneLength||10)},e.prototype.addData=function(){},e.prototype.invalidCharacterError=function(t){throw new Error('Character "'+t+'" is not valid for symbology '+this.name+".")},e}(na);vl(Ek,{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0});var Tk=Object.assign,Ak=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Tk(this,{name:"Code 11",characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221"})},e.prototype.initValue=function(t,e){this.pattern=[],this.value=t,this.width=e,this.totalUnits=0},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},e.prototype.addCheckSum=function(){var t=this.value,e=t.length,i=this.getWeightedSum(t,e,this.cCheckSumTotal)%this.checkSumMod;if(this.checksum=String(i),this.addPattern(this.characterMap[i]),++e>=this.kCheckSumMinLength){var n=(i+this.getWeightedSum(t,e,this.kCheckSumTotal))%this.checkSumMod;this.checksum+=n,this.addPattern(this.characterMap[n])}},e.prototype.getWeightedSum=function(t,e,i){for(var n=0,r=0;r<t.length;r++)n+=this.weightedValue(this.getValue(t.charAt(r)),e,r,i);return n},e.prototype.weightedValue=function(t,e,i,n){return((e-i)%n||n)*t},e.prototype.getValue=function(t){return isNaN(t)?(t!==this.DASH&&this.invalidCharacterError(t),this.DASH_VALUE):parseInt(t,10)},e.prototype.addCharacter=function(t){var e=this.getValue(t),i=this.characterMap[e];this.addPattern(i)},e.prototype.addPattern=function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e),this.totalUnits+=e},e}(Ek);vl(Ak,{addCheckSum:!0});var Mk=Object.assign,Ok=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Mk(this,{minBaseUnitLength:.7})},e.prototype.addData=function(){var t=this.value;this.addStart();for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addBase(e)},e.prototype.addBase=function(){},e}(Ek),Dk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Mk(this,{name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}}})},e.prototype.initValue=function(t,e,i){this.width=e,this.height=i,this.value=t,this.dataLength=t.length,this.pattern=[],this.patternString=""},e.prototype.prepareValues=function(){var t,e=this.minBaseUnitLength,i=this.minRatio,n=Math.ceil(Math.max(.15*this.width,24)),r=this.maxRatio;if(this.height<n)throw new Error("Insufficient height for Code39 encoding: the current height is "+this.height+"px and the minimum height is "+n+"px.");for(t=this.getBaseUnit(r);t<e&&r>i;)r=parseFloat((r-.1).toFixed(1)),t=this.getBaseUnit(r);if(t<e){var o=Math.ceil(this.getBaseWidth(i)*e);throw new Error("Insufficient width for Code39 encoding: the current width is "+this.width+'px and the minimum width for value "'+this.value+'" is '+o+"px.")}this.ratio=r,this.baseUnit=t,this.patternString=this.patternString.substring(0,this.patternString.length-1),this.pattern=this.pattern.concat(this.patternString.replace(/ratio/g,r).split(this.splitCharacter))},e.prototype.getBaseUnit=function(t){return this.width/this.getBaseWidth(t)},e.prototype.getBaseWidth=function(t){var e=3*(t+2);return this.quietZoneLength+e*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)},e.prototype.addStart=function(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()},e.prototype.addBase=function(t){this.addPattern(t.pattern),this.addCharacterGap()},e.prototype.addStop=function(){this.addPattern(this.characterMap.START.pattern)},e.prototype.addPattern=function(t){for(var e=0;e<t.length;e++)this.patternString+=this.patternMappings[t.charAt(e)]},e.prototype.addCharacterGap=function(){this.patternString+=this.gapWidth+this.splitCharacter},e}(Ok);vl(Dk,{addCheckSum:!1});var Pk={addCharacter:function(t){this.characterMap[t]?this.addBase(this.characterMap[t]):t.charCodeAt(0)>127?this.invalidCharacterError(t):this.addExtended(t.charCodeAt(0))},addExtended:function(t){for(var e,i=this,n=0;n<this.extendedMappings.length;n++)if(e=i.extendedMappings[n].call(i,t)){for(var r=0;r<e.length;r++){var o=e[r];i.addBase(o)}return void(i.dataLength+=e.length-1)}},extendedMappings:[function(t){if(97<=t&&t<=122)return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(t-32)]]},function(t){if(33<=t&&t<=58)return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(t+32)]]},function(t){if(1<=t&&t<=26)return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(t+64)]]},function(t){var e,i,n=this;if(this.specialAsciiCodes[t]){e=[];for(var r=0;r<this.specialAsciiCodes[t].length;r++)e.push(n.characterMap[n.shiftCharacters[3]]),e.push(n.characterMap[n.specialAsciiCodes[t][r]])}else i=6*Math.floor(t/32)+(t-27)%32+64,e=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(i)]];return e}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]},Rk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),As(this,Pk,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})},e}(Dk),Ik=Object.assign,zk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Ik(this,{name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}})},e.prototype.initValue=function(t,e,i){this.value=t,this.width=e,this.height=i,this.pattern=[],this.values=[],this.dataLength=t.length},e.prototype.prepareValues=function(){var t=Math.ceil(Math.max(.15*this.width,24));if(this.height<t)throw new Error("Insufficient height for Code93 encoding: the current height is "+this.height+"px, the minimum required height is "+t+"px.");if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength){var e=Math.ceil(this.minBaseUnitLength*(this.width/this.baseUnit));throw new Error("Insufficient width for Code93 encoding: the current width is "+this.width+'px and the minimum required width for value "'+this.value+'" is '+e+"px.")}},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)},e.prototype.addStart=function(){var t=this.characterMap.START.pattern;this.addPattern(t)},e.prototype.addStop=function(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)},e.prototype.addBase=function(t){this.addPattern(t.pattern),this.values.push(t.value)},e.prototype.pushCheckSum=function(){var t,e=this,i=this._getCheckValues();this.checksum=i.join("");for(var n=0;n<i.length;n++)t=e.characterMap[e._findCharacterByValue(i[n])],e.addPattern(t.pattern)},e.prototype._getCheckValues=function(){var t,e,i=this,n=this.values,r=n.length,o=0;for(e=r-1;e>=0;e--)o+=i.weightedValue(n[e],r-e,i.cCheckSumTotal);for(t=o%this.checkSumMod,o=this.weightedValue(t,1,this.kCheckSumTotal),e=r-1;e>=0;e--)o+=i.weightedValue(n[e],r-e+1,i.kCheckSumTotal);return[t,o%this.checkSumMod]},e.prototype._findCharacterByValue=function(t){for(var e in this.characterMap)if(this.characterMap[e].value===t)return e},e.prototype.weightedValue=function(t,e,i){return(e%i||i)*t},e.prototype.addPattern=function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e)},e}(Ok),Lk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),As(this,Pk,{name:"Code 93 extended",pushCheckSum:function(){var t,e=this,i=this._getCheckValues();this.checksum=i.join("");for(var n=0;n<i.length;n++)if(t=i[n],e.shiftValuesAsciiCodes[t])e.addExtended(e.shiftValuesAsciiCodes[t]);else{var r=e._findCharacterByValue(t);e.addPattern(e.characterMap[r].pattern)}}})},e}(zk),Bk=/^\d+$/,Nk=Object.assign,jk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Nk(this,{name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]})},e.prototype.initValue=function(t,e,i){this.height=i,this.width=e,this.baseHeight=i/2,this.value=t.replace(new RegExp(this.DIGIT_SEPARATOR,"g"),""),this.pattern=[],this.validate(this.value),this.checkSum=0,this.setBaseUnit()},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];this.checkSum+=parseInt(t,10),this.addPattern(e)},e.prototype.addCheckSum=function(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(10*(this.value.length+1)+3+this.quietZoneLength)},e.prototype.validate=function(t){if(Bk.test(t)||this.invalidCharacterError(t.match(/[^0-9]/)[0]),!$s(t.length,this.VALID_CODE_LENGTHS))throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(",")+".")},e.prototype.addPattern=function(t){for(var e,i=this,n=0;n<t.length;n++)e=i.height-i.baseHeight*t.charAt(n),i.pattern.push({width:1,y1:e,y2:i.height}),i.pattern.push(1)},e}(Ek),Fk=/^\d+$/,Vk=/^[a-z0-9]+$/i,Hk=Object.assign,Wk=function(t){function e(e){t.call(this),this.encoding=e,this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){},e.prototype.addStart=function(){},e.prototype.is=function(){},e.prototype.isCode=function(){return!1},e.prototype.move=function(){},e.prototype.pushState=function(){},e}(na),Uk=function(t){function e(e,i){t.call(this,e),this.states=i,this._initMoves(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),As(this,{FNC4:"FNC4",SHIFT:98})},e.prototype.addStart=function(){this.encoding.addPattern(this.START)},e.prototype.is=function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},e.prototype.move=function(t){for(var e=0;!this._moves[e].call(this,t)&&e<this._moves.length;)e++},e.prototype.pushState=function(t){var e,i=this.states,n=t.value,r=n.length;if($s("C",i)){var o=n.substr(t.index).match(/\d{4,}/g);o&&(r=n.indexOf(o[0],t.index))}for(;(e=t.value.charCodeAt(t.index))>=0&&this.isCode(e)&&t.index<r;)this.encoding.addPattern(this.getValue(e)),t.index++},e.prototype._initMoves=function(t){this._moves=[],$s(this.FNC4,t)&&this._moves.push(this._moveFNC),$s(this.shiftKey,t)&&this._moves.push(this._shiftState),this._moves.push(this._moveState)},e.prototype._moveFNC=function(t){if(t.fnc)return t.fnc=!1,t.previousState===this.key},e.prototype._shiftState=function(t){if(t.previousState===this.shiftKey&&(t.index+1>=t.value.length||this.encoding[this.shiftKey].is(t.value,t.index+1)))return this.encoding.addPattern(this.SHIFT),t.shifted=!0,!0},e.prototype._moveState=function(){return this.encoding.addPattern(this.MOVE),!0},e}(Wk),qk={};qk.A=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Hk(this,{key:"A",shiftKey:"B",MOVE:101,START:103})},e.prototype.isCode=function(t){return 0<=t&&t<96},e.prototype.getValue=function(t){return t<32?t+64:t-32},e}(Uk),qk.B=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Hk(this,{key:"B",shiftKey:"A",MOVE:100,START:104})},e.prototype.isCode=function(t){return 32<=t&&t<128},e.prototype.getValue=function(t){return t-32},e}(Uk),qk.C=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Hk(this,{key:"C",MOVE:99,START:105})},e.prototype.addStart=function(){this.encoding.addPattern(this.START)},e.prototype.is=function(t,e){var i=Jk(t,e,4);return(e+4<=t.length||2===t.length)&&Fk.test(i)},e.prototype.move=function(){this.encoding.addPattern(this.MOVE)},e.prototype.pushState=function(t){for(var e;(e=Jk(t.value,t.index,2))&&Fk.test(e)&&2===e.length;)this.encoding.addPattern(parseInt(e,10)),t.index+=2},e.prototype.getValue=function(t){return t},e}(Wk),qk.FNC4=function(t){function e(e,i){t.call(this,e),this._initSubStates(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Hk(this,{key:"FNC4",dependentStates:["A","B"]})},e.prototype.addStart=function(t){var e=t.value.charCodeAt(0)-128,i=this._getSubState(e);this.encoding[i].addStart()},e.prototype.is=function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},e.prototype.isCode=function(t){return 128<=t&&t<256},e.prototype.pushState=function(t){var e,i=this._initSubState(t),n=this.encoding,r=i.value.length;if(t.index+=r,r<3)for(;i.index<r;i.index++)e=i.value.charCodeAt(i.index),i.state=this._getSubState(e),i.previousState!==i.state&&(i.previousState=i.state,n[i.state].move(i)),n.addPattern(n[i.state].MOVE),n.addPattern(n[i.state].getValue(e));else i.state!==i.previousState&&n[i.state].move(i),this._pushStart(i),n.pushData(i,this.subStates),t.index<t.value.length&&this._pushStart(i);t.fnc=!0,t.state=i.state},e.prototype._pushStart=function(t){this.encoding.addPattern(this.encoding[t.state].MOVE),this.encoding.addPattern(this.encoding[t.state].MOVE)},e.prototype._initSubState=function(t){var e={value:this._getAll(t.value,t.index),index:0};return e.state=this._getSubState(e.value.charCodeAt(0)),e.previousState=t.previousState===this.key?e.state:t.previousState,e},e.prototype._initSubStates=function(t){this.subStates=[];for(var e=0;e<t.length;e++)$s(t[e],this.dependentStates)&&this.subStates.push(t[e])},e.prototype._getSubState=function(t){for(var e=this,i=0;i<this.subStates.length;i++)if(e.encoding[e.subStates[i]].isCode(t))return e.subStates[i]},e.prototype._getAll=function(t,e){for(var i,n="",r=e;(i=t.charCodeAt(r++))&&this.isCode(i);)n+=String.fromCharCode(i-128);return n},e}(Wk),qk.FNC1=function(t){function e(e,i){t.call(this,e),this.states=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Hk(this,{key:"FNC1",startState:"C",startAI:"(",endAI:")",dependentStates:["C","B"],applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102})},e.prototype.addStart=function(){this.encoding[this.startState].addStart()},e.prototype.is=function(){return $s(this.key,this.states)},e.prototype.pushState=function(t){var e,i,n,r=this,o=this.encoding,s=t.value.replace(/\s/g,""),a=new RegExp("["+this.startAI+this.endAI+"]","g"),l=t.index,h={state:this.startState};o.addPattern(this.START);for(;;){if(h.index=0,(e=(n=s.charAt(l)===r.startAI?2:0)>0?r.getBySeparator(s,l):r.getByLength(s,l)).ai.length)i=l+n+e.id.length+e.ai.length;else if((i=s.indexOf(r.startAI,l+1))<0){if(l+e.ai.max+e.id.length+n<s.length)throw new Error("Separators are required after variable length identifiers");i=s.length}if(h.value=s.substring(l,i).replace(a,""),r.validate(e,h.value),o.pushData(h,r.dependentStates),i>=s.length)break;l=i,h.state!==r.startState&&(o[r.startState].move(h),h.state=r.startState),e.ai.length||o.addPattern(r.START)}t.index=t.value.length},e.prototype.validate=function(t,e){var i=e.substr(t.id.length),n=t.ai;if(!n.type&&!Fk.test(i))throw new Error("Application identifier "+t.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"===n.type&&!Vk.test(i))throw new Error("Application identifier "+t.id+" is alphanumeric only but contains non alphanumeric character(s).");if(n.length&&n.length!==i.length)throw new Error("Application identifier "+t.id+" must be "+n.length+" characters long.");if(n.min&&n.min>i.length)throw new Error("Application identifier "+t.id+" must be at least "+n.min+" characters long.");if(n.max&&n.max<i.length)throw new Error("Application identifier "+t.id+" must be at most "+n.max+" characters long.")},e.prototype.getByLength=function(t,e){for(var i,n,r=2;r<=4;r++)if(i=Jk(t,e,r),n=this.getApplicationIdentifier(i)||this.getApplicationIdentifier(i.substring(0,i.length-1)))return{id:i,ai:n};this.unsupportedAIError(i)},e.prototype.unsupportedAIError=function(t){throw new Error("'"+t+"' is not a supported Application Identifier")},e.prototype.getBySeparator=function(t,e){var i=t.indexOf(this.startAI,e),n=t.indexOf(this.endAI,i),r=t.substring(i+1,n),o=this.getApplicationIdentifier(r)||this.getApplicationIdentifier(r.substr(r.length-1));return o||this.unsupportedAIError(r),{ai:o,id:r}},e.prototype.getApplicationIdentifier=function(t){var e=this.applicationIdentifiers,i=e.multiKey;if(e[t])return e[t];for(var n=0;n<i.length;n++){if(i[n].ids&&$s(t,i[n].ids))return i[n].type;if(i[n].ranges)for(var r=i[n].ranges,o=0;o<r.length;o++)if(r[o][0]<=t&&t<=r[o][1])return i[n].type}},e}(Wk);var $k=function(t){function e(e){t.call(this,e),this._initStates()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Hk(this,{characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106})},e.prototype._initStates=function(){for(var t=this,e=0;e<this.states.length;e++)t[t.states[e]]=new qk[t.states[e]](t,t.states)},e.prototype.initValue=function(t,e,i){this.pattern=[],this.value=t,this.width=e,this.height=i,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1},e.prototype.addData=function(){var t={value:this.value,index:0,state:""};0!==this.value.length&&(t.state=t.previousState=this.getNextState(t,this.states),this.addStart(t),this.pushData(t,this.states),this.addCheckSum(),this.addStop(),this.setBaseUnit())},e.prototype.pushData=function(t,e){for(var i=this;i[t.state].pushState(t),!(t.index>=t.value.length);)if(t.shifted){var n=t.state;t.state=t.previousState,t.previousState=n,t.shifted=!1}else t.previousState=t.state,t.state=i.getNextState(t,e),i[t.state].move(t)},e.prototype.addStart=function(t){this[t.state].addStart(t),this.position=1},e.prototype.addCheckSum=function(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)},e.prototype.addStop=function(){this.addPattern(this.STOP)},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},e.prototype.addPattern=function(t){for(var e,i=this.characterMap[t].toString(),n=0;n<i.length;n++)e=parseInt(i.charAt(n),10),this.pattern.push(e),this.totalUnits+=e;this.checkSum+=t*this.position++},e.prototype.getNextState=function(t,e){for(var i=0;i<e.length;i++)if(this[e[i]].is(t.value,t.index))return e[i];this.invalidCharacterError(t.value.charAt(t.index))},e}(Ek),Gk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Hk(this,{name:"Code 128 A",states:["A"]})},e}($k),Kk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Hk(this,{name:"Code 128 B",states:["B"]})},e}($k),Xk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Hk(this,{name:"Code 128 C",states:["C"]})},e}($k),Yk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Hk(this,{name:"Code 128",states:["C","B","A","FNC4"]})},e}($k),Zk=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Hk(this,{name:"Code GS1-128",states:["FNC1","C","B"]})},e}($k);function Jk(t,e,i){return t.substring(e,e+i)}var Qk=Object.assign,tS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Qk(this,{characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:"",checkSums:oS})},e.prototype.initValue=function(t,e){this.pattern=[],this.value=t,this.checkSumLength=0,this.width=e},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addPattern(e)},e.prototype.addPattern=function(t){for(var e=0;e<t.length;e++)this.pattern.push(parseInt(t.charAt(e),10))},e.prototype.addCheckSum=function(){var t=this,e=this.checkSums[this.checkSumType].call(this.checkSums,this.value);this.checksum=e.join("");for(var i=0;i<e.length;i++)t.checkSumLength++,t.addPattern(t.characterMap[e[i]])},e}(Ek),eS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Qk(this,{name:"MSI Modulo10",checkSumType:"Modulo10"})},e}(tS),iS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Qk(this,{name:"MSI Modulo11",checkSumType:"Modulo11"})},e}(tS),nS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Qk(this,{name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"})},e}(tS),rS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Qk(this,{name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"})},e}(tS),oS={Modulo10:function(t){var e,i,n,r=[0,""],o=t.length%2;for(e=0;e<t.length;e++)r[(e+o)%2]+=parseInt(t.charAt(e),10);for(n=r[0],i=(2*r[1]).toString(),e=0;e<i.length;e++)n+=parseInt(i.charAt(e),10);return[(10-n%10)%10]},Modulo11:function(t){for(var e,i=0,n=t.length,r=0;r<n;r++)i+=(((n-r)%6||6)+1)*t.charAt(r);return 10!==(e=(11-i%11)%11)?[e]:[1,0]},Modulo11Modulo10:function(t){var e,i=this.Modulo11(t);return e=t+i[0],i.concat(this.Modulo10(e))},Modulo10Modulo10:function(t){var e,i=this.Modulo10(t);return e=t+i[0],i.concat(this.Modulo10(e))}},sS=Object.assign,aS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),sS(this,{name:"EAN 13",keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}})},e.prototype.initValue=function(t,e,i){var n=String(t);if(12!==n.length||/\D/.test(n))throw new Error('The value of the "EAN13" encoding should be 12 symbols');this.pattern=[],this.options.height=i,this.baseUnit=e/(95+this.quietZoneLength),this.value=n,this.checksum=this.calculateChecksum(),this.leftKey=n[0],this.leftPart=n.substr(1,6),this.rightPart=n.substr(7)+this.checksum},e.prototype.addData=function(){this.addPieces(this.characterMap.start),this.addSide(this.leftPart,this.leftKey),this.addPieces(this.characterMap.middle),this.addSide(this.rightPart),this.addPieces(this.characterMap.start)},e.prototype.addSide=function(t,e){for(var i=this,n=0;n<t.length;n++)e&&parseInt(i.keyTable[e].charAt(n),10)?i.addPieces(Array.prototype.slice.call(i.characterMap.digits[t.charAt(n)]).reverse(),!0):i.addPieces(i.characterMap.digits[t.charAt(n)],!0)},e.prototype.addPieces=function(t,e){for(var i=this,n=0;n<t.length;n++)e?i.pattern.push({y1:0,y2:.95*i.options.height,width:t[n]}):i.pattern.push(t[n])},e.prototype.calculateChecksum=function(){for(var t=0,e=0,i=this.value.split("").reverse().join(""),n=0;n<i.length;n++)n%2?e+=parseInt(i.charAt(n),10):t+=parseInt(i.charAt(n),10);return(10-(3*t+e)%10)%10},e}(Ek),lS=Object.assign,hS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),lS(this,{name:"EAN 8"})},e.prototype.initValue=function(t,e,i){if(7!==t.length||/\D/.test(t))throw new Error("Invalid value provided");this.value=t,this.options.height=i,this.checksum=this.calculateChecksum(this.value),this.leftPart=this.value.substr(0,4),this.rightPart=this.value.substr(4)+this.checksum,this.pattern=[],this.baseUnit=e/(67+this.quietZoneLength)},e}(aS),cS={code11:Ak,code39:Dk,code39extended:Rk,code93:zk,code93extended:Lk,code128:Yk,code128a:Gk,code128b:Kk,code128c:Xk};function pS(t,e){var i=t.style.display;"canvas"===e&&(t.style.display="block");var n={width:t.clientWidth,height:t.clientHeight};return t.style.display=i,n}cS["gs1-128"]=Zk,cS.msimod10=eS,cS.msimod11=iS,cS.msimod1010=nS,cS.msimod1110=rS,cS.postnet=jk,cS.ean8=hS,cS.ean13=aS;var uS=function(t){function e(e,i,n){void 0===n&&(n=Hl),t.call(this),this.options=As({},this.options,i),this.element=e,this.onError=n,this._initElement(),this._initSurface(),this._setOptions(i),i&&Qa(i.value)&&this.redraw()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._destroySurface()},e.prototype._initElement=function(){gs(this.element,"k-barcode")},e.prototype._initSurface=function(){var t=this.options,e=this.surface;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},e.prototype._createSurface=function(){return _b.create(this.surfaceElement,{type:this.options.renderAs})},e.prototype._destroySurface=function(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},e.prototype._initSurfaceElement=function(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},e.prototype._destroySurfaceElement=function(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},e.prototype.setOptions=function(t){this._setOptions(t),this._initSurface(),this.redraw()},e.prototype.redraw=function(){var t=this._getSize();this.surface.clear(),this.surface.setSize({width:t.width,height:t.height}),this.createVisual(),this.surface.draw(this.visual)},e.prototype.getSize=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},e.prototype._resize=function(){this.redraw()},e.prototype.createVisual=function(){this.visual=this._render()},e.prototype._render=function(){var t,e,i=this.options,n=i.value,r=i.text,o=Is(r.margin),s=this._getSize(),a=i.border||{},l=this.encoding,h=new ah(0,0,s.width,s.height).unpad(a.width).unpad(i.padding),c=h.height(),p=new Cc;this.contentBox=h,p.append(this._getBackground(s)),r.visible&&(c-=Ya(n,{font:r.font}).height+o.top+o.bottom);try{t=l.encode(n,h.width(),c)}catch(t){return this.onError(t),p}return r.visible&&(e=n,i.checksum&&Qa(l.checksum)&&(e+=" "+l.checksum),p.append(this._getText(e))),this.barHeight=c,this._bandsGroup=this._getBands(t.pattern,t.baseUnit),p.append(this._bandsGroup),p},e.prototype.exportVisual=function(){return this._render()},e.prototype._getSize=function(){var t=pS(this.element,this.options.renderAs),e=new ih(300,100);return t.width>0&&(e.width=t.width),t.height>0&&(e.height=t.height),this.options.width&&(e.width=this.options.width),this.options.height&&(e.height=this.options.height),e},e.prototype.value=function(t){if(!Qa(t))return this.options.value;this.options.value=String(t),this.redraw()},e.prototype._getBands=function(t,e){for(var i,n,r=this.contentBox,o=r.x1,s=new Cc,a=0;a<t.length;a++){if(i=(n=Ms(t[a])?t[a]:{width:t[a],y1:0,y2:this.barHeight}).width*e,a%2){var l=rh.fromPoints(new th(o,n.y1+r.y1),new th(o+i,n.y2+r.y1)),h=uc.fromRect(l,{fill:{color:this.options.color},stroke:null});s.append(h)}o+=i}return s},e.prototype._getBackground=function(t){var e=this.options,i=e.border||{},n=new ah(0,0,t.width,t.height).unpad(i.width/2);return uc.fromRect(n.toRect(),{fill:{color:e.background},stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType}})},e.prototype._getText=function(t){var e=this.options.text,i=this._textbox=new vp(t,{font:e.font,color:e.color,align:"center",vAlign:"bottom",margin:e.margin});return i.reflow(this.contentBox),i.renderVisual(),i.visual},e.prototype._setOptions=function(t){if(this.type=(t.type||this.options.type).toLowerCase(),"upca"===this.type&&(this.type="ean13",t.value="0"+t.value),"upce"===this.type&&(this.type="ean8",t.value="0"+t.value),!cS[this.type])throw new Error("Encoding '"+this.type+"' is not supported.");this.encoding=new cS[this.type],this.options=As({},this.options,t)},e}(na);vl(uS,{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}});const dS=uS;var fS=function(t){function e(e,i,n){void 0===i&&(i=new rh),void 0===n&&(n={}),t.call(this,n),this.src(e),this.rect(i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={nodeType:{configurable:!0}};return i.nodeType.get=function(){return"Image"},e.prototype.src=function(t){return bs(t)?(this.options.set("src",t),this):this.options.get("src")},e.prototype.bbox=function(t){var e=Jl(this.currentTransform(t));return this._rect.bbox(e)},e.prototype.rawBBox=function(){return this._rect.bbox()},e.prototype._containsPoint=function(t){return this._rect.containsPoint(t)},e.prototype._hasFill=function(){return this.src()},Object.defineProperties(e.prototype,i),e}(wc(Ah,["rect"]));const vS=fS;var mS=Object.assign;function gS(t,e){for(var i=[],n=0;n<t.length;)i.push(t.substring(n,n+e)),n+=e;return i}function yS(t,e){var i=Number(t).toString(2);return i.length<e&&(i=new Array(e-i.length+1).join(0)+i),i}function bS(t){return parseInt(t,2)}var wS=function(t){function e(e){t.call(this),this.matrix=e,this.row=e.length-1,this.column=e.length-1,this.startColumn=this.column,this.dir=-1,this.c=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.move=function(){this.row+=this.dir*this.c,this.c^=1,this.column=this.startColumn-this.c},e.prototype.getNextCell=function(){for(var t=this;void 0!==this.matrix[this.row][this.column];)t.move(),(t.row<0||t.row>=t.matrix.length)&&(t.dir=-t.dir,t.startColumn-=8!==t.startColumn?2:3,t.column=t.startColumn,t.row=t.dir<0?t.matrix.length-1:0);return{row:this.row,column:this.column}},e.prototype.getNextRemainderCell=function(){if(this.move(),void 0===this.matrix[this.row][this.column])return{row:this.row,column:this.column}},e}(na),xS=function(t){function e(e,i){t.call(this),this.dataString=e,this.version=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(na),_S=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getEncodingResult=function(t,e){var i=function(t){var e,i=[],n=0,r=t;i.push(ZS(r,8,5,8,e)),e=i[0].mode,r=r.substr(i[0].modeString.length);for(;r.length>0;){var o=ZS(r,17,9,16,e);o.mode!==e?(e=o.mode,i.push(o),n++):i[n].modeString+=o.modeString,r=r.substr(o.modeString.length)}return i}(t),n=function(t){for(var e=0,i=0;i<t.length;i++)e+=TS[t[i].mode].getStringBitsLength(t[i].modeString.length);return Math.ceil(e/8)}(i),r=JS(n,e),o=function(t,e){for(var i="",n=0;n<t.length;n++)i+=TS[t[n].mode].encode(t[n].modeString,e);return i}(i,r);return new xS(o,r)},e}(na),kS=function(t){function e(){t.call(this),this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){mS(this,{modeIndicator:"",bitsInCharacterCount:[]})},e.prototype.getVersionIndex=function(t){return t<10?0:t>26?2:1},e.prototype.getBitsCharacterCount=function(t){return this.bitsInCharacterCount[this.getVersionIndex(t||40)]},e.prototype.getModeCountString=function(t,e){return this.modeIndicator+yS(t,this.getBitsCharacterCount(e))},e.prototype.encode=function(){},e.prototype.getStringBitsLength=function(){},e.prototype.getValue=function(){},e}(na),SS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),mS(this,{bitsInCharacterCount:[10,12,14],modeIndicator:"0001"})},e.prototype.getValue=function(t){return parseInt(t,10)},e.prototype.encode=function(t,e){var i,n=gS(t,3),r=this.getModeCountString(t.length,e);for(i=0;i<n.length-1;i++)r+=yS(n[i],10);return r+yS(n[i],1+3*n[i].length)},e.prototype.getStringBitsLength=function(t,e){var i=t%3;return 4+this.getBitsCharacterCount(e)+10*Math.floor(t/3)+3*i+(0===i?0:1)},e}(kS),CS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),mS(this,{characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010"})},e.prototype.getValue=function(t){return this.characters[t]},e.prototype.encode=function(t,e){var i,n=gS(t,2),r=this.getModeCountString(t.length,e);for(i=0;i<n.length-1;i++)r+=yS(45*this.getValue(n[i].charAt(0))+this.getValue(n[i].charAt(1)),11);return r+yS(2===n[i].length?45*this.getValue(n[i].charAt(0))+this.getValue(n[i].charAt(1)):this.getValue(n[i].charAt(0)),1+5*n[i].length)},e.prototype.getStringBitsLength=function(t,e){return 4+this.getBitsCharacterCount(e)+11*Math.floor(t/2)+t%2*6},e}(kS),ES=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),mS(this,{bitsInCharacterCount:[8,16,16],modeIndicator:"0100"})},e.prototype.getValue=function(t){var e=t.charCodeAt(0);if(e<=127||160<=e&&e<=255)return e;throw new Error('Unsupported character in QR Code: "'+t+'".')},e.prototype.encode=function(t,e){for(var i=this.getModeCountString(t.length,e),n=0;n<t.length;n++)i+=yS(this.getValue(t.charAt(n)),8);return i},e.prototype.getStringBitsLength=function(t,e){return 4+this.getBitsCharacterCount(e)+8*t},e}(kS),TS={};TS.numeric=new SS,TS.alphanumeric=new CS,TS.byte=new ES;var AS=function(t){function e(){t.call(this),this.initProperties(),this.mode=TS[this.encodingMode]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){mS(this,{encodingMode:"byte",utfBOM:"111011111011101110111111",initialModeCountStringLength:20,ranges:[128,2048,65536,2097152,67108864]})},e.prototype.getEncodingResult=function(t,e){var i=this.encode(t),n=JS(this.getDataCodewordsCount(i),e),r=this.mode.getModeCountString(i.length/8,n)+i;return new xS(r,n)},e.prototype.getDataCodewordsCount=function(t){var e=t.length;return Math.ceil((this.initialModeCountStringLength+e)/8)},e.prototype.encode=function(t){for(var e=this.utfBOM,i=0;i<t.length;i++)e+=this.encodeCharacter(t.charCodeAt(i));return e},e.prototype.encodeCharacter=function(t){var e=this.getBytesCount(t),i=e-1,n="";if(1===e)n=yS(t,8);else{for(var r=8-e,o=0;o<i;o++)n=yS(t>>6*o&63|128,8)+n;n=(t>>6*i|255>>r<<r).toString(2)+n}return n},e.prototype.getBytesCount=function(t){for(var e=this.ranges,i=0;i<e.length;i++)if(t<e[i])return i+1},e}(na),MS=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],OS="0000",DS="alphanumeric",PS={1:0},RS={0:1},IS={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},zS=[1,0,1,1,1],LS=[1,0,1],BS={L:"01",M:"00",Q:"11",H:"10"},NS=["11101100","00010001"],jS=[function(t,e){return(t+e)%2==0},function(t,e){return t%2==0},function(t,e){return e%3==0},function(t,e){return(t+e)%3==0},function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0},function(t,e){return t*e%2+t*e%3==0},function(t,e){return(t*e%2+t*e%3)%2==0},function(t,e){return((t+e)%2+t*e%3)%2==0}],FS=/^\d+/,VS=new RegExp("^[A-Z $%*+./:-]+"),HS=new RegExp("^[A-Z0-9 $%*+./:-]+"),WS=new RegExp("^[^A-Z0-9 $%*+./:-]+"),US=[[1,0],[1,25,0]];function qS(t,e,i,n){for(var r=0;r<t.length;r++)t[r][i][n]=e}function $S(t,e,i,n){for(var r=0;r<jS.length;r++)t[r][i][n]=jS[r](i,n)?1^e:parseInt(e,10)}function GS(t,e){for(var i=[],n=t.length-2;n>=0;n--)i[n]=t[n]^e[n];return i}function KS(t,e){for(var i=[],n=0;n<t.length;n++)for(var r=0;r<e.length;r++)void 0===i[n+r]?i[n+r]=(t[n]+(e[r]>=0?e[r]:0))%255:i[n+r]=PS[RS[i[n+r]]^RS[(t[n]+e[r])%255]];return i}function XS(t,e){var i=[],n=t.length-1;do{i[n]=RS[(t[n]+e)%255],n--}while(void 0!==t[n]);return i}function YS(t,e){var i,n,r=US[e-1],o=new Array(e).concat(t),s=new Array(o.length-r.length).concat(r),a=t.length,l=[];for(n=0;n<a;n++)i=XS(s,PS[o[o.length-1]]),s.splice(0,1),o=GS(i,o);for(n=o.length-1;n>=0;n--)l[e-1-n]=yS(o[n],8);return l}function ZS(t,e,i,n,r){var o,s,a=FS.exec(t),l=a?a[0]:"",h=VS.exec(t),c=h?h[0]:"",p=HS.exec(t),u=p?p[0]:"";return l&&(l.length>=e||t.length===l.length||l.length>=i&&!HS.test(t.charAt(l.length)))?(o="numeric",s=l):u&&(t.length===u.length||u.length>=n||r===DS)?(o=DS,s=l||c):(o="byte",s=u?u+WS.exec(t.substring(u.length))[0]:WS.exec(t)[0]),{mode:o,modeString:s}}function JS(t,e){var i=0,n=MS.length-1,r=Math.floor(MS.length/2);do{t<MS[r][e].totalDataCodewords?n=r:i=r,r=i+Math.floor((n-i)/2)}while(n-i>1);return t<=MS[i][e].totalDataCodewords?r+1:n+1}function QS(t,e,i){var n=bS(e),r=e.length-1,o=t<<r,s=yS(t,i-r),a=function(t,e){var i=e.toString(2).length,n=t.toString(2).length,r=t;do{n=(r^=e<<n-i).toString(2).length}while(n>=i);return r}(o,n);return a=s+yS(a,r)}function tC(t,e){return parseInt(t.charAt(e),10)}function eC(t,e){var i,n,r=t[0],o=0,s=e.length;for(i=0,n=8;i<=8;i++)6!==i&&qS(t,tC(e,s-1-o++),i,n);for(i=8,n=7;n>=0;n--)6!==n&&qS(t,tC(e,s-1-o++),i,n);for(o=0,n=r.length-1,i=8;n>=r.length-8;n--)qS(t,tC(e,s-1-o++),i,n);for(qS(t,1,r.length-8,8),i=r.length-7,n=8;i<r.length;i++)qS(t,tC(e,s-1-o++),i,n)}function iC(t,e){for(var i,n,r,o=t[0].length,s=o-11,a=o-11,l=0;l<e.length;l++)i=Math.floor(l/3),n=l%3,qS(t,r=tC(e,e.length-l-1),0+i,s+n),qS(t,r,a+n,0+i)}function nC(t,e,i,n){for(var r,o=e.length+2,s=e.length+1,a=0;a<e.length;a++)for(var l=a;l<o-a;l++)qS(t,r=e[a],i+l,n+a),qS(t,r,i+a,n+l),qS(t,r,i+s-l,n+s-a),qS(t,r,i+s-a,n+s-l)}function rC(t,e,i,n){var r=i,o=n,s=t[0];do{qS(t,0,r,n),qS(t,0,i,o),r+=e[0],o+=e[1]}while(r>=0&&r<s.length)}function oC(t,e,i,n,r){e[t][n]=(e[t][n]<<1^r)%128,93===e[t][n]&&(i[t]+=40)}function sC(t,e,i,n,r,o){i[t][o]===n?r[t][o]++:(i[t][o]=n,r[t][o]>=5&&(e[t]+=3+r[t][o]-5),r[t][o]=1)}function aC(t,e){var i=Math.floor(t/e*100),n=i%5,r=Math.abs(i-n-50),o=Math.abs(i+5-n-50);return 10*Math.min(r/5,o/5)}function lC(t,e,i){var n=function(t){return t&&t.toLowerCase().indexOf("utf_8")>=0?new AS:new _S}(i),r=n.getEncodingResult(t,e),o=r.version,s=MS[o-1][e],a=function(t,e){for(var i,n,r,o,s,a=0,l=[],h=[],c=e.groups,p=0;p<c.length;p++){r=c[p][0];for(var u=0;u<r;u++){n=c[p][1],i=[],o=[];for(var d=1;d<=n;d++)s=t.substring(a,a+8),i.push(s),o[n-d]=bS(s),a+=8;l.push(i),h.push(YS(o,e.errorCodewordsPerBlock))}}return[l,h]}(function(t,e){for(var i=8*e,n=0,r=0,o=t;o.length<i&&n<OS.length;)o+=OS.charAt(n++);for(o.length%8!=0&&(o+=new Array(9-o.length%8).join("0"));o.length<i;)o+=NS[r],r^=1;return o}(r.dataString,s.totalDataCodewords),s),l=function(t){for(var e=[],i=17+4*t,n=0;n<jS.length;n++){e[n]=new Array(i);for(var r=0;r<i;r++)e[n][r]=new Array(i)}return e}(o);!function(t){var e=t[0].length;nC(t,zS,0,0),rC(t,[-1,-1],7,7),nC(t,zS,e-7,0),rC(t,[1,-1],e-8,7),nC(t,zS,0,e-7),rC(t,[-1,1],7,e-8)}(l),function(t,e){if(!(e<2)){var i,n,r=t[0],o=r.length,s=Math.floor(e/7),a=[6],l=0;for((i=IS[e])?n=(o-13-i)/s:i=n=(o-13)/(s+1),a.push(a[l++]+i);a[l]+n<o;)a.push(a[l++]+n);for(var h=0;h<a.length;h++)for(var c=0;c<a.length;c++)void 0===r[a[h]][a[c]]&&nC(t,LS,a[h]-2,a[c]-2)}}(l,o),function(t){for(var e=1,i=t[0].length,n=8;n<i-8;n++)qS(t,e,6,n),qS(t,e,n,6),e^=1}(l),o>=7&&iC(l,yS(0,18)),eC(l,yS(0,15)),function(t,e){for(var i,n,r,o=new wS(t[0]),s=0;s<e.length;s++)for(i=e[s],n=0;i.length>0;){for(var a=0;a<i.length;a++)for(var l=0;l<8;l++)r=o.getNextCell(),$S(t,i[a][n].charAt(l),r.row,r.column);for(n++;i[0]&&n===i[0].length;)i.splice(0,1)}for(;r=o.getNextRemainderCell();)$S(t,0,r.row,r.column)}(l,a);var h=function(t){var e,i,n=[],r=[],o=[],s=[],a=[],l=t[0].length;for(i=0;i<t.length;i++)n[i]=0,o[i]=0,a[i]=[0,0],s[i]=[0,0],r[i]=[];for(var h=0;h<l;h++)for(var c=0;c<l;c++)for(var p=0;p<t.length;p++)e=t[p],o[p]+=parseInt(e[h][c],10),r[p][0]===e[h][c]&&h+1<l&&c-1>=0&&e[h+1][c]===r[p][0]&&e[h+1][c-1]===r[p][0]&&(n[p]+=3),oC(p,s,n,0,e[h][c]),oC(p,s,n,1,e[c][h]),sC(p,n,r,e[h][c],a,0),sC(p,n,r,e[c][h],a,1);var u,d=l*l,f=Number.MAX_VALUE;for(i=0;i<n.length;i++)n[i]+=aC(o[i],d),n[i]<f&&(f=n[i],u=i);return u}(l),c=l[h];return o>=7&&iC([c],function(t){return QS(t,"1111100100101",18)}(o)),eC([c],function(t){var e,i="";if(0===bS(t))return"101010000010010";e=QS(bS(t),"10100110111",15);for(var n=0;n<e.length;n++)i+=e.charAt(n)^"101010000010010".charAt(n);return i}(BS[e]+yS(h,3))),c}!function(){var t,e;for(e=1;e<255;e++)(t=2*RS[e-1])>255&&(t^=285),RS[e]=t,PS[t]=e;t=2*RS[e-1]^285,RS[e]=t,RS[-1]=0}(),function(){for(var t=2;t<=68;t++){var e=US[t-1],i=[t,0];US[t]=KS(e,i)}}();var hC=Math.round,cC=[[0,1],[1,1],[1,2],[2,2],[2,1],[3,1],[3,0],[2,0],[2,-1],[1,-1],[1,0]],pC=[[0,1],[1,1],[1,0]],uC=200,dC="L",fC="#fff",vC="#000",mC=1,gC=7,yC=function(t){function e(e,i,n){void 0===n&&(n=Hl),t.call(this),this.options=As({},this.options,i),this.element=e,this.wrapper=this.element,this.onError=n,this._initElement(),this._initSurface(),this.setOptions(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._destroySurface()},e.prototype._initElement=function(){gs(this.element,"k-qrcode")},e.prototype._initSurface=function(){var t=this.options,e=this.surface;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},e.prototype._createSurface=function(){return _b.create(this.surfaceElement,{type:this.options.renderAs})},e.prototype._destroySurface=function(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},e.prototype._initSurfaceElement=function(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},e.prototype._destroySurfaceElement=function(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},e.prototype.redraw=function(){var t=this._getSize();this.surface.clear(),this.surface.setSize({width:t,height:t}),this.createVisual(),this.surface.draw(this.visual)},e.prototype.getSize=function(){var t=this.element,e=t.clientWidth,i=t.clientHeight,n={width:0,height:0};return e>0&&(n.width=e),i&&(n.height=i),n},e.prototype._resize=function(){this.redraw()},e.prototype.createVisual=function(){this.visual=this._render()},e.prototype.exportVisual=function(){return this._render()},e.prototype._render=function(){var t,e,i,n,r,o=this._value,s=this.options.border||{},a=this.options.padding||0,l=s.width||0;s.width=l;var h=new Cc;try{o&&(i=lC(o,this.options.errorCorrection,this.options.encoding),r=(n=this._getSize())-2*(l+a),t=this._calculateBaseUnit(r,i.length),e=l+a+(r-i.length*t)/2,h.append(this._renderBackground(n,s)),h.append(this._renderMatrix(i,t,e)),this._hasCustomLogo()?h.append(this._renderLogo(n,t)):this._isSwiss()&&h.append(this._renderSwissCode(n,t)))}catch(t){this.onError(t)}return h},e.prototype._renderLogo=function(t,e){var i,n=hC(t/2),r=this._getLogoSize(e*gC),o=this.options.overlay.imageUrl,s={x:n-r.width/2,y:n-r.height/2};return i=new rh(new th(s.x,s.y),new ih(r.width,r.height)),new vS(o,i)},e.prototype._renderSwissCode=function(t,e){var i=this._getLogoSize(e*gC),n=(i=Math.max(i.width,i.height))/4,r=n/2,o=t/2,s={},a=new Cc;return s.x=s.y=Math.ceil(o-e-i/2),a.append(this._renderShape(s,Math.ceil(i+2*e),pC,"#fff")),s.x=s.y=o-i/2,a.append(this._renderShape(s,i,pC,this.options.color)),s.x=o+r-i/2,s.y=o+r+n-i/2,a.append(this._renderShape(s,n,cC,"#fff")),a},e.prototype._renderShape=function(t,e,i,n){var r=new dc({fill:{color:n},stroke:null});r.moveTo(t.x,t.y);for(var o=0;o<i.length;o++)r.lineTo(t.x+e*i[o][0],t.y+e*i[o][1]);return r.close(),r},e.prototype._getSize=function(){var t;if(this.options.size)t=parseInt(this.options.size,10);else{var e=pS(this.element,this.options.renderAs),i=Math.min(e.width,e.height);t=i>0?i:uC}return t},e.prototype._calculateBaseUnit=function(t,e){var i=Math.floor(t/e);if(i<mC){var n=Math.ceil(e*mC);this.onError(new Error("Insufficient size for QR Code: the current size is "+t+"px and the minimum size is "+n+"px."))}else i*e>=t&&i-1>=mC&&i--;return i},e.prototype._renderMatrix=function(t,e,i){for(var n=new dc({fill:{color:this.options.color},stroke:null}),r=0;r<t.length;r++)for(var o=i+r*e,s=0;s<t.length;){for(;0===t[r][s]&&s<t.length;)s++;if(s<t.length){for(var a=s;1===t[r][s];)s++;var l=hC(i+a*e),h=hC(o),c=hC(i+s*e),p=hC(o+e);n.moveTo(l,h).lineTo(l,p).lineTo(c,p).lineTo(c,h).close()}}return n},e.prototype._renderBackground=function(t,e){var i=new ah(0,0,t,t).unpad(e.width/2);return uc.fromRect(i.toRect(),{fill:{color:this.options.background},stroke:{color:e.color,width:e.width}})},e.prototype.setOptions=function(t){var e=t||{};this.options=mS(this.options,e),void 0!==t.value&&(this._value=String(this.options.value)),this._initSurface(),this.redraw()},e.prototype.value=function(t){if(void 0===t)return this._value;this._value=String(t),this.redraw()},e.prototype._hasCustomLogo=function(){return Boolean(this.options.overlay.imageUrl)},e.prototype._isSwiss=function(){return"swiss"===this.options.overlay.type},e.prototype._getLogoSize=function(t){var e=this.options.overlay.width,i=this.options.overlay.height;return e||i?e&&!i?i=e:!e&&i&&(e=i):e=i=t,{width:e,height:i}},e}(na);vl(yC,{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:dC,background:fC,color:vC,size:"",padding:0,border:{color:"",width:0},overlay:{type:"image",imageUrl:"",width:0,height:0}});const bC=yC;var wC={WGS84:{a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149}};function xC(t){return t*t}var _C=Math,kC=_C.abs,SC=_C.atan,CC=_C.atan2,EC=_C.cos,TC=_C.sin,AC=_C.tan,MC=function(t){function e(e,i){t.call(this),this.initProperties(),1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){As(this,{DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6}{1:N6}"})},e.prototype.toArray=function(){return[this.lat,this.lng]},e.prototype.equals=function(t){return t&&t.lat===this.lat&&t.lng===this.lng},e.prototype.clone=function(){return new e(this.lat,this.lng)},e.prototype.round=function(t){return this.lng=cl(this.lng,t),this.lat=cl(this.lat,t),this},e.prototype.wrap=function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},e.prototype.distanceTo=function(t,e){return this.greatCircleTo(t,e).distance},e.prototype.destination=function(t,i,n){var r=hl(i),o=n||wC.WGS84,s=hl(this.lat),a=hl(this.lng),l=t/o.a,h=_C.asin(TC(s)*EC(l)+EC(s)*TC(l)*EC(r)),c=a+CC(TC(r)*TC(l)*EC(s),EC(l)-TC(s)*TC(h));return new e(tl(h),tl(c))},e.prototype.greatCircleTo=function(t,i){var n=e.create(n),r=i||wC.WGS84;if(!n||this.clone().round(8).equals(n.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(var o,s,a,l,h,c,p,u,d=r.a,f=r.b,v=r.f,m=hl(n.lng-this.lng),g=SC((1-v)*AC(hl(this.lat))),y=TC(g),b=EC(g),w=SC((1-v)*AC(hl(n.lat))),x=TC(w),_=EC(w),k=m,S=this.DISTANCE_ITERATIONS,C=!1;!C&&S-- >0;){s=TC(k),a=EC(k),l=_C.sqrt(xC(_*s)+xC(b*x-y*_*a)),u=CC(l,c=y*x+b*_*a);var E=b*_*s/l;p=0,0!==(h=1-xC(E))&&(p=c-2*y*x/h),o=k;var T=v/16*h*(4+v*(4-3*h));k=m+(1-T)*v*E*(u+T*l*(p+T*c*(2*xC(p)-1))),C=kC(k-o)<=this.DISTANCE_CONVERGENCE}var A=h*(xC(d)-xC(f))/xC(f),M=1+A/16384*(4096+A*(A*(320-175*A)-768)),O=A/1024*(256+A*(A*(74-47*A)-128)),D=O*l*(p+O/4*(c*(2*xC(p)-1)-O/6*p*(4*xC(l)-3)*(4*xC(p)-3))),P=CC(_*s,b*x-y*_*a),R=CC(b*s,-y*_+b*x*a);return{distance:cl(f*M*(u-D),this.DISTANCE_PRECISION),azimuthFrom:tl(P),azimuthTo:tl(R)}},e.prototype.toString=function(){return String(this.lat)+","+String(this.lng)},e.fromLngLat=function(t){return new e(t[1],t[0])},e.fromLatLng=function(t){return new e(t[0],t[1])},e.create=function(t,i){if(Qa(t))return t instanceof e?t.clone():1===arguments.length&&2===t.length?e.fromLatLng(t):new e(t,i)},e}(na),OC=Math,DC=OC.atan,PC=OC.exp,RC=OC.pow,IC=OC.sin,zC=OC.log,LC=OC.tan,BC=th,NC=OC.PI,jC=NC/2,FC=NC/4,VC=NC/180,HC=wC.WGS84,WC=function(t){function e(e){t.call(this),this.initProperties(),this._initOptions(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=As({},this.options,t)},e.prototype.initProperties=function(){As(this,{MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12})},e.prototype.forward=function(t,e){var i=this,n=i.options,r=n.datum.a,o=n.centralMeridian,s=al(t.lat,-i.MAX_LAT,i.MAX_LAT),a=e?al(t.lng,-i.MAX_LNG,i.MAX_LNG):t.lng,l=hl(a-o)*r,h=i._projectLat(s);return new BC(l,h)},e.prototype._projectLat=function(t){var e=this.options.datum,i=e.e,n=e.a,r=hl(t),o=LC(FC+r/2),s=i*IC(r),a=RC((1-s)/(1+s),i/2);return n*zC(o*a)},e.prototype.inverse=function(t,e){var i=this,n=i.options,r=n.datum.a,o=n.centralMeridian,s=t.x/(VC*r)+o,a=al(i._inverseY(t.y),-i.MAX_LAT,i.MAX_LAT);return e&&(s=al(s,-i.MAX_LNG,i.MAX_LNG)),new MC(a,s)},e.prototype._inverseY=function(t){var e,i=this,n=i.options.datum,r=n.a,o=n.e,s=o/2,a=PC(-t/r),l=jC-2*DC(a);for(e=0;e<=i.INVERSE_ITERATIONS;e++){var h=o*IC(l),c=RC((1-h)/(1+h),s),p=jC-2*DC(a*c)-l;if(l+=p,OC.abs(p)<=i.INVERSE_CONVERGENCE)break}return tl(l)},e}(na);vl(WC,{centralMeridian:0,datum:HC});var UC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),As(this,{MAX_LAT:85.0511287798})},e.prototype._projectLat=function(t){var e=this.options.datum.a,i=hl(t),n=LC(FC+i/2);return e*zC(n)},e.prototype._inverseY=function(t){var e=this.options.datum.a,i=PC(-t/e);return tl(jC-2*DC(i))},e}(WC),qC=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.forward=function(t){return new BC(t.lng,t.lat)},e.prototype.inverse=function(t){return new MC(t.y,t.x)},e}(na),$C=function(t){function e(){t.call(this);var e=this._proj=new UC,i=this.c=2*NC*e.options.datum.a;this._tm=Eh().translate(.5,.5).scale(1/i,-1/i),this._itm=Eh().scale(i,-i).translate(-.5,-.5)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t,e,i){return this._proj.forward(t,i).transform(this._tm).scale(e||1)},e.prototype.toLocation=function(t,e,i){var n=t.clone().scale(1/(e||1)).transform(this._itm);return this._proj.inverse(n,i)},e}(na),GC=(function(t){function e(){t.call(this),this._proj=new WC}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t){return this._proj.forward(t)},e.prototype.toLocation=function(t){return this._proj.inverse(t)}}(na),function(t){function e(){t.call(this),this._proj=new qC}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t){return this._proj.forward(t)},e.prototype.toLocation=function(t){return this._proj.inverse(t)}}(na),Object.defineProperty),KC=(Object.assign,function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}),XC=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},YC=function(t,e){e.insertBefore(t,e.firstChild)},ZC=function(t){return t.replace(/([a-z][A-Z])/g,(function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()}))},JC=function(t){return t&&String(t).endsWith("px")?t:String(t)+"px"},QC=function(t){var e,i=!1,n=[],r={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},s={tablet:/playbook|ipad|fire/i},a={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var l in r)if(r.hasOwnProperty(l)&&(n=t.match(r[l]))){if("windows"===l&&"plugins"in navigator)return!1;(i={}).device=l,i.tablet=tE(l,s,!1),i.browser=tE(t,a,"default"),i.name=tE(l,o),i[i.name]=!0,i.majorVersion=n[2],i.minorVersion=(n[3]||"0").replace("_","."),e=i.minorVersion.replace(".","").substr(0,2),i.flatVersion=i.majorVersion+e+new Array(3-(e.length<3?e.length:2)).join("0");break}return i};function tE(t,e,i){for(var n in e)if(e.hasOwnProperty(n)&&e[n].test(t))return n;return void 0!==i?i:t}var eE=function(){var t={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},e=iE();return e.touch&&(e.mobileOS.ios||e.mobileOS.android)?t={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:e.pointers?t={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:e.msPointers&&(t={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),t},iE=function(){var t=QC(navigator.userAgent),e=function(t){var e=!1,i=[],n={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome|crios)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var r in n)if(n.hasOwnProperty(r)&&(i=t.match(n[r]))){(e={})[r]=!0,e[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,e.version=parseInt(document.documentMode||i[2],10);break}return e}(navigator.userAgent),i=e.chrome,n=e.crios,r=e.mozilla,o=e.safari,s={};s.mobileOS=t,s.touch="ontouchstart"in window,s.pointers=!i&&!n&&!r&&!o&&window.PointerEvent,s.msPointers=!i&&window.MSPointerEvent,s.mouseAndTouchPresent=s.touch&&!(s.mobileOS.ios||s.mobileOS.android),s.eventCapture=document.documentElement.addEventListener;var a=document.createElement("table"),l=s.transitions=!1,h=s.transforms=!1,c="string";return["Moz","webkit","O","ms"].forEach((function(t){var e=typeof a.style[t+"Transition"]===c;if(e||typeof a.style[t+"Transform"]===c){var i=t.toLowerCase();return h={css:"ms"!==i?"-"+i+"-":"",prefix:t,event:"o"===i||"webkit"===i?i:""},e&&((l=h).event=l.event?l.event+"TransitionEnd":"transitionend"),!1}})),a=null,s.transforms=h,s.transitions=l,s.delayedClick=function(){if(s.touch){if(s.mobileOS.ios)return!0;if(s.mobileOS.android){if(!s.browser.chrome)return!0;if(s.browser.version<32)return!1;var t=document.querySelector("meta[name=viewport]");return!(t?t.getAttribute("content"):"").match(/user-scalable=no/i)}}return!1},s},nE=function(t,e){return t.bind(e)};var rE=function(t,e,i,n,r){oE(t,e,i,n,r)},oE=function(t,e,i,n,r){(ms(e)?e:(e||"").split(" ")).forEach((function(e){sE(t,e,i,n,r)}))},sE=function(t,e,i,n,r){var o,s=n;i&&Cs(i)&&!n?s=i:i&&"string"==typeof i&&Cs(s)&&(o=i),t.addEventListener(e,(function(e){var i=e.target?e.target.closest(o):null;if(!o||o&&e.target&&i){var n=o?i:e.currentTarget;GC(e,"currentTarget",{value:n}),GC(e,"delegateTarget",{value:t}),s(e)}}),Boolean(r))},aE=function(t,e,i,n,r){lE(t,e,i,n,r)},lE=function(t,e,i,n){(ms(e)?e:(e||"").split(" ")).forEach((function(e){hE(t,e,i,n)}))},hE=function(t,e,i,n){t.removeEventListener(e,i,Boolean(n))},cE=function(t){var e=eE(navigator.userAgent);return t.replace(/([^ ]+)/g,(function(t){return e[t]||t}))},pE=function(t,e){var i=t.prototype;i.events?e.forEach((function(t){i.events.indexOf(t)<0&&i.events.push(t)})):i.events=e},uE=function(){return Number(new Date)},dE=function(){},fE="string",vE="function",mE=function(){this._defaultPrevented=!0},gE=function(){return!0===this._defaultPrevented},yE=function(t){function e(){t.call(this),this._events={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.unbind()},e.prototype.bind=function(t,e,i){var n,r,o,s,a=this,l=typeof t===fE?[t]:t||[],h=typeof e===vE;if(void 0===e){for(n in t)a.bind(n,t[n]);return a}var c=function(){var t=l[n];(s=h?e:e[t])&&(i&&(o=s,s=function(){a.unbind(t,s),o.apply(a,arguments)},s.original=o),(a._events[t]=a._events[t]||[]).push(s))};for(n=0,r=l.length;n<r;n++)c();return a},e.prototype.one=function(t,e){return this.bind(t,e,!0)},e.prototype.first=function(t,e){var i,n,r,o=this,s=typeof t===fE?[t]:t,a=typeof e===vE;for(i=0,n=s.length;i<n;i++){var l=s[i];(r=a?e:e[l])&&(o._events[l]=o._events[l]||[]).unshift(r)}return o},e.prototype.trigger=function(t,e){var i,n,r=this,o=r._events[t];if(o){var s=e||{};for(s.sender=r,s._defaultPrevented=!1,s.preventDefault=mE,s.isDefaultPrevented=gE,i=0,n=(o=o.slice()).length;i<n;i++)o[i].call(r,s);return!0===s._defaultPrevented}return!1},e.prototype.unbind=function(t,e){var i,n=this,r=n._events[t];if(void 0===t)n._events={};else if(r)if(e)for(i=r.length-1;i>=0;i--)r[i]!==e&&r[i].original!==e||r.splice(i,1);else n._events[t]=[];return n},e.prototype._setEvents=function(t){for(var e=this,i=(this.events||[]).length,n=0;n<i;n++){var r=e.events[n];e.options[r]&&t[r]&&(e.unbind(r,e.options[r]),e._events&&e._events[r]&&delete e._events[r])}this.bind(this.events,t)},e}(na),bE=Bs.compile,wE=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i),this.items=[],gs(this.element,"k-widget k-attribution")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=As({},this.options,t)},e.prototype.filter=function(t,e){this._extent=t,this._zoom=e,this._render()},e.prototype.add=function(t){var e=t;Qa(t)&&("string"==typeof t&&(e={text:t}),this.items.push(e),this._render())},e.prototype.remove=function(t){for(var e=[],i=0;i<this.items.length;i++){var n=this.items[i];n.text!==t&&e.push(n)}this.items=e,this._render()},e.prototype.clear=function(){this.items=[],XC(this.element)},e.prototype._render=function(){for(var t=[],e=bE(this.options.itemTemplate),i=0;i<this.items.length;i++){var n=this.items[i],r=this._itemText(n);""!==r&&t.push(e({text:r}))}t.length>0?(XC(this.element),function(t,e){var i=document.createElement("div");for(i.innerHTML=t;i.childNodes.length>0;)e.appendChild(i.childNodes[0])}(t.join(this.options.separator),this.element),this.showElement()):this.hideElement()},e.prototype.hideElement=function(){this.element.style.display="none"},e.prototype.showElement=function(){this.element.style.display=""},e.prototype._itemText=function(t){var e="",i=this._inZoomLevel(t.minZoom,t.maxZoom),n=this._inArea(t.extent);return i&&n&&(e+=t.text),e},e.prototype._inZoomLevel=function(t,e){var i=ul(t,-Number.MAX_VALUE),n=ul(e,Number.MAX_VALUE);return this._zoom>i&&this._zoom<n},e.prototype._inArea=function(t){var e=!0;return t&&(e=t.contains(this._extent)),e},e}(yE);vl(wE,{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"});var xE={up:{className:"k-navigator-n",iconClass:"k-i-arrow-n"},down:{className:"k-navigator-s",iconClass:"k-i-arrow-s"},right:{className:"k-navigator-e",iconClass:"k-i-arrow-e"},left:{className:"k-navigator-w",iconClass:"k-i-arrow-w"}};function _E(t){var e='<button class="k-button k-button-square k-rounded-full k-button-flat k-button-flat-base k-icon-button '+xE[t].className+'" aria-label="move '+t+'"><span class="k-icon '+xE[t].iconClass+'" /></button>';return KC(e)}var kE=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i);var n=_E("up"),r=_E("right"),o=_E("down"),s=_E("left");this.element.appendChild(n),this.element.appendChild(r),this.element.appendChild(o),this.element.appendChild(s),gs(this.element,"k-widget k-navigator"),rE(this.element,"click",".k-button",nE(this._click,this));var a=this.element.parentNode.closest("[data-role]");this._keyroot=a||this.element,this._tabindex(this._keyroot),this._keydownHandler=nE(this._keydown,this),rE(this._keyroot,"keydown",this._keydownHandler)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.dispose()},e.prototype.dispose=function(){aE(this._keyroot,"keydown",this._keydownHandler)},e.prototype._tabindex=function(t){var e=t||this.wrapper||this.element,i=this.element,n="tabindex",r=e.getAttribute(n)||i.getAttribute(n);i.removeAttribute(n),e.setAttribute(n,isNaN(r)?0:r)},e.prototype._initOptions=function(t){this.options=As({},this.options,t)},e.prototype._pan=function(t,e){var i=this.options.panStep;this.trigger("pan",{x:t*i,y:e*i})},e.prototype._click=function(t){var e=0,i=0,n=t.currentTarget;n.matches(".k-navigator-n")?i=1:n.matches(".k-navigator-s")?i=-1:n.matches(".k-navigator-e")?e=1:n.matches(".k-navigator-w")&&(e=-1),this._pan(e,i),t.preventDefault()},e.prototype._keydown=function(t){switch(t.which){case Wl.UP:this._pan(0,1),t.preventDefault();break;case Wl.DOWN:this._pan(0,-1),t.preventDefault();break;case Wl.RIGHT:this._pan(1,0),t.preventDefault();break;case Wl.LEFT:this._pan(-1,0),t.preventDefault()}},e}(yE);function SE(t,e){return KC('<button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-'+t+'" title="zoom-'+t+'" aria-label="zoom-'+t+'"><span class="k-icon '+e+'"></span></button>')}vl(kE,{name:"Navigator",panStep:1}),pE(kE,["pan"]);var CE="change",EE=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i);var n=SE("in","k-i-plus"),r=SE("out","k-i-minus");this.element.appendChild(n),this.element.appendChild(r),gs(this.element,"k-widget k-zoom-control k-button-group k-group-horizontal"),this._clickHandler=this._click.bind(this),rE(this.element,"click",".k-button",this._clickHandler);var o=this.element.parentNode.closest("[data-role]");this._keyroot=o||this.element,this._tabindex(this._keyroot),this._keydownHandler=this._keydown.bind(this),rE(this._keyroot,"keydown",this._keydownHandler)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.element&&aE(this.element,"click",this._clickHandler),this._keyroot&&aE(this._keyroot,"keydown",this._keydownHandler)},e.prototype._tabindex=function(t){var e=t||this.wrapper||this.element,i=this.element,n="tabindex",r=e.getAttribute(n)||i.getAttribute(n);i.removeAttribute(n),e.setAttribute(n,isNaN(r)?0:r)},e.prototype._initOptions=function(t){this.options=As({},this.options,t)},e.prototype._change=function(t){var e=this.options.zoomStep;this.trigger(CE,{delta:t*e})},e.prototype._click=function(t){var e=1;Ws(t.currentTarget,"k-zoom-out")&&(e=-1),this._change(e),t.preventDefault()},e.prototype._keydown=function(t){switch(t.which){case Wl.NUMPAD_PLUS:case 187:case 61:this._change(1);break;case Wl.NUMPAD_MINUS:case 189:case 173:this._change(-1)}},e}(yE);vl(EE,{name:"ZoomControl",zoomStep:1}),pE(EE,[CE]);var TE=Math,AE=TE.max,ME=TE.min,OE=function(t){function e(e,i){t.call(this);var n=MC.create(e),r=MC.create(i);n.lng+180>r.lng+180&&n.lat+90<r.lat+90?(this.se=n,this.nw=r):(this.se=r,this.nw=n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={World:{configurable:!0}};return e.prototype.contains=function(t){var e=this.nw,i=this.se,n=ul(t.lng,t[1]),r=ul(t.lat,t[0]);return t&&n+180>=e.lng+180&&n+180<=i.lng+180&&r+90>=i.lat+90&&r+90<=e.lat+90},e.prototype.center=function(){var t=this.nw,e=this.se,i=t.lng+(e.lng-t.lng)/2,n=t.lat+(e.lat-t.lat)/2;return new MC(n,i)},e.prototype.containsAny=function(t){for(var e=!1,i=0;i<t.length;i++)e=e||this.contains(t[i]);return e},e.prototype.include=function(t){var e=this.nw,i=this.se,n=ul(t.lng,t[1]),r=ul(t.lat,t[0]);e.lng=ME(e.lng,n),e.lat=AE(e.lat,r),i.lng=AE(i.lng,n),i.lat=ME(i.lat,r)},e.prototype.includeAll=function(t){for(var e=0;e<t.length;e++)this.include(t[e])},e.prototype.edges=function(){var t=this.nw,e=this.se;return{nw:this.nw,ne:new MC(t.lat,e.lng),se:this.se,sw:new MC(e.lat,t.lng)}},e.prototype.toArray=function(){var t=this.nw,e=this.se;return[t,new MC(t.lat,e.lng),e,new MC(e.lat,t.lng)]},e.prototype.overlaps=function(t){return this.containsAny(t.toArray())||t.containsAny(this.toArray())},e.create=function(t,i){return t instanceof e?t:t&&i?new e(t,i):t&&4===t.length&&!i?new e([t[0],t[1]],[t[2],t[3]]):void 0},i.World.get=function(){return new e([90,-180],[-90,180])},Object.defineProperties(e,i),e}(na),DE=function(t){function e(e,i){t.call(this),this.support=iE(),this._initOptions(i),this.map=e;var n=document.createElement("div");gs(n,"k-layer"),n.style.zIndex=this.options.zIndex,n.style.opacity=this.options.opacity,this.element=n,e.scrollElement.appendChild(this.element),this._beforeReset=this._beforeReset.bind(this),this._reset=this._reset.bind(this),this._resize=this._resize.bind(this),this._panEnd=this._panEnd.bind(this),this._activate(),this._updateAttribution()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._deactivate()},e.prototype._initOptions=function(t){this.options=As({},this.options,t)},e.prototype.show=function(){this.reset(),this._activate(),this._applyExtent(!0)},e.prototype.hide=function(){this._deactivate(),this._setVisibility(!1)},e.prototype.reset=function(){this._beforeReset(),this._reset()},e.prototype._reset=function(){this._applyExtent()},e.prototype._beforeReset=function(){},e.prototype._resize=function(){},e.prototype._panEnd=function(){this._applyExtent()},e.prototype._applyExtent=function(){var t=this.options,e=this.map.zoom(),i=!Qa(t.minZoom)||e>=t.minZoom,n=!Qa(t.maxZoom)||e<=t.maxZoom,r=OE.create(t.extent),o=!r||r.overlaps(this.map.extent());this._setVisibility(i&&n&&o)},e.prototype._setVisibility=function(t){this.element.style.display=t?"":"none"},e.prototype._activate=function(){var t=this.map;this._deactivate(),t.bind("beforeReset",this._beforeReset),t.bind("reset",this._reset),t.bind("resize",this._resize),t.bind("panEnd",this._panEnd)},e.prototype._deactivate=function(){var t=this.map;t.unbind("beforeReset",this._beforeReset),t.unbind("reset",this._reset),t.unbind("resize",this._resize),t.unbind("panEnd",this._panEnd)},e.prototype._updateAttribution=function(){var t=this.map.attribution;t&&t.add(this.options.attribution)},e.prototype._readData=function(){return this.options.data||[]},e.prototype._hasData=function(){return this._data&&this._data.length>0},e}(na),PE=Math,RE=Bs.compile,IE=th;function zE(t){return new IE(cl(t.x),cl(t.y))}function LE(t){var e=t;return"string"!=typeof t&&(e+="px"),e}var BE=function(t){function e(e,i){t.call(this,e,i),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var n=this._viewType();this._view=new n(this.element,this.options)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this._view.destroy(),this._view=null},e.prototype._beforeReset=function(){var t=this.map,e=t.locationToLayer(t.extent().nw).round();this._view.viewOrigin(e)},e.prototype._reset=function(){t.prototype._reset.call(this),this._updateView(),this._view.reset()},e.prototype._viewType=function(){return NE},e.prototype._activate=function(){t.prototype._activate.call(this),this.support.mobileOS||(this._pan||(this._pan=_g(this._render.bind(this),100)),this.map.bind("pan",this._pan))},e.prototype._deactivate=function(){t.prototype._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},e.prototype._updateView=function(){var t=this._view,e=this.map,i=e.extent(),n={nw:e.locationToLayer(i.nw).round(),se:e.locationToLayer(i.se).round()};t.center(e.locationToLayer(e.center())),t.extent(n),t.zoom(e.zoom())},e.prototype._resize=function(){this._render()},e.prototype._panEnd=function(e){t.prototype._panEnd.call(this,e),this._render()},e.prototype._render=function(){this._updateView(),this._view.render()},e}(DE);vl(BE,{tileSize:256,subdomains:["a","b","c"],urlTemplate:"",zIndex:1});var NE=function(t){function e(e,i){t.call(this),this.element=e,this._initOptions(i),this.pool=new FE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=As({},this.options,t)},e.prototype.center=function(t){this._center=t},e.prototype.extent=function(t){this._extent=t},e.prototype.viewOrigin=function(t){this._viewOrigin=t},e.prototype.zoom=function(t){this._zoom=t},e.prototype.pointToTileIndex=function(t){return new IE(PE.floor(t.x/this.options.tileSize),PE.floor(t.y/this.options.tileSize))},e.prototype.tileCount=function(){var t=this.size(),e=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,n=this.indexToPoint(e).translate(-i.x,-i.y);return{x:PE.ceil((PE.abs(n.x)+t.width)/this.options.tileSize),y:PE.ceil((PE.abs(n.y)+t.height)/this.options.tileSize)}},e.prototype.size=function(){var t=this._extent.nw,e=this._extent.se.clone().translate(-t.x,-t.y);return{width:e.x,height:e.y}},e.prototype.indexToPoint=function(t){var e=t.x,i=t.y;return new IE(e*this.options.tileSize,i*this.options.tileSize)},e.prototype.subdomainText=function(){var t=this.options.subdomains;return t[this.subdomainIndex++%t.length]},e.prototype.destroy=function(){XC(this.element),this.pool.empty()},e.prototype.reset=function(){this.pool.reset(),this.subdomainIndex=0,this.render()},e.prototype.render=function(){var t,e,i,n=this.tileCount(),r=this.pointToTileIndex(this._extent.nw);for(e=0;e<n.x;e++)for(i=0;i<n.y;i++)(t=this.createTile({x:r.x+e,y:r.y+i})).visible||t.show()},e.prototype.createTile=function(t){var e=this.tileOptions(t),i=this.pool.get(this._center,e);return i.element.parentNode||this.element.append(i.element),i},e.prototype.tileOptions=function(t){var e=this.wrapIndex(t),i=this.indexToPoint(t),n=this._viewOrigin,r=i.clone().translate(-n.x,-n.y);return{index:e,currentIndex:t,point:i,offset:zE(r),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},e.prototype.wrapIndex=function(t){var e=PE.pow(2,this._zoom);return{x:this.wrapValue(t.x,e),y:al(t.y,0,e-1)}},e.prototype.wrapValue=function(t,e){var i=PE.abs(t)%e;return t>=0?i:e-(0===i?e:i)},e}(na),jE=function(t){function e(e,i){t.call(this),this.id=e,this.visible=!0,this._initOptions(i),this.createElement(),this.show()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){var t=this.element,e=t?t.parentNode:null;t&&(e&&e.removeChild(t),this.element=null)},e.prototype._initOptions=function(t){this.options=As({},this.options,t)},e.prototype.createElement=function(){var t=document.createElement("img");gs(t,"k-layer"),t.style.position="absolute",t.style.display="block",t.style.width=this.options.size,t.style.height=this.options.size,this.element=t},e.prototype.show=function(){var t=this.element;t.style.top=LE(this.options.offset.y),t.style.left=LE(this.options.offset.x);var e=this.url();e&&t.setAttribute("src",e),t.style.visibility="visible",this.visible=!0},e.prototype.hide=function(){this.element.style.visibility="hidden",this.visible=!1},e.prototype.url=function(){return RE(this.options.urlTemplate)(this.urlOptions())},e.prototype.errorUrl=function(){return RE(this.options.errorUrlTemplate)(this.urlOptions())},e.prototype.urlOptions=function(){var t=this.options;return{zoom:t.zoom,subdomain:t.subdomain,z:t.zoom,x:t.index.x,y:t.index.y,s:t.subdomain,quadkey:t.quadkey,q:t.quadkey,culture:t.culture,c:t.culture}},e}(na);vl(jE,{urlTemplate:"",errorUrlTemplate:""});var FE=function(t){function e(){t.call(this),this._items=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._items.length>=this.options.maxSize&&this._remove(t),this._create(e)},e.prototype.empty=function(){for(var t=this._items,e=0;e<t.length;e++)t[e].destroy();this._items=[]},e.prototype.reset=function(){for(var t=this._items,e=0;e<t.length;e++)t[e].hide()},e.prototype._create=function(t){for(var e,i=this._items,n=ol(t.point.toString()+t.offset.toString()+t.zoom+t.urlTemplate),r=0;r<i.length;r++)if(i[r].id===n){e=i[r];break}return e?e.show():(e=new jE(n,t),this._items.push(e)),e},e.prototype._remove=function(t){for(var e=this._items,i=-1,n=-1,r=0;r<e.length;r++){var o=e[r].options.point.distanceTo(t);o>i&&!e[r].visible&&(n=r,i=o)}-1!==n&&(e[n].destroy(),e.splice(n,1))},e}(na);vl(FE,{maxSize:100});var VE=Object.assign,HE="change",WE=function(t){function e(e,i){t.call(this);var n=this,r=e[0]||e;n.capture=!1;var o=eE(navigator.userAgent);r.addEventListener?(o.down.split(" ").forEach((function(t){r.addEventListener(t,nE(n._press,n),!0)})),o.up.split(" ").forEach((function(t){r.addEventListener(t,nE(n._release,n),!0)}))):(o.down.split(" ").forEach((function(t){r.attachEvent(t,nE(n._press,n))})),o.up.split(" ").forEach((function(t){r.attachEvent(t,nE(n._release,n))}))),n.bind(["press","release"],i||{})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.captureNext=function(){this.capture=!0},e.prototype.cancelCapture=function(){this.capture=!1},e.prototype._press=function(t){this.trigger("press"),this.capture&&t.preventDefault()},e.prototype._release=function(t){var e=this;e.trigger("release"),e.capture&&(t.preventDefault(),e.cancelCapture())},e}(yE),UE=function(t){function e(e){t.call(this);var i=this;i.forcedEnabled=!1,VE(i,e),i.scale=1,i.horizontal?(i.measure="offsetWidth",i.scrollSize="scrollWidth",i.axis="x"):(i.measure="offsetHeight",i.scrollSize="scrollHeight",i.axis="y")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.makeVirtual=function(){VE(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},e.prototype.virtualSize=function(t,e){this._virtualMin===t&&this._virtualMax===e||(this._virtualMin=t,this._virtualMax=e,this.update())},e.prototype.outOfBounds=function(t){return t>this.max||t<this.min},e.prototype.forceEnabled=function(){this.forcedEnabled=!0},e.prototype.getSize=function(){return this.container[this.measure]},e.prototype.getTotal=function(){return this.element[this.scrollSize]},e.prototype.rescale=function(t){this.scale=t},e.prototype.update=function(t){var e=this,i=e.virtual?e._virtualMax:e.getTotal(),n=i*e.scale,r=e.getSize();(0!==i||e.forcedEnabled)&&(e.max=e.virtual?-e._virtualMin:0,e.size=r,e.total=n,e.min=Math.min(e.max,r-n),e.minScale=r/i,e.centerOffset=(n-r)/2,e.enabled=e.forcedEnabled||n>r,t||e.trigger(HE,e))},e}(yE),qE=function(t){function e(e){t.call(this);var i=this;i.x=new UE(VE({horizontal:!0},e)),i.y=new UE(VE({horizontal:!1},e)),i.container=e.container,i.forcedMinScale=e.minScale,i.maxScale=e.maxScale||100,i.bind(HE,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rescale=function(t){this.x.rescale(t),this.y.rescale(t),this.refresh()},e.prototype.centerCoordinates=function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},e.prototype.refresh=function(){var t=this;t.x.update(),t.y.update(),t.enabled=t.x.enabled||t.y.enabled,t.minScale=t.forcedMinScale||Math.min(t.x.minScale,t.y.minScale),t.fitScale=Math.max(t.x.minScale,t.y.minScale),t.trigger(HE)},e}(yE),$E=function(t){function e(e){t.call(this),VE(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.outOfBounds=function(){return this.dimension.outOfBounds(this.movable[this.axis])},e.prototype.dragMove=function(t){var e=this,i=e.dimension,n=e.axis,r=e.movable,o=r[n]+t;if(i.enabled){var s=t;(o<i.min&&t<0||o>i.max&&t>0)&&(s*=e.resistance),r.translateAxis(n,s),e.trigger(HE,e)}},e}(yE),GE=function(t){function e(e){t.call(this);var i,n,r,o,s=this;VE(s,{elastic:!0},e),r=s.elastic?.5:0,o=s.movable,s.x=i=new $E({axis:"x",dimension:s.dimensions.x,resistance:r,movable:o}),s.y=n=new $E({axis:"y",dimension:s.dimensions.y,resistance:r,movable:o}),s.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(t){s.gesture=t,s.offset=el(s.dimensions.container)},press:function(t){var e=t.event.target.closest("a");e&&e.matches("[data-navigate-on-press=true]")&&t.sender.cancel()},gesturechange:function(t){var e,r=s.gesture,a=r.center,l=t.center,h=t.distance/r.distance,c=s.dimensions.minScale,p=s.dimensions.maxScale;o.scale<=c&&h<1&&(h+=.8*(1-h)),o.scale*h>=p&&(h=p/o.scale);var u=o.x+s.offset.left,d=o.y+s.offset.top;e={x:(u-a.x)*h+l.x-u,y:(d-a.y)*h+l.y-d},o.scaleWith(h),i.dragMove(e.x),n.dragMove(e.y),s.dimensions.rescale(o.scale),s.gesture=t,t.preventDefault()},move:function(t){t.event.target.tagName.match(/textarea|input/i)||(i.dimension.enabled||n.dimension.enabled?(i.dragMove(t.x.delta),n.dragMove(t.y.delta),t.preventDefault()):t.touch.skip())},end:function(t){t.preventDefault()}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(na),KE=function(t,e,i){return"translate3d("+t+"px,"+e+"px,0) scale("+i+")"},XE=function(t){function e(e){t.call(this);var i=this;i.support=iE(),this.transformStyle=this.support.transitions.prefix+"Transform",i.element=e,i.element.style.webkitTransformOrigin="left top",i.x=0,i.y=0,i.scale=1;var n=KE(i.x,i.y,i.scale);i.element.style[this.transformStyle]=n,i._saveCoordinates(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.translateAxis=function(t,e){this[t]+=e,this.refresh()},e.prototype.scaleTo=function(t){this.scale=t,this.refresh()},e.prototype.scaleWith=function(t){this.scale*=t,this.refresh()},e.prototype.translate=function(t){this.x+=t.x,this.y+=t.y,this.refresh()},e.prototype.moveAxis=function(t,e){this[t]=e,this.refresh()},e.prototype.moveTo=function(t){VE(this,t),this.refresh()},e.prototype.refresh=function(){var t,e=this,i=e.x,n=e.y;e.round&&(i=Math.round(i),n=Math.round(n)),(t=KE(i,n,e.scale))!==e.coordinates&&(e.element.style[this.transformStyle]=t,e._saveCoordinates(t),e.trigger(HE))},e.prototype._saveCoordinates=function(t){this.coordinates=t},e}(yE),YE=Cc,ZE=function(t){function e(e,i){t.call(this,e,i),this._pan=nE(this._pan,this),this.surface=_b.create(this.element,{width:e.scrollElement.clientWidth,height:e.scrollElement.clientHeight}),this._initRoot(),this.movable=new XE(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseenter=this._handler("shapeMouseEnter"),this.surface.bind("mouseenter",this._mouseenter),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this.surface.destroy()},e.prototype._reset=function(){t.prototype._reset.call(this),this._translateSurface(),this._data=this._readData(),this._hasData()&&this._load(this._data)},e.prototype._initRoot=function(){this._root=new YE,this.surface.draw(this._root)},e.prototype._beforeReset=function(){this.surface.clear(),this._initRoot()},e.prototype._resize=function(){this.surface.size(this.map.size())},e.prototype._readData=function(){var e=t.prototype._readData.call(this);return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e},e.prototype._load=function(t){this._data=t,this._clearMarkers(),this._loader||(this._loader=new JE(this.map,this.options.style,this));for(var e=new YE,i=0;i<t.length;i++){var n=this._loader.parse(t[i]);n&&e.append(n)}this._root.clear(),this._root.append(e)},e.prototype.shapeCreated=function(t){var e=!1;if(t instanceof _c&&this.map.options.renderPointsAsMarkers&&(e=Qa(this._createMarker(t))),!e){var i={layer:this,shape:t};e=this.map.trigger("shapeCreated",i)}return e},e.prototype.featureCreated=function(t){t.layer=this,this.map.trigger("shapeFeatureCreated",t)},e.prototype._createMarker=function(t){var e=this.map.markers.bind({location:t.location},t.dataItem);return e&&this._markers.push(e),e},e.prototype._clearMarkers=function(){for(var t=0;t<this._markers.length;t++)this.map.markers.remove(this._markers[t]);this._markers=[]},e.prototype._pan=function(){this._panning||(this._panning=!0,this.surface.suspendTracking())},e.prototype._panEnd=function(e){t.prototype._panEnd.call(this,e),this._translateSurface(),this.surface.resumeTracking(),this._panning=!1},e.prototype._translateSurface=function(){var t=this.map,e=t.locationToView(t.extent().nw);this.surface.translate&&(this.surface.translate(e),this.movable.moveTo({x:e.x,y:e.y}))},e.prototype._handler=function(t){var e=this;return function(i){if(i.element){var n={layer:e,layerIndex:(e.map.layers||[]).indexOf(e),shape:i.element,shapeIndex:(e._data||[]).indexOf(i.element.dataItem),originalEvent:i.originalEvent};e.map.trigger(t,n)}}},e.prototype._activate=function(){t.prototype._activate.call(this),this._panHandler=nE(this._pan,this),this.map.bind("pan",this.panHandler)},e.prototype._deactivate=function(){t.prototype._deactivate.call(this),this.map.unbind("pan",this._panHandler)},e}(DE);vl(ZE,{autoBind:!0,zIndex:100});var JE=function(t){function e(e,i,n){t.call(this),this.observer=n,this.locator=e,this.style=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){var e=new YE,i=!0;return"Feature"===t.type?(i=!1,this._loadGeometryTo(e,t.geometry,t),this._featureCreated(e,t)):this._loadGeometryTo(e,t,t),i&&e.children.length<2&&(e=e.children[0]),e},e.prototype._shapeCreated=function(t){var e=!1;return this.observer&&this.observer.shapeCreated&&(e=this.observer.shapeCreated(t)),e},e.prototype._featureCreated=function(t,e){this.observer&&this.observer.featureCreated&&this.observer.featureCreated({group:t,dataItem:e,properties:e.properties})},e.prototype._loadGeometryTo=function(t,e,i){var n,r,o=this,s=e.coordinates;switch(e.type){case"LineString":r=this._loadPolygon(t,[s],i),this._setLineFill(r);break;case"MultiLineString":for(n=0;n<s.length;n++)r=o._loadPolygon(t,[s[n]],i),o._setLineFill(r);break;case"Polygon":this._loadPolygon(t,s,i);break;case"MultiPolygon":for(n=0;n<s.length;n++)o._loadPolygon(t,s[n],i);break;case"Point":this._loadPoint(t,s,i);break;case"MultiPoint":for(n=0;n<s.length;n++)o._loadPoint(t,s[n],i)}},e.prototype._setLineFill=function(t){var e=t.segments;(e.length<4||!e[0].anchor().equals(sl(e).anchor()))&&(t.options.fill=null)},e.prototype._loadShape=function(t,e){return this._shapeCreated(e)||t.append(e),e},e.prototype._loadPolygon=function(t,e,i){var n=this._buildPolygon(e);return n.dataItem=i,this._loadShape(t,n)},e.prototype._buildPolygon=function(t){for(var e=new(t.length>1?dc:uc)(this.style),i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var r=this.locator.locationToView(MC.fromLngLat(t[i][n]));0===n?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y)}return e},e.prototype._loadPoint=function(t,e,i){var n=MC.fromLngLat(e),r=this.locator.locationToView(n),o=new yc(r,10),s=new _c(o,this.style);return s.dataItem=i,s.location=n,this._loadShape(t,s)},e}(na),QE=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._readData=function(){return this.options.data||[]},e.prototype._load=function(t){var e=this;if(this._data=t,this.surface.clear(),0!==t.length){var i=this.options,n=Vs(i.valueField),r=t.slice(0);r.sort((function(t,e){return n(e)-n(t)}));for(var o,s=this._scaleType(),a=Vs(this.options.locationField),l=0;l<r.length;l++){var h=r[l],c=a(h),p=n(h);if(Qa(c)&&Qa(p)){o||(o=new s([0,p],[i.minSize,i.maxSize])),c=MC.create(c);var u=e.map.locationToView(c),d=o.map(p),f=e._createSymbol({center:u,size:d,style:i.style,dataItem:h,location:c});f.dataItem=h,f.location=c,f.value=p,e._drawSymbol(f)}}}},e.prototype._scaleType=function(){var t=this.options.scale;return Cs(t)?t:eT[t]},e.prototype._createSymbol=function(t){var e=this.options.symbol;return Cs(e)||(e=iT[e]),e(t)},e.prototype._drawSymbol=function(t){var e={layer:this,shape:t};this.map.trigger("shapeCreated",e)||this.surface.draw(t)},e}(ZE);vl(QE,{locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle",zIndex:200});var tT=function(t){function e(e,i){t.call(this),this._domain=e,this._range=i;var n=Math.sqrt(e[1])-Math.sqrt(e[0]),r=i[1]-i[0];this._ratio=r/n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t){var e=(Math.sqrt(t)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+e},e}(na),eT={sqrt:tT},iT={circle:function(t){var e=new yc(t.center,t.size/2);return new _c(e,t.style)},square:function(t){var e=new uc(t.style),i=t.size/2,n=t.center;return e.moveTo(n.x-i,n.y-i).lineTo(n.x+i,n.y-i).lineTo(n.x+i,n.y+i).lineTo(n.x-i,n.y+i).close(),e}},nT="click",rT="mouseenter",oT="mouseleave",sT=Object.assign,aT=".k-marker",lT=function(t){function e(e,i){t.call(this,e,i),this._markerClickHandler=nE(this._markerClick,this),rE(this.element,nT,aT,this._markerClickHandler),this.items=[],this._load(this._readData())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),aE(this.element,nT,this._markerClickHandler),this.clear()},e.prototype.add=function(t){if(!ms(t))return this._addOne(t);for(var e=0;e<t.length;e++)this._addOne(t[e])},e.prototype.remove=function(t){t.destroy();var e=(this.items||[]).indexOf(t);e>-1&&this.items.splice(e,1)},e.prototype.clear=function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]},e.prototype.update=function(t){var e=t.location();if(e){t.showAt(this.map.locationToView(e));var i={marker:t,layer:this};this.map.trigger("markerActivate",i)}},e.prototype._reset=function(){t.prototype._reset.call(this);for(var e=this.items,i=0;i<e.length;i++)this.update(e[i])},e.prototype.bind=function(t,e){var i=hT.create(t,this.options);i.dataItem=e;var n={marker:i,layer:this};if(!this.map.trigger("markerCreated",n))return this.add(i),i},e.prototype._addOne=function(t){var e=hT.create(t,this.options);return e.addTo(this),e},e.prototype._readData=function(){return this.options.data||[]},e.prototype._load=function(t){this._data=t,this.clear();for(var e=Vs(this.options.locationField),i=Vs(this.options.titleField),n=0;n<t.length;n++){var r=t[n];this.bind({location:e(r),title:i(r)},r)}},e.prototype._markerClick=function(t){var e=this.map.layers||[],i=t.target._kendoNode,n={layer:this,layerIndex:e.indexOf(this),marker:i,markerIndex:(this.items||[]).indexOf(i),originalEvent:t};this.map.trigger("markerClick",n)},e.prototype._markerMouseEnter=function(t){var e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseEnter",e)},e.prototype._markerMouseLeave=function(t){var e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseLeave",e)},e.prototype._createMarkerEventArgs=function(t){var e=t.marker;return sT({},{layer:this,layerIndex:this.map.layers.indexOf(this),marker:e,markerIndex:(this.items||[]).indexOf(e)},t)},e}(DE);vl(lT,{zIndex:1e3,autoBind:!0,locationField:"location",titleField:"title"});var hT=function(t){function e(e){t.call(this),this.options=e||{}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.layer=null,this.unbindEvents(),this.hide()},e.prototype.addTo=function(t){this.layer=t.markers||t,this.layer.items.push(this),this.layer.update(this)},e.prototype.location=function(t){return t?(this.options.location=MC.create(t).toArray(),this.layer&&this.layer.update(this),this):MC.create(this.options.location)},e.prototype.showAt=function(t){this.render(),this.element.style.left=JC(Math.round(t.x)),this.element.style.top=JC(Math.round(t.y)),this.tooltip&&this.tooltip.popup&&this.tooltip.popup._position()},e.prototype.hide=function(){this.element&&(this.element.remove(),this.element=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)},e.prototype.bindEvents=function(){this.element&&(this._mouseEnterHandler=nE(this._mouseEnter,this),rE(this.element,rT,aT,this._mouseEnterHandler),this._mouseLeaveHandler=nE(this._mouseLeave,this),rE(this.element,oT,aT,this._mouseLeaveHandler))},e.prototype.unbindEvents=function(){this.element&&(aE(this.element,rT,this._mouseEnterHandler),aE(this.element,oT,this._mouseLeaveHandler))},e.prototype.render=function(){if(!this.element){var t=this.options,e=this.layer,i=document.createElement("span");gs(i,"k-marker k-icon k-i-marker-"+ZC(t.shape||"pin")),i.setAttribute("title",t.title);var n=t.attributes||{};Object.keys(n).forEach((function(t){i.setAttributett(t,n[t])})),i._kendoNode=this,i.style.zIndex=t.zIndex,this.element=i,e&&e.element.appendChild(this.element),this.bindEvents(),this.renderTooltip()}},e.prototype._mouseEnter=function(t){var e=this._createEventArgs(t);this.layer._markerMouseEnter(e)},e.prototype._mouseLeave=function(t){var e=this._createEventArgs(t);this.layer._markerMouseLeave(e)},e.prototype._createEventArgs=function(t){return{marker:this,originalEvent:t}},e.prototype.renderTooltip=function(){},e.create=function(t,i){return t instanceof e?t:new e(As({},i,t))},e}(na),cT=Object.assign;function pT(t){window.requestAnimationFrame(t)}var uT=function(t){function e(){t.call(this);var e=this;e._tickProxy=nE(e._tick,e),e._started=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.tick=function(){},e.prototype.done=function(){},e.prototype.onEnd=function(){},e.prototype.onCancel=function(){},e.prototype.start=function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,pT(this._tickProxy)))},e.prototype.enabled=function(){return!0},e.prototype.cancel=function(){this._started=!1,this.onCancel()},e.prototype._tick=function(){var t=this;t._started&&(t.tick(),t.done()?(t._started=!1,t.onEnd()):pT(t._tickProxy))},e}(na),dT=function(t){function e(e){t.call(this),cT(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.done=function(){return this.timePassed()>=this.duration},e.prototype.timePassed=function(){return Math.min(this.duration,uE()-this.startDate)},e.prototype.moveTo=function(t){var e=this,i=e.movable;e.initial=i[e.axis],e.delta=t.location-e.initial,e.duration="number"==typeof t.duration?t.duration:300,e.tick=e._easeProxy(t.ease),e.startDate=uE(),e.start()},e.prototype._easeProxy=function(t){var e=this;return function(){e.movable.moveAxis(e.axis,t(e.timePassed(),e.initial,e.delta,e.duration))}},e.easeOutExpo=function(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},e}(uT),fT=Object.assign,vT=function(t){t.preventDefault()},mT=800,gT=0,yT="press",bT="hold",wT="select",xT="start",_T="move",kT="end",ST="cancel",CT="tap",ET="doubleTap",TT="release",AT="gesturechange",MT="gestureend",OT="gesturetap",DT={api:0,touch:0,mouse:9,pointer:9};function PT(t){var e,i,n,r=iE(),o=[],s=t.originalEvent||t,a=t.currentTarget,l=0;if(t.api)o.push({id:2,event:t,target:t.target,currentTarget:t.target,location:t,type:"api"});else if(t.type.match(/touch/))for(e=(i=s?s.changedTouches:[]).length;l<e;l++)n=i[l],o.push({location:n,event:t,target:n.target,currentTarget:a,id:n.identifier,type:"touch"});else r.pointers||r.msPointers?o.push({location:s,event:t,target:t.target,currentTarget:a,id:s.pointerId,type:"pointer"}):o.push({id:1,event:t,target:t.target,currentTarget:a,location:t,type:"mouse"});return o}var RT=function(t){function e(e,i){t.call(this);var n=this;n.support=iE(),n.invalidZeroEvents=this.support.mobileOS&&this.support.mobileOS.android,n.axis=e,n._updateLocationData(i),n.startLocation=n.location,n.velocity=n.delta=0,n.timeStamp=uE()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.move=function(t){var e=this,i=t["page"+e.axis],n=uE(),r=n-e.timeStamp||1;!i&&this.invalidZeroEvents||(e.delta=i-e.location,e._updateLocationData(t),e.initialDelta=i-e.startLocation,e.velocity=e.delta/r,e.timeStamp=n)},e.prototype._updateLocationData=function(t){var e=this,i=e.axis;e.location=t["page"+i],e.client=t["client"+i],e.screen=t["screen"+i]},e}(na),IT=function(t){function e(e,i,n){t.call(this),fT(this,{x:new RT("X",n.location),y:new RT("Y",n.location),type:n.type,useClickAsTap:e.useClickAsTap,threshold:e.threshold||DT[n.type],userEvents:e,target:i,currentTarget:n.currentTarget,initialTouch:n.target,id:n.id,pressEvent:n,_clicks:e._clicks,supportDoubleTap:e.supportDoubleTap,_moved:!1,_finished:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.press=function(){this._holdTimeout=setTimeout(nE(this._hold,this),this.userEvents.minHold),this._trigger(yT,this.pressEvent)},e.prototype._tap=function(t){var e=this;e.userEvents._clicks++,1===e.userEvents._clicks&&(e._clickTimeout=setTimeout((function(){1===e.userEvents._clicks?e._trigger(CT,t):e._trigger(ET,t),e.userEvents._clicks=0}),300))},e.prototype._hold=function(){this._trigger(bT,this.pressEvent)},e.prototype.move=function(t){var e=this,i="api"!==t.type&&e.userEvents._shouldNotMove;if(!e._finished&&!i){if(e.x.move(t.location),e.y.move(t.location),!e._moved){if(e._withinIgnoreThreshold())return;if(LT.current&&LT.current!==e.userEvents)return e.dispose();e._start(t)}e._finished||e._trigger(_T,t)}},e.prototype.end=function(t){this.endTime=uE(),this._finished||(this._finished=!0,this._trigger(TT,t),this._moved?this._trigger(kT,t):this.useClickAsTap||(this.supportDoubleTap?this._tap(t):this._trigger(CT,t)),clearTimeout(this._holdTimeout),this.dispose())},e.prototype.dispose=function(){var t=this.userEvents.touches||[];this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout);var e=t.indexOf(this);t.splice(e,1)},e.prototype.skip=function(){this.dispose()},e.prototype.cancel=function(){this.dispose()},e.prototype.isMoved=function(){return this._moved},e.prototype._start=function(t){clearTimeout(this._holdTimeout),this.startTime=uE(),this._moved=!0,this._trigger(xT,t)},e.prototype._trigger=function(t,e){var i=this,n=e.event,r={touch:i,x:i.x,y:i.y,target:i.target,event:n};i.userEvents.notify(t,r)&&n.preventDefault()},e.prototype._withinIgnoreThreshold=function(){var t=this.x.initialDelta,e=this.y.initialDelta;return Math.sqrt(t*t+e*e)<=this.threshold},e}(na);function zT(t){for(var e=eE(navigator.userAgent).up.split(" "),i=0,n=e.length;i<n;i++)t(e[i])}var LT=function(t){function e(e,i){t.call(this);var n,r=this,o=iE();this.support=o,i=i||{},this.options=i,n=r.filter=i.filter,r.threshold=i.threshold||gT,r.minHold=i.minHold||mT,r.touches=[],r._maxTouches=i.multiTouch?2:1,r.allowSelection=i.allowSelection,r.captureUpIfMoved=i.captureUpIfMoved,r.useClickAsTap=!i.fastTap&&!o.delayedClick(),r._clicks=0,r.supportDoubleTap=i.supportDoubleTap;var s=!o.touch||o.mouseAndTouchPresent;if(fT(r,{element:e,surface:i.global&&s?e.ownerDocument.documentElement:i.surface||e,stopPropagation:i.stopPropagation,pressed:!1}),this._surfaceMoveHandler=nE(this._move,this),rE(r.surface,cE("move"),this._surfaceMoveHandler),this._surfaceEndHandler=nE(this._end,this),rE(r.surface,cE("up cancel"),this._surfaceEndHandler),this._elementStartHandler=nE(this._start,this),rE(e,cE("down"),n,this._elementStartHandler),r.useClickAsTap&&(this._elementClickHandler=nE(this._click,this),rE(e,cE("click"),n,this._elementClickHandler)),o.pointers||o.msPointers)if(o.browser.version<11){var a="pinch-zoom double-tap-zoom";e.style["-ms-touch-action"]=i.touchAction&&"none"!==i.touchAction?a+" "+i.touchAction:a}else e.style["touch-action"]=i.touchAction||"none";if(i.preventDragEvent&&(this._elementDragStartHandler=vT,rE(e,cE("dragstart"),this._elementDragStartHandler)),this._elementSelectHandler=nE(this._select,this),rE(e,cE("mousedown"),n,this._elementSelectHandler),r.captureUpIfMoved&&o.eventCapture){var l=r.surface,h=nE(r.preventIfMoving,r);zT((function(t){l.addEventListener(t,h,!0)}))}r.bind([yT,bT,CT,ET,xT,_T,kT,TT,ST,"gesturestart",AT,MT,OT,wT],i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventIfMoving=function(t){this._isMoved()&&t.preventDefault()},e.prototype.destroy=function(){var t=this,e=this.options,i=this.element;if(!t._destroyed){if(t._destroyed=!0,t.captureUpIfMoved&&this.support.eventCapture){var n=t.surface;zT((function(e){n.removeEventListener(e,t.preventIfMoving)}))}aE(t.surface,cE("move"),this._surfaceMoveHandler),aE(t.surface,cE("up cancel"),this._surfaceEndHandler),aE(i,cE("down"),this._elementStartHandler),t.useClickAsTap&&aE(i,cE("click"),this._elementClickHandler),e.preventDragEvent&&aE(i,cE("dragstart"),this._elementDragStartHandler),aE(i,cE("mousedown"),this._elementSelectHandler),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget}},e.prototype.capture=function(){e.current=this},e.prototype.cancel=function(){this._disposeAll(),this.trigger(ST)},e.prototype.notify=function(t,e){var i,n,r,o,s,a,l,h,c=this.touches,p=t;if(this._isMultiTouch()){switch(p){case _T:p=AT;break;case kT:p=MT;break;case CT:p=OT}fT(e,{touches:c},(i=c[0],n=c[1],r=i.x.location,o=i.y.location,s=n.x.location,a=n.y.location,l=r-s,h=o-a,{center:{x:(r+s)/2,y:(o+a)/2},distance:Math.sqrt(l*l+h*h)}))}return this.trigger(p,fT(e,{type:p}))},e.prototype.press=function(t,e,i){this._apiCall("_start",t,e,i)},e.prototype.move=function(t,e){this._apiCall("_move",t,e)},e.prototype.end=function(t,e){this._apiCall("_end",t,e)},e.prototype._isMultiTouch=function(){return this.touches.length>1},e.prototype._maxTouchesReached=function(){return this.touches.length>=this._maxTouches},e.prototype._disposeAll=function(){for(var t=this.touches;t.length>0;)t.pop().dispose()},e.prototype._isMoved=function(){return Hs(this.touches,(function(t){return t.isMoved()})).length},e.prototype._select=function(t){this.allowSelection&&!this.trigger(wT,{event:t})||t.preventDefault()},e.prototype._start=function(t){var i,n,r=this,o=0,s=r.filter,a=PT(t),l=a.length,h=t.which;if(!(h&&h>1||r._maxTouchesReached()))for(e.current=null,r.currentTarget=t.currentTarget,r.stopPropagation&&t.stopPropagation();o<l&&!r._maxTouchesReached();o++)n=a[o],(i=s?n.currentTarget:r.element)&&0===i.length||(n=new IT(r,i,n),r.touches.push(n),n.press(),r._isMultiTouch()&&r.notify("gesturestart",{}))},e.prototype._move=function(t){this._eachTouch("move",t)},e.prototype._end=function(t){this._eachTouch("end",t)},e.prototype._click=function(t){var e={touch:{initialTouch:t.target,target:t.currentTarget,endTime:uE(),x:{location:t.pageX,client:t.clientX},y:{location:t.pageY,client:t.clientY}},x:t.pageX,y:t.pageY,target:t.currentTarget,event:t,type:"tap"};this.trigger("tap",e)&&t.preventDefault()},e.prototype._eachTouch=function(t,e){var i,n,r,o,s={},a=PT(e),l=this.touches;for(i=0;i<l.length;i++)s[(n=l[i]).id]=n;for(i=0;i<a.length;i++)(o=s[(r=a[i]).id])&&o[t](r)},e.prototype._apiCall=function(t,e,i,n){this[t]({api:!0,pageX:e,pageY:i,clientX:e,clientY:i,target:n||this.element,stopPropagation:dE,preventDefault:dE})},e.defaultThreshold=function(t){gT=t},e.minHold=function(t){mT=t},e}(yE),BT=Object.assign,NT=Math.abs,jT="change",FT="scroll",VT=function(t){function e(e){t.call(this,e);var i=this;BT(i,e),i.userEvents.bind("gestureend",i.start.bind(this)),i.tapCapture.bind("press",i.cancel.bind(this))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enabled=function(){return this.movable.scale<this.dimensions.minScale},e.prototype.done=function(){return this.dimensions.minScale-this.movable.scale<.01},e.prototype.tick=function(){var t=this.movable;t.scaleWith(1.1),this.dimensions.rescale(t.scale)},e.prototype.onEnd=function(){var t=this.movable;t.scaleTo(this.dimensions.minScale),this.dimensions.rescale(t.scale)},e}(uT),HT=function(t){function e(e){t.call(this);var i=this;BT(i,e,{transition:new dT({axis:e.axis,movable:e.movable,onEnd:function(){i._end()}})}),i.tapCapture.bind("press",(function(){i.cancel()})),i.userEvents.bind("end",nE(i.start,i)),i.userEvents.bind("gestureend",nE(i.start,i)),i.userEvents.bind("tap",nE(i.onEnd,i))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onCancel=function(){this.transition.cancel()},e.prototype.freeze=function(t){this.cancel(),this._moveTo(t)},e.prototype.onEnd=function(){var t=this;t.paneAxis.outOfBounds()?t._snapBack():t._end()},e.prototype.done=function(){return NT(this.velocity)<1},e.prototype.start=function(e){var i,n=this;n.dimension.enabled&&(n.paneAxis.outOfBounds()?n.transition._started?(n.transition.cancel(),n.velocity=Math.min(e.touch[n.axis].velocity*n.velocityMultiplier,55),t.prototype.start.call(this)):n._snapBack():(i=2===e.touch.id?0:e.touch[n.axis].velocity,n.velocity=Math.max(Math.min(i*n.velocityMultiplier,55),-55),n.tapCapture.captureNext(),t.prototype.start.call(this)))},e.prototype.tick=function(){var t=this,e=t.dimension,i=t.paneAxis.outOfBounds()?.5:t.friction,n=t.velocity*=i,r=t.movable[t.axis]+n;!t.elastic&&e.outOfBounds(r)&&(r=Math.max(Math.min(r,e.max),e.min),t.velocity=0),t.movable.moveAxis(t.axis,r)},e.prototype._end=function(){this.tapCapture.cancelCapture(),this.end()},e.prototype._snapBack=function(){var t=this,e=t.dimension,i=t.movable[t.axis]>e.max?e.max:e.min;t._moveTo(i)},e.prototype._moveTo=function(t){this.transition.moveTo({location:t,duration:500,ease:dT.easeOutExpo})},e}(uT),WT=function(t){function e(e){t.call(this,e);BT(this,e,{origin:{},destination:{},offset:{}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.tick=function(){this._updateCoordinates(),this.moveTo(this.origin)},e.prototype.done=function(){return NT(this.offset.y)<5&&NT(this.offset.x)<5},e.prototype.onEnd=function(){this.moveTo(this.destination),this.callback&&this.callback.call()},e.prototype.setCoordinates=function(t,e){this.offset={},this.origin=t,this.destination=e},e.prototype.setCallback=function(t){t&&Cs(t)?this.callback=t:t=void 0},e.prototype._updateCoordinates=function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}},e}(uT),UT=function(t){function e(e){t.call(this);var i=this,n="x"===e.axis,r=KC('<div class="km-touch-scrollbar km-'+(n?"horizontal":"vertical")+'-scrollbar" />');BT(i,e,{element:r,elementSize:0,movable:new XE(r),scrollMovable:e.movable,alwaysVisible:e.alwaysVisible,size:n?"width":"height"}),i.scrollMovable.bind(jT,i.refresh.bind(i)),i.container.appendChild(r),e.alwaysVisible&&i.show()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.refresh=function(){var t=this,e=t.axis,i=t.dimension,n=i.size,r=t.scrollMovable,o=n/i.total,s=Math.round(-r[e]*o),a=Math.round(n*o);this.element.style.display=o>=1?"none":"",s+a>n?a=n-s:s<0&&(a+=s,s=0),t.elementSize!==a&&(t.element.style[t.size]=a+"px",t.elementSize=a),t.movable.moveAxis(e,s)},e.prototype.show=function(){this.element.style.opacity=.7,this.element.style.visibility="visible"},e.prototype.hide=function(){this.alwaysVisible||(this.element.style.opacity=0)},e}(na),qT=function(t){function e(e,i){t.call(this);var n=this;this.element=e,this._initOptions(i);var r=function(t){var e=QC(t);return e.ios||e.android}(navigator.userAgent);n._native=n.options.useNative&&r;var o=KC('<div class="km-scroll-header"/>');if(n._native)return gs(e,"km-native-scroller"),YC(o,e),void BT(n,{scrollElement:e,fixedContainer:e.children[0]});e.style.overflow="hidden",gs(e,"km-scroll-wrapper"),function(t,e){for(t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}(e,KC('<div class="km-scroll-container"/>')),YC(o,e);var s=e.children[1],a=new WE(e),l=new XE(s),h=new qE({element:s,container:e,forcedEnabled:n.options.zoom}),c=this.options.avoidScrolling,p=new LT(e,{touchAction:"pan-y",fastTap:!0,allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:n.options.zoom,supportDoubleTap:n.options.supportDoubleTap,start:function(t){h.refresh();var e=NT(t.x.velocity),i=NT(t.y.velocity),r=2*e>=i,o=function(t,e){return t===e||function(t,e){if(!e)return!1;for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1}(t,e)}(n.fixedContainer,t.event.target),s=2*i>=e;!o&&!c(t)&&n.enabled&&(h.x.enabled&&r||h.y.enabled&&s)?p.capture():p.cancel()}}),u=new GE({movable:l,dimensions:h,userEvents:p,elastic:n.options.elastic}),d=new VT({movable:l,dimensions:h,userEvents:p,tapCapture:a}),f=new WT({moveTo:function(t){n.scrollTo(t.x,t.y)}});l.bind(jT,(function(){n.scrollTop=-l.y,n.scrollLeft=-l.x,n.trigger(FT,{scrollTop:n.scrollTop,scrollLeft:n.scrollLeft})})),n.options.mousewheelScrolling&&(this._wheelScrollHandler=this._wheelScroll.bind(this),rE(e,"DOMMouseScroll mousewheel",this._wheelScrollHandler)),BT(n,{movable:l,dimensions:h,zoomSnapBack:d,animatedScroller:f,userEvents:p,pane:u,tapCapture:a,pulled:!1,enabled:!0,scrollElement:s,scrollTop:0,scrollLeft:0,fixedContainer:e.children[0]}),n._initAxis("x"),n._initAxis("y"),n._wheelEnd=function(){n._wheel=!1,n.userEvents.end(0,n._wheelY)},h.refresh(),n.options.pullToRefresh&&n._initPullToRefresh()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=As({},this.options,t)},e.prototype._wheelScroll=function(t){if(!t.ctrlKey){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var e=function(t){var e,i=t.originalEvent||t,n=i.wheelDeltaY;return i.wheelDelta?(void 0===n||n)&&(e=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(e=10*-i.detail),e}(t);e&&(this._wheelY+=e,this.userEvents.move(0,this._wheelY)),t.preventDefault()}},e.prototype.makeVirtual=function(){this.dimensions.y.makeVirtual()},e.prototype.virtualSize=function(t,e){this.dimensions.y.virtualSize(t,e)},e.prototype.height=function(){return this.dimensions.y.size},e.prototype.scrollHeight=function(){return this.scrollElement.scrollHeight},e.prototype.scrollWidth=function(){return this.scrollElement.scrollWidth},e.prototype._resize=function(){this._native||this.contentResized()},e.prototype.setOptions=function(t){this._initOptions(t),t.pullToRefresh&&this._initPullToRefresh()},e.prototype.reset=function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},e.prototype.contentResized=function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},e.prototype.zoomOut=function(){var t=this.dimensions;t.refresh(),this._scale(t.fitScale),this.movable.moveTo(t.centerCoordinates())},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.scrollTo=function(t,e){this._native?(this.scrollElement.scrollLeft(NT(t)),this.scrollElement.scrollTop(NT(e))):(this.dimensions.refresh(),this.movable.moveTo({x:t,y:e}))},e.prototype.animatedScrollTo=function(t,e,i){var n,r;this._native?this.scrollTo(t,e):(n={x:this.movable.x,y:this.movable.y},r={x:t,y:e},this.animatedScroller.setCoordinates(n,r),this.animatedScroller.setCallback(i),this.animatedScroller.start())},e.prototype.pullHandled=function(){},e.prototype.destroy=function(){var t=this.element;aE(t,"DOMMouseScroll mousewheel",this._wheelScrollHandler),this.userEvents&&this.userEvents.destroy()},e.prototype._scale=function(t){this.dimensions.rescale(t),this.movable.scaleTo(t)},e.prototype._initPullToRefresh=function(){},e.prototype._dragEnd=function(){},e.prototype._paneChange=function(){},e.prototype._initAxis=function(t){var e=this,i=e.movable,n=e.dimensions[t],r=e.tapCapture,o=e.pane[t],s=new UT({axis:t,movable:i,dimension:n,container:e.element,alwaysVisible:e.options.visibleScrollHints});n.bind(jT,(function(){s.refresh()})),o.bind(jT,(function(){s.show()})),e[t+"inertia"]=new HT({axis:t,paneAxis:o,movable:i,tapCapture:r,userEvents:e.userEvents,dimension:n,elastic:e.options.elastic,friction:e.options.friction||.96,velocityMultiplier:e.options.velocityMultiplier||10,end:function(){s.hide(),e.trigger("scrollEnd",{axis:t,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}})},e}(yE);vl(qT,{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}}),pE(qT,["pull",FT,"resize"]);var $T=function(t,e){void 0===e&&(e={}),this.sender=e.sender||t,this.widget=t,this.rtl=Boolean(e.rtl)};$T.prototype.notify=function(t,e){this.widget&&this.widget.trigger(t,e)};const GT=$T;var KT=Math,XT=KT.min,YT=KT.pow,ZT=th,JT="marker",QT="DOMMouseScroll mousewheel",tA={bubble:QE,shape:ZE,tile:BE};function eA(t){var e=[];if(t)for(var i=ZC(t).split("-"),n=0;n<i.length;n++)e.push("k-pos-"+i[n]);return e.join(" ")}tA.marker=lT;var iA=function(t){function e(e,i,n,r){void 0===i&&(i={}),void 0===n&&(n={}),void 0===r&&(r={}),t.call(this),this._init(e,i,n,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.scroller.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),ms(this.markers)?this.markers.forEach((function(t){t.destroy()})):this.markers.destroy();for(var e=0;e<this.layers.length;e++)this.layers[e].destroy();aE(this.element,QT,this._mousewheelHandler),t.prototype.destroy.call(this)},e.prototype._init=function(t,e,i,n){void 0===e&&(e={}),void 0===i&&(i={}),void 0===n&&(n={}),this.support=iE(),this.context=n,this.initObserver(n),this.initServices(n),this._initOptions(e),this._setEvents(e),this.crs=new $C,this._initElement(t),this._viewOrigin=this._getOrigin(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheelHandler=this._mousewheel.bind(this),rE(this.element,QT,this._mousewheelHandler)},e.prototype._initOptions=function(t){this.options=As({},this.options,t)},e.prototype._initElement=function(t){this.element=t,gs(t,"k-map"),t.style.position="relative",t.setAttribute("data-role","map"),XC(t);var e=KC("<div />");this.element.appendChild(e)},e.prototype.initServices=function(t){void 0===t&&(t={}),this.widgetService=new GT(this,t)},e.prototype.initObserver=function(t){void 0===t&&(t={}),this.observers=[],this.addObserver(t.observer)},e.prototype.addObserver=function(t){t&&this.observers.push(t)},e.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},e.prototype.requiresHandlers=function(t){for(var e=this.observers,i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return!0},e.prototype.trigger=function(e,i){void 0===i&&(i={}),i.sender=this;for(var n=this.observers,r=!1,o=0;o<n.length;o++)n[o].trigger(e,i)&&(r=!0);return r||t.prototype.trigger.call(this,e,i),r},e.prototype._notifyObserver=function(t,e){void 0===e&&(e={}),e.sender=this;for(var i=this.observers,n=!1,r=0;r<i.length;r++)i[r].trigger(t,e)&&(n=!0);return n},e.prototype.zoom=function(t){var e,i=this.options;if(Qa(t)){var n=KT.round(al(t,i.minZoom,i.maxZoom));i.zoom!==n&&(i.zoom=n,this._reset()),e=this}else e=i.zoom;return e},e.prototype.center=function(t){var e;return t?(this.options.center=MC.create(t).toArray(),this._reset(),e=this):e=MC.create(this.options.center),e},e.prototype.extent=function(t){var e;return t?(this._setExtent(t),e=this):e=this._getExtent(),e},e.prototype.setOptions=function(t){void 0===t&&(t={});var e=this.element;this.destroy(),XC(e),this._init(e,t,{},this.context),this._reset()},e.prototype.locationToLayer=function(t,e){var i=!this.options.wraparound,n=MC.create(t);return this.crs.toPoint(n,this._layerSize(e),i)},e.prototype.layerToLocation=function(t,e){var i=!this.options.wraparound,n=ZT.create(t);return this.crs.toLocation(n,this._layerSize(e),i)},e.prototype.locationToView=function(t){var e=MC.create(t),i=this.locationToLayer(this._viewOrigin);return this.locationToLayer(e).translateWith(i.scale(-1))},e.prototype.viewToLocation=function(t,e){var i=this.locationToLayer(this._getOrigin(),e),n=ZT.create(t).clone().translateWith(i);return this.layerToLocation(n,e)},e.prototype.eventOffset=function(t){var e,i,n=el(this.element);if(t.x&&t.x.location||t.y&&t.y.location)e=t.x.location-n.left,i=t.y.location-n.top;else{var r=t.originalEvent||t;e=ul(r.pageX,r.clientX)-n.left,i=ul(r.pageY,r.clientY)-n.top}return new th(e,i)},e.prototype.eventToView=function(t){var e=this.eventOffset(t);return this.locationToView(this.viewToLocation(e))},e.prototype.eventToLayer=function(t){return this.locationToLayer(this.eventToLocation(t))},e.prototype.eventToLocation=function(t){var e=this.eventOffset(t);return this.viewToLocation(e)},e.prototype.viewSize=function(){var t=this.element,e=this._layerSize(),i=t.clientWidth;return this.options.wraparound||(i=XT(e,i)),{width:i,height:XT(e,t.clientHeight)}},e.prototype.exportVisual=function(){return this._reset(),!1},e.prototype._setOrigin=function(t,e){var i,n=this.viewSize(),r=this._origin=MC.create(t);return(i=this.locationToLayer(r,e)).x+=n.width/2,i.y+=n.height/2,this.options.center=this.layerToLocation(i,e).toArray(),this},e.prototype._getOrigin=function(t){var e,i=this.viewSize();return!t&&this._origin||((e=this.locationToLayer(this.center())).x-=i.width/2,e.y-=i.height/2,this._origin=this.layerToLocation(e)),this._origin},e.prototype._setExtent=function(t){var e=OE.create(t),i=e.se.clone();this.options.wraparound&&i.lng<0&&t.nw.lng>0&&(i.lng=180+(180+i.lng));var n=new OE(e.nw,i);this.center(n.center());var r,o=this.element.clientWidth,s=this.element.clientHeight;for(r=this.options.maxZoom;r>=this.options.minZoom;r--){var a=this.locationToLayer(n.nw,r),l=this.locationToLayer(n.se,r),h=KT.abs(l.x-a.x),c=KT.abs(l.y-a.y);if(h<=o&&c<=s)break}this.zoom(r)},e.prototype._getExtent=function(){var t=this._getOrigin(),e=this.locationToLayer(t),i=this.viewSize();e.x+=i.width,e.y+=i.height;var n=this.layerToLocation(e);return new OE(t,n)},e.prototype._zoomAround=function(t,e){this._setOrigin(this.layerToLocation(t,e),e),this.zoom(e)},e.prototype._initControls=function(){var t=this.options.controls;t.attribution&&this._createAttribution(t.attribution),this.support.mobileOS||(t.navigator&&this._createNavigator(t.navigator),t.zoom&&this._createZoomControl(t.zoom))},e.prototype._createControlElement=function(t,e){var i=t.position||e,n="."+eA(i).replace(" ","."),r=this.element.querySelector(".k-map-controls"+n)||[];if(0===r.length){var o=document.createElement("div");gs(o,"k-map-controls "+eA(i)),r=o,this.element.appendChild(r)}var s=document.createElement("div");return r.appendChild(s),s},e.prototype._createAttribution=function(t){var e=this._createControlElement(t,"bottomRight");this.attribution=new wE(e,t)},e.prototype._createNavigator=function(t){var e=this._createControlElement(t,"topLeft"),i=this.navigator=new kE(e,t);this._navigatorPan=this._navigatorPan.bind(this),i.bind("pan",this._navigatorPan),this._navigatorCenter=this._navigatorCenter.bind(this),i.bind("center",this._navigatorCenter)},e.prototype._navigatorPan=function(t){var e=this.scroller,i=e.scrollLeft+t.x,n=e.scrollTop-t.y,r=this._virtualSize,o=this.element.clientWidth,s=this.element.clientHeight;i=al(i,r.x.min,r.x.max-o),n=al(n,r.y.min,r.y.max-s),this.scroller.one("scroll",nE(this._scrollEnd,this)),this.scroller.scrollTo(-i,-n)},e.prototype._navigatorCenter=function(){this.center(this.options.center)},e.prototype._createZoomControl=function(t){var e=this._createControlElement(t,"topLeft"),i=this.zoomControl=new EE(e,t);this._zoomControlChange=this._zoomControlChange.bind(this),i.bind("change",this._zoomControlChange)},e.prototype._zoomControlChange=function(t){this.trigger("zoomStart",{originalEvent:t})||(this.zoom(this.zoom()+t.delta),this.trigger("zoomEnd",{originalEvent:t}))},e.prototype._initScroller=function(){var t=this.support.mobileOS?.93:.9,e=!1!==this.options.zoomable,i=this.scroller=new qT(this.element.children[0],{friction:t,velocityMultiplier:5,zoom:e,mousewheelScrolling:!1,supportDoubleTap:!0});i.bind("scroll",nE(this._scroll,this)),i.bind("scrollEnd",nE(this._scrollEnd,this)),i.userEvents.bind("gesturestart",nE(this._scaleStart,this)),i.userEvents.bind("gestureend",nE(this._scale,this)),i.userEvents.bind("doubleTap",nE(this._doubleTap,this)),i.userEvents.bind("tap",nE(this._tap,this)),this.scrollElement=i.scrollElement},e.prototype._initLayers=function(){for(var t=this.options.layers,e=this.layers=[],i=0;i<t.length;i++){var n=t[i],r=this._createLayer(n);e.push(r)}},e.prototype._createLayer=function(t){var e=t.type||"shape",i=this.options.layerDefaults[e],n=As({},e===JT?this.options.markerDefaults:i,t),r=new(0,tA[e])(this,n);return e===JT&&(this.markers=r),r},e.prototype._initMarkers=function(){(this.options.layers||[]).filter((function(t){return t&&t.type===JT})).length>0||(this.markers=new lT(this,this.options.markerDefaults),this.markers.add(this.options.markers))},e.prototype._scroll=function(t){var e=this.locationToLayer(this._viewOrigin).round(),i=t.sender.movable,n=new th(i.x,i.y).scale(-1).scale(1/i.scale);e.x+=n.x,e.y+=n.y,this._scrollOffset=n,this._setOrigin(this.layerToLocation(e)),this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},e.prototype._scrollEnd=function(t){this._scrollOffset&&this._panComplete()&&(this._scrollOffset=null,this._panEndTimestamp=uE(),this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()}))},e.prototype._panComplete=function(){return uE()-(this._panEndTimestamp||0)>50},e.prototype._scaleStart=function(t){if(this.trigger("zoomStart",{originalEvent:t})){var e=t.touches[1];e&&e.cancel()}},e.prototype._scale=function(t){var e=this.scroller.movable.scale,i=this._scaleToZoom(e),n=new th(t.center.x,t.center.y),r=this.viewToLocation(n,i),o=this.locationToLayer(r,i).translate(-n.x,-n.y);this._zoomAround(o,i),this.trigger("zoomEnd",{originalEvent:t})},e.prototype._scaleToZoom=function(t){var e=this._layerSize()*t/this.options.minSize,i=KT.log(e)/KT.log(2);return KT.round(i)},e.prototype._reset=function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.trigger("beforeReset"),this.trigger("reset")},e.prototype._resetScroller=function(){var t=this.scroller,e=t.dimensions.x,i=t.dimensions.y,n=this._layerSize(),r=this.extent().nw,o=this.locationToLayer(r).round();t.movable.round=!0,t.reset(),t.userEvents.cancel();var s=this.zoom();t.dimensions.forcedMinScale=YT(2,this.options.minZoom-s),t.dimensions.maxScale=YT(2,this.options.maxZoom-s);var a={min:-o.x,max:n-o.x},l={min:-o.y,max:n-o.y};if(this.options.wraparound&&(a.max=20*n,a.min=-a.max),!1===this.options.pannable){var h=this.viewSize();a.min=l.min=0,a.max=h.width,l.max=h.height}e.makeVirtual(),i.makeVirtual(),e.virtualSize(a.min,a.max),i.virtualSize(l.min,l.max),this._virtualSize={x:a,y:l}},e.prototype._renderLayers=function(){},e.prototype._layerSize=function(t){var e=ul(t,this.options.zoom);return this.options.minSize*YT(2,e)},e.prototype._tap=function(t){if(this._panComplete()){var e=this.eventOffset(t);this.trigger("click",{originalEvent:t,location:this.viewToLocation(e)})}},e.prototype._doubleTap=function(t){if(!1!==this.options.zoomable&&!this.trigger("zoomStart",{originalEvent:t})){var e=this.zoom()+1,i=this.eventOffset(t),n=this.viewToLocation(i),r=this.locationToLayer(n,e).translate(-i.x,-i.y);this._zoomAround(r,e),this.trigger("zoomEnd",{originalEvent:t})}},e.prototype._mousewheel=function(t){t.preventDefault();var e=ia(t)>0?-1:1,i=this.options,n=this.zoom(),r=al(n+e,i.minZoom,i.maxZoom);if(!1!==i.zoomable&&r!==n&&!this.trigger("zoomStart",{originalEvent:t})){var o=this.eventOffset(t),s=this.viewToLocation(o),a=this.locationToLayer(s,r).translate(-o.x,-o.y);this._zoomAround(a,r),this.trigger("zoomEnd",{originalEvent:t})}},e}(yE);vl(iA,{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0,renderPointsAsMarkers:!1}),pE(iA,["beforeReset","click","markerActivate","markerClick","markerCreated","markerMouseEnter","markerMouseLeave","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"]);const nA=iA;var rA=1.5,oA=.4,sA="#000",aA="Arial, Helvetica, sans-serif",lA="12px "+aA,hA="16px "+aA,cA="transparent",pA="#fff",uA=function(){return{icon:{border:{width:1}},label:{font:lA,padding:3},line:{length:10,width:2},visible:!0}},dA=function(){return{outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:pA,gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2}}},fA=function(){return{gap:rA,spacing:oA,target:{color:"#ff0000"}}},vA=function(){return{gap:.5,line:{color:sA,width:1},spacing:oA}},mA=function(t){return{visible:!0,labels:{font:"11px Arial, Helvetica, sans-serif"},overlay:t.gradients?{}:{gradient:"none"},area:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},rangeArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},verticalRangeArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},bar:{gap:rA,spacing:oA},boxPlot:dA(),bubble:{border:{width:0},labels:{background:cA},opacity:.6},bullet:fA(),candlestick:{border:{_brightness:.8,width:1},downColor:pA,gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:sA,width:1},spacing:.3},column:{gap:rA,spacing:oA},heatmap:{labels:{color:"",background:cA,visible:!0},highlight:{border:{width:0}}},pie:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}},donut:{margin:1},funnel:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}},horizontalWaterfall:vA(),line:{width:2},notes:uA(),ohlc:{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},spacing:.3},radarArea:{line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.5},radarLine:{markers:{visible:!1},width:2},polarArea:{line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.5},polarLine:{markers:{visible:!1},width:2},rangeBar:{gap:rA,spacing:oA},rangeColumn:{gap:rA,spacing:oA},scatterLine:{width:1},verticalArea:{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},opacity:.4},verticalBoxPlot:dA(),verticalBullet:fA(),verticalLine:{width:2},waterfall:vA()}},gA=function(t){return void 0===t&&(t={}),{axisDefaults:{labels:{font:lA},notes:uA(),title:{font:hA,margin:5}},categoryAxis:{majorGridLines:{visible:!0}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:mA(t),title:{font:hA},legend:{labels:{font:lA}}}};class yA{constructor(){!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"store",{})}push(t){this.store=t}set(t,e){for(var i=this.store,n=t.split("."),r=n.shift();n.length>0;)i=i[r]=i[r]||{},r=n.shift();i[r]=e}}function bA(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var wA=t=>"".concat(t.fontSize," ").concat(t.fontFamily);class xA extends yA{constructor(){super(...arguments),bA(this,"loaded",!1),bA(this,"element",null),bA(this,"currentAccentColor",void 0)}reset(){this.loaded=!1}getThemeOptions(){return this.store}loadTheme(){this.readTheme()||this.readDefaultTheme(),this.loaded=!0}readTheme(){this.createElement();var t=this.queryColor("accent"),e=this.queryColor("accent-contrast");if(this.loaded&&this.currentAccentColor&&this.currentAccentColor===t)return!0;var i=t!==e;try{i&&(this.currentAccentColor=t,this.push(gA()),this.setColors(),this.setFonts(),this.setSeriesColors())}finally{this.destroyElement()}return i}readDefaultTheme(){this.push(Object.assign({},gA(),{axisDefaults:{crosshair:{color:"rgba(0, 0, 0, 0.5)"},labels:{color:"rgb(101, 101, 101)",font:"12px serif"},line:{color:"rgba(0, 0, 0, 0.08)"},majorGridLines:{color:"rgba(0, 0, 0, 0.08)"},minorGridLines:{color:"rgba(0, 0, 0, 0.04)"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},title:{color:"rgb(101, 101, 101)",font:"14px serif"}},chartArea:{background:"rgb(255, 255, 255)"},legend:{inactiveItems:{labels:{color:"rgba(102, 102, 102, 0.5)"},markers:{color:"rgba(102, 102, 102, 0.5)"}},labels:{color:"rgb(101, 101, 101)",font:"14px serif"}},seriesDefaults:{boxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},bullet:{target:{color:"rgb(101, 101, 101)"}},candlestick:{downColor:"rgb(101, 101, 101)",line:{color:"rgb(101, 101, 101)"}},errorBars:{color:"rgba(0, 0, 0, 0.5)"},horizontalWaterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},icon:{border:{color:"rgba(0, 0, 0, 0.08)"}},labels:{background:"rgb(255, 255, 255)",color:"rgb(101, 101, 101)",opacity:.8,font:"12px serif"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},verticalBoxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},verticalBullet:{target:{color:"rgb(101, 101, 101)"}},waterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},area:{opacity:.8}},title:{color:"rgb(101, 101, 101)",font:"16px serif"},seriesColors:["rgb(255, 99, 88)","rgb(255, 210, 70)","rgb(120, 210, 55)","rgb(40, 180, 200)","rgb(45, 115, 245)","rgb(170, 70, 190)"]}))}createElement(){var t=this.element=document.createElement("div");t.style.display="none",t.innerHTML='\n    <div class="k-var--accent"></div>\n    <div class="k-var--accent-contrast"></div>\n    <div class="k-var--base"></div>\n    <div class="k-var--background"></div>\n\n    <div class="k-var--normal-background"></div>\n    <div class="k-var--normal-text-color"></div>\n    <div class="k-var--hover-background"></div>\n    <div class="k-var--hover-text-color"></div>\n    <div class="k-var--selected-background"></div>\n    <div class="k-var--selected-text-color"></div>\n    <div class="k-var--chart-error-bars-background"></div>\n    <div class="k-var--chart-notes-background"></div>\n    <div class="k-var--chart-notes-border"></div>\n    <div class="k-var--chart-notes-lines"></div>\n    <div class="k-var--chart-crosshair-background"></div>\n\n    <div class="k-var--chart-inactive"></div>\n    <div class="k-var--chart-major-lines"></div>\n    <div class="k-var--chart-minor-lines"></div>\n    <div class="k-var--chart-area-opacity"></div>\n\n    <div>\n        <div class="k-var--chart-font"></div>\n        <div class="k-var--chart-title-font"></div>\n        <div class="k-var--chart-label-font"></div>\n    </div>\n\n    <div class="k-var--series">\n      <div class="k-var--series-a"></div>\n      <div class="k-var--series-b"></div>\n      <div class="k-var--series-c"></div>\n      <div class="k-var--series-d"></div>\n      <div class="k-var--series-e"></div>\n      <div class="k-var--series-f"></div>\n    </div>\n',document.body.appendChild(t)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}setStyle(t,e){this.set(t,e)}setColors(){this.mapColor("axisDefaults.crosshair.color","chart-crosshair-background"),this.mapColor("axisDefaults.labels.color","normal-text-color"),this.mapColor("axisDefaults.line.color","chart-major-lines"),this.mapColor("axisDefaults.majorGridLines.color","chart-major-lines"),this.mapColor("axisDefaults.minorGridLines.color","chart-minor-lines"),this.mapColor("axisDefaults.notes.icon.background","chart-notes-background"),this.mapColor("axisDefaults.notes.icon.border.color","chart-notes-border"),this.mapColor("axisDefaults.notes.line.color","chart-notes-lines"),this.mapColor("axisDefaults.title.color","normal-text-color"),this.mapColor("chartArea.background","background"),this.mapColor("legend.inactiveItems.labels.color","chart-inactive"),this.mapColor("legend.inactiveItems.markers.color","chart-inactive"),this.mapColor("legend.labels.color","normal-text-color"),this.mapColor("seriesDefaults.boxPlot.downColor","chart-major-lines"),this.mapColor("seriesDefaults.boxPlot.mean.color","base"),this.mapColor("seriesDefaults.boxPlot.median.color","base"),this.mapColor("seriesDefaults.boxPlot.whiskers.color","accent"),this.mapColor("seriesDefaults.bullet.target.color","normal-text-color"),this.mapColor("seriesDefaults.candlestick.downColor","normal-text-color"),this.mapColor("seriesDefaults.candlestick.line.color","normal-text-color"),this.mapColor("seriesDefaults.errorBars.color","chart-error-bars-background"),this.mapColor("seriesDefaults.horizontalWaterfall.line.color","chart-major-lines"),this.mapColor("seriesDefaults.icon.border.color","chart-major-lines"),this.mapColor("seriesDefaults.labels.background","background"),this.mapColor("seriesDefaults.labels.color","normal-text-color"),this.mapColor("seriesDefaults.notes.icon.background","chart-notes-background"),this.mapColor("seriesDefaults.notes.icon.border.color","chart-notes-border"),this.mapColor("seriesDefaults.notes.line.color","chart-notes-lines"),this.mapColor("seriesDefaults.verticalBoxPlot.downColor","chart-major-lines"),this.mapColor("seriesDefaults.verticalBoxPlot.mean.color","base"),this.mapColor("seriesDefaults.verticalBoxPlot.median.color","base"),this.mapColor("seriesDefaults.verticalBoxPlot.whiskers.color","accent"),this.mapColor("seriesDefaults.verticalBullet.target.color","normal-text-color"),this.mapColor("seriesDefaults.waterfall.line.color","chart-major-lines"),this.mapColor("title.color","normal-text-color");var t=parseFloat(this.queryStyle("chart-area-opacity").opacity);isNaN(t)||(this.setStyle("seriesDefaults.area.opacity",t),this.setStyle("seriesDefaults.labels.opacity",t))}setFonts(){var t=wA(this.queryStyle("chart-font")),e=wA(this.queryStyle("chart-title-font")),i=wA(this.queryStyle("chart-label-font"));this.setStyle("axisDefaults.labels.font",i),this.setStyle("axisDefaults.notes.label.font",t),this.setStyle("axisDefaults.title.font",t),this.setStyle("legend.labels.font",t),this.setStyle("seriesDefaults.labels.font",i),this.setStyle("seriesDefaults.notes.label.font",t),this.setStyle("title.font",e)}setSeriesColors(){var t=this.element,e=[].slice.call(t.querySelectorAll(".k-var--series div")).reduce(((t,e)=>(t[(t=>t.match(/series-([a-z])$/)[1].toLowerCase().charCodeAt(0)-"a".charCodeAt(0))(e.className)]=window.getComputedStyle(e).backgroundColor,t)),[]);this.setStyle("seriesColors",e)}mapColor(t,e){this.setStyle(t,this.queryColor(e))}queryColor(t){return this.queryStyle(t).backgroundColor}queryStyle(t){var e=this.element;return window.getComputedStyle(e.querySelector(".k-var--".concat(t)))}}class _A extends F{constructor(t,e,i,n){super(t,e),this.extendOptions(e),this.themeService=i,this.intlService=n}destroy(){this.destroyWidget()}getThemeOptions(){return this.themeService?(this.themeService.loadTheme(),this.themeService.getThemeOptions()):{}}initWidget(){this.widget=this.createWidget(this.element,this.options,this.getThemeOptions(),this.intlService,this.instanceObserver)}destroyWidget(){this.widget&&(this.widget.destroy(),this.widget=null)}createWidget(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return new(this.getWidgetConstructor())(t,e,i,{intlService:n,observer:r,sender:this})}getWidgetConstructor(){}setOptions(t){this.widget&&(this.options=t,this.widget.setOptions(t,this.getThemeOptions()))}refresh(){this.themeService&&this.themeService.reset(),this.setOptions(this.options)}}function kA(t){var{id:e="",widgetOptions:i="",componentOptions:n={},services:r={themeService:{},intlService:{}},componentConstructor:o}=t,s=q(e);if(s){var a=JSON.parse(i),l=Ut(e),h=u(a,n);if(l)Ht(l,h);else r.intlService&&(h.locale=h.locale||{},h.locale.name=e,r.intlService.setLocale(h.locale)),qt(e,new o(s,h,r.themeService,r.intlService))}}class SA extends _A{constructor(t,e,i,n){super(t,e,i,n),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return dS}}function CA(t,e,i){kA({id:t,widgetOptions:e,componentOptions:i,services:{themeService:new xA,intlService:Io},componentConstructor:SA})}class EA extends _A{constructor(t,e,i,n){super(t,e,i,n),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return bC}}function TA(t,e,i){kA({id:t,widgetOptions:e,componentOptions:i,services:{themeService:new xA,intlService:Io},componentConstructor:EA})}var AA=D("index");class MA extends F{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,mode:"",debounceDelay:1}),this.extendOptions(e),this.collapsibleItems=[],this.setCollapsibleItems(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.debouncedResize=wi((t=>{this.onResize(t)}),this.options.debounceDelay).bind(this),window.addEventListener("resize",this.debouncedResize)}unbindEvents(){window.removeEventListener("resize",this.debouncedResize),this.debouncedResize=null}getItems(){return Array.from(this.element.querySelector(".k-breadcrumb-container").children)}setCollapsibleItems(){var t=this.getItems(),e=t.slice(1,t.length-1).map((t=>{var e=z(AA,t);return{index:e,offsetWidth:this.getItemWidth(e),expanded:!0}}));this.collapsibleItems=e}setItemDisplay(t,e){var i=this.getItemByIndex(t.index),n="wrap"===this.options.mode?2:1;if(t.index===n)for(var r=i.children,o=1;o<r.length;o++)r[o].style.display=e;else i.style.display=e}getWidths(){return{totalItemsWidth:this.getItems().map((t=>t.offsetWidth)).reduce(((t,e)=>t+e),0),elementOffsetWidth:this.element.offsetWidth}}getItemWidth(t){return this.getItemByIndex(t).offsetWidth}getItemByIndex(t){return this.element.querySelector(R(AA,t))}collapseItem(t){this.setItemDisplay(t,"none"),t.expanded=!1}expandItem(t){this.setItemDisplay(t,""),t.expanded=!0}onResize(){if("auto"===this.options.mode&&this.collapsibleItems.length){var{totalItemsWidth:t,elementOffsetWidth:e}=this.getWidths(),i=this.collapsibleItems.find((t=>t.expanded)),n=[...this.collapsibleItems].reverse().find((t=>!t.expanded));i&&t>=e?(this.collapseItem(i),this.onResize()):n&&t+n.offsetWidth<e&&(this.expandItem(n),this.onResize())}}handleChange(t){t&&(this.setCollapsibleItems(),this.collapsibleItems.forEach((t=>this.expandItem(t)))),this.onResize()}}function OA(t,e){Ft(MA,t,e)}class DA extends Zs{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"handlerMap",{showTooltip:"onObserverShowTooltip",hideTooltip:"onObserverHideTooltip",seriesClick:"onObserverSeriesClick"})}}function PA(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function RA(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?PA(Object(i),!0).forEach((function(e){IA(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):PA(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function IA(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var zA="mouseleave";class LA extends F{constructor(t,e,i,n){super(t,e),IA(this,"options",{seriesTooltipPopupId:"",crosshairTooltips:{},jsinterop:{onObserverShowCrosshairTooltip:"",onObserverShowTooltip:"",onObserverSeriesClick:""}}),IA(this,"onMouseLeave",(t=>{this.hideElements(t)})),IA(this,"onObserverShowTooltip",(t=>{this.showTooltip(t)})),IA(this,"onObserverHideTooltip",(t=>{this.hideTooltip(t)})),IA(this,"onObserverSeriesClick",(t=>{var e=this.createSeriesClickEventArgs(t);this.invokeSeriesClickAsync(e)})),this.extendOptions(e),this.themeService=i,this.createInstanceObserver(),this.chartInstance=this.createChart(this.element,this.options,this.getThemeOptions(),n,this.chartInstanceObserver),this.bindEvents()}destroy(){this.unbindEvents(),this.destroyInstanceObserver(),this.chartInstance&&(this.chartInstance.destroy(),this.chartInstance=null)}bindEvents(){this.element.addEventListener(zA,this.onMouseLeave)}unbindEvents(){this.element.removeEventListener(zA,this.onMouseLeave)}getThemeOptions(){return this.themeService.loadTheme(),this.themeService.getThemeOptions()}createChart(t,e,i,n,r){return new(this.getChartConstructor())(t,e,i,{intlService:n,observer:r,sender:this})}getChartConstructor(){return Nx}setOptions(t){this.chartInstance&&(this.options=t,this.chartInstance.setOptions(t,this.getThemeOptions()))}refresh(){this.themeService.reset(),this.setOptions(this.options)}createInstanceObserver(){this.chartInstanceObserver=new DA(this)}destroyInstanceObserver(){this.chartInstanceObserver=null}trigger(){}requiresHandlers(){return!1}invokeShowCrosshairTooltipAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShowCrosshairTooltip,t)}invokeShowSeriesTooltipAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShowTooltip,t)}invokeSeriesClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverSeriesClick,t)}showTooltip(t){t.crosshair?this.showCrosshairTooltip(t):this.showSeriesTooltip(t)}hideTooltip(t){t.crosshair?this.hideCrosshairTooltip(t):this.hideSeriesTooltip(t)}showCrosshairTooltip(t){var e=this.getCrosshairTooltipPopup(t);if(e){e.options.elementAlign={horizontal:"center",vertical:"center"},this.setTooltipPosition(t.anchor,e);var i=this.getCrosshairTooltipTemplateContext(t);this.invokeShowCrosshairTooltipAsync(i)}}hideCrosshairTooltip(t){var e=this.getCrosshairTooltipPopup(t);e&&e.close()}showSeriesTooltip(t){var e=this.getSeriesTooltipPopup();this.setTooltipPosition(t.anchor,e);var i=this.getSeriesTooltipTemplateContext(t);this.invokeShowSeriesTooltipAsync(i)}hideSeriesTooltip(){var t=this.getSeriesTooltipPopup();t&&t.close()}getTooltipAnchorRect(t){var e=this.getTooltipAnchorOffset(t);return{x:0,y:0,width:0,height:0,top:e.top,left:e.left,right:e.right,bottom:e.bottom}}getTooltipAnchorOffset(t){return t?t.point:{top:0,left:0}}getCrosshairTooltipPopup(t){var e=this.getCrosshairAxisKey(t),i=this.getCrosshairTooltip(e);if(i)return Ut(i.popupId)}getSeriesTooltipPopup(){return Ut(this.options.seriesTooltipPopupId)}setTooltipPosition(t,e){if(e&&t){var i=this.getTooltipAnchorRect(t);e.options.anchorAlign=t.align,e.options.anchorRect=i,e.positionElement()}}getCrosshairTooltipTemplateContext(t){var e=((t.options||{}).tooltip||{}).format||t.format,i=t.point,n={formattedValue:e&&i&&i.formatValue?i.formatValue(e):String(t.value),axisKey:this.getCrosshairAxisKey(t)};return this.extendWithTooltipStyling(n,t)}getCrosshairAxisKey(t){var{axisName:e,axisIndex:i}=t;return"".concat(e).concat(i)}getCrosshairTooltip(t){var e=this.options.crosshairTooltips;return e?e[t]:{}}getSeriesTooltipTemplateContext(t){if(t.shared)return this.getSeriesTooltipSharedTemplateContext(t);var e=RA({},this.createSeriesTooltipTemplatePoint(t.point,t.format));return this.extendWithTooltipStyling(e,t)}getSeriesTooltipSharedTemplateContext(t){var e=t.points.filter((t=>b(t.series.name))).length>0,i=t.series.length>1,n=1;e&&n++,i&&n++;var r=this.createTooltipTemplatePoints(t),o={category:t.category,categoryText:t.categoryText,points:r,showSeriesColorMarker:i,showSeriesName:e,headerColumnColSpan:n};return this.extendWithTooltipStyling(o,t)}createTooltipTemplatePoints(t){return t.points?t.points.map((e=>this.createSeriesTooltipTemplatePoint(e,t.format))):[]}createSeriesTooltipTemplatePoint(t,e){var i=this.convertToSeriesPoint(t),n=((t.options||{}).tooltip||{}).format||e;return RA(RA({},i),{},{formattedValue:n&&t.formatValue?t.formatValue(n):String(t.value)})}hideElements(t){var e=t.relatedTarget,i=e&&Boolean(e.closest(".k-chart-tooltip")),n=V(this.element,e);e&&(i||n)||this.chartInstance.hideElements()}createSeriesClickEventArgs(t){return this.convertToSeriesPoint(t.point)}convertToSeriesPoint(t){var e,i=d(t.dataItem)?Object.getPrototypeOf(t.dataItem):null;return d(t.dataItem)&&i&&i!==Object.prototype&&(e=u({},i,t.dataItem)),{dataItem:e,category:t.category,categoryIndex:t.categoryIx,seriesIndex:t.series.index,seriesColor:t.series.color,seriesName:t.series.name||"",percentage:t.percentage,pointIndex:t.pointIx||t.index}}extendWithTooltipStyling(t,e){return u(t,{tooltipStyle:T(e.style),tooltipClass:e.className||""})}}var BA={autoBindElements:!0,liveDrag:!1,partialRedraw:!0,tooltip:{visible:!1},seriesDefaults:{tooltip:{visible:!1}}};class NA extends LA{getChartConstructor(){return n_}extendOptions(t){this.applyNavigatorDefaults(t),super.extendOptions(t)}setOptions(t){this.applyNavigatorDefaults(t);var e=this.getThemeOptions();this.chartInstance.applyOptions(t,e),super.setOptions(t)}applyNavigatorDefaults(t){m(t.navigator,BA)}}i(840);var jA=t=>({x:{location:t.pageX},y:{location:t.pageY}});function FA(t,e){for(var i=0;i<t.length;i++)if(e[t[i]])return!0;return!1}var VA=[{end:"panend",move:"panmove",start:"panstart"},{gesturechange:"pinchmove",gestureend:"pinchend",gesturestart:"pinchstart"},{press:"press"},{tap:"tap"}];class HA{constructor(t,e){this.hammerInstance=t,this.eventHandlers={},this.tap=this.tap.bind(this),this.press=this.press.bind(this),this.panstart=this.panstart.bind(this),this.panmove=this.panmove.bind(this),this.panend=this.panend.bind(this),this.pinchstart=this.pinchstart.bind(this),this.pinchmove=this.pinchmove.bind(this),this.pinchend=this.pinchend.bind(this),e&&this.bind(e)}tap(t){this.trigger("tap",t)}press(t){this.trigger("press",t)}panstart(t){delete this.previous,this.previous=this.trigger("start",t)}panmove(t){this.previous=this.trigger("move",t)}panend(t){this.trigger("end",t),delete this.previous}pinchstart(t){this.trigger("gesturestart",t)}pinchmove(t){this.trigger("gesturechange",t)}pinchend(t){this.trigger("gestureend",t)}trigger(t,e){var i=((t,e)=>{var i=t.pointers,n=i[0],r=n.pageX,o=n.pageY,s=0;if(i.length>1){var a=i[0],l=i[1];s=Math.sqrt(Math.pow(a.pageX-l.pageX,2)+Math.pow(a.pageY-l.pageY,2))}return{distance:s,event:t.srcEvent,preventDefault:function(){t.preventDefault()},target:t.target,touches:i.map(jA),type:t.type,x:{delta:e?r-e.x.location:0,initialDelta:t.deltaX,location:r,startLocation:r-t.deltaX},y:{delta:e?o-e.y.location:0,initialDelta:t.deltaY,location:o,startLocation:o-t.deltaY}}})(e,this.previous);return this.eventHandlers[t]&&this.eventHandlers[t](i),i}bind(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.unbind(),this.eventHandlers=t;for(var e=0;e<VA.length;e++){var i=VA[e],n=Object.keys(i);if(FA(n,t))for(var r=0;r<n.length;r++){var o=i[n[r]];this.hammerInstance.on(o,this[o])}}}unbind(){this.hammerInstance&&this.hammerInstance.off(),this.eventHandlers={}}destroy(){this.hammerInstance&&(this.hammerInstance.destroy(),delete this.hammerInstance),delete this.eventHandlers}toggleDrag(t){this.toggle("pan",t)}toggleZoom(t){this.toggle("pinch",t)}toggle(t,e){this.hammerInstance&&this.hammerInstance.get(t).set({enable:e})}}function WA(t,e,i){var n=q(t);if(n){var r=JSON.parse(e),o=Ut(t),s=u(r,i);if(o)Ht(o,s);else{s.locale.name=t,Io.setLocale(s.locale);var a=function(t,e,i,n){return new("stockchart"===e._constructor?NA:LA)(t,e,i,n)}(n,s,new xA,Io);qt(t,a)}}}function UA(t){Vt(t)}function qA(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Bs.register(Vo),zp.register(class{static create(t,e){var i=window.Hammer,n=new i(t,{recognizers:[[i.Tap],[i.Pan],[i.Pinch],[i.Press,{time:0}]]});return new HA(n,e)}});var $A=[ee.ARROWDOWN,ee.ARROWRIGHT,ee.ARROWLEFT,ee.ARROWUP,ee.ENTER];class GA extends F{constructor(t,e){super(t,e),qA(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",blur:""}}),qA(this,"onKeyDown",(t=>(this.invokeMethodAsync(this.options.jsinterop.keydown,t.name),t.name===ee.ENTER))),qA(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),this.extendOptions(e),this.initNavigationService(),this.bindEvents()}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("blur",this.invokeBlur)}unbindEvents(){this.element.removeEventListener("blur",this.invokeBlur)}initNavigationService(){this.navigationService=new oe(this.element),this.navigationService.bind($A,this.onKeyDown)}focus(){setTimeout((()=>{this.element.focus()}),100)}}function KA(t,e){Ft(GA,t,e)}function XA(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class YA extends F{constructor(t,e){super(t,e),XA(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",blur:""}}),XA(this,"closePopup",(()=>(this.element.focus(),this.invokeMethodAsync(this.options.jsinterop.close),!1))),XA(this,"openPopup",(()=>(this.invokeMethodAsync(this.options.jsinterop.open),!1))),this.popupElement=q(e.popupId),this.extendOptions(e),this.initNavigationService(),this.initPopupNavigationService()}destroy(){this.navigationService.destroy(),this.popupNavigationService.destroy(),super.destroy()}initNavigationService(){this.navigationService=new oe(this.element),this.navigationService.bind("".concat(ie.ALT," ").concat(ee.ARROWDOWN),this.openPopup),this.navigationService.bind("".concat(ie.ALT," ").concat(ee.ARROWUP),this.closePopup)}initPopupNavigationService(){this.popupNavigationService=new oe(this.popupElement),this.popupNavigationService.bind([ee.ESC,"".concat(ie.ALT," ").concat(ee.ARROWUP)],this.closePopup)}}function ZA(t,e){Ft(YA,t,e)}function JA(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var QA=[ee.ARROWUP,ee.ARROWDOWN,ee.ARROWLEFT,ee.ARROWRIGHT];class tM extends F{constructor(t,e){super(t,e),JA(this,"onDrag",(t=>{this.moveDragHandleFromEvent(t),this.throttleChangeValue()})),JA(this,"onDragEnd",(()=>{this.changeValue(),this.dragHandle.focus()})),JA(this,"onNavigate",(t=>{var e=L("top",this.dragHandle),i=L("left",this.dragHandle);switch(t.name){case ee.ARROWDOWN:e+=4;break;case ee.ARROWUP:e-=4;break;case ee.ARROWRIGHT:i+=4;break;case ee.ARROWLEFT:i-=4}this.moveDragHandle(e,i),this.changeValue()})),JA(this,"onClick",(t=>{this.moveDragHandleFromEvent(t),this.dragHandle.focus(),this.changeValue()})),this.gradient=this.element.querySelector(".k-hsv-rectangle"),this.dragHandle=this.element.querySelector(".k-draghandle"),this.setOptions(e),this.initDraggable(),this.bindEvents(),this.throttleChangeValue=xi(this.changeValue,150).bind(this)}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.gradient.addEventListener("click",this.onClick),this.initNavigationService()}unbindEvents(){this.gradient.removeEventListener("click",this.onClick)}setOptions(t){super.setOptions(t),this.hsva=this.options.hsva,this.initDragHandlePosition()}initNavigationService(){this.navigationService=new oe(this.dragHandle),this.navigationService.bind(QA,this.onNavigate)}initDraggable(){this.draggable=new ni(this.element,{filter:".k-hsv-gradient",offsetDropClue:!1,events:{drag:this.onDrag,dragEnd:this.onDragEnd}})}initDragHandlePosition(){var t=(1-this.hsva.v)*this.gradient.offsetHeight,e=this.hsva.s*this.gradient.offsetWidth;this.dragHandle.style.display="block",this.setDragHandlePosition(t,e)}setDragHandlePosition(t,e){this.dragHandle&&(this.dragHandle.style.top="".concat(t,"px"),this.dragHandle.style.left="".concat(e,"px"))}moveDragHandleFromEvent(t){var e=this.gradient.getBoundingClientRect();this.moveDragHandle(t.clientY-e.top,t.clientX-e.left)}moveDragHandle(t,e){var i=Zt(t,0,this.gradient.offsetHeight),n=Zt(e,0,this.gradient.offsetWidth);this.setDragHandlePosition(i,n),this.hsva.s=n/this.gradient.offsetWidth,this.hsva.v=1-i/this.gradient.offsetHeight}changeValue(){this.invokeMethodAsync(this.options.jsinterop.changeValue,this.hsva)}}function eM(t,e){Ft(tM,t,e)}function iM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class nM extends F{constructor(t,e){super(t,e),iM(this,"options",{dotNetInstance:null,jsinterop:{change:""}}),iM(this,"onKeyDown",((t,e)=>{this.isEnterKeyActionable(e.target)||this.invokeMethodAsync(this.options.jsinterop.change)})),iM(this,"onFocusOut",(t=>{V(this.element,t.relatedTarget)||this.invokeChange()})),iM(this,"invokeChange",(()=>{this.invokeMethodAsync(this.options.jsinterop.change)})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}bindEvents(){this.element.addEventListener("focusout",this.onFocusOut)}unbindEvents(){this.element.removeEventListener("focusout",this.onFocusOut)}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}initNavigationService(){this.navigationService=new oe(this.element),this.navigationService.bind("".concat(ee.ENTER),this.onKeyDown)}isEnterKeyActionable(t){return!(!t.matches(".k-button")&&t.querySelector(".k-state-selected.k-state-focus"))}}function rM(t,e){Ft(nM,t,e)}function oM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var sM="keydown";class aM extends F{constructor(t,e){super(t,e),oM(this,"options",{dotNetInstance:null,itemListDataId:"",jsinterop:{itemListKeyDown:""}}),oM(this,"onKeyDown",(t=>{var e=[ee.ARROWRIGHT,ee.ARROWLEFT,ee.ARROWUP,ee.ARROWDOWN].includes(t.key);if(t.key===ee.TAB){var i=t.target.closest(".k-columnmenu-item-wrapper"),n=i?i.querySelector(".k-columnmenu-item"):null,r="true"===(n?n.getAttribute("aria-expanded"):"");(!r||r&&t.target===n&&t.shiftKey)&&t.preventDefault()}else e&&Y("k-columnmenu-item",t.target)&&t.preventDefault()})),oM(this,"onItemListKeyDown",(t=>{var e=ot(t.target),i=t.target.closest(".k-filter-menu");if(!e||!i||t.key!==ee.ARROWUP&&t.key!==ee.ARROWDOWN||t.shiftKey){var n=M(t);this.invokeMethodAsync(this.options.jsinterop.itemListKeyDown,n)}})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){var t=this.getItemListElement();t&&t.addEventListener(sM,this.onItemListKeyDown),this.element.addEventListener(sM,this.onKeyDown)}unbindEvents(){var t=this.getItemListElement();t&&t.removeEventListener(sM,this.onItemListKeyDown),this.element.removeEventListener(sM,this.onKeyDown)}getItemListElement(){return q(this.options.itemListDataId)}}function lM(t,e){Ft(aM,t,e)}function hM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class cM extends F{constructor(t,e){super(t,e),hM(this,"options",{selector:"",popupId:""}),hM(this,"onContextMenu",(t=>{t.preventDefault(),this.activeElement=t.target,this.openPopup(t.pageX,t.pageY)})),hM(this,"onPopupKeyDown",(t=>{t.key===ee.ESC&&(this.closePopup(),this.activeElement.focus())})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.anchors=null}bindEvents(){this.anchors=document.querySelectorAll(this.options.selector),this.anchors.forEach((t=>{t.addEventListener("contextmenu",this.onContextMenu)})),q(this.options.popupId).addEventListener("keydown",this.onPopupKeyDown)}unbindEvents(){this.anchors.forEach((t=>{t.removeEventListener("contextmenu",this.onContextMenu)}))}openContextMenu(t){var e=t.clientX+window.scrollX,i=t.clientY+window.scrollY;this.openPopup(e,i)}focusFirstMenuItem(){var t=this.getPopup();if(t){var e=t.element.querySelector(".k-context-menu .k-item");e&&e.focus()}}openPopup(t,e){var i=this.getPopup();i.openAsync(null,t,e),this.activeElement&&i.setZIndex(this.activeElement)}closePopup(){this.getPopup().closeAsync()}getPopup(){return Ut(this.options.popupId)}}function pM(t,e){Ut(t)||qt(t,new cM(null,e))}var uM,dM=function(t){return t?new Date(t.getTime()):null},fM=function(t,e){var i=dM(t);return 0===e&&23===i.getHours()&&i.setHours(i.getHours()+2),i},vM=function(t,e,i,n,r,o,s){void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0);var a=new Date(t,e,i,n,r,o,s);return t>-1&&t<100&&a.setFullYear(a.getFullYear()-1900),fM(a,n)},mM=function(t){return function(t,e){var i=dM(t);return i.setDate(i.getDate()+e),fM(i,t.getHours())}(vM(t.getFullYear(),t.getMonth()+1,1,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),-1)},gM=function(t,e){var i=dM(t),n=(12+(i.getMonth()+e)%12)%12;return i.setMonth(i.getMonth()+e),function(t,e){return t.getMonth()!==e?mM(gM(t,-1)):t}(fM(i,t.getHours()),n)};!function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"}(uM||(uM={}));var yM;!function(t){t[t.Sunday=0]="Sunday",t[t.Monday=1]="Monday",t[t.Tuesday=2]="Tuesday",t[t.Wednesday=3]="Wednesday",t[t.Thursday=4]="Thursday",t[t.Friday=5]="Friday",t[t.Saturday=6]="Saturday"}(yM||(yM={}));var bM=function(t){return vM(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0)};function wM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class xM{constructor(){wM(this,"symbols",""),wM(this,"partMap",void 0)}}var _M=(t,e)=>(t[e.pattern[0]]=e.type,t);function kM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class SM{get value(){return this._value}constructor(t,e,i,n,r){kM(this,"year",!0),kM(this,"month",!0),kM(this,"date",!0),kM(this,"hours",!0),kM(this,"minutes",!0),kM(this,"seconds",!0),kM(this,"milliseconds",!0),kM(this,"formatPlaceholder",void 0),kM(this,"format",void 0),kM(this,"leadingZero",null),kM(this,"monthNames",[]),kM(this,"typedMonthPart",""),kM(this,"knownParts","adHhmMsEy"),kM(this,"symbols",{E:"E",H:"H",M:"M",a:"a",d:"d",h:"h",m:"m",s:"s",y:"y"}),kM(this,"_value",bM(new Date)),this.intl=t,this.formatPlaceholder=e||"wide",this.format=i,this.localeId=n||"en",this.cycleTime=r,this.monthNames=this.allFormatedMonths(this.localeId)}setValue(t){var e,i;t?(e=t,i=this._value,!e&&!i||e&&i&&e.getTime()===i.getTime()||(this._value=dM(t),this.modifyExisting(!0))):(this._value=bM(new Date),this.modifyExisting(!1))}hasValue(){return this.intl.splitDateFormat(this.format,this.localeId).reduce(((t,e)=>t||"literal"!==e.type&&"dayperiod"!==e.type&&this.getExisting(e.pattern[0])),!1)}getDateObject(){for(var t=0;t<this.knownParts.length;t++)if(!this.getExisting(this.knownParts[t]))return null;return dM(this.value)}getFormattedDate(t){return this.intl.formatDate(this.getDateObject(),t,this.localeId)}getTextAndFormat(){var t=this.intl.formatDate(this.value,this.format,this.localeId),e=this.dateFormatString(this.value,this.format);return this.merge(t,e)}modifyExisting(t){for(var e=this.dateFormatString(this.value,this.format).symbols,i=0;i<e.length;i++)this.setExisting(e[i],t)}getExisting(t){switch(t){case"y":return this.year;case"M":case"L":return this.month;case"d":return this.date;case"E":return this.date&&this.month&&this.year;case"h":case"H":return this.hours;case"m":return this.minutes;case"s":return this.seconds;default:return!0}}setExisting(t,e){switch(t){case"y":this.year=e,!1===e&&this._value.setFullYear((new Date).getFullYear());break;case"M":this.month=e,!1===e&&this._value.setMonth(0);break;case"d":this.date=e;break;case"h":case"H":this.hours=e;break;case"m":this.minutes=e;break;case"s":this.seconds=e;break;default:return}}modifyPart(t,e){var i=dM(this.value),n=!1;switch(t){case"y":i.setFullYear(i.getFullYear()+e);break;case"M":i=gM(this.value,e);break;case"d":case"E":i.setDate(i.getDate()+e);break;case"h":case"H":i.setHours(i.getHours()+e),n=!0;break;case"m":i.setMinutes(i.getMinutes()+e),n=!0;break;case"s":i.setSeconds(i.getSeconds()+e),n=!0;break;case"a":i.setHours(i.getHours()+12*e),n=!0}n&&!this.cycleTime&&i.getDate()!==this._value.getDate()&&(i.setDate(this._value.getDate()),i.setMonth(this._value.getMonth()),i.setFullYear(this._value.getFullYear())),this.setExisting(t,!0),this._value=i}parsePart(t,e,i){if(!e)return this.resetLeadingZero(),this.setExisting(t,!1),{value:null,switchToNext:!1};for(var n=this.intl.formatDate(this.value,this.format,this.localeId),r=this.dateFormatString(this.value,this.format),o=r.symbols,s=!1,a="",l="",h="",c=0;c<n.length;c++)o[c]===t?(l+=this.getExisting(t)?n[c]:"0",s=!0):s?h+=n[c]:a+=n[c];var p=l.length-3,u=null,d=this.matchMonth(e),f=this.matchDayPeriod(e,t),v="0"===e,m=this.leadingZero||{};v?0!==parseInt(i?e:l+e,10)||this.isAbbrMonth(r.partMap,t)||this.incrementLeadingZero(t):this.resetLeadingZero();for(var g=Math.max(0,p);g<=l.length;g++){var y=i?e:l.substring(g)+e,b=parseInt(y,10);if(!(u=this.intl.parseDate(a+y+h,this.format,this.localeId))&&!isNaN(b)&&!isNaN(parseInt(e,10))){if("M"===t&&!d){var w=b-1;w>-1&&w<12&&((u=dM(this.value)).setMonth(w),u.getMonth()!==w&&(u=mM(gM(u,-1))))}"y"===t&&(u=vM(parseInt(y,10),this.month?this.value.getMonth():0,this.date?this.value.getDate():1,this.hours?this.value.getHours():0,this.minutes?this.value.getMinutes():0,this.seconds?this.value.getSeconds():0,this.milliseconds?this.value.getMilliseconds():0),this.date&&u.getDate()!==this.value.getDate()&&(u=mM(gM(u,-1))))}if(u){var x=this.partPattern(r.partMap,t).pattern,_=this.intl.parseDate("".concat(a).concat(this.peek(y,x)).concat(h),this.format,this.localeId);this._value=u,this.setExisting(t,!0);var k=null===_||m[t]&&x.length<=y.length;return{value:this.value,switchToNext:k}}}return d&&(u=this.intl.parseDate(a+d+h,this.format,this.localeId))?(this._value=u,this.setExisting(t,!0),{value:this.value,switchToNext:!1}):f&&(u=this.intl.parseDate(a+f+h,this.format))?(this._value=u,{value:this.value,switchToNext:!0}):(v&&this.setExisting(t,!1),{value:null,switchToNext:!1})}symbolMap(t){return this.intl.splitDateFormat(this.format,this.localeId).reduce(_M,{})[t]}resetLeadingZero(){var t=null!==this.leadingZero;return this.leadingZero=null,t}incrementLeadingZero(t){var e=this.leadingZero||{};e[t]=(e[t]||0)+1,this.leadingZero=e}isAbbrMonth(t,e){var i=this.partPattern(t,e);return"month"===i.type&&i.names}partPattern(t,e){return t.filter((t=>-1!==t.pattern.indexOf(e)))[0]}peek(t,e){var i,n=t.replace(/^0*/,"")+"0";return i=e.length-n.length,new Array(Math.max(i,0)).fill("0").join("")+n}matchMonth(t){if(this.typedMonthPart+=t.toLowerCase(),0===this.monthNames.length)return"";for(;this.typedMonthPart.length>0;){for(var e=0;e<this.monthNames.length;e++)if(0===this.monthNames[e].toLowerCase().indexOf(this.typedMonthPart))return this.monthNames[e];var i=parseInt(this.typedMonthPart,10);if(i>=1&&i<=12&&i.toString()===this.typedMonthPart)return this.monthNames[i-1];this.typedMonthPart=this.typedMonthPart.substring(1,this.typedMonthPart.length)}return""}matchDayPeriod(t,e){var i=t.toLowerCase();if("a"===e&&this.dayPeriods){if(this.dayPeriods.am.toLowerCase().startsWith(i))return this.dayPeriods.am;if(this.dayPeriods.pm.toLowerCase().startsWith(i))return this.dayPeriods.pm}return""}allFormatedMonths(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=this.intl.splitDateFormat(this.format,this.localeId),i=0;i<e.length;i++)if("month"===e[i].type&&e[i].names)return this.intl.dateFormatNames(t,e[i].names);return[]}dateFormatString(t,e){for(var i=this.intl.splitDateFormat(e,this.localeId),n=[],r=[],o=0;o<i.length;o++)for(var s=this.intl.formatDate(t,{pattern:i[o].pattern},this.localeId).length;s>0;)n.push(this.symbols[i[o].pattern[0]]||"_"),r.push(i[o]),s--;var a=new xM;return a.symbols=n.join(""),a.partMap=r,a}merge(t,e){for(var i="",n="",r=e.symbols,o=r.length-1;o>=0;o--)if(-1===this.knownParts.indexOf(r[o])||this.getExisting(r[o]))i=t[o]+i,n=r[o]+n;else{for(var s=r[o];o>=0&&s===r[o];)o--;for(o++,i=this.leadingZero&&this.leadingZero[s]?"0"+i:this.dateFieldName(e.partMap[o])+i;n.length<i.length;)n=r[o]+n}return{text:i,format:n}}dateFieldName(t){var e=this.formatPlaceholder||"wide";return e[t.type]?e[t.type]:"formatPattern"===e?t.pattern:this.intl.dateFieldName(Object.assign(t,{nameType:e}))}}function CM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var EM="dragStart",TM="mouseup",AM="click",MM="input",OM="keydown",DM="focus",PM="blur";class RM extends F{constructor(e,i){var n=new Date(i.selectedDate);isNaN(n.getTime())&&(n=null),super(e,i),CM(this,"options",{dotNetInstance:null,format:"yyyy-MM-dd",selectedDate:null,allowNulls:!1,hasPlaceHolder:!1,cycleTime:!0,locale:null,steps:{second:"",minute:"",hour:"",day:"",month:"",year:""},formatPlaceholder:null,debounceDelay:null,jsinterop:{focus:"",blur:"",updateDate:"",enter:""}}),CM(this,"onElementDragStart",(t=>{t.preventDefault()})),CM(this,"onElementMouseUp",(t=>{t.preventDefault()})),CM(this,"onElementClick",(()=>{this.setSelection(this.selectionByIndex(this.selection.start))})),CM(this,"onElementInput",(()=>{if(this.element&&this.dateObject){var{text:t,format:e}=this.dateObject.getTextAndFormat();this.currentFormat=e;var i=((t,e,i,n)=>{var r=t[n+t.length-i.length],o=t.substring(0,n+t.length-i.length),s=i.substring(0,n),a=[];if(o===s&&n>0)return a.push([e[n-1],s[n-1]]),a;if(0===o.indexOf(s)&&(0===s.length||e[s.length-1]!==e[s.length])){var l="";1===s.length&&a.push([e[0],s[0]]);for(var h=s.length;h<o.length;h++)e[h]!==l&&"_"!==e[h]&&(l=e[h],a.push([l,""]));return a}if(0===s.indexOf(o)||"_"===e[n-1]){for(var c=e[0],p=Math.max(0,o.length-1);p<e.length;p++)if("_"!==e[p]){c=e[p];break}return[[c,s[n-1]]]}return" "===s[s.length-1]||s[s.length-1]===r?[[e[n-1],"_"]]:[[e[n-1],s[n-1]]]})(t,this.currentFormat,this.element.value,this.selection.start),n=1===i.length&&"_"===i[0][1],r=!1;if(!n)for(var o=0;o<i.length;o++)r=this.dateObject.parsePart(i[o][0],i[o][1],this.resetSegmentValue).switchToNext;this.resetSegmentValue=!1,this.forceUpdate(),i.length&&"_"!==i[0][0]&&this.setSelection(this.selectionBySymbol(i[0][0])),(r||n)&&this.switchDateSegment(1),this.debounceUpdateValue()}})),CM(this,"onElementFocus",(()=>{this.isActive=!0,this.togglePlaceholder(),this.invokeMethodAsync(this.options.jsinterop.focus)})),CM(this,"onElementBlur",(()=>{this.resetSegmentValue=!0,this.isActive=!1,this.togglePlaceholder(),this.invokeMethodAsync(this.options.jsinterop.blur)})),CM(this,"onElementKeyDown",(t=>{var e=this.options.jsinterop.enter,i=this.currentFormat[this.selection.start],n=this.getStepFromSymbol(i),r=!1;if(!t.altKey&&t.keyCode!==te.TAB){switch(t.keyCode){case te.ARROWLEFT:this.switchDateSegment(-1),r=!0;break;case te.ARROWUP:this.modifyDateSegmentValue(n,i,event),r=!0;break;case te.ARROWRIGHT:this.switchDateSegment(1),r=!0;break;case te.ARROWDOWN:this.modifyDateSegmentValue(-n,i,event),r=!0;break;case te.ENTER:this.invokeMethodAsync(e);break;case te.DELETE:case te.BACKSPACE:return this.options.allowNulls&&(this.dateObject.setValue(null),this.forceUpdate(),this.updateComponentValue()),void(r=!0);default:return}r&&t.preventDefault()}})),this.setOptions(i);var r=this.element.getAttribute("data-id");this.extendCulture(r);var o=this.options.formatPlaceholder?this.options.formatPlaceholder:"formatPattern";this.dateObject=new SM(t,o,i.format,r,i.cycleTime),this.dateObject.setValue(n),this.setTextAndFormat(),this.bindEvents(),this.resetSegmentValue=!0}extendCulture(t){var e=this.options;e.locale.name=t,Mn(m({},Yi("en"),e.locale))}destroy(){this.unbindEvents(),super.destroy(),this.dateObject=null}bindEvents(){this.element.addEventListener(EM,this.onElementDragStart),this.element.addEventListener(AM,this.onElementClick),this.element.addEventListener(TM,this.onElementMouseUp),this.element.addEventListener(MM,this.onElementInput),this.element.addEventListener(OM,this.onElementKeyDown),this.element.addEventListener(DM,this.onElementFocus),this.element.addEventListener(PM,this.onElementBlur)}unbindEvents(){this.element.removeEventListener(EM,this.onElementDragStart),this.element.removeEventListener(TM,this.onElementMouseUp),this.element.removeEventListener(AM,this.onElementClick),this.element.removeEventListener(MM,this.onElementInput),this.element.removeEventListener(OM,this.onElementKeyDown),this.element.removeEventListener(DM,this.onElementFocus),this.element.removeEventListener(PM,this.onElementBlur)}setOptions(t){this.extendOptions(t),this.debounceUpdateValue=wi(this.updateComponentValue,this.options.debounceDelay)}focus(){this.element.focus()}get selection(){var t={start:0,end:0};return null!==this.element&&void 0!==this.element.selectionStart&&(t={start:this.element.selectionStart,end:this.element.selectionEnd}),t}setSelection(t){this._lastSelectedSymbol=this.currentFormat[t.start],this.element&&document.activeElement===this.element&&this.element.setSelectionRange(t.start,t.end)}selectionBySymbol(t){for(var e=-1,i=0,n=0;n<this.currentFormat.length;n++)this.currentFormat[n]===t&&(i=n+1,-1===e&&(e=n));return e<0&&(e=0),{start:e,end:i}}selectionByIndex(t){for(var e={start:t,end:t},i=t,n=t-1;i<this.currentFormat.length||n>=0;i++,n--){if(i<this.currentFormat.length&&"_"!==this.currentFormat[i]){e=this.selectionBySymbol(this.currentFormat[i]);break}if(n>=0&&"_"!==this.currentFormat[n]){e=this.selectionBySymbol(this.currentFormat[n]);break}}return e}switchDateSegment(t){var{start:e,end:i}=this.selection;if(e<i&&this.currentFormat[e]!==this.currentFormat[i-1])return this.setSelection(this.selectionByIndex(t>0?e:i-1)),void(this.resetSegmentValue=!0);for(var n=this.currentFormat[e],r=e+t;r>0&&r<this.currentFormat.length&&(this.currentFormat[r]===n||"_"===this.currentFormat[r]);)r+=t;if("_"!==this.currentFormat[r]){for(var o=r;o>=0&&o<this.currentFormat.length&&this.currentFormat[o]===this.currentFormat[r];)o+=t;r>o&&(o+1!==e||r+1!==i)?(this.setSelection({start:o+1,end:r+1}),this.resetSegmentValue=!0):r<o&&(r!==e||o!==i)&&(this.setSelection({start:r,end:o}),this.resetSegmentValue=!0)}}modifyDateSegmentValue(t,e){if(this.dateObject){var i=1*t;this.dateObject.modifyPart(e,i),this.forceUpdate(),this.setSelection(this.selectionBySymbol(e)),this.updateComponentValue()}}updateValue(t){var e=new Date(t);isNaN(e.getTime())&&(e=null),this.dateObject.setValue(e),this.forceUpdate(),this.togglePlaceholder()}updateComponentValue(){this.invokeMethodAsync(this.options.jsinterop.updateDate,{dateValue:this.dateObject.getFormattedDate("yyyy-MM-dd HH:mm:ss"),inputElementValue:this.element.value})}forceUpdate(){this.setTextAndFormat(),this.setElementValue(this.currentText)}setTextAndFormat(){var{text:t,format:e}=this.dateObject.getTextAndFormat();this.currentFormat=e,this.currentText=t}togglePlaceholder(){this.options.hasPlaceHolder&&!this.dateObject.hasValue()&&this.setElementValue(this.isActive?this.currentText:"")}setElementValue(t){this.element.value=t}getStepFromSymbol(t){switch(t){case"s":return Number(this.options.steps.second);case"m":return Number(this.options.steps.minute);case"h":case"H":return Number(this.options.steps.hour);case"M":return Number(this.options.steps.month);case"d":case"E":return Number(this.options.steps.day);case"y":return Number(this.options.steps.year);default:return 1}}stopDebounceUpdateValue(){this.debounceUpdateValue&&this.debounceUpdateValue.pending&&(this.debounceUpdateValue.stop(),this.debounceUpdateValue.runCallback())}}function IM(t,e){Ft(RM,t,e)}function zM(t,e){var i=Ut(t);i&&i.updateValue(e)}function LM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class BM extends F{constructor(t,e){super(t,e),LM(this,"onToggleElementClick",(t=>{t.preventDefault()})),LM(this,"onToggleElementMouseDown",(()=>{this.inputComponent=Ut(this.input.getAttribute("data-id")),this.inputComponent&&this.inputComponent.stopDebounceUpdateValue();var t=this.options.jsinterop.mousedown;this.invokeMethodAsync(t)})),LM(this,"onPopupKeyDown",(t=>{(t.keyCode===te.ESCAPE||t.keyCode===te.ARROWUP&&t.altKey)&&(this.invokeClose(),this.focus(),t.stopPropagation())})),LM(this,"closePopup",(()=>(this.invokeClose(),!1))),LM(this,"openPopup",(()=>(this.invokeOpen(),!1))),LM(this,"onInputFocus",(()=>{this.invokeClose()})),LM(this,"onInputFocusOut",(t=>{V(this.popupElement,t.relatedTarget)||V(this.element,t.relatedTarget)||this.invokeMethodAsync(this.options.jsinterop.blur)})),this.input=this.element.getElementsByClassName("k-input-inner")[0],this.toggleElement=this.element.querySelector(e.toggleElementSelector),this.popupElement=q(e.popupId),this.initTabKeyTrap(),this.initNavigationService()}destroy(){this.tabKeyTrap.destroy(),this.navigationService.destroy(),this.unbindEvents(),super.destroy(),this.input=this.popupElement=this.selectArrow=null,this.tabKeyTrap=null}initNavigationService(){this.navigationService=new oe(this.element),this.navigationService.bind("".concat(ie.ALT," ").concat(ee.ARROWDOWN),this.openPopup),this.navigationService.bind("".concat(ie.ALT," ").concat(ee.ARROWUP),this.closePopup)}initTabKeyTrap(){this.tabKeyTrap=new ae(this.popupElement)}bindEvents(){this.input.addEventListener("focus",this.onInputFocus),this.input.addEventListener("focusout",this.onInputFocusOut),this.toggleElement.addEventListener("click",this.onToggleElementClick),this.toggleElement.addEventListener("mousedown",this.onToggleElementMouseDown),this.popupElement.addEventListener("keydown",this.onPopupKeyDown,!0),this.tabKeyTrap.enableKeyTrap()}unbindEvents(){this.input.removeEventListener("focus",this.onInputFocus),this.input.removeEventListener("focusout",this.onInputFocusOut),this.toggleElement.removeEventListener("click",this.onToggleElementClick),this.toggleElement.removeEventListener("mousedown",this.onToggleElementMouseDown),this.popupElement.removeEventListener("keydown",this.onPopupKeyDown,!0)}focus(){var t=this;setTimeout((()=>{t.input.focus()}),100)}invokeClose(){this.invokeMethodAsync(this.options.jsinterop.close)}invokeOpen(){this.invokeMethodAsync(this.options.jsinterop.open)}}class NM extends BM{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,popupElement:null,jsinterop:{close:"",mousedown:""}}),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}function jM(t,e){Ft(NM,t,e)}function FM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class VM extends F{constructor(t,e){super(t,e),FM(this,"options",{dotNetInstance:null,focusOnInit:!1,jsinterop:{click:""}}),FM(this,"onKeyDown",(t=>{t.keyCode===te.ARROWUP?(this.onKeyArrowUp(),t.preventDefault()):t.keyCode===te.ARROWDOWN?(this.onKeyArrowDown(),t.preventDefault()):t.keyCode===te.ENTER&&this.invokeEnter()})),FM(this,"onScroll",(()=>{var t=this;t.element.scrollTop!==t.scrollTop&&(clearTimeout(this.timeout),this.timeout=setTimeout((()=>{t.snapToItem(!0)}),33))})),FM(this,"onMouseDown",(t=>{t.preventDefault()})),FM(this,"onClick",(t=>{var e=t.target.closest("li"),i=this.listElement.querySelectorAll(".k-item"),n=Array.from(i).indexOf(e);e&&(this.scrollTo(e.offsetTop),this.invokeSelect(n))})),FM(this,"onMouseEnter",(()=>{this.timeList.focus()})),FM(this,"onFocusOut",(t=>{this.invokeFocusOut(t)})),this.extendOptions(e),this.timeList=this.element.parentElement,this.listElement=this.element.querySelector("ul.k-reset"),this.timeout,this.setDimensions(),this.bindEvents(),this.options.focusOnInit&&this.focusTimeList()}setDimensions(){this.itemHeight=this.listElement.querySelector("li.k-item").offsetHeight,this.elementHeight=this.element.offsetHeight,this.scrollTop=this.element.scrollTop;var t=this.listElement.offsetHeight+(this.elementHeight-this.itemHeight);this.element.querySelector(".k-scrollable-placeholder").setAttribute("style","height: "+t+"px");var e=Math.floor((this.elementHeight-this.itemHeight)/2);this.listElement.setAttribute("style","transform: translateY("+e+"px);")}bindEvents(){this.element.addEventListener("scroll",this.onScroll),this.element.addEventListener("mousedown",this.onMouseDown),this.listElement.addEventListener("click",this.onClick),this.timeList.addEventListener("keydown",this.onKeyDown),this.timeList.addEventListener("mouseenter",this.onMouseEnter),this.timeList.addEventListener("focusout",this.onFocusOut)}destroy(){clearTimeout(this.timeout),this.unbindEvents(),super.destroy(),this.selectedIndex=this.listElement=null}unbindEvents(){this.element.addEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("scroll",this.onScroll),this.listElement.removeEventListener("click",this.onClick),this.timeList.removeEventListener("keydown",this.onKeyDown),this.timeList.removeEventListener("mouseenter",this.onMouseEnter),this.timeList.removeEventListener("focusout",this.onFocusOut)}onKeyArrowUp(){var t=this.selectedIndex;this.setSelectedIndex(t-1),this.selectedIndex!==t&&this.invokeSelect(this.selectedIndex)}onKeyArrowDown(){var t=this.selectedIndex;this.setSelectedIndex(t+1),this.selectedIndex!==t&&this.invokeSelect(this.selectedIndex)}focusTimeList(){var t=this;setTimeout((()=>{t.timeList.focus({preventScroll:!0})}),100)}snapToItem(t){var e=this.element.scrollTop,i=e%this.itemHeight;this.scrollTop>e?e-=i:e+=this.itemHeight-i,this.selectItem(e,t)}selectItem(t,e){if(!Number.isNaN(t)&&(this.scrollTo(t),e)){var i=Math.floor(t/this.itemHeight);this.invokeSelect(i)}}invokeSelect(t){var e=this.options.jsinterop.click,i=Math.min(t,this.listElement.querySelectorAll(".k-item").length-1);this.invokeMethodAsync(e,i)}invokeEnter(){var t=this.options.jsinterop.enter;this.invokeMethodAsync(t)}invokeFocusOut(t){t.relatedTarget&&this.invokeMethodAsync(this.options.jsinterop.focusout)}scrollTo(t){this.element.scrollTop=t,this.scrollTop=this.element.scrollTop}setSelectedIndex(t){this.setDimensions();var e=this.listElement.querySelectorAll(".k-item")[t];e&&(this.selectedIndex=t,this.scrollTo(e.offsetTop))}}function HM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class WM extends BM{constructor(t,e){super(t,e),HM(this,"options",{dotNetInstance:null,popupElement:null,jsinterop:{close:"",mousedown:""}}),HM(this,"onNavigate",(t=>{var e=document.activeElement;if(e.classList.contains("k-time-list")){var i=e.getAttribute("data-index");t.keyCode===te.ARROWLEFT?(this.focusTimeList(parseInt(i)-1),t.preventDefault()):t.keyCode===te.ARROWRIGHT&&(this.focusTimeList(parseInt(i)+1),t.preventDefault())}})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.popupElement.addEventListener("keydown",this.onNavigate),super.bindEvents()}unbindEvents(){this.popupElement.addEventListener("keydown",this.onNavigate),super.unbindEvents()}destroy(){this.unbindEvents(),super.destroy()}focusTimeList(t){var e='.k-time-list[data-index="'.concat(t,'"]'),i=this.popupElement.querySelector(e);i&&i.focus()}focusFirstCarousel(){this.popupElement&&setTimeout((()=>{var t=this.popupElement.querySelector(".k-time-list");t instanceof HTMLElement&&t.focus()}),100)}}function UM(t,e){Ft(WM,t,e)}function qM(t){var e=Ut(t);e&&e.focus()}function $M(t,e){Ft(VM,t,e)}function GM(t,e){var i=Ut(t);i&&i.setSelectedIndex(e)}function KM(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var XM="keydown",YM="mousedown",ZM="click",JM="focus",QM="focusout",tO=[te.ARROWUP,te.ARROWDOWN,te.ARROWLEFT,te.ARROWRIGHT,te.HOME,te.END];class eO extends F{constructor(t,e){super(t,e),KM(this,"onKeyDown",(t=>{tO.concat(te.ENTER).includes(t.keyCode)?t.preventDefault():(t.shiftKey||t.ctrlKey)&&t.stopPropagation()})),KM(this,"onMouseDown",(t=>{t.preventDefault()})),KM(this,"onClick",(t=>{var e=t.currentTarget;e&&e.focus()})),KM(this,"onFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.focus)})),KM(this,"onFocusout",(t=>{t.relatedTarget&&this.invokeMethodAsync(this.options.jsinterop.focusout)})),this.extendOptions(e),this.tables=this.element.querySelectorAll("table"),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.tables=this.navigationService=null}bindEvents(){[...this.tables].forEach((t=>{t.addEventListener(YM,this.onMouseDown),t.addEventListener(ZM,this.onClick),t.addEventListener(XM,this.onKeyDown,!0),t.addEventListener(JM,this.onFocus),t.addEventListener(QM,this.onFocusout)}))}unbindEvents(){[...this.tables].forEach((t=>{t.removeEventListener(YM,this.onMouseDown),t.removeEventListener(ZM,this.onClick),t.removeEventListener(XM,this.onKeyDown,!0),t.removeEventListener(JM,this.onFocus),t.removeEventListener(QM,this.onFocusout)}))}focusTable(){var t=this.tables[0];t&&setTimeout((()=>{t.focus()}),100)}}function iO(t,e){Ft(eO,t,e)}function nO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class rO extends BM{constructor(t,e){super(t,e),nO(this,"options",{dotNetInstance:null,jsinterop:{close:"",mousedown:""}}),nO(this,"onNavigate",(t=>{var e=document.activeElement;if(e.classList.contains("k-time-list")){var i=e.getAttribute("data-index");t.keyCode===te.ARROWLEFT?(this.focusTimeList(parseInt(i)-1),t.preventDefault()):t.keyCode===te.ARROWRIGHT&&(this.focusTimeList(parseInt(i)+1),t.preventDefault())}})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.popupElement.addEventListener("keydown",this.onNavigate),super.bindEvents()}unbindEvents(){this.popupElement.addEventListener("keydown",this.onNavigate),super.unbindEvents()}destroy(){this.unbindEvents(),super.destroy()}focusTimeList(t){var e='.k-time-list[data-index="'.concat(t,'"]'),i=this.popupElement.querySelector(e);i&&i.focus()}focusTable(){var t=this;setTimeout((()=>{var e=t.popupElement&&t.popupElement.querySelector("table");e instanceof HTMLElement&&e.focus()}),100)}focusFirstCarousel(){this.popupElement&&setTimeout((()=>{var t=this.popupElement.querySelector(".k-time-list");t instanceof HTMLElement&&t.focus()}),100)}}function oO(t,e){Ft(rO,t,e)}function sO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var aO="blur",lO="click";class hO extends F{constructor(t,e){super(t,e),sO(this,"options",{dotNetInstance:null,popupElement:null,jsinterop:{change:"",close:"",open:""}}),sO(this,"onStartEnterKeyDown",(()=>{this.triggerStartChanged(),this.focusEndInput()})),sO(this,"onEndEnterKeyDown",(()=>{this.triggerEndChanged(),this.invokeClose()})),sO(this,"onPopupShiftTab",((t,e)=>{var i=st(this.popupElement,!1);return e.target!==i||(this.focusEndInput(),!1)})),sO(this,"onPopupTab",((t,e)=>{var i=this.popupElement.querySelector("table:last-child");return e.target===i&&this.triggerClose(),!0})),sO(this,"triggerStartOpen",(()=>(this.isClosed()&&this.invokeOpen(this.options.startTarget),!0))),sO(this,"triggerEndOpen",(()=>(this.isClosed()&&this.invokeOpen(this.options.endTarget),!0))),sO(this,"triggerStartChanged",(()=>{this.invokeChange(this.options.startTarget)})),sO(this,"triggerEndChanged",(()=>{this.invokeChange(this.options.endTarget)})),sO(this,"triggerClose",(()=>(this.invokeClose(),!0))),sO(this,"focusPopupCalendar",(()=>!!this.isClosed()||(this.popupElement.querySelector("table").focus(),!1))),sO(this,"closePopup",(()=>!!this.isClosed()||(this.triggerClose(),this.focusStartInput(),!1)));var i=this.element.querySelectorAll(".k-input-inner");this.startInput=i[0],this.endInput=i[1],this.popupElement=q(e.popupId),this.extendOptions(e),this.initNavigationServices(),this.bindEvents()}bindEvents(){this.startInput.addEventListener(aO,this.triggerStartChanged),this.endInput.addEventListener(aO,this.triggerEndChanged),this.startInput.addEventListener(lO,this.triggerStartOpen,!0),this.endInput.addEventListener(lO,this.triggerEndOpen,!0)}unbindEvents(){this.startInput.removeEventListener(aO,this.triggerStartChanged),this.endInput.removeEventListener(aO,this.triggerEndChanged),this.startInput.removeEventListener(lO,this.triggerStartOpen,!0),this.endInput.removeEventListener(lO,this.triggerEndOpen,!0)}destroy(){this.unbindEvents(),this.navigationServices.forEach((t=>t.destroy())),super.destroy()}initNavigationServices(){this.navigationServices=[this.initStartInputNavigationService(),this.initEndInputNavigationService(),this.initPopupNavigationService()]}initStartInputNavigationService(){var t=new oe(this.startInput);return t.bind([ee.ESC,"".concat(ie.ALT," ").concat(ee.ARROWUP)],this.closePopup),t.bind("".concat(ie.ALT," ").concat(ee.ARROWDOWN),this.triggerStartOpen),t.bind(ee.ENTER,this.onStartEnterKeyDown),t.bind("".concat(ie.SHIFT," ").concat(ee.TAB),this.triggerClose),t}initEndInputNavigationService(){var t=new oe(this.endInput);return t.bind([ee.ESC,"".concat(ie.ALT," ").concat(ee.ARROWUP)],this.closePopup),t.bind("".concat(ie.ALT," ").concat(ee.ARROWDOWN),this.triggerEndOpen),t.bind(ee.TAB,this.focusPopupCalendar),t.bind(ee.ENTER,this.onEndEnterKeyDown),t}initPopupNavigationService(){var t=new oe(this.popupElement);return t.bind("".concat(ie.SHIFT," ").concat(ee.TAB),this.onPopupShiftTab),t.bind("".concat(ee.TAB),this.onPopupTab),t.bind([ee.ESC,"".concat(ie.ALT," ").concat(ee.ARROWUP)],this.closePopup),t}focusStartInput(){this.startInput.focus()}focusEndInput(){this.endInput.focus()}invokeChange(t){this.invokeMethodAsync(this.options.jsinterop.change,t)}invokeClose(){this.invokeMethodAsync(this.options.jsinterop.close)}invokeOpen(t){this.invokeMethodAsync(this.options.jsinterop.open,t)}isClosed(){return!this.popupElement||!this.popupElement.children[0].children.length}}function cO(t,e){Ft(hO,t,e)}function pO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class uO extends F{constructor(t,e){super(t,e),pO(this,"options",{dotNetInstance:null,jsinterop:{keydown:""}}),pO(this,"onKeyDown",(t=>{this.element!==t.target&&t.keyCode!==te.ESCAPE||this.invokeKeyDown(t)})),this.extendOptions(e),this.bindEvents(),this.elementDataId=this.element.dataset.id,this.enableTabKeyTrap(),this.focusElement()}destroy(){this.unbindEvents(),this.disableTabKeyTrap(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown)}onShow(t){this.unbindEvents(),this.options=t[0],this.element=q(this.elementDataId),this.bindEvents(),this.keyTrap.destroy(),this.enableTabKeyTrap(),this.focusElement()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.key)}enableTabKeyTrap(){this.keyTrap=new pe(this.element),this.keyTrap.enableKeyTrap()}disableTabKeyTrap(){this.keyTrap&&this.keyTrap.disableTabKeyTrap()}focusElement(){if(this.options.focusedElementSelector){var t=this.element.querySelector(this.options.focusedElementSelector);t instanceof HTMLElement&&tt(t)}else lt(this.elementDataId)}}function dO(t,e){Ft(uO,t,e)}function fO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var vO=D("field"),mO=D("text"),gO="k-indicator-container";class yO extends F{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),fO(this,"options",{dotNetInstance:null,parentSelector:".k-grid",dropTargetSelector:".k-grouping-header",dropTarget:{group:null,itemSelector:Ue(gO)},jsinterop:{addGroup:""}}),fO(this,"onDropTargetDrop",(t=>{var e=t.draggable.originalCurrentTarget,i=e.getAttribute(vO),n=t.draggable.getElementUnderCursor(t).closest(this.dropTarget.options.itemSelector),r=e.getAttribute(mO),o=Rt(n);if(o<0){var s=Oe(this.dropTarget.element.querySelectorAll(this.dropTarget.options.itemSelector));o=Rt(s)}i&&o>=0&&this.invokeAddGroup({field:i,title:r,index:o})})),fO(this,"allowsDragFrom",(t=>!this.containsGroup(t.originalCurrentTarget)&&t.originalCurrentTarget.hasAttribute(vO))),fO(this,"allowsDropFrom",(t=>!this.containsGroup(t.originalCurrentTarget))),this.extendOptions(e),this.createDropTarget()}destroy(){this.destroyDropTarget(),super.destroy()}createDropTarget(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.dropTargetSelector);t&&(this.dropTarget=new ti(t,m(this.options.dropTarget,{allowsDragFrom:this.allowsDragFrom,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}})))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}containsGroup(t){var e=t.getAttribute(vO),i=Array.from(this.element.querySelectorAll(Ue(gO))).map((t=>t.getAttribute(vO))).includes(e);return i}invokeAddGroup(t){this.invokeMethodAsync(this.options.jsinterop.addGroup,t)}}function bO(t,e){Ft(yO,Kt(t,"Groupable"),e)}function wO(t){Vt(Kt(t,"Groupable"))}function xO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var _O=D("field"),kO=D("text"),SO="k-drag-status",CO="k-i-plus",EO="k-i-cancel",TO="k-grouping-dropclue",AO=t=>{var e=T({position:"absolute","z-index":2e4}),i=(t=>{if(t instanceof HTMLElement){var e=t.getAttribute(kO)||t.getAttribute(_O)||"";return S(e)}return""})(t),n=t.getAttribute(_O)||"",r=t.getAttribute(kO)||"";return B('<div class="k-header k-drag-clue" style="'.concat(e,'" data-field="').concat(n,'" data-text="').concat(r,'">\n            <span class="k-icon k-drag-status k-i-cancel k-icon-with-modifier">\n                <span class="k-icon k-icon-modifier"></span>\n            </span>\n            ').concat(i,"\n        </div>"))},MO=t=>t&&t.hasAttribute("data-field");class OO extends F{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),xO(this,"options",{parentSelector:".k-grid",draggableSourceSelector:".k-grid-header",draggable:{group:null,filter:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",ignore:".k-grid-filter, .k-checkbox, .k-column-resizer"}}),xO(this,"onDraggableDrag",(t=>{this.canDragToAnyDropTarget(t)||t.preventDefault()})),xO(this,"onDraggableDrop",(()=>{this.destroyDropClue()})),xO(this,"onDropTargetLeave",(()=>{this.showDisabledHint(),this.destroyDropClue()})),xO(this,"onDropTargetOver",(t=>{this.canDrop(t)?this.showDropAllowedIndicators(t):this.showDropForbiddenIndicators()})),xO(this,"ignoreElementUnderCursor",(t=>{var e=t&&t.closest(Ue(TO));return Boolean(e)})),this.extendOptions(e),this.createDraggable()}destroy(){this.destroyDropClue(),this.destroyDraggable(),super.destroy()}extendOptions(t){this.options=m(this.options,t)}createDraggable(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.draggableSourceSelector);t&&(this.draggable=new ni(t,m(this.options.draggable,{hint:AO,ignoreElementUnderCursor:this.ignoreElementUnderCursor,events:{drag:this.onDraggableDrag,drop:this.onDraggableDrop,dropTargetLeave:this.onDropTargetLeave,dropTargetOver:this.onDropTargetOver}})))}destroyDraggable(){this.draggable&&this.draggable.destroy()}canDragToAnyDropTarget(t){var e=!1;return this.draggable.forEachDropTarget((i=>{e=e||i.allowsDragFrom(this.draggable,t)})),e}canDrop(t){return t.dropTarget&&t.dropTarget.allowsDropFrom(this.draggable,t)}showEnabledHint(){var t=this.draggable.hint;if(t){var e=t.querySelector(Ue(SO));X(EO,e),K(CO,e)}}showDisabledHint(){var t=this.draggable.hint;if(t){var e=t.querySelector(Ue(SO));K(EO,e),X(CO,e)}}createDropClue(){this.dropClue||(this.dropClue=new ri,this.dropClueSize=this.dropClue.getSize())}destroyDropClue(){this.dropClue&&(this.dropClue.destroy(),this.dropClue=null)}addDropClue(t){if(t.dropTarget&&t.elementUnderCursor){var e=t.elementUnderCursor.closest(t.dropTarget.options.itemSelector)||t.elementUnderCursor,i=t.draggable.originalCurrentTarget,n=this.getDropTargetIndicators(t.dropTarget.element,t.dropTarget.options.itemSelector).length>1,r=Pt(e,i),o=r?Dt(e,i):n&&!MO(e),s=this.getDropClueOffsetElement({elementUnderCursor:e,dropTargetItemSelector:t.dropTarget.options.itemSelector,dropTargeElement:t.dropTarget.element,isDragInSiblings:r});if(s){this.createDropClue();var a=this.dropClue.getOffsetState(s,o);if(!o){var{width:l}=this.dropClueSize;a.left-=l/2}this.showDropClue(a)}}}getDropClueOffsetElement(t){var{elementUnderCursor:e,dropTargeElement:i,dropTargetItemSelector:n,isDragInSiblings:r}=t,o=e.closest(n),s=this.getDropTargetIndicators(i,n),a=s.filter(MO),l=Oe(s),h=Oe(a)||l;return o&&(r||MO(o))&&(h=o),h}showDropClue(t){var{top:e,left:i,height:n}=t;this.dropClue||this.createDropClue(),this.dropClue.setState({top:e,left:i,height:n}),this.dropClue.show()}hideDropClue(){this.dropClue&&this.dropClue.hide()}showDropAllowedIndicators(t){this.showEnabledHint(),this.addDropClue(t)}showDropForbiddenIndicators(){this.showDisabledHint(),this.destroyDropClue()}getDropTargetIndicators(t,e){return Array.from(t.querySelectorAll(e))}}function DO(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ft(OO,Kt(t,"ColumnDraggable"),e)}function PO(t){Vt(Kt(t,"ColumnDraggable"))}function RO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var IO=D("reorderable"),zO=D("parent-col-initialization-index");class LO extends F{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),RO(this,"options",{parentSelector:".k-grid",reorderableSourceSelector:".k-grid-header",dropTarget:{itemSelector:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)"}}),RO(this,"allowsDragFrom",(t=>{var e=Boolean(t.originalCurrentTarget.getAttribute(IO)),i=this.dropTarget.element.querySelectorAll(this.options.dropTarget.itemSelector).length>1;return e&&i})),RO(this,"allowsDropFrom",((t,e)=>{var i=e.elementUnderCursor.closest(this.options.dropTarget.itemSelector),n=t.originalCurrentTarget;if(!i||!n)return!1;var r=Boolean(n.getAttribute(IO)),o=z(zO,i),s=z(zO,n);return r&&i!==n&&o===s})),RO(this,"onDropTargetDrop",(t=>{var e=t.draggable.originalCurrentTarget,i=t.elementUnderCursor.closest(this.options.dropTarget.itemSelector),n=Ie(e),r=Ie(i),o=n>=0?n:Rt(e,this.options.dropTarget.itemSelector),s=r>=0?r:Rt(i,this.options.dropTarget.itemSelector);document.activeElement&&document.activeElement.blur(),this.reorderColumn(o,s)})),this.extendOptions(e),this.createDropTarget()}destroy(){this.destroyDropTarget(),super.destroy()}createDropTarget(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.reorderableSourceSelector);this.dropTarget=new ti(t,m(this.options.dropTarget,{allowsDragFrom:this.allowsDragFrom,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}}))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}reorderColumn(t,e){t>=0&&e>=0&&t!==e&&this.invokeMethodAsync(this.options.jsinterop.reorderColumn,{fromIndex:t,toIndex:e})}}function BO(t,e){Ft(LO,Kt(t,"ColumnReorderable"),e)}function NO(t){Vt(Kt(t,"ColumnReorderable"))}function jO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class FO extends F{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),jO(this,"options",{events:{resizeStart:null,resize:null,resizeEnd:null},draggable:{filter:""}}),jO(this,"onDraggableDragStart",(t=>{this.initialLocation={pageX:t.pageX,pageY:t.pageY},this.location={pageX:t.pageX,pageY:t.pageY},this.delta={x:0,y:0},this.initialDelta={x:0,y:0},this.trigger("resizeStart",t)})),jO(this,"onDraggableDrag",(t=>{this.setCursorStyle(t.sender.originalCurrentTarget.style.cursor),this.calculateInitialDelta(t),this.calculateDelta(t),this.setLocation(t),this.trigger("resize",t)})),jO(this,"onDraggableDragEnd",(t=>{this.resetCursorStyle(),this.trigger("resizeEnd",t)})),this.extendOptions(e),this.createDraggable(t)}destroy(){this.destroyDraggable(),super.destroy()}createDraggable(){this.draggable=new ni(this.element,m(this.options.draggable,{events:{dragStart:this.onDraggableDragStart,drag:this.onDraggableDrag,dragEnd:this.onDraggableDragEnd}}))}destroyDraggable(){this.draggable&&this.draggable.destroy()}trigger(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return super.trigger(t,u(e,{initialLocation:this.initialLocation,location:this.location,delta:this.delta,initialDelta:this.initialDelta}))}calculateDelta(t){this.delta={x:t.pageX-this.location.pageX,y:t.pageY-this.location.pageY}}calculateInitialDelta(t){this.initialDelta={x:t.pageX-this.initialLocation.pageX,y:t.pageY-this.initialLocation.pageY}}setLocation(t){var{pageX:e,pageY:i}=t;this.location={pageX:e,pageY:i}}setCursorStyle(t){t&&(document.body.style.cursor=t)}resetCursorStyle(){document.body.style.cursor=""}}function VO(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var HO="dblclick",WO=Array.from,UO=t=>parseFloat(t)+"px",qO=(t,e)=>{t.style.width=UO(e)},$O=t=>t.getBoundingClientRect().width,GO=t=>Boolean(t.style.width),KO=(t,e,i)=>i?Zt(t,e,i):Math.max(t,e),XO="k-column-resizer";class YO extends F{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),VO(this,"options",{parentSelector:".k-grid",resizableSourceSelector:".k-grid-header",dataRowSelector:"tr:not(.k-grouping-row)",columnSelector:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",contentTableSelector:".k-grid-table",contentRowSelector:"tr.k-master-row",contentCellSelector:"td:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",footerTableSelector:".k-grid-footer table",footerRowSelector:"tr.k-group-footer",columns:[],defaultMinResizableWidth:30,dragResizing:!0,resizable:{draggable:{filter:".k-column-resizer"}},jsinterop:{resizeColumns:""}}),VO(this,"onResizableResizeStart",(t=>{this.resetState(),this.setFixedWidths();var e=t.originalCurrentTarget.closest(this.options.columnSelector);this.setState({originColumn:{element:e,initialWidth:$O(e)}}),this.rescaleColumns()})),VO(this,"onResizableResize",(t=>{var e=this.state.originColumn.element,i=$O(e),n=this.getColumnIndex(e),{minWidth:r,maxWidth:o}=this.getResizingConstraints(n),s=this.state.originColumn.initialWidth+t.initialDelta.x,a=o&&o<i||r>i,l=t.delta.x>0&&s<=r,h=o&&t.delta.x<0&&s>=o;(a||!l&&!h)&&this.applyResizeDelta(e,t.delta.x)})),VO(this,"onResizableResizeEnd",(()=>{this.state.columns.length>0&&this.invokeResizeColumns({columns:this.state.columns,tableWidth:this.state.tableWidth})})),VO(this,"onDoubleClick",(t=>{if(Y(XO,t.target)){var e=t.target.closest(this.options.columnSelector);this.autoFitColumnElements([e])}})),this.extendOptions(e),this.bindEvents(),this.options.dragResizing&&this.createResizable(),this.resetState()}destroy(){this.unbindEvents(),this.destroyResizable(),super.destroy()}createResizable(){var t=this.element.closest(this.options.parentSelector).querySelector(this.options.resizableSourceSelector);this.resizable=new FO(t,m(this.options.resizable,{events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}}))}destroyResizable(){this.resizable&&this.resizable.destroy()}bindEvents(){this.element.addEventListener(HO,this.onDoubleClick)}unbindEvents(){this.element.removeEventListener(HO,this.onDoubleClick)}setState(t){this.state=u(this.state||{},t)}resetState(){this.setState({columns:[],tableWidth:null,originColumn:{element:{},initialWidth:null}})}setColumns(t){this.options.columns=t}autoFitAllColumns(){var t=this.getLeafHeaderCells();this.autoFitColumnElements(t)}autoFitColumns(t){var e=t.map((t=>this.element.querySelector(Me(t))));this.autoFitColumnElements(e)}autoFitColumnElements(t){var e=[];this.setFixedWidths(),this.rescaleColumns(),t.forEach((t=>{if(t&&!Re(t)){var i=this.getHeaderCellLeafIndex(t),n=this.getColumnIndex(t);if(this.isContentCellVisible(i)){var r=this.getColumnWidth(i,n);this.resizeColumn(t,r);var o=$O(t);e.push({index:n,width:UO(o)})}}})),e.length>0&&this.invokeResizeColumns({columns:e,tableWidth:UO($O(this.getHeaderTable()))})}getColumnWidth(t,e){var i=this.getContentColumnWidth(t,e),n=this.getHeaderColumnWidth(t,e),r=this.getFooterColumnWidth(t,e);return Math.max(i,n,r)}getContentColumnWidth(t,e){var i=this.getContentCellVirtualIndex(t);return i<0?0:this.calculateColumnWidth({columnIndex:i,columnInitializationIndex:e,tableElement:this.getContentTable(),cellSelector:this.options.contentCellSelector,scrollContainerSelector:".k-grid-content"})}getHeaderColumnWidth(t,e){return this.calculateColumnWidth({columnIndex:t,columnInitializationIndex:e,tableElement:this.getHeaderTable(),cellSelector:this.options.columnSelector,scrollContainerSelector:".k-grid-header-wrap"})}getFooterColumnWidth(t,e){var i=this.getFooterTable();return i?this.calculateColumnWidth({columnIndex:t,columnInitializationIndex:e,tableElement:i,cellSelector:this.options.contentCellSelector,scrollContainerSelector:".k-grid-footer-wrap"}):0}calculateColumnWidth(t){var{columnIndex:e,columnInitializationIndex:i,tableElement:n,cellSelector:r,scrollContainerSelector:o}=t,s=this.getTableColumns(n)[e],a=o?n.closest(o):null,l=s.style.width,h=null!==a?a.scrollLeft:0;s.style.width="",K("k-autofitting",n);var c=n.querySelector(Me(i))||n.querySelector(this.options.dataRowSelector).querySelectorAll(r)[e],p=$O(c);return X("k-autofitting",n),s.style.width=l,a&&(a.scrollLeft=h),p}setFixedWidths(){var t=this.getHeaderColumns(),e=this.getHeaderTable(),i=this.getContentTable(),n=this.getFooterTable();if(!(t.every(GO)&&GO(e)&&GO(i))){qO(e,$O(e)),qO(i,$O(i)),n&&qO(n,$O(n));var r=this.hasMultiColumnHeaders()?this.getLeafHeaderCells():this.getHeaderCells(),o=this.getHeaderCells().sort(Fe);this.leafHeaderCellsFixedWidths=[],this.headerCellsFixedWidths=[];for(var s=0;s<r.length;s++){var a=$O(r[s]);this.leafHeaderCellsFixedWidths.push(a)}for(var l=0;l<o.length;l++){var h=$O(o[l]);this.headerCellsFixedWidths.push(h)}for(var c=0;c<r.length;c++)this.resizeHeaderColumn(c,this.leafHeaderCellsFixedWidths[c]),this.resizeContentColumn(c,this.leafHeaderCellsFixedWidths[c]),n&&this.resizeFooterColumn(c,this.leafHeaderCellsFixedWidths[c])}}applyResizeDelta(t,e){t&&this.resizeColumn(t,$O(t)+e,e)}resizeColumn(t,e){var i=this.getFooterTable(),n=[];if(t){var r,o=this.getColumnIndex(t),s=this.hasMultiColumnHeaders(),a=this.getHeaderCellLeafIndex(t),l=[];if(s)l=((t,e)=>{var i=Be(t,e);return i.filter((t=>i.every((e=>!Ve(t.element,e.element)))))})(t,this.getHeaderCells().sort(je));r=l.length>0?{minWidth:this.options.defaultMinResizableWidth,maxWidth:null}:this.getResizingConstraints(o);var h=KO(e,r.minWidth,r.maxWidth),c=h-$O(t);if(!(-.05<=c&&c<=.05)){if(n.push({index:o,width:UO(h)}),l.length){var p=[],u=0,d=c/l.length;l.forEach((t=>{var e=t.index,i=t.leafIndex,n=this.getHeaderColWidth(t.leafIndex),{minWidth:r,maxWidth:o}=this.getResizingConstraints(t.index),s=KO(n+d,r,o);p.push({index:e,leafIndex:i,newWidth:s})})),p.forEach((t=>{this.resizeHeaderColumn(t.leafIndex,t.newWidth),this.resizeContentColumn(t.leafIndex,t.newWidth),u+=t.newWidth,n.push({index:t.index,width:UO(t.newWidth)})})),n[0].width=UO(u);var f=u-$O(t);this.resizeHeaderTable(f),this.resizeContentTable(f),this.resizeLockedColumns(),i&&(this.resizeFooterTable(f),p.forEach((t=>{this.resizeFooterColumn(t.leafIndex,t.newWidth)})))}else this.resizeHeaderTable(c),this.resizeContentTable(c),this.resizeHeaderColumn(a,h),this.resizeContentColumn(a,h),this.resizeLockedColumns(),i&&(this.resizeFooterTable(c),this.resizeFooterColumn(a,h));this.setState({columns:n,tableWidth:UO($O(this.getHeaderTable()))})}}}resizeHeaderColumn(t,e){var i=this.getHeaderColumnByIndex(t);qO(i,e)}resizeContentColumn(t,e){var i=this.getContentColumnByIndex(t);qO(i,e)}resizeFooterColumn(t,e){var i=this.getFooterColumnByIndex(t);qO(i,e)}resizeHeaderTable(t){this.resizeTable(this.getHeaderTable(),t)}resizeContentTable(t){this.resizeTable(this.getContentTable(),t)}resizeFooterTable(t){this.resizeTable(this.getFooterTable(),t)}resizeTable(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t&&qO(t,$O(t)+e)}resizeLockedColumns(){this.resizeLockedHeaderCells(),this.resizeLockedContentCells(),this.resizeLockedFooterCells()}resizeLockedHeaderCells(){var t=this.getHeaderCells().sort(je);this.setLockedCellsOffsets(t)}resizeLockedContentCells(){var t=this.getContentRows();this.resizeLockedCellsForRows(t)}resizeLockedFooterCells(){var t=this.getFooterRows();this.resizeLockedCellsForRows(t)}resizeLockedCellsForRows(t){for(var e=0;e<t.length;e++){var i=t[e].querySelectorAll(this.options.contentCellSelector);this.setLockedCellsOffsets(i)}}setLockedCellsOffsets(t){this.setLockedCellsOffsetLeft(t),this.setLockedCellsOffsetRight(t)}setLockedCellsOffsetLeft(t){this.setLockedCellOffset(t,((t,e)=>{((t,e)=>{t.style.left=UO(e)})(t,e)}))}setLockedCellsOffsetRight(t){this.setLockedCellOffset(t,((t,e)=>{((t,e)=>{t.style.right=UO(e)})(t,e)}),{iterateBackwards:!0})}setLockedCellOffset(t,e){for(var{iterateBackwards:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.getMaxLevel(t),r=new Array(n).fill(0),o=0;o<t.length;o++){var s=t[i?t.length-1-o:o];if(ye(s)){var a=$O(s),l=Pe(s),h=Math.max(0,l-1);if(e(s,r[h]),Re(s))r[h]+=a;else for(var c=h;c<r.length;c++)r[c]+=a}}}getMaxLevel(t){for(var e=1,i=0;i<t.length;i++){var n=Pe(t[i]);e=Math.max(e,n)}return e}invokeResizeColumns(t){if(b(t.columns)&&b(t.tableWidth))return this.invokeMethodAsync(this.options.jsinterop.resizeColumns,{columns:t.columns,tableWidth:t.tableWidth})}rescaleColumns(){this.headerCellsFixedWidths&&(this.invokeRescaleColumns(this.headerCellsFixedWidths.map((t=>"".concat(t,"px")))),this.headerCellsFixedWidths=null)}invokeRescaleColumns(t){return this.invokeMethodAsync(this.options.jsinterop.rescaleColumns,t)}getHeaderTable(){return this.element.closest("table")}getContentTable(){return this.element.closest(this.options.parentSelector).querySelector(this.options.contentTableSelector)}getFooterTable(){return this.element.closest(this.options.parentSelector).querySelector(this.options.footerTableSelector)}getHeaderColumnByIndex(t){return this.getHeaderColumns()[t]}getHeaderColumns(){return this.getTableColumns(this.getHeaderTable())}getHeaderColWidth(t){var e,i,n=this.getHeaderColumnByIndex(t);return e=n,i=parseFloat(e.style.width),Number.isNaN(i)?$O(e):i}getHeaderCellByIndex(t){return this.getHeaderCells()[t]}getHeaderCells(){return WO(this.element.querySelectorAll(this.options.columnSelector))}getLeafHeaderCells(){var t=this.getHeaderCells();return Ne(t).sort(je)}getHeaderCellLeafIndex(t){return this.getLeafHeaderCells().indexOf(t)}getContentColumnByIndex(t){return this.getContentColumns()[t]}getContentColumns(){return this.getTableColumns(this.getContentTable())}getTableColumns(t){var e=t.querySelector("colgroup").querySelectorAll("col:not(.k-group-col):not(.k-hierarchy-col):not(.k-drag-col)");return WO(e)}getContentRows(){return this.queryContentTable(this.options.contentRowSelector)}getFooterColumnByIndex(t){return this.getFooterColumns()[t]}getFooterColumns(){return this.getTableColumns(this.getFooterTable())}getFooterRows(){return this.queryContentTable(this.options.footerRowSelector)}getColumnIndex(t){var e=Ie(t);return e>=0?e:Rt(t,this.options.columnSelector)}queryContentTable(t){var e=this.getContentTable().querySelectorAll(t);return WO(e)}hasMultiColumnHeaders(){return this.element.querySelectorAll("tr").length>1}getFirstContentRow(){return this.getContentTable().querySelector(this.options.dataRowSelector)}getContentCellVirtualIndex(t){var e=this.getFirstContentRow();if(!e)return-1;var i=e.querySelector(this.options.contentCellSelector),n=t;return i&&i.colSpan>1&&(n-=i.colSpan-1),n}isContentCellVisible(t){var e=this.getContentCellVirtualIndex(t),i=this.getFirstContentRow();if(!i)return!1;var n=i.querySelectorAll(this.options.contentCellSelector);return!!n&&(e>=0&&e<n.length)}getResizingConstraints(t){var e=this.options.columns[t]||{};return{minWidth:Math.max(e.minResizableWidth,this.options.defaultMinResizableWidth),maxWidth:e.maxResizableWidth}}}function ZO(t,e){Ft(YO,Kt(t,"ColumnResizable"),e)}function JO(t){Vt(Kt(t,"ColumnResizable"))}function QO(t,e){var i=Ut(Kt(t,"ColumnResizable"));i&&i.autoFitColumns(e)}function tD(t){var e=Ut(Kt(t,"ColumnResizable"));e&&e.autoFitAllColumns()}function eD(t,e){var i=Ut(Kt(t,"ColumnResizable"));i&&i.setColumns(e)}function iD(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var nD=[ee.ENTER,ee.ARROWDOWN,ee.ARROWUP],rD=()=>_(20);class oD extends F{constructor(t,e){super(t,e),iD(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",focusout:"",collapse:""},mode:"",duration:0}),iD(this,"onMouseDown",(t=>{var e=t.target;"overlay"!==this.options.mode||J(e,[this.element])||this.invokeCollapse()})),iD(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),iD(this,"onFocusOut",(t=>{this.invokeFocusOut(t)})),this.extendOptions(e),this.bindEvents(),this.createNavigationService()}expandAsync(){return rD().then((()=>this.onTransitionEnd()))}collapseAsync(){return rD().then((()=>this.onTransitionEnd()))}destroy(){this.unbindEvents(),this.destroyNavigationService(),super.destroy()}bindEvents(){this.element.addEventListener("focusout",this.onFocusOut),document.addEventListener("mousedown",this.onMouseDown,!0)}unbindEvents(){this.element.removeEventListener("focusout",this.onFocusOut),document.removeEventListener("mousedown",this.onMouseDown,!0)}focusItem(t){var e=this.element.querySelector('[data-index="'.concat(t,'"]'));e instanceof HTMLElement&&e.focus()}cancelCallback(){this.timer&&this.timer.cancel(),this.timer=null}onTransitionEnd(){var t=this.options.duration;return this.timer=k(t),this.timer.promise}createNavigationService(){this.navigationService=new oe(this.element),this.navigationService.bind(nD,this.onKeyDown)}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocusOut(t){var e=t.target.closest(".k-drawer-item[role='menuitem'"),i=e?parseInt(e.getAttribute("data-index")):null;setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusout,i)}),1)}invokeCollapse(){this.invokeMethodAsync(this.options.jsinterop.collapse)}}function sD(t,e){Ft(oD,t,e)}function aD(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var lD=[ee.ENTER,ee.ESC],hD=[ee.HOME,ee.END];class cD extends F{constructor(t,e){super(t,e),aD(this,"options",{dotNetInstance:null,popupId:null,jsinterop:{focus:null,blur:null,keydown:null}}),aD(this,"onKeyDown",(t=>(this.invokeKeyDown(t),this.isClosed()))),aD(this,"onPopupKeys",(t=>!!this.isClosed()||(this.invokeKeyDown(t),!1))),aD(this,"invokeKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)})),aD(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),aD(this,"invokeFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.focus)})),this.extendOptions(e),this.popupElement=q(e.popupId),this.initNavigationService()}destroy(){this.destroyNavigationService(),this.popupElement=null,super.destroy()}initNavigationService(){this.navigationService=new oe(this.element),this.navigationService.bind(lD,this.onKeyDown),this.navigationService.bind("".concat(ie.ALT," ").concat(ee.ARROWDOWN),this.onKeyDown),this.navigationService.bind("".concat(ie.ALT," ").concat(ee.ARROWUP),this.onKeyDown),this.navigationService.bind(hD,this.onPopupKeys)}destroyNavigationService(){this.navigationService.destroy()}isClosed(){return!this.popupElement||!this.popupElement.children[0].children.length}}function pD(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var uD="blur",dD="focus";class fD extends cD{constructor(t,e){super(t,e),pD(this,"options",{value:null}),pD(this,"onBlur",(t=>{var e=t.relatedTarget;V(this.popupElement,e)||V(this.element,e)?this.focus():this.invokeBlur()})),pD(this,"onFocus",(()=>{this.invokeFocus()})),this.extendOptions(e),this.input=this.element.querySelector("input"),this.setValue(e.value),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.input=null}bindEvents(){this.input.addEventListener(uD,this.onBlur),this.input.addEventListener(dD,this.onFocus)}unbindEvents(){this.input.removeEventListener(uD,this.onBlur),this.input.removeEventListener(dD,this.onFocus)}setValue(t){this.input&&(this.input.value=t)}focus(){this.input&&this.input.focus()}}var vD=[ee.ARROWDOWN,ee.ARROWUP];class mD extends fD{constructor(t,e){super(t,e)}bindEvents(){super.bindEvents(),this.navigationService.bind(vD,this.onPopupKeys)}}function gD(t,e){Ft(mD,t,e)}var yD=[ee.ARROWDOWN,ee.ARROWUP];class bD extends fD{constructor(t,e){super(t,e)}bindEvents(){super.bindEvents(),this.navigationService.bind(yD,this.invokeKeyDown)}}function wD(t,e){Ft(bD,t,e)}function xD(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var _D="blur",kD="click",SD=[ee.ARROWDOWN,ee.ARROWUP];class CD extends cD{constructor(t,e){super(t,e),xD(this,"focus",(()=>{Y("k-disabled",this.element)||this.element.focus()})),xD(this,"onBlur",(t=>{var e=t.relatedTarget;V(this.popupElement,e)?e.closest(".k-list-filter")||this.element.focus():this.invokeBlur()})),xD(this,"onFocus",(()=>{this.invokeFocus()})),this.initLabel(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(_D,this.onBlur),this.element.addEventListener("focus",this.onFocus),this.bindLabelEvent(),this.navigationService.bind(SD,this.invokeKeyDown),this.navigationService.bind("printableKey",this.invokeKeyDown)}unbindEvents(){this.element.removeEventListener(_D,this.onBlur),this.unbindLabelEvent()}initLabel(){var t=this.element.getAttribute("id"),e=document.querySelector("[for='"+t+"']");if(e&&!this.element.getAttribute("aria-labelledby")){var i=e.getAttribute("id");i||(i=g(),e.setAttribute("id",i)),this.element.setAttribute("aria-labelledby",i)}this.label=e}bindLabelEvent(){this.label&&this.label.addEventListener(kD,this.focus)}unbindLabelEvent(){this.label&&this.label.removeEventListener(kD,this.focus)}}function ED(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var TD="blur",AD=[ee.ARROWDOWN,ee.ARROWUP,ee.ENTER,ee.ESC,"".concat(ie.ALT," ").concat(ee.ARROWUP)];class MD extends F{constructor(t,e){super(t,e),ED(this,"options",{dotNetInstance:null,anchorDataId:"",jsinterop:{blur:null,keydown:null}}),ED(this,"onBlur",(t=>{var e=t.relatedTarget;e&&e.closest('[data-id="'.concat(this.options.anchorDataId,'"]'))||(V(this.element.closest(".k-popup"),e)?this.element.focus():this.invokeBlur())})),ED(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),ED(this,"invokeBlur",(()=>{this.invokeMethodAsync(this.options.jsinterop.blur)})),ED(this,"invokeKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}destroy(){this.destroyNavigationService(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(TD,this.onBlur)}unbindEvents(){this.element.removeEventListener(TD,this.onBlur)}initNavigationService(){this.navigationService=new oe(this.element),this.navigationService.bind(AD,this.onKeyDown)}destroyNavigationService(){this.navigationService.destroy()}}function OD(t,e){Ft(CD,t,e)}function DD(t,e){Ft(MD,t,e)}var PD="click";class RD extends fD{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onClick",(t=>{t.target instanceof HTMLElement&&!t.target.closest(".k-chip")&&!t.target.closest(".k-clear-value")&&(this.focus(),this.invokeClick())})),this.bindMultiSelectEvents()}destroy(){this.unbindMultiSelectEvents(),super.destroy()}bindMultiSelectEvents(){this.element.addEventListener(PD,this.onClick,!0),this.navigationService.bind([ee.ARROWDOWN,ee.ARROWUP],this.onPopupKeys),this.navigationService.bind([ee.ARROWLEFT,ee.ARROWRIGHT],this.onTagFocus.bind(this)),this.navigationService.bind([ee.BACKSPACE,ee.DELETE],this.onTagDelete.bind(this))}unbindMultiSelectEvents(){this.element.removeEventListener(PD,this.onClick,!0)}onTagDelete(t){return!!this.input.value||(this.invokeKeyDown(t),!1)}onTagFocus(t){return!!this.input.value||(this.invokeKeyDown(t),!1)}invokeClick(){var t=this.options.jsinterop.click;this.invokeMethodAsync(t)}}function ID(t,e){Ft(RD,t,e)}function zD(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class LD extends F{constructor(t,e){super(t,e),zD(this,"options",{dotNetInstance:null,selector:".k-list-scroller",jsinterop:{focus:null,blur:null,keydown:null}}),zD(this,"onScroll",(()=>{var t=At(this.scrollableContainer,"li");if(t){var e=z("data-group-index",t);this.currentGroupIndex!==e&&(this.currentGroupIndex=e,this.invokeMethodAsync(this.options.jsinterop.groupChanged,e))}})),this.extendOptions(e),this.scrollableContainer=t.closest(".k-list").querySelector(this.options.parentSelector),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.scrollableContainer.addEventListener("scroll",this.onScroll)}unbindEvents(){this.scrollableContainer.removeEventListener("scroll",this.onScroll)}}function BD(t,e){Ft(LD,t,e)}function ND(t){this.content=t}ND.prototype={constructor:ND,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,i){var n=i&&i!=t?this.remove(i):this,r=n.find(t),o=n.content.slice();return-1==r?o.push(i||t,e):(o[r+1]=e,i&&(o[r]=i)),new ND(o)},remove:function(t){var e=this.find(t);if(-1==e)return this;var i=this.content.slice();return i.splice(e,2),new ND(i)},addToStart:function(t,e){return new ND([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var i=this.remove(t).content.slice();return i.push(t,e),new ND(i)},addBefore:function(t,e,i){var n=this.remove(e),r=n.content.slice(),o=n.find(t);return r.splice(-1==o?r.length:o,0,e,i),new ND(r)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=ND.from(t)).size?new ND(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=ND.from(t)).size?new ND(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ND.from(t);for(var i=0;i<t.content.length;i+=2)e=e.remove(t.content[i]);return e},get size(){return this.content.length>>1}},ND.from=function(t){if(t instanceof ND)return t;var e=[];if(t)for(var i in t)e.push(i,t[i]);return new ND(e)};const jD=ND;function FD(t,e,i){for(var n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:i;var r=t.child(n),o=e.child(n);if(r!=o){if(!r.sameMarkup(o))return i;if(r.isText&&r.text!=o.text){for(var s=0;r.text[s]==o.text[s];s++)i++;return i}if(r.content.size||o.content.size){var a=FD(r.content,o.content,i+1);if(null!=a)return a}i+=r.nodeSize}else i+=r.nodeSize}}function VD(t,e,i,n){for(var r=t.childCount,o=e.childCount;;){if(0==r||0==o)return r==o?null:{a:i,b:n};var s=t.child(--r),a=e.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:i,b:n};if(s.isText&&s.text!=a.text){for(var h=0,c=Math.min(s.text.length,a.text.length);h<c&&s.text[s.text.length-h-1]==a.text[a.text.length-h-1];)h++,i--,n--;return{a:i,b:n}}if(s.content.size||a.content.size){var p=VD(s.content,a.content,i-1,n-1);if(p)return p}i-=l,n-=l}else i-=l,n-=l}}var HD=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var i=0;i<t.length;i++)this.size+=t[i].nodeSize},WD={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};HD.prototype.nodesBetween=function(t,e,i,n,r){void 0===n&&(n=0);for(var o=0,s=0;s<e;o++){var a=this.content[o],l=s+a.nodeSize;if(l>t&&!1!==i(a,n+s,r,o)&&a.content.size){var h=s+1;a.nodesBetween(Math.max(0,t-h),Math.min(a.content.size,e-h),i,n+h)}s=l}},HD.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},HD.prototype.textBetween=function(t,e,i,n){var r="",o=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(r+=s.text.slice(Math.max(t,a)-a,e-a),o=!i):s.isLeaf&&n?(r+="function"==typeof n?n(s):n,o=!i):!o&&s.isBlock&&(r+=i,o=!0)}),0),r},HD.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,i=t.firstChild,n=this.content.slice(),r=0;for(e.isText&&e.sameMarkup(i)&&(n[n.length-1]=e.withText(e.text+i.text),r=1);r<t.content.length;r++)n.push(t.content[r]);return new HD(n,this.size+t.size)},HD.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var i=[],n=0;if(e>t)for(var r=0,o=0;o<e;r++){var s=this.content[r],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),i.push(s),n+=s.nodeSize),o=a}return new HD(i,n)},HD.prototype.cutByIndex=function(t,e){return t==e?HD.empty:0==t&&e==this.content.length?this:new HD(this.content.slice(t,e))},HD.prototype.replaceChild=function(t,e){var i=this.content[t];if(i==e)return this;var n=this.content.slice(),r=this.size+e.nodeSize-i.nodeSize;return n[t]=e,new HD(n,r)},HD.prototype.addToStart=function(t){return new HD([t].concat(this.content),this.size+t.nodeSize)},HD.prototype.addToEnd=function(t){return new HD(this.content.concat(t),this.size+t.nodeSize)},HD.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},WD.firstChild.get=function(){return this.content.length?this.content[0]:null},WD.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},WD.childCount.get=function(){return this.content.length},HD.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},HD.prototype.maybeChild=function(t){return this.content[t]},HD.prototype.forEach=function(t){for(var e=0,i=0;e<this.content.length;e++){var n=this.content[e];t(n,i,e),i+=n.nodeSize}},HD.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),FD(this,t,e)},HD.prototype.findDiffEnd=function(t,e,i){return void 0===e&&(e=this.size),void 0===i&&(i=t.size),VD(this,t,e,i)},HD.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return qD(0,t);if(t==this.size)return qD(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var i=0,n=0;;i++){var r=n+this.child(i).nodeSize;if(r>=t)return r==t||e>0?qD(i+1,r):qD(i,n);n=r}},HD.prototype.toString=function(){return"<"+this.toStringInner()+">"},HD.prototype.toStringInner=function(){return this.content.join(", ")},HD.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},HD.fromJSON=function(t,e){if(!e)return HD.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new HD(e.map(t.nodeFromJSON))},HD.fromArray=function(t){if(!t.length)return HD.empty;for(var e,i=0,n=0;n<t.length;n++){var r=t[n];i+=r.nodeSize,n&&r.isText&&t[n-1].sameMarkup(r)?(e||(e=t.slice(0,n)),e[e.length-1]=r.withText(e[e.length-1].text+r.text)):e&&e.push(r)}return new HD(e||t,i)},HD.from=function(t){if(!t)return HD.empty;if(t instanceof HD)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new HD([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(HD.prototype,WD);var UD={index:0,offset:0};function qD(t,e){return UD.index=t,UD.offset=e,UD}function $D(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var i=Array.isArray(t);if(Array.isArray(e)!=i)return!1;if(i){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!$D(t[n],e[n]))return!1}else{for(var r in t)if(!(r in e)||!$D(t[r],e[r]))return!1;for(var o in e)if(!(o in t))return!1}return!0}HD.empty=new HD([],0);var GD=function(t,e){this.type=t,this.attrs=e};function KD(t){var e=Error.call(this,t);return e.__proto__=KD.prototype,e}GD.prototype.addToSet=function(t){for(var e,i=!1,n=0;n<t.length;n++){var r=t[n];if(this.eq(r))return t;if(this.type.excludes(r.type))e||(e=t.slice(0,n));else{if(r.type.excludes(this.type))return t;!i&&r.type.rank>this.type.rank&&(e||(e=t.slice(0,n)),e.push(this),i=!0),e&&e.push(r)}}return e||(e=t.slice()),i||e.push(this),e},GD.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},GD.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},GD.prototype.eq=function(t){return this==t||this.type==t.type&&$D(this.attrs,t.attrs)},GD.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},GD.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var i=t.marks[e.type];if(!i)throw new RangeError("There is no mark type "+e.type+" in this schema");return i.create(e.attrs)},GD.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].eq(e[i]))return!1;return!0},GD.setFrom=function(t){if(!t||0==t.length)return GD.none;if(t instanceof GD)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},GD.none=[],KD.prototype=Object.create(Error.prototype),KD.prototype.constructor=KD,KD.prototype.name="ReplaceError";var XD=function(t,e,i){this.content=t,this.openStart=e,this.openEnd=i},YD={size:{configurable:!0}};function ZD(t,e,i){var n=t.findIndex(e),r=n.index,o=n.offset,s=t.maybeChild(r),a=t.findIndex(i),l=a.index,h=a.offset;if(o==e||s.isText){if(h!=i&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(i))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(ZD(s.content,e-o-1,i-o-1)))}function JD(t,e,i,n){var r=t.findIndex(e),o=r.index,s=r.offset,a=t.maybeChild(o);if(s==e||a.isText)return n&&!n.canReplace(o,o,i)?null:t.cut(0,e).append(i).append(t.cut(e));var l=JD(a.content,e-s-1,i);return l&&t.replaceChild(o,a.copy(l))}function QD(t,e,i){if(i.openStart>t.depth)throw new KD("Inserted content deeper than insertion position");if(t.depth-i.openStart!=e.depth-i.openEnd)throw new KD("Inconsistent open depths");return tP(t,e,i,0)}function tP(t,e,i,n){var r=t.index(n),o=t.node(n);if(r==e.index(n)&&n<t.depth-i.openStart){var s=tP(t,e,i,n+1);return o.copy(o.content.replaceChild(r,s))}if(i.content.size){if(i.openStart||i.openEnd||t.depth!=n||e.depth!=n){var a=function(t,e){for(var i=e.depth-t.openStart,n=e.node(i).copy(t.content),r=i-1;r>=0;r--)n=e.node(r).copy(HD.from(n));return{start:n.resolveNoCache(t.openStart+i),end:n.resolveNoCache(n.content.size-t.openEnd-i)}}(i,t);return oP(o,sP(t,a.start,a.end,e,n))}var l=t.parent,h=l.content;return oP(l,h.cut(0,t.parentOffset).append(i.content).append(h.cut(e.parentOffset)))}return oP(o,aP(t,e,n))}function eP(t,e){if(!e.type.compatibleContent(t.type))throw new KD("Cannot join "+e.type.name+" onto "+t.type.name)}function iP(t,e,i){var n=t.node(i);return eP(n,e.node(i)),n}function nP(t,e){var i=e.length-1;i>=0&&t.isText&&t.sameMarkup(e[i])?e[i]=t.withText(e[i].text+t.text):e.push(t)}function rP(t,e,i,n){var r=(e||t).node(i),o=0,s=e?e.index(i):r.childCount;t&&(o=t.index(i),t.depth>i?o++:t.textOffset&&(nP(t.nodeAfter,n),o++));for(var a=o;a<s;a++)nP(r.child(a),n);e&&e.depth==i&&e.textOffset&&nP(e.nodeBefore,n)}function oP(t,e){if(!t.type.validContent(e))throw new KD("Invalid content for node "+t.type.name);return t.copy(e)}function sP(t,e,i,n,r){var o=t.depth>r&&iP(t,e,r+1),s=n.depth>r&&iP(i,n,r+1),a=[];return rP(null,t,r,a),o&&s&&e.index(r)==i.index(r)?(eP(o,s),nP(oP(o,sP(t,e,i,n,r+1)),a)):(o&&nP(oP(o,aP(t,e,r+1)),a),rP(e,i,r,a),s&&nP(oP(s,aP(i,n,r+1)),a)),rP(n,null,r,a),new HD(a)}function aP(t,e,i){var n=[];(rP(null,t,i,n),t.depth>i)&&nP(oP(iP(t,e,i+1),aP(t,e,i+1)),n);return rP(e,null,i,n),new HD(n)}YD.size.get=function(){return this.content.size-this.openStart-this.openEnd},XD.prototype.insertAt=function(t,e){var i=JD(this.content,t+this.openStart,e,null);return i&&new XD(i,this.openStart,this.openEnd)},XD.prototype.removeBetween=function(t,e){return new XD(ZD(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},XD.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},XD.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},XD.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},XD.fromJSON=function(t,e){if(!e)return XD.empty;var i=e.openStart||0,n=e.openEnd||0;if("number"!=typeof i||"number"!=typeof n)throw new RangeError("Invalid input for Slice.fromJSON");return new XD(HD.fromJSON(t,e.content),i,n)},XD.maxOpen=function(t,e){void 0===e&&(e=!0);for(var i=0,n=0,r=t.firstChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.firstChild)i++;for(var o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)n++;return new XD(t,i,n)},Object.defineProperties(XD.prototype,YD),XD.empty=new XD(HD.empty,0,0);var lP=function(t,e,i){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=i},hP={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};lP.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},hP.parent.get=function(){return this.node(this.depth)},hP.doc.get=function(){return this.node(0)},lP.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},lP.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},lP.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},lP.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},lP.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},lP.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},lP.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},hP.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},hP.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var i=this.pos-this.path[this.path.length-1],n=t.child(e);return i?t.child(e).cut(i):n},hP.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},lP.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var i=this.path[3*e],n=0==e?0:this.path[3*e-1]+1,r=0;r<t;r++)n+=i.child(r).nodeSize;return n},lP.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return GD.none;if(this.textOffset)return t.child(e).marks;var i=t.maybeChild(e-1),n=t.maybeChild(e);if(!i){var r=i;i=n,n=r}for(var o=i.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||n&&o[s].isInSet(n.marks)||(o=o[s--].removeFromSet(o));return o},lP.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var i=e.marks,n=t.parent.maybeChild(t.index()),r=0;r<i.length;r++)!1!==i[r].type.spec.inclusive||n&&i[r].isInSet(n.marks)||(i=i[r--].removeFromSet(i));return i},lP.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},lP.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new dP(this,t,i)},lP.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},lP.prototype.max=function(t){return t.pos>this.pos?t:this},lP.prototype.min=function(t){return t.pos<this.pos?t:this},lP.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},lP.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var i=[],n=0,r=e,o=t;;){var s=o.content.findIndex(r),a=s.index,l=s.offset,h=r-l;if(i.push(o,a,n+l),!h)break;if((o=o.child(a)).isText)break;r=h-1,n+=l+1}return new lP(e,i,r)},lP.resolveCached=function(t,e){for(var i=0;i<cP.length;i++){var n=cP[i];if(n.pos==e&&n.doc==t)return n}var r=cP[pP]=lP.resolve(t,e);return pP=(pP+1)%uP,r},Object.defineProperties(lP.prototype,hP);var cP=[],pP=0,uP=12,dP=function(t,e,i){this.$from=t,this.$to=e,this.depth=i},fP={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};fP.start.get=function(){return this.$from.before(this.depth+1)},fP.end.get=function(){return this.$to.after(this.depth+1)},fP.parent.get=function(){return this.$from.node(this.depth)},fP.startIndex.get=function(){return this.$from.index(this.depth)},fP.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(dP.prototype,fP);var vP=Object.create(null),mP=function(t,e,i,n){this.type=t,this.attrs=e,this.content=i||HD.empty,this.marks=n||GD.none},gP={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};gP.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},gP.childCount.get=function(){return this.content.childCount},mP.prototype.child=function(t){return this.content.child(t)},mP.prototype.maybeChild=function(t){return this.content.maybeChild(t)},mP.prototype.forEach=function(t){this.content.forEach(t)},mP.prototype.nodesBetween=function(t,e,i,n){void 0===n&&(n=0),this.content.nodesBetween(t,e,i,n,this)},mP.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},gP.textContent.get=function(){return this.textBetween(0,this.content.size,"")},mP.prototype.textBetween=function(t,e,i,n){return this.content.textBetween(t,e,i,n)},gP.firstChild.get=function(){return this.content.firstChild},gP.lastChild.get=function(){return this.content.lastChild},mP.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},mP.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},mP.prototype.hasMarkup=function(t,e,i){return this.type==t&&$D(this.attrs,e||t.defaultAttrs||vP)&&GD.sameSet(this.marks,i||GD.none)},mP.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},mP.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},mP.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},mP.prototype.slice=function(t,e,i){if(void 0===e&&(e=this.content.size),void 0===i&&(i=!1),t==e)return XD.empty;var n=this.resolve(t),r=this.resolve(e),o=i?0:n.sharedDepth(e),s=n.start(o),a=n.node(o).content.cut(n.pos-s,r.pos-s);return new XD(a,n.depth-o,r.depth-o)},mP.prototype.replace=function(t,e,i){return QD(this.resolve(t),this.resolve(e),i)},mP.prototype.nodeAt=function(t){for(var e=this;;){var i=e.content.findIndex(t),n=i.index,r=i.offset;if(!(e=e.maybeChild(n)))return null;if(r==t||e.isText)return e;t-=r+1}},mP.prototype.childAfter=function(t){var e=this.content.findIndex(t),i=e.index,n=e.offset;return{node:this.content.maybeChild(i),index:i,offset:n}},mP.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),i=e.index,n=e.offset;if(n<t)return{node:this.content.child(i),index:i,offset:n};var r=this.content.child(i-1);return{node:r,index:i-1,offset:n-r.nodeSize}},mP.prototype.resolve=function(t){return lP.resolveCached(this,t)},mP.prototype.resolveNoCache=function(t){return lP.resolve(this,t)},mP.prototype.rangeHasMark=function(t,e,i){var n=!1;return e>t&&this.nodesBetween(t,e,(function(t){return i.isInSet(t.marks)&&(n=!0),!n})),n},gP.isBlock.get=function(){return this.type.isBlock},gP.isTextblock.get=function(){return this.type.isTextblock},gP.inlineContent.get=function(){return this.type.inlineContent},gP.isInline.get=function(){return this.type.isInline},gP.isText.get=function(){return this.type.isText},gP.isLeaf.get=function(){return this.type.isLeaf},gP.isAtom.get=function(){return this.type.isAtom},mP.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),bP(this.marks,t)},mP.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},mP.prototype.canReplace=function(t,e,i,n,r){void 0===i&&(i=HD.empty),void 0===n&&(n=0),void 0===r&&(r=i.childCount);var o=this.contentMatchAt(t).matchFragment(i,n,r),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=n;a<r;a++)if(!this.type.allowsMarks(i.child(a).marks))return!1;return!0},mP.prototype.canReplaceWith=function(t,e,i,n){if(n&&!this.type.allowsMarks(n))return!1;var r=this.contentMatchAt(t).matchType(i),o=r&&r.matchFragment(this.content,e);return!!o&&o.validEnd},mP.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},mP.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=GD.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!GD.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},mP.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},mP.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var i=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}var n=HD.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,n,i)},Object.defineProperties(mP.prototype,gP);var yP=function(t){function e(e,i,n,r){if(t.call(this,e,i,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):bP(this.marks,JSON.stringify(this.text))},i.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},i.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,i),e}(mP);function bP(t,e){for(var i=t.length-1;i>=0;i--)e=t[i].type.name+"("+e+")";return e}var wP=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},xP={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};wP.parse=function(t,e){var i=new _P(t,e);if(null==i.next)return wP.empty;var n=SP(i);i.next&&i.err("Unexpected trailing text");var r=function(t){var e=Object.create(null);return i(OP(t,0));function i(n){var r=[];n.forEach((function(e){t[e].forEach((function(e){var i=e.term,n=e.to;if(i){var o=r.indexOf(i),s=o>-1&&r[o+1];OP(t,n).forEach((function(t){s||r.push(i,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var o=e[n.join(",")]=new wP(n.indexOf(t.length-1)>-1),s=0;s<r.length;s+=2){var a=r[s+1].sort(MP);o.next.push(r[s],e[a.join(",")]||i(a))}return o}}(function(t){var e=[[]];return r(o(t,0),i()),e;function i(){return e.push([])-1}function n(t,i,n){var r={term:n,to:i};return e[t].push(r),r}function r(t,e){t.forEach((function(t){return t.to=e}))}function o(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,i){return t.concat(o(i,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=o(t.exprs[s],e);if(s==t.exprs.length-1)return a;r(a,e=i())}else{if("star"==t.type){var l=i();return n(e,l),r(o(t.expr,l),l),[n(l)]}if("plus"==t.type){var h=i();return r(o(t.expr,e),h),r(o(t.expr,h),h),[n(h)]}if("opt"==t.type)return[n(e)].concat(o(t.expr,e));if("range"==t.type){for(var c=e,p=0;p<t.min;p++){var u=i();r(o(t.expr,c),u),c=u}if(-1==t.max)r(o(t.expr,c),c);else for(var d=t.min;d<t.max;d++){var f=i();n(c,f),r(o(t.expr,c),f),c=f}return[n(c)]}if("name"==t.type)return[n(e,null,t.value)]}}}(n));return function(t,e){for(var i=0,n=[t];i<n.length;i++){for(var r=n[i],o=!r.validEnd,s=[],a=0;a<r.next.length;a+=2){var l=r.next[a],h=r.next[a+1];s.push(l.name),!o||l.isText||l.hasRequiredAttrs()||(o=!1),-1==n.indexOf(h)&&n.push(h)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(r,i),r},wP.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},wP.prototype.matchFragment=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.childCount);for(var n=this,r=e;n&&r<i;r++)n=n.matchType(t.child(r).type);return n},xP.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},xP.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},wP.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var i=0;i<t.next.length;i+=2)if(this.next[e]==t.next[i])return!0;return!1},wP.prototype.fillBefore=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=0);var n=[this];return function r(o,s){var a=o.matchFragment(t,i);if(a&&(!e||a.validEnd))return HD.from(s.map((function(t){return t.createAndFill()})));for(var l=0;l<o.next.length;l+=2){var h=o.next[l],c=o.next[l+1];if(!h.isText&&!h.hasRequiredAttrs()&&-1==n.indexOf(c)){n.push(c);var p=r(c,s.concat(h));if(p)return p}}}(this,[])},wP.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var i=this.computeWrapping(t);return this.wrapCache.push(t,i),i},wP.prototype.computeWrapping=function(t){for(var e=Object.create(null),i=[{match:this,type:null,via:null}];i.length;){var n=i.shift(),r=n.match;if(r.matchType(t)){for(var o=[],s=n;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<r.next.length;a+=2){var l=r.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in e||n.type&&!r.next[a+1].validEnd||(i.push({match:l.contentMatch,type:l,via:n}),e[l.name]=!0)}}},xP.edgeCount.get=function(){return this.next.length>>1},wP.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},wP.prototype.toString=function(){var t=[];return function e(i){t.push(i);for(var n=1;n<i.next.length;n+=2)-1==t.indexOf(i.next[n])&&e(i.next[n])}(this),t.map((function(e,i){for(var n=i+(e.validEnd?"*":" ")+" ",r=0;r<e.next.length;r+=2)n+=(r?", ":"")+e.next[r].name+"->"+t.indexOf(e.next[r+1]);return n})).join("\n")},Object.defineProperties(wP.prototype,xP),wP.empty=new wP(!0);var _P=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},kP={next:{configurable:!0}};function SP(t){var e=[];do{e.push(CP(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function CP(t){var e=[];do{e.push(EP(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function EP(t){for(var e=function(t){if(t.eat("(")){var e=SP(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var i=function(t,e){var i=t.nodeTypes,n=i[e];if(n)return[n];var r=[];for(var o in i){var s=i[o];s.groups.indexOf(e)>-1&&r.push(s)}0==r.length&&t.err("No node type or group '"+e+"' found");return r}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==i.length?i[0]:{type:"choice",exprs:i}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=AP(t,e)}return e}function TP(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function AP(t,e){var i=TP(t),n=i;return t.eat(",")&&(n="}"!=t.next?TP(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:i,max:n,expr:e}}function MP(t,e){return e-t}function OP(t,e){var i=[];return function e(n){var r=t[n];if(1==r.length&&!r[0].term)return e(r[0].to);i.push(n);for(var o=0;o<r.length;o++){var s=r[o],a=s.term,l=s.to;a||-1!=i.indexOf(l)||e(l)}}(e),i.sort(MP)}function DP(t){var e=Object.create(null);for(var i in t){var n=t[i];if(!n.hasDefault)return null;e[i]=n.default}return e}function PP(t,e){var i=Object.create(null);for(var n in t){var r=e&&e[n];if(void 0===r){var o=t[n];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+n);r=o.default}i[n]=r}return i}function RP(t){var e=Object.create(null);if(t)for(var i in t)e[i]=new LP(t[i]);return e}kP.next.get=function(){return this.tokens[this.pos]},_P.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},_P.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(_P.prototype,kP);var IP=function(t,e,i){this.name=t,this.schema=e,this.spec=i,this.groups=i.group?i.group.split(" "):[],this.attrs=RP(i.attrs),this.defaultAttrs=DP(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(i.inline||"text"==t),this.isText="text"==t},zP={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0},whitespace:{configurable:!0}};zP.isInline.get=function(){return!this.isBlock},zP.isTextblock.get=function(){return this.isBlock&&this.inlineContent},zP.isLeaf.get=function(){return this.contentMatch==wP.empty},zP.isAtom.get=function(){return this.isLeaf||this.spec.atom},zP.whitespace.get=function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")},IP.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},IP.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},IP.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:PP(this.attrs,t)},IP.prototype.create=function(t,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new mP(this,this.computeAttrs(t),HD.from(e),GD.setFrom(i))},IP.prototype.createChecked=function(t,e,i){if(e=HD.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new mP(this,this.computeAttrs(t),e,GD.setFrom(i))},IP.prototype.createAndFill=function(t,e,i){if(t=this.computeAttrs(t),(e=HD.from(e)).size){var n=this.contentMatch.fillBefore(e);if(!n)return null;e=n.append(e)}var r=this.contentMatch.matchFragment(e).fillBefore(HD.empty,!0);return r?new mP(this,t,e.append(r),GD.setFrom(i)):null},IP.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var i=0;i<t.childCount;i++)if(!this.allowsMarks(t.child(i).marks))return!1;return!0},IP.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},IP.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},IP.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:GD.empty:t},IP.compile=function(t,e){var i=Object.create(null);t.forEach((function(t,n){return i[t]=new IP(t,e,n)}));var n=e.spec.topNode||"doc";if(!i[n])throw new RangeError("Schema is missing its top node type ('"+n+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(var r in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i},Object.defineProperties(IP.prototype,zP);var LP=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},BP={isRequired:{configurable:!0}};BP.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(LP.prototype,BP);var NP=function(t,e,i,n){this.name=t,this.schema=i,this.spec=n,this.attrs=RP(n.attrs),this.rank=e,this.excluded=null;var r=DP(this.attrs);this.instance=r&&new GD(this,r)};NP.prototype.create=function(t){return!t&&this.instance?this.instance:new GD(this,PP(this.attrs,t))},NP.compile=function(t,e){var i=Object.create(null),n=0;return t.forEach((function(t,r){return i[t]=new NP(t,n++,e,r)})),i},NP.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},NP.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},NP.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var jP=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=jD.from(t.nodes),this.spec.marks=jD.from(t.marks),this.nodes=IP.compile(this.spec.nodes,this),this.marks=NP.compile(this.spec.marks,this);var i=Object.create(null);for(var n in this.nodes){if(n in this.marks)throw new RangeError(n+" can not be both a node and a mark");var r=this.nodes[n],o=r.spec.content||"",s=r.spec.marks;r.contentMatch=i[o]||(i[o]=wP.parse(o,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.markSet="_"==s?null:s?FP(this,s.split(" ")):""!=s&&r.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],h=l.spec.excludes;l.excluded=null==h?[l]:""==h?[]:FP(this,h.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function FP(t,e){for(var i=[],n=0;n<e.length;n++){var r=e[n],o=t.marks[r],s=o;if(o)i.push(o);else for(var a in t.marks){var l=t.marks[a];("_"==r||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&i.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return i}jP.prototype.node=function(t,e,i,n){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof IP))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,i,n)},jP.prototype.text=function(t,e){var i=this.nodes.text;return new yP(i,i.defaultAttrs,t,GD.setFrom(e))},jP.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},jP.prototype.nodeFromJSON=function(t){return mP.fromJSON(this,t)},jP.prototype.markFromJSON=function(t){return GD.fromJSON(this,t)},jP.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var VP=function(t,e){var i=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?i.tags.push(t):t.style&&i.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var i=t.nodes[e.node];return i.contentMatch.matchType(i)}))};VP.prototype.parse=function(t,e){void 0===e&&(e={});var i=new GP(this,e,!1);return i.addAll(t,null,e.from,e.to),i.finish()},VP.prototype.parseSlice=function(t,e){void 0===e&&(e={});var i=new GP(this,e,!0);return i.addAll(t,null,e.from,e.to),XD.maxOpen(i.finish())},VP.prototype.matchTag=function(t,e,i){for(var n=i?this.tags.indexOf(i)+1:0;n<this.tags.length;n++){var r=this.tags[n];if(XP(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(t);if(!1===o)continue;r.attrs=o}return r}}},VP.prototype.matchStyle=function(t,e,i,n){for(var r=n?this.styles.indexOf(n)+1:0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(t)||o.context&&!i.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var s=o.getAttrs(e);if(!1===s)continue;o.attrs=s}return o}}},VP.schemaRules=function(t){var e=[];function i(t){for(var i=null==t.priority?50:t.priority,n=0;n<e.length;n++){var r=e[n];if((null==r.priority?50:r.priority)<i)break}e.splice(n,0,t)}var n=function(e){var n=t.marks[e].spec.parseDOM;n&&n.forEach((function(t){i(t=YP(t)),t.mark=e}))};for(var r in t.marks)n(r);var o;for(var s in t.nodes)o=void 0,(o=t.nodes[s].spec.parseDOM)&&o.forEach((function(t){i(t=YP(t)),t.node=s}));return e},VP.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new VP(t,VP.schemaRules(t)))};var HP={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},WP={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},UP={ol:!0,ul:!0};function qP(t,e,i){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&i}var $P=function(t,e,i,n,r,o,s){this.type=t,this.attrs=e,this.solid=r,this.match=o||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=i,this.activeMarks=GD.none,this.pendingMarks=n,this.stashMarks=[]};$P.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(HD.from(t));if(!e){var i,n=this.type.contentMatch;return(i=n.findWrapping(t.type))?(this.match=n,i):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},$P.prototype.finish=function(t){if(!(1&this.options)){var e,i=this.content[this.content.length-1];i&&i.isText&&(e=/[ \t\r\n\u000c]+$/.exec(i.text))&&(i.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-e[0].length)))}var n=HD.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(HD.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n},$P.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},$P.prototype.applyPending=function(t){for(var e=0,i=this.pendingMarks;e<i.length;e++){var n=i[e];(this.type?this.type.allowsMarkType(n.type):ZP(n.type,t))&&!n.isInSet(this.activeMarks)&&(this.activeMarks=n.addToSet(this.activeMarks),this.pendingMarks=n.removeFromSet(this.pendingMarks))}},$P.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!HP.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var GP=function(t,e,i){this.parser=t,this.options=e,this.isOpen=i;var n,r=e.topNode,o=qP(null,e.preserveWhitespace,0)|(i?4:0);n=r?new $P(r.type,r.attrs,GD.none,GD.none,!0,e.topMatch||r.type.contentMatch,o):new $P(i?null:t.schema.topNodeType,null,GD.none,GD.none,!0,null,o),this.nodes=[n],this.open=0,this.find=e.findPositions,this.needsBlock=!1},KP={top:{configurable:!0},currentPos:{configurable:!0}};function XP(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function YP(t){var e={};for(var i in t)e[i]=t[i];return e}function ZP(t,e){var i=e.schema.nodes,n=function(n){var r=i[n];if(r.allowsMarkType(t)){var o=[],s=function(t){o.push(t);for(var i=0;i<t.edgeCount;i++){var n=t.edge(i),r=n.type,a=n.next;if(r==e)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(r.contentMatch)?{v:!0}:void 0}};for(var r in i){var o=n(r);if(o)return o.v}}KP.top.get=function(){return this.nodes[this.open]},GP.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),i=e?this.readStyles(function(t){var e,i=/\s*([\w-]+)\s*:\s*([^;]+)/g,n=[];for(;e=i.exec(t);)n.push(e[1],e[2].trim());return n}(e)):null,n=this.top;if(null!=i)for(var r=0;r<i.length;r++)this.addPendingMark(i[r]);if(this.addElement(t),null!=i)for(var o=0;o<i.length;o++)this.removePendingMark(i[o],n)}},GP.prototype.addTextNode=function(t){var e=t.nodeValue,i=this.top;if(2&i.options||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&i.options)e=2&i.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var n=i.content[i.content.length-1],r=t.previousSibling;(!n||r&&"BR"==r.nodeName||n.isText&&/[ \t\r\n\u000c]$/.test(n.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},GP.prototype.addElement=function(t,e){var i,n=t.nodeName.toLowerCase();UP.hasOwnProperty(n)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,i=null;e;e=e.nextSibling){var n=1==e.nodeType?e.nodeName.toLowerCase():null;n&&UP.hasOwnProperty(n)&&i?(i.appendChild(e),e=i):"li"==n?i=e:n&&(i=null)}}(t);var r=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(i=this.parser.matchTag(t,this,e));if(r?r.ignore:WP.hasOwnProperty(n))this.findInside(t),this.ignoreFallback(t);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(t=r.skip);var o,s=this.top,a=this.needsBlock;if(HP.hasOwnProperty(n))o=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,r,!1===r.consuming?i:null)},GP.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},GP.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},GP.prototype.readStyles=function(t){var e=GD.none;t:for(var i=0;i<t.length;i+=2)for(var n=null;;){var r=this.parser.matchStyle(t[i],t[i+1],this,n);if(!r)continue t;if(r.ignore)return null;if(e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e),!1!==r.consuming)break;n=r}return e},GP.prototype.addElementByRule=function(t,e,i){var n,r,o,s=this;e.node?(r=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace):(o=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(o));var a=this.top;if(r&&r.isLeaf)this.findInside(t);else if(i)this.addElement(t,i);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var l=e.contentElement;"string"==typeof l?l=t.querySelector(l):"function"==typeof l&&(l=l(t)),l||(l=t),this.findAround(t,l,!0),this.addAll(l,n)}n&&(this.sync(a),this.open--),o&&this.removePendingMark(o,a)},GP.prototype.addAll=function(t,e,i,n){for(var r=i||0,o=i?t.childNodes[i]:t.firstChild,s=null==n?null:t.childNodes[n];o!=s;o=o.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(o),e&&HP.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,r)},GP.prototype.findPlace=function(t){for(var e,i,n=this.open;n>=0;n--){var r=this.nodes[n],o=r.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,i=r,!o.length))break;if(r.solid)break}if(!e)return!1;this.sync(i);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},GP.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var i=this.top;i.applyPending(t.type),i.match&&(i.match=i.match.matchType(t.type));for(var n=i.activeMarks,r=0;r<t.marks.length;r++)i.type&&!i.type.allowsMarkType(t.marks[r].type)||(n=t.marks[r].addToSet(n));return i.content.push(t.mark(n)),!0}return!1},GP.prototype.enter=function(t,e,i){var n=this.findPlace(t.create(e));return n&&this.enterInner(t,e,!0,i),n},GP.prototype.enterInner=function(t,e,i,n){this.closeExtra();var r=this.top;r.applyPending(t),r.match=r.match&&r.match.matchType(t,e);var o=qP(t,n,r.options);4&r.options&&0==r.content.length&&(o|=4),this.nodes.push(new $P(t,e,r.activeMarks,r.pendingMarks,i,null,o)),this.open++},GP.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},GP.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},GP.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},KP.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var i=this.nodes[e].content,n=i.length-1;n>=0;n--)t+=i[n].nodeSize;e&&t++}return t},GP.prototype.findAtPoint=function(t,e){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==e&&(this.find[i].pos=this.currentPos)},GP.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},GP.prototype.findAround=function(t,e,i){if(t!=e&&this.find)for(var n=0;n<this.find.length;n++){if(null==this.find[n].pos&&1==t.nodeType&&t.contains(this.find[n].node))e.compareDocumentPosition(this.find[n].node)&(i?2:4)&&(this.find[n].pos=this.currentPos)}},GP.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},GP.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var i=t.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),o=-(n?n.depth+1:0)+(r?0:1),s=function(t,a){for(;t>=0;t--){var l=i[t];if(""==l){if(t==i.length-1||0==t)continue;for(;a>=o;a--)if(s(t-1,a))return!0;return!1}var h=a>0||0==a&&r?e.nodes[a].type:n&&a>=o?n.node(a-o).type:null;if(!h||h.name!=l&&-1==h.groups.indexOf(l))return!1;a--}return!0};return s(i.length-1,this.open)},GP.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var i=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(var n in this.parser.schema.nodes){var r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}},GP.prototype.addPendingMark=function(t){var e=function(t,e){for(var i=0;i<e.length;i++)if(t.eq(e[i]))return e[i]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},GP.prototype.removePendingMark=function(t,e){for(var i=this.open;i>=0;i--){var n=this.nodes[i];if(n.pendingMarks.lastIndexOf(t)>-1)n.pendingMarks=t.removeFromSet(n.pendingMarks);else{n.activeMarks=t.removeFromSet(n.activeMarks);var r=n.popFromStashMark(t);r&&n.type&&n.type.allowsMarkType(r.type)&&(n.activeMarks=r.addToSet(n.activeMarks))}if(n==e)break}},Object.defineProperties(GP.prototype,KP);var JP=function(t,e){this.nodes=t||{},this.marks=e||{}};function QP(t){var e={};for(var i in t){var n=t[i].spec.toDOM;n&&(e[i]=n)}return e}function tR(t){return t.document||window.document}JP.prototype.serializeFragment=function(t,e,i){var n=this;void 0===e&&(e={}),i||(i=tR(e).createDocumentFragment());var r=i,o=null;return t.forEach((function(t){if(o||t.marks.length){o||(o=[]);for(var i=0,s=0;i<o.length&&s<t.marks.length;){var a=t.marks[s];if(n.marks[a.type.name]){if(!a.eq(o[i])||!1===a.type.spec.spanning)break;i+=2,s++}else s++}for(;i<o.length;)r=o.pop(),o.pop();for(;s<t.marks.length;){var l=t.marks[s++],h=n.serializeMark(l,t.isInline,e);h&&(o.push(l,r),r.appendChild(h.dom),r=h.contentDOM||h.dom)}}r.appendChild(n.serializeNodeInner(t,e))})),i},JP.prototype.serializeNodeInner=function(t,e){void 0===e&&(e={});var i=JP.renderSpec(tR(e),this.nodes[t.type.name](t)),n=i.dom,r=i.contentDOM;if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,r,e):this.serializeFragment(t.content,e,r)}return n},JP.prototype.serializeNode=function(t,e){void 0===e&&(e={});for(var i=this.serializeNodeInner(t,e),n=t.marks.length-1;n>=0;n--){var r=this.serializeMark(t.marks[n],t.isInline,e);r&&((r.contentDOM||r.dom).appendChild(i),i=r.dom)}return i},JP.prototype.serializeMark=function(t,e,i){void 0===i&&(i={});var n=this.marks[t.type.name];return n&&JP.renderSpec(tR(i),n(t,e))},JP.renderSpec=function(t,e,i){if(void 0===i&&(i=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var n=e[0],r=n.indexOf(" ");r>0&&(i=n.slice(0,r),n=n.slice(r+1));var o=null,s=i?t.createElementNS(i,n):t.createElement(n),a=e[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var h in l=2,a)if(null!=a[h]){var c=h.indexOf(" ");c>0?s.setAttributeNS(h.slice(0,c),h.slice(c+1),a[h]):s.setAttribute(h,a[h])}for(var p=l;p<e.length;p++){var u=e[p];if(0===u){if(p<e.length-1||p>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var d=JP.renderSpec(t,u,i),f=d.dom,v=d.contentDOM;if(s.appendChild(f),v){if(o)throw new RangeError("Multiple content holes");o=v}}return{dom:s,contentDOM:o}},JP.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new JP(this.nodesFromSchema(t),this.marksFromSchema(t)))},JP.nodesFromSchema=function(t){var e=QP(t.nodes);return e.text||(e.text=function(t){return t.text}),e},JP.marksFromSchema=function(t){return QP(t.marks)};var eR=Math.pow(2,16);function iR(t,e){return t+e*eR}function nR(t){return 65535&t}var rR=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null),this.pos=t,this.deleted=e,this.recover=i},oR=function t(e,i){if(void 0===i&&(i=!1),!e.length&&t.empty)return t.empty;this.ranges=e,this.inverted=i};oR.prototype.recover=function(t){var e=0,i=nR(t);if(!this.inverted)for(var n=0;n<i;n++)e+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*i]+e+function(t){return(t-(65535&t))/eR}(t)},oR.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},oR.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},oR.prototype._map=function(t,e,i){for(var n=0,r=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var l=this.ranges[s+r],h=this.ranges[s+o],c=a+l;if(t<=c){var p=a+n+((l?t==a?-1:t==c?1:e:e)<0?0:h);if(i)return p;var u=t==(e<0?a:c)?null:iR(s/3,t-a);return new rR(p,e<0?t!=a:t!=c,u)}n+=h-l}return i?t+n:new rR(t+n)},oR.prototype.touches=function(t,e){for(var i=0,n=nR(e),r=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?i:0);if(a>t)break;var l=this.ranges[s+r];if(t<=a+l&&s==3*n)return!0;i+=this.ranges[s+o]-l}return!1},oR.prototype.forEach=function(t){for(var e=this.inverted?2:1,i=this.inverted?1:2,n=0,r=0;n<this.ranges.length;n+=3){var o=this.ranges[n],s=o-(this.inverted?r:0),a=o+(this.inverted?0:r),l=this.ranges[n+e],h=this.ranges[n+i];t(s,s+l,a,a+h),r+=h-l}},oR.prototype.invert=function(){return new oR(this.ranges,!this.inverted)},oR.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},oR.offset=function(t){return 0==t?oR.empty:new oR(t<0?[0,-t,0]:[0,0,t])},oR.empty=new oR([]);var sR=function(t,e,i,n){this.maps=t||[],this.from=i||0,this.to=null==n?this.maps.length:n,this.mirror=e};function aR(t){var e=Error.call(this,t);return e.__proto__=aR.prototype,e}sR.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new sR(this.maps,this.mirror,t,e)},sR.prototype.copy=function(){return new sR(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},sR.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},sR.prototype.appendMapping=function(t){for(var e=0,i=this.maps.length;e<t.maps.length;e++){var n=t.getMirror(e);this.appendMap(t.maps[e],null!=n&&n<e?i+n:null)}},sR.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},sR.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},sR.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,i=this.maps.length+t.maps.length;e>=0;e--){var n=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=n&&n>e?i-n-1:null)}},sR.prototype.invert=function(){var t=new sR;return t.appendMappingInverted(this),t},sR.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var i=this.from;i<this.to;i++)t=this.maps[i].map(t,e);return t},sR.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},sR.prototype._map=function(t,e,i){for(var n=!1,r=this.from;r<this.to;r++){var o=this.maps[r].mapResult(t,e);if(null!=o.recover){var s=this.getMirror(r);if(null!=s&&s>r&&s<this.to){r=s,t=this.maps[s].recover(o.recover);continue}}o.deleted&&(n=!0),t=o.pos}return i?t:new rR(t,n)},aR.prototype=Object.create(Error.prototype),aR.prototype.constructor=aR,aR.prototype.name="TransformError";var lR=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new sR},hR={before:{configurable:!0},docChanged:{configurable:!0}};function cR(){throw new Error("Override me")}hR.before.get=function(){return this.docs.length?this.docs[0]:this.doc},lR.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new aR(e.failed);return this},lR.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},hR.docChanged.get=function(){return this.steps.length>0},lR.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(lR.prototype,hR);var pR=Object.create(null),uR=function(){};uR.prototype.apply=function(t){return cR()},uR.prototype.getMap=function(){return oR.empty},uR.prototype.invert=function(t){return cR()},uR.prototype.map=function(t){return cR()},uR.prototype.merge=function(t){return null},uR.prototype.toJSON=function(){return cR()},uR.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var i=pR[e.stepType];if(!i)throw new RangeError("No step type "+e.stepType+" defined");return i.fromJSON(t,e)},uR.jsonID=function(t,e){if(t in pR)throw new RangeError("Duplicate use of step JSON ID "+t);return pR[t]=e,e.prototype.jsonID=t,e};var dR=function(t,e){this.doc=t,this.failed=e};dR.ok=function(t){return new dR(t,null)},dR.fail=function(t){return new dR(null,t)},dR.fromReplace=function(t,e,i,n){try{return dR.ok(t.replace(e,i,n))}catch(t){if(t instanceof KD)return dR.fail(t.message);throw t}};var fR=function(t){function e(e,i,n,r){t.call(this),this.from=e,this.to=i,this.slice=n,this.structure=!!r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&mR(t,this.from,this.to)?dR.fail("Structure replace would overwrite content"):dR.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new oR([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var i=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return i.deleted&&n.deleted?null:new e(i.pos,Math.max(i.pos,n.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var i=this.slice.size+t.slice.size==0?XD.empty:new XD(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,i,this.structure)}var n=this.slice.size+t.slice.size==0?XD.empty:new XD(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),n,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(i.from,i.to,XD.fromJSON(t,i.slice),!!i.structure)},e}(uR);uR.jsonID("replace",fR);var vR=function(t){function e(e,i,n,r,o,s,a){t.call(this),this.from=e,this.to=i,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(mR(t,this.from,this.gapFrom)||mR(t,this.gapTo,this.to)))return dR.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return dR.fail("Gap is not a flat range");var i=this.slice.insertAt(this.insert,e.content);return i?dR.fromReplace(t,this.from,this.to,i):dR.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new oR([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var i=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+i,this.from+this.insert,this.from+this.insert+i,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var i=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),r=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return i.deleted&&n.deleted||r<i.pos||o>n.pos?null:new e(i.pos,n.pos,r,o,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,i){if("number"!=typeof i.from||"number"!=typeof i.to||"number"!=typeof i.gapFrom||"number"!=typeof i.gapTo||"number"!=typeof i.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(i.from,i.to,i.gapFrom,i.gapTo,XD.fromJSON(t,i.slice),i.insert,!!i.structure)},e}(uR);function mR(t,e,i){for(var n=t.resolve(e),r=i-e,o=n.depth;r>0&&o>0&&n.indexAfter(o)==n.node(o).childCount;)o--,r--;if(r>0)for(var s=n.node(o).maybeChild(n.indexAfter(o));r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}return!1}function gR(t,e,i){return(0==e||t.canReplace(e,t.childCount))&&(i==t.childCount||t.canReplace(0,i))}function yR(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),i=t.depth;;--i){var n=t.$from.node(i),r=t.$from.index(i),o=t.$to.indexAfter(i);if(i<t.depth&&n.canReplace(r,o,e))return i;if(0==i||n.type.spec.isolating||!gR(n,r,o))break}}function bR(t){return{type:t,attrs:null}}function wR(t,e,i,n){void 0===i&&(i=1);var r=t.resolve(e),o=r.depth-i,s=n&&n[n.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(var a=r.depth-1,l=i-2;a>o;a--,l--){var h=r.node(a),c=r.index(a);if(h.type.spec.isolating)return!1;var p=h.content.cutByIndex(c,h.childCount),u=n&&n[l]||h;if(u!=h&&(p=p.replaceChild(0,u.type.create(u.attrs))),!h.canReplace(c+1,h.childCount)||!u.type.validContent(p))return!1}var d=r.indexAfter(o),f=n&&n[0];return r.node(o).canReplaceWith(d,d,f?f.type:r.node(o+1).type)}function xR(t,e){var i=t.resolve(e),n=i.index();return _R(i.nodeBefore,i.nodeAfter)&&i.parent.canReplace(n,n+1)}function _R(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function kR(t,e,i){var n=t.resolve(e);if(!i.content.size)return e;for(var r=i.content,o=0;o<i.openStart;o++)r=r.firstChild.content;for(var s=1;s<=(0==i.openStart&&i.size?2:1);s++)for(var a=n.depth;a>=0;a--){var l=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,h=n.index(a)+(l>0?1:0),c=n.node(a),p=!1;if(1==s)p=c.canReplace(h,h,r);else{var u=c.contentMatchAt(h).findWrapping(r.firstChild.type);p=u&&c.canReplaceWith(h,h,u[0])}if(p)return 0==l?n.pos:l<0?n.before(a+1):n.after(a+1)}return null}function SR(t,e,i){for(var n=[],r=0;r<t.childCount;r++){var o=t.child(r);o.content.size&&(o=o.copy(SR(o.content,e,o))),o.isInline&&(o=e(o,i,r)),n.push(o)}return HD.fromArray(n)}uR.jsonID("replaceAround",vR),lR.prototype.lift=function(t,e){for(var i=t.$from,n=t.$to,r=t.depth,o=i.before(r+1),s=n.after(r+1),a=o,l=s,h=HD.empty,c=0,p=r,u=!1;p>e;p--)u||i.index(p)>0?(u=!0,h=HD.from(i.node(p).copy(h)),c++):a--;for(var d=HD.empty,f=0,v=r,m=!1;v>e;v--)m||n.after(v+1)<n.end(v)?(m=!0,d=HD.from(n.node(v).copy(d)),f++):l++;return this.step(new vR(a,l,o,s,new XD(h.append(d),c,f),h.size-c,!0))},lR.prototype.wrap=function(t,e){for(var i=HD.empty,n=e.length-1;n>=0;n--){if(i.size){var r=e[n].type.contentMatch.matchFragment(i);if(!r||!r.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=HD.from(e[n].type.create(e[n].attrs,i))}var o=t.start,s=t.end;return this.step(new vR(o,s,o,s,new XD(i,0,0),e.length,!0))},lR.prototype.setBlockType=function(t,e,i,n){var r=this;if(void 0===e&&(e=t),!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(i,n)&&function(t,e,i){var n=t.resolve(e),r=n.index();return n.parent.canReplaceWith(r,r+1,i)}(r.doc,r.mapping.slice(o).map(e),i)){r.clearIncompatible(r.mapping.slice(o).map(e,1),i);var s=r.mapping.slice(o),a=s.map(e,1),l=s.map(e+t.nodeSize,1);return r.step(new vR(a,l,a+1,l-1,new XD(HD.from(i.create(n,null,t.marks)),0,0),1,!0)),!1}})),this},lR.prototype.setNodeMarkup=function(t,e,i,n){var r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at given position");e||(e=r.type);var o=e.create(i,null,n||r.marks);if(r.isLeaf)return this.replaceWith(t,t+r.nodeSize,o);if(!e.validContent(r.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new vR(t,t+r.nodeSize,t+1,t+r.nodeSize-1,new XD(HD.from(o),0,0),1,!0))},lR.prototype.split=function(t,e,i){void 0===e&&(e=1);for(var n=this.doc.resolve(t),r=HD.empty,o=HD.empty,s=n.depth,a=n.depth-e,l=e-1;s>a;s--,l--){r=HD.from(n.node(s).copy(r));var h=i&&i[l];o=HD.from(h?h.type.create(h.attrs,o):n.node(s).copy(o))}return this.step(new fR(t,t,new XD(r.append(o),e,e),!0))},lR.prototype.join=function(t,e){void 0===e&&(e=1);var i=new fR(t-e,t+e,XD.empty,!0);return this.step(i)};var CR=function(t){function e(e,i,n){t.call(this),this.from=e,this.to=i,this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,i=t.slice(this.from,this.to),n=t.resolve(this.from),r=n.node(n.sharedDepth(this.to)),o=new XD(SR(i.content,(function(t,i){return t.isAtom&&i.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),r),i.openStart,i.openEnd);return dR.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new ER(this.from,this.to,this.mark)},e.prototype.map=function(t){var i=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return i.deleted&&n.deleted||i.pos>=n.pos?null:new e(i.pos,n.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(i.from,i.to,t.markFromJSON(i.mark))},e}(uR);uR.jsonID("addMark",CR);var ER=function(t){function e(e,i,n){t.call(this),this.from=e,this.to=i,this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,i=t.slice(this.from,this.to),n=new XD(SR(i.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),i.openStart,i.openEnd);return dR.fromReplace(t,this.from,this.to,n)},e.prototype.invert=function(){return new CR(this.from,this.to,this.mark)},e.prototype.map=function(t){var i=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return i.deleted&&n.deleted||i.pos>=n.pos?null:new e(i.pos,n.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(i.from,i.to,t.markFromJSON(i.mark))},e}(uR);function TR(t,e,i,n){if(void 0===i&&(i=e),void 0===n&&(n=XD.empty),e==i&&!n.size)return null;var r=t.resolve(e),o=t.resolve(i);return AR(r,o,n)?new fR(e,i,n):new MR(r,o,n).fit()}function AR(t,e,i){return!i.openStart&&!i.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),i.content)}uR.jsonID("removeMark",ER),lR.prototype.addMark=function(t,e,i){var n=this,r=[],o=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(n,l,h){if(n.isInline){var c=n.marks;if(!i.isInSet(c)&&h.type.allowsMarkType(i.type)){for(var p=Math.max(l,t),u=Math.min(l+n.nodeSize,e),d=i.addToSet(c),f=0;f<c.length;f++)c[f].isInSet(d)||(s&&s.to==p&&s.mark.eq(c[f])?s.to=u:r.push(s=new ER(p,u,c[f])));a&&a.to==p?a.to=u:o.push(a=new CR(p,u,i))}}})),r.forEach((function(t){return n.step(t)})),o.forEach((function(t){return n.step(t)})),this},lR.prototype.removeMark=function(t,e,i){var n=this;void 0===i&&(i=null);var r=[],o=0;return this.doc.nodesBetween(t,e,(function(n,s){if(n.isInline){o++;var a=null;if(i instanceof NP)for(var l,h=n.marks;l=i.isInSet(h);)(a||(a=[])).push(l),h=l.removeFromSet(h);else i?i.isInSet(n.marks)&&(a=[i]):a=n.marks;if(a&&a.length)for(var c=Math.min(s+n.nodeSize,e),p=0;p<a.length;p++){for(var u=a[p],d=void 0,f=0;f<r.length;f++){var v=r[f];v.step==o-1&&u.eq(r[f].style)&&(d=v)}d?(d.to=c,d.step=o):r.push({style:u,from:Math.max(s,t),to:c,step:o})}}})),r.forEach((function(t){return n.step(new ER(t.from,t.to,t.style))})),this},lR.prototype.clearIncompatible=function(t,e,i){void 0===i&&(i=e.contentMatch);for(var n=this.doc.nodeAt(t),r=[],o=t+1,s=0;s<n.childCount;s++){var a=n.child(s),l=o+a.nodeSize,h=i.matchType(a.type,a.attrs);if(h){i=h;for(var c=0;c<a.marks.length;c++)e.allowsMarkType(a.marks[c].type)||this.step(new ER(o,l,a.marks[c]))}else r.push(new fR(o,l,XD.empty));o=l}if(!i.validEnd){var p=i.fillBefore(HD.empty,!0);this.replace(o,o,new XD(p,0,0))}for(var u=r.length-1;u>=0;u--)this.step(r[u]);return this},lR.prototype.replace=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=XD.empty);var n=TR(this.doc,t,e,i);return n&&this.step(n),this},lR.prototype.replaceWith=function(t,e,i){return this.replace(t,e,new XD(HD.from(i),0,0))},lR.prototype.delete=function(t,e){return this.replace(t,e,XD.empty)},lR.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var MR=function(t,e,i){this.$to=e,this.$from=t,this.unplaced=i,this.frontier=[];for(var n=0;n<=t.depth;n++){var r=t.node(n);this.frontier.push({type:r.type,match:r.contentMatchAt(t.indexAfter(n))})}this.placed=HD.empty;for(var o=t.depth;o>0;o--)this.placed=HD.from(t.node(o).copy(this.placed))},OR={depth:{configurable:!0}};function DR(t,e,i){return 0==e?t.cutByIndex(i):t.replaceChild(0,t.firstChild.copy(DR(t.firstChild.content,e-1,i)))}function PR(t,e,i){return 0==e?t.append(i):t.replaceChild(t.childCount-1,t.lastChild.copy(PR(t.lastChild.content,e-1,i)))}function RR(t,e){for(var i=0;i<e;i++)t=t.firstChild.content;return t}function IR(t,e,i){if(e<=0)return t;var n=t.content;return e>1&&(n=n.replaceChild(0,IR(n.firstChild,e-1,1==n.childCount?i-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),i<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(HD.empty,!0)))),t.copy(n)}function zR(t,e,i,n,r){var o=t.node(e),s=r?t.indexAfter(e):t.index(e);if(s==o.childCount&&!i.compatibleContent(o.type))return null;var a=n.fillBefore(o.content,!0,s);return a&&!function(t,e,i){for(var n=i;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}(i,o.content,s)?a:null}function LR(t){return t.spec.defining||t.spec.definingForContent}function BR(t,e,i,n,r){if(e<i){var o=t.firstChild;t=t.replaceChild(0,o.copy(BR(o.content,e+1,i,n,o)))}if(e>n){var s=r.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(HD.empty,!0))}return t}function NR(t,e){for(var i=[],n=Math.min(t.depth,e.depth);n>=0;n--){var r=t.start(n);if(r<t.pos-(t.depth-n)||e.end(n)>e.pos+(e.depth-n)||t.node(n).type.spec.isolating||e.node(n).type.spec.isolating)break;(r==e.start(n)||n==t.depth&&n==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&n&&e.start(n-1)==r-1)&&i.push(n)}return i}OR.depth.get=function(){return this.frontier.length-1},MR.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),i=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;for(var o=this.placed,s=n.depth,a=r.depth;s&&a&&1==o.childCount;)o=o.firstChild.content,s--,a--;var l=new XD(o,s,a);return e>-1?new vR(n.pos,e,this.$to.pos,this.$to.end(),l,i):l.size||n.pos!=this.$to.pos?new fR(n.pos,r.pos,l):void 0},MR.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var i=void 0,n=(e?(i=RR(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,r=this.depth;r>=0;r--){var o=this.frontier[r],s=o.type,a=o.match,l=void 0,h=void 0;if(1==t&&(n?a.matchType(n.type)||(h=a.fillBefore(HD.from(n),!1)):s.compatibleContent(i.type)))return{sliceDepth:e,frontierDepth:r,parent:i,inject:h};if(2==t&&n&&(l=a.findWrapping(n.type)))return{sliceDepth:e,frontierDepth:r,parent:i,wrap:l};if(i&&a.matchType(i.type))break}},MR.prototype.openMore=function(){var t=this.unplaced,e=t.content,i=t.openStart,n=t.openEnd,r=RR(e,i);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new XD(e,i+1,Math.max(n,r.size+i>=e.size-n?i+1:0)),!0)},MR.prototype.dropNode=function(){var t=this.unplaced,e=t.content,i=t.openStart,n=t.openEnd,r=RR(e,i);if(r.childCount<=1&&i>0){var o=e.size-i<=i+r.size;this.unplaced=new XD(DR(e,i-1,1),i-1,o?i-1:n)}else this.unplaced=new XD(DR(e,i,1),i,n)},MR.prototype.placeNodes=function(t){for(var e=t.sliceDepth,i=t.frontierDepth,n=t.parent,r=t.inject,o=t.wrap;this.depth>i;)this.closeFrontierNode();if(o)for(var s=0;s<o.length;s++)this.openFrontierNode(o[s]);var a=this.unplaced,l=n?n.content:a.content,h=a.openStart-e,c=0,p=[],u=this.frontier[i],d=u.match,f=u.type;if(r){for(var v=0;v<r.childCount;v++)p.push(r.child(v));d=d.matchFragment(r)}for(var m=l.size+e-(a.content.size-a.openEnd);c<l.childCount;){var g=l.child(c),y=d.matchType(g.type);if(!y)break;(++c>1||0==h||g.content.size)&&(d=y,p.push(IR(g.mark(f.allowedMarks(g.marks)),1==c?h:0,c==l.childCount?m:-1)))}var b=c==l.childCount;b||(m=-1),this.placed=PR(this.placed,i,HD.from(p)),this.frontier[i].match=d,b&&m<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,x=l;w<m;w++){var _=x.lastChild;this.frontier.push({type:_.type,match:_.contentMatchAt(_.childCount)}),x=_.content}this.unplaced=b?0==e?XD.empty:new XD(DR(a.content,e-1,1),e-1,m<0?a.openEnd:e-1):new XD(DR(a.content,e,c),a.openStart,a.openEnd)},MR.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!zR(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var i=this.$to.depth,n=this.$to.after(i);i>1&&n==this.$to.end(--i);)++n;return n},MR.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var i=this.frontier[e],n=i.match,r=i.type,o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=zR(t,e,r,n,o);if(s){for(var a=e-1;a>=0;a--){var l=this.frontier[a],h=l.match,c=zR(t,a,l.type,h,!0);if(!c||c.childCount)continue t}return{depth:e,fit:s,move:o?t.doc.resolve(t.after(e+1)):t}}}},MR.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=PR(this.placed,e.depth,e.fit)),t=e.move;for(var i=e.depth+1;i<=t.depth;i++){var n=t.node(i),r=n.type.contentMatch.fillBefore(n.content,!0,t.index(i));this.openFrontierNode(n.type,n.attrs,r)}return t},MR.prototype.openFrontierNode=function(t,e,i){var n=this.frontier[this.depth];n.match=n.match.matchType(t),this.placed=PR(this.placed,this.depth,HD.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})},MR.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(HD.empty,!0);t.childCount&&(this.placed=PR(this.placed,this.frontier.length,t))},Object.defineProperties(MR.prototype,OR),lR.prototype.replaceRange=function(t,e,i){if(!i.size)return this.deleteRange(t,e);var n=this.doc.resolve(t),r=this.doc.resolve(e);if(AR(n,r,i))return this.step(new fR(t,e,i));var o=NR(n,this.doc.resolve(e));0==o[o.length-1]&&o.pop();var s=-(n.depth+1);o.unshift(s);for(var a=n.depth,l=n.pos-1;a>0;a--,l--){var h=n.node(a).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;o.indexOf(a)>-1?s=a:n.before(a)==l&&o.splice(1,0,-a)}for(var c=o.indexOf(s),p=[],u=i.openStart,d=i.content,f=0;;f++){var v=d.firstChild;if(p.push(v),f==i.openStart)break;d=v.content}for(var m=u-1;m>=0;m--){var g=p[m].type,y=LR(g);if(y&&n.node(c).type!=g)u=m;else if(y||!g.isTextblock)break}for(var b=i.openStart;b>=0;b--){var w=(b+u+1)%(i.openStart+1),x=p[w];if(x)for(var _=0;_<o.length;_++){var k=o[(_+c)%o.length],S=!0;k<0&&(S=!1,k=-k);var C=n.node(k-1),E=n.index(k-1);if(C.canReplaceWith(E,E,x.type,x.marks))return this.replace(n.before(k),S?r.after(k):e,new XD(BR(i.content,0,i.openStart,w),w,i.openEnd))}}for(var T=this.steps.length,A=o.length-1;A>=0&&(this.replace(t,e,i),!(this.steps.length>T));A--){var M=o[A];M<0||(t=n.before(M),e=r.after(M))}return this},lR.prototype.replaceRangeWith=function(t,e,i){if(!i.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var n=function(t,e,i){var n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),i))return e;if(0==n.parentOffset)for(var r=n.depth-1;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,i))return n.before(r+1);if(o>0)return null}if(n.parentOffset==n.parent.content.size)for(var s=n.depth-1;s>=0;s--){var a=n.indexAfter(s);if(n.node(s).canReplaceWith(a,a,i))return n.after(s+1);if(a<n.node(s).childCount)return null}}(this.doc,t,i.type);null!=n&&(t=e=n)}return this.replaceRange(t,e,new XD(HD.from(i),0,0))},lR.prototype.deleteRange=function(t,e){for(var i=this.doc.resolve(t),n=this.doc.resolve(e),r=NR(i,n),o=0;o<r.length;o++){var s=r[o],a=o==r.length-1;if(a&&0==s||i.node(s).type.contentMatch.validEnd)return this.delete(i.start(s),n.end(s));if(s>0&&(a||i.node(s-1).canReplace(i.index(s-1),n.indexAfter(s-1))))return this.delete(i.before(s),n.after(s))}for(var l=1;l<=i.depth&&l<=n.depth;l++)if(t-i.start(l)==i.depth-l&&e>i.end(l)&&n.end(l)-e!=n.depth-l)return this.delete(i.before(l),e);return this.delete(t,e)};var jR=Object.create(null),FR=function(t,e,i){this.ranges=i||[new HR(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},VR={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};VR.anchor.get=function(){return this.$anchor.pos},VR.head.get=function(){return this.$head.pos},VR.from.get=function(){return this.$from.pos},VR.to.get=function(){return this.$to.pos},VR.$from.get=function(){return this.ranges[0].$from},VR.$to.get=function(){return this.ranges[0].$to},VR.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},FR.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},FR.prototype.replace=function(t,e){void 0===e&&(e=XD.empty);for(var i=e.content.lastChild,n=null,r=0;r<e.openEnd;r++)n=i,i=i.lastChild;for(var o=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],h=l.$from,c=l.$to,p=t.mapping.slice(o);t.replaceRange(p.map(h.pos),p.map(c.pos),a?XD.empty:e),0==a&&YR(t,o,(i?i.isInline:n&&n.isTextblock)?-1:1)}},FR.prototype.replaceWith=function(t,e){for(var i=t.steps.length,n=this.ranges,r=0;r<n.length;r++){var o=n[r],s=o.$from,a=o.$to,l=t.mapping.slice(i),h=l.map(s.pos),c=l.map(a.pos);r?t.deleteRange(h,c):(t.replaceRangeWith(h,c,e),YR(t,i,e.isInline?-1:1))}},FR.findFrom=function(t,e,i){var n=t.parent.inlineContent?new WR(t):XR(t.node(0),t.parent,t.pos,t.index(),e,i);if(n)return n;for(var r=t.depth-1;r>=0;r--){var o=e<0?XR(t.node(0),t.node(r),t.before(r+1),t.index(r),e,i):XR(t.node(0),t.node(r),t.after(r+1),t.index(r)+1,e,i);if(o)return o}},FR.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new GR(t.node(0))},FR.atStart=function(t){return XR(t,t,0,0,1)||new GR(t)},FR.atEnd=function(t){return XR(t,t,t.content.size,t.childCount,-1)||new GR(t)},FR.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var i=jR[e.type];if(!i)throw new RangeError("No selection type "+e.type+" defined");return i.fromJSON(t,e)},FR.jsonID=function(t,e){if(t in jR)throw new RangeError("Duplicate use of selection JSON ID "+t);return jR[t]=e,e.prototype.jsonID=t,e},FR.prototype.getBookmark=function(){return WR.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(FR.prototype,VR),FR.prototype.visible=!0;var HR=function(t,e){this.$from=t,this.$to=e},WR=function(t){function e(e,i){void 0===i&&(i=e),t.call(this,e,i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={$cursor:{configurable:!0}};return i.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(i,n){var r=i.resolve(n.map(this.head));if(!r.parent.inlineContent)return t.near(r);var o=i.resolve(n.map(this.anchor));return new e(o.parent.inlineContent?o:r,r)},e.prototype.replace=function(e,i){if(void 0===i&&(i=XD.empty),t.prototype.replace.call(this,e,i),i==XD.empty){var n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new UR(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,i){if("number"!=typeof i.anchor||"number"!=typeof i.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(i.anchor),t.resolve(i.head))},e.create=function(t,e,i){void 0===i&&(i=e);var n=t.resolve(e);return new this(n,i==e?n:t.resolve(i))},e.between=function(i,n,r){var o=i.pos-n.pos;if(r&&!o||(r=o>=0?1:-1),!n.parent.inlineContent){var s=t.findFrom(n,r,!0)||t.findFrom(n,-r,!0);if(!s)return t.near(n,r);n=s.$head}return i.parent.inlineContent||(0==o||(i=(t.findFrom(i,-r,!0)||t.findFrom(i,r,!0)).$anchor).pos<n.pos!=o<0)&&(i=n),new e(i,n)},Object.defineProperties(e.prototype,i),e}(FR);FR.jsonID("text",WR);var UR=function(t,e){this.anchor=t,this.head=e};UR.prototype.map=function(t){return new UR(t.map(this.anchor),t.map(this.head))},UR.prototype.resolve=function(t){return WR.between(t.resolve(this.anchor),t.resolve(this.head))};var qR=function(t){function e(e){var i=e.nodeAfter,n=e.node(0).resolve(e.pos+i.nodeSize);t.call(this,e,n),this.node=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(i,n){var r=n.mapResult(this.anchor),o=r.deleted,s=r.pos,a=i.resolve(s);return o?t.near(a):new e(a)},e.prototype.content=function(){return new XD(HD.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new $R(this.anchor)},e.fromJSON=function(t,i){if("number"!=typeof i.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(i.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(FR);qR.prototype.visible=!1,FR.jsonID("node",qR);var $R=function(t){this.anchor=t};$R.prototype.map=function(t){var e=t.mapResult(this.anchor),i=e.deleted,n=e.pos;return i?new UR(n,n):new $R(n)},$R.prototype.resolve=function(t){var e=t.resolve(this.anchor),i=e.nodeAfter;return i&&qR.isSelectable(i)?new qR(e):FR.near(e)};var GR=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,i){if(void 0===i&&(i=XD.empty),i==XD.empty){e.delete(0,e.doc.content.size);var n=t.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else t.prototype.replace.call(this,e,i)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return KR},e}(FR);FR.jsonID("all",GR);var KR={map:function(){return this},resolve:function(t){return new GR(t)}};function XR(t,e,i,n,r,o){if(e.inlineContent)return WR.create(t,i);for(var s=n-(r>0?0:1);r>0?s<e.childCount:s>=0;s+=r){var a=e.child(s);if(a.isAtom){if(!o&&qR.isSelectable(a))return qR.create(t,i-(r<0?a.nodeSize:0))}else{var l=XR(t,a,i+r,r<0?a.childCount:0,r,o);if(l)return l}i+=a.nodeSize*r}}function YR(t,e,i){var n=t.steps.length-1;if(!(n<e)){var r,o=t.steps[n];if(o instanceof fR||o instanceof vR)t.mapping.maps[n].forEach((function(t,e,i,n){null==r&&(r=n)})),t.setSelection(FR.near(t.doc.resolve(r),i))}}var ZR=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return i.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},i.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return GD.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},i.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,i){t.prototype.addStep.call(this,e,i),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var i=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||GD.none))),i.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,i){void 0===i&&(i=e);var n=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(n.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,i);var r=this.storedMarks;if(!r){var o=this.doc.resolve(e);r=i==e?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(e,i,n.text(t,r)),this.selection.empty||this.setSelection(FR.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},i.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},i.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,i),e}(lR);function JR(t,e){return e&&t?t.bind(e):t}var QR=function(t,e,i){this.name=t,this.init=JR(e.init,i),this.apply=JR(e.apply,i)},tI=[new QR("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new QR("selection",{init:function(t,e){return t.selection||FR.atStart(e.doc)},apply:function(t){return t.selection}}),new QR("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,i,n){return n.selection.$cursor?t.storedMarks:null}}),new QR("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],eI=function(t,e){var i=this;this.schema=t,this.fields=tI.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(i.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");i.plugins.push(t),i.pluginsByKey[t.key]=t,t.spec.state&&i.fields.push(new QR(t.key,t.spec.state,t))}))},iI=function(t){this.config=t},nI={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};nI.schema.get=function(){return this.config.schema},nI.plugins.get=function(){return this.config.plugins},iI.prototype.apply=function(t){return this.applyTransaction(t).state},iI.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var i=0;i<this.config.plugins.length;i++)if(i!=e){var n=this.config.plugins[i];if(n.spec.filterTransaction&&!n.spec.filterTransaction.call(n,t,this))return!1}return!0},iI.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],i=this.applyInner(t),n=null;;){for(var r=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=n?n[o].n:0,l=n?n[o].state:this,h=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,i);if(h&&i.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!n){n=[];for(var c=0;c<this.config.plugins.length;c++)n.push(c<o?{state:i,n:e.length}:{state:this,n:0})}e.push(h),i=i.applyInner(h),r=!0}n&&(n[o]={state:i,n:e.length})}}if(!r)return{state:i,transactions:e}}},iI.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new iI(this.config),i=this.config.fields,n=0;n<i.length;n++){var r=i[n];e[r.name]=r.apply(t,this[r.name],this,e)}for(var o=0;o<rI.length;o++)rI[o](this,t,e);return e},nI.tr.get=function(){return new ZR(this)},iI.create=function(t){for(var e=new eI(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new iI(e),n=0;n<e.fields.length;n++)i[e.fields[n].name]=e.fields[n].init(t,i);return i},iI.prototype.reconfigure=function(t){for(var e=new eI(this.schema,t.plugins),i=e.fields,n=new iI(e),r=0;r<i.length;r++){var o=i[r].name;n[o]=this.hasOwnProperty(o)?this[o]:i[r].init(t,n)}return n},iI.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var i in t){if("doc"==i||"selection"==i)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var n=t[i],r=n.spec.state;r&&r.toJSON&&(e[i]=r.toJSON.call(n,this[n.key]))}return e},iI.fromJSON=function(t,e,i){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var n=new eI(t.schema,t.plugins),r=new iI(n);return n.fields.forEach((function(n){if("doc"==n.name)r.doc=mP.fromJSON(t.schema,e.doc);else if("selection"==n.name)r.selection=FR.fromJSON(r.doc,e.selection);else if("storedMarks"==n.name)e.storedMarks&&(r.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(i)for(var o in i){var s=i[o],a=s.spec.state;if(s.key==n.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,o))return void(r[n.name]=a.fromJSON.call(s,t,e[o],r))}r[n.name]=n.init(t,r)}})),r},iI.addApplyListener=function(t){rI.push(t)},iI.removeApplyListener=function(t){var e=rI.indexOf(t);e>-1&&rI.splice(e,1)},Object.defineProperties(iI.prototype,nI);var rI=[];function oI(t,e,i){for(var n in t){var r=t[n];r instanceof Function?r=r.bind(e):"handleDOMEvents"==n&&(r=oI(r,e,{})),i[n]=r}return i}var sI=function(t){this.props={},t.props&&oI(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:lI("plugin")};sI.prototype.getState=function(t){return t[this.key]};var aI=Object.create(null);function lI(t){return t in aI?t+"$"+ ++aI[t]:(aI[t]=0,t+"$")}var hI=function(t){void 0===t&&(t="key"),this.key=lI(t)};hI.prototype.get=function(t){return t.config.pluginsByKey[this.key]},hI.prototype.getState=function(t){return t[this.key]};var cI="k-parent-node",pI="k-colgroup-data",uI="k-resizable-node",dI="k-editor-resize-handle",fI="data-dir-table-resize",vI="data-dir-image-resize",mI=function(t,e){var i=(t.ownerDocument||document).createElement(e);Array.from(t.rows).filter((function(t){return t.getAttribute(cI)===e})).forEach((function(t){t.removeAttribute(cI),i.appendChild(t)})),i.children.length&&t.appendChild(i)},gI=function(t,e){var i=e.toUpperCase();t.filter((function(t){return t.nodeName===i})).forEach((function(t){Array.from(t.children).forEach((function(i){i.setAttribute(cI,e),t.parentNode&&t.parentNode.insertBefore(i,t)})),t.remove()}))},yI=function(t){var e,i=document.createElement("template");if("content"in i)i.innerHTML=t,e=i.content;else{var n=(new DOMParser).parseFromString(t,"text/html");e=document.createDocumentFragment();for(var r=n.body;r&&r.firstChild;)e.appendChild(r.firstChild)}return e},bI=function(t){var e=JP.fromSchema(t.type.schema).serializeFragment(t.content);return function(t){Array.from(t.querySelectorAll("table")).forEach((function(t){mI(t,"thead"),mI(t,"tbody"),mI(t,"tfoot");var e=Array.from(t.children).find((function(t){return 0===t.children.length}));e&&e.remove()}))}(e),e},wI=function(t,e,i){return VP.fromSchema(e).parse(t,i)},xI=function(t,e,i){var n,r=yI(t);return n=r,Array.from(n.querySelectorAll("table")).forEach((function(t){var e=Array.from(t.children);e.some((function(t){return"THEAD"===t.nodeName||"TFOOT"===t.nodeName}))&&(gI(e,"thead"),gI(e,"tbody"),gI(e,"tfoot"));var i=e.find((function(t){return"COLGROUP"===t.nodeName}));i&&(t.setAttribute(pI,i.outerHTML),i.remove())})),wI(r,e,i)},_I=function(t,e,i){return void 0===e&&(e="setHTML"),void 0===i&&(i={preserveWhitespace:"full"}),function(n,r){return r(n.tr.setSelection(new GR(n.doc)).replaceSelectionWith(xI(t,n.schema,i)).setMeta("commandName",e))}};var kI=function(){return kI=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},kI.apply(this,arguments)};function SI(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}var CI=function(t,e){var i=e.style,n=e.value,r=e.newValue;if(!t)return{changed:!1,style:null};var o=t.split(/\s*;\s*/).filter((function(t){return Boolean(t)})),s=o.filter((function(t){var e=t.split(/\s*:\s*/);return!(e[0].toLowerCase()===i&&n.test(e[1]))}));return r&&s.push(i+": "+r),{style:s.join("; ")+(s.length?";":""),changed:Boolean(r)||s.length!==o.length}},EI=function(t){return t instanceof mP?t.type.name:t.name},TI=function(t,e){return void 0===e&&(e=1),function(i){return function(t,e){return void 0===e&&(e=1),function(i){for(var n=i.$from,r=n.depth;r>0;r--){var o=n.node(r);if(t(o)&&0==(e-=1))return{depth:r,node:o}}}}((function(e){return EI(e)===EI(t)}),e)(i)}},AI=function(t,e){return function(i,n){var r=i.tr.replaceSelectionWith(t);e&&r.scrollIntoView(),n(r)}},MI={before:/[^ !,?.\[\]{}()]+$/i,after:/^[^ !,?.\[\]{}()]+/i},OI=function(t,e){return function(i,n,r){var o=function(t,e,i){if(!i.applyToWord||!t.selection.empty)return{state:t,dispatch:e};var n=!0===i.applyToWord?MI:i.applyToWord,r=null,o=t.tr,s=t.selection,a=s.$head.nodeBefore,l=s.$head.nodeAfter;if(a&&"text"===a.type.name&&a.text&&l&&"text"===l.type.name&&l.text){var h=[];s.$head.parent.descendants((function(t,e){return h.push({node:t,pos:e}),!1}));for(var c=s.$head.parentOffset,p=h.findIndex((function(t){var e=t.node,i=t.pos;return i<=c&&i+e.nodeSize>=c})),u=h[p].node.text,d=!1,f=p-1;f>=0;f--){var v=h[f];!d&&v&&"text"===v.node.type.name?u=v.node.text+u:(d=!0,c-=v.node.nodeSize)}for(f=p+1;f<h.length&&((v=h[f])&&"text"===v.node.type.name);f++)u+=v.node.text;var m=u.substring(0,c),g=u.substring(c),y=n.before.exec(m),b=n.after.exec(g);if(y&&b){var w=y[0].length,x=b[0].length,_=r=s.from;return o.setSelection(WR.create(t.doc,_-w,_+x)),{state:{tr:o,selection:o.selection,doc:o.doc,storedMarks:null,schema:o.doc.type.schema},dispatch:function(t){t.setSelection(WR.create(t.doc,r)),e(t)}}}}return{state:t,dispatch:e}}(i,n,e),s=o.state,a=o.dispatch;return t(e)(s,a)}},DI=function(t,e,i){for(var n=function(n){var r=e[n],o=r.$from,s=r.$to,a=0===o.depth&&t.type.allowsMarkType(i);if(t.nodesBetween(o.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(i)})),a)return{v:!0}},r=0;r<e.length;r++){var o=n(r);if(o)return o.v}return!1},PI=function(t,e,i){return function(n,r){var o=n.selection,s=o.empty,a=o.$cursor,l=o.ranges;if(s&&!a||!DI(n.doc,l,t))return!1;if(r)if(a)t.isInSet(n.storedMarks||a.marks())?r(i.removeStoredMark(t)):r(i.addStoredMark(t.create(e)));else{for(var h=!1,c=0;!h&&c<l.length;c++){var p=l[c],u=p.$from,d=p.$to;h=n.doc.rangeHasMark(u.pos,d.pos,t)}for(c=0;c<l.length;c++){var f=l[c];u=f.$from,d=f.$to;h?i.removeMark(u.pos,d.pos,t):i.addMark(u.pos,d.pos,t.create(e))}r(i.scrollIntoView())}return!0}},RI=function(t,e,i,n){void 0===n&&(n=null);var r=[],o=0;return t.doc.nodesBetween(e,i,(function(t,s){if(t.isInline){o++;var a=null;if(n instanceof NP){var l=n.isInSet(t.marks);l&&(a=[l])}else n?n.isInSet(t.marks)&&(a=[n]):a=t.marks;if(a&&a.length)for(var h=Math.min(s+t.nodeSize,i),c=0;c<a.length;c++){for(var p=a[c],u=void 0,d=0;d<r.length;d++){var f=r[d];f.step===o-1&&p.eq(f.style)&&(u=f)}u?(u.to=h,u.step=o):r.push({style:p,from:Math.max(s,e),to:h,step:o})}}})),r.forEach((function(e){return t.step(new ER(e.from,e.to,e.style))})),t},II=function(t,e){var i=e.except,n=t.doc,r=t.selection,o=n.type.schema,s=r.empty,a=r.ranges,l=(i||[]).map((function(t){return t.name}));if(!s){var h=Object.keys(o.marks).map((function(t){return o.marks[t]})).filter((function(t){return-1===l.indexOf(t.name)}));a.forEach((function(e){var i=e.$from,n=e.$to;h.forEach((function(e){return t.removeMark(i.pos,n.pos,e)}))}))}},zI=function(t,e){var i,n=t.schema.marks,r=(e.altMarks||[]).filter((function(t){return n[t]})),o=e.altStyle,s=t.selection,a=s.from,l=s.$from,h=s.to,c=s.empty,p=n[e.mark],u=t.doc,d=!1;return c?(i=t.storedMarks||l.marks(),d=p&&p.isInSet(i)||r.some((function(t){return n[t].isInSet(i)}))):d=p&&u.rangeHasMark(a,h,p)||r.some((function(t){return u.rangeHasMark(a,h,n[t])})),!d&&o&&n.style?BI(t,n.style).some((function(t){return null!==LI(t,o)})):Boolean(d)},LI=function(t,e){for(var i=(t&&t.attrs.style||"").split(/\s*;\s*/).filter((function(t){return Boolean(t)})),n=0;n<i.length;n++){var r=i[n].split(/\s*:\s*/);if(r[0].toLowerCase()===e.name&&e.value.test(r[1]))return r[1]}return null},BI=function(t,e){var i=t.selection,n=i.from,r=i.$from,o=i.to,s=i.empty,a=[];return s?a.push(e.isInSet(t.storedMarks||r.marks())):t.doc.nodesBetween(n,o,(function(t){t.isInline&&a.push(e.isInSet(t.marks))})),a},NI=function(t,e){var i=BI(t,e),n=i.filter((function(t){return Boolean(t)}));return{hasNodesWithoutMarks:i.length!==n.length,marks:n}},jI=function(t,e){var i=t.find((function(t){return"style"===t.type.name})),n=i&&i.attrs.style;return CI(n,e)},FI=function(t,e,i,n,r){var o=r.create({style:n.style}),s=[],a=[],l=null,h=null;return t.doc.nodesBetween(e,i,(function(t,c,p){if(t.isInline){var u=t.marks;if(!o.isInSet(u)&&p.type.allowsMarkType(o.type)){var d=Math.max(c,e),f=Math.min(c+t.nodeSize,i),v=jI(u,n);if(v.changed||n.newValue){for(var m=v.changed?{style:v.style||null}:{style:[n.style]+": "+n.newValue+";"},g=r.isInSet(u)?u.find((function(t){return"style"===t.type.name})):null,y=g?kI({},g.attrs,m):m,b=r.create(y),w=b.addToSet(u),x=0;x<u.length;x++)u[x].isInSet(w)||(l&&l.to===d&&l.mark.eq(u[x])?l.to=f:(l=new ER(d,f,u[x]),s.push(l)));var _=h&&h.to===d,k=_&&b.attrs.style===h.mark.attrs.style;_&&k?h.to=f:Object.keys(y).some((function(t){return null!==y[t]}))&&(h=new CR(d,f,b),a.push(h))}}}})),s.forEach((function(e){return t.step(e)})),a.forEach((function(e){return t.step(e)})),s.length+a.length>0},VI=function(t,e){var i=t.schema.marks.style;return(i?BI(t,i):[]).map((function(t){return LI(t,e)})).filter((function(t){return null!==t}))},HI=function(t,e){return function(i,n,r){var o=i.selection,s=o.empty,a=o.$cursor,l=o.ranges;if(s&&!a||!DI(i.doc,l,t))return!1;var h,c,p,u,d=!1;if(n){var f=r||i.tr;if(a){var v=i.storedMarks||a.marks();if(t.isInSet(v)){var m=jI(v,e),g=v.find((function(t){return"style"===t.type.name})),y=kI({},g?g.attrs:{},{style:m.style||null});if(h=g.attrs,c=y,p=Object.keys(h),u=Object.keys(c),p.length===u.length&&p.every((function(t){return h[t]===c[t]})))return!1;n(f.removeStoredMark(t)),Object.keys(y).some((function(t){return null!==y[t]}))&&n(f.addStoredMark(t.create(y))),d=!0}}else{for(var b=0;b<l.length;b++){var w=l[b],x=w.$from,_=w.$to;d=FI(f,x.pos,_.pos,e,t)}d&&(f.scrollIntoView(),n(f))}}return d}},WI=function(t,e,i){return function(n,r){var o=n.schema.marks,s=t.altStyle,a=t.altMarks,l=void 0===a?[]:a,h=t.mark,c=e||n.tr,p=!1,u=!1,d=function(){return u=!0};s&&o.style&&(p=HI(o.style,{style:s.name,value:s.value})(n,d,c));var f=[h].concat(l).filter((function(t){return o[t]})).map((function(t){return zI(n,{mark:t})&&o[t]})).filter((function(t){return t}));return f.length?function(t,e,i,n){var r=e.selection,o=r.$cursor,s=r.ranges;if(n=n||e.tr,o)t.forEach((function(t){t.isInSet(e.storedMarks||o.marks())&&i(n.removeStoredMark(t))}));else{for(var a=function(e){var i=s[e],r=i.$from,o=i.$to;t.forEach((function(t){RI(n,r.pos,o.pos,t)}))},l=0;l<s.length;l++)a(l);i(n.scrollIntoView())}}(f,n,d,c):p||PI(o[h],i,c)(n,d),u&&r(c),u}},UI=function(t,e){return function(i,n){var r=i.schema.marks.style,o={style:t.style,value:/^.+$/,newValue:t.value},s=i.tr;e&&s.setMeta("commandName",e),s.setMeta("args",t);var a=i.selection,l=a.empty,h=a.$cursor,c=a.ranges;if(l&&!h||!r||!DI(i.doc,c,r))return!1;if(h){var p=i.storedMarks||h.marks(),u=r.isInSet(p)?p.find((function(t){return"style"===t.type.name})):null,d={style:null};if(u&&u.attrs.style){var f=CI(u.attrs.style,o);f.changed&&f.style&&(d.style=f.style)}else o.newValue&&(d.style=[o.style]+": "+o.newValue+";");var v=u?kI({},u.attrs,d):d;return Object.keys(v).some((function(t){return null!==v[t]}))?n(s.addStoredMark(r.create(v))):n(s.removeStoredMark(r)),!0}return HI(r,o)(i,n,s)}},qI=function(t,e){return function(i,n){var r=i.selection.$cursor;if(r){var o=r.parent,s=r.index(),a=i.schema.marks[t.mark],l=o.child(s).marks.find((function(t){return t.type===a})),h=o.childCount,c=r.pos-r.textOffset,p=o.child(s).nodeSize,u=void 0,d=void 0;for(u=s-1;u>=0&&l.isInSet(o.child(u).marks);)p+=d=o.child(u).nodeSize,c-=d,u-=1;for(u=s+1;u<h&&l.isInSet(o.child(u).marks);)p+=o.child(u).nodeSize,u+=1;n(RI(e||i.tr,c,c+p,l))}else WI(t,e)(i,n)}},$I=function(t,e){var i=t.mark,n=t.attrs;return void 0===e&&(e="link"),function(t,r){var o=t.schema.marks,s=t.tr;e&&(s.setMeta("commandName",e),s.setMeta("args",n));var a=!1,l=function(){return a=!0};if(function(t,e){var i=BI(t,e);return 1===i.length&&i[0]?i[0]:null}(t,o[i]))!function(t,e){return function(i,n){var r=i.selection,o=r.$cursor,s=r.from,a=r.to,l=i.schema.marks[t.mark];if(o){var h=o.parent,c=o.index(),p=h.child(c).marks.find((function(t){return t.type===l})),u=h.childCount,d=o.pos-o.textOffset,f=h.child(c).nodeSize,v=void 0,m=void 0;for(v=c-1;v>=0&&p.isInSet(h.child(v).marks);)f+=m=h.child(v).nodeSize,d-=m,v-=1;for(v=c+1;v<u&&p.isInSet(h.child(v).marks);)f+=h.child(v).nodeSize,v+=1;e.removeMark(d,d+f,l),e.addMark(d,d+f,l.create(t.attrs)),n(e)}else e.doc.nodesBetween(s,a,(function(i,r){i.isInline&&l.isInSet(i.marks)&&(e.removeMark(r,r+i.nodeSize,l),e.addMark(r,r+i.nodeSize,l.create(t.attrs)),n(e))}))}}({mark:i,attrs:n},s)(t,l);else{var h=t;zI(t,{mark:i})&&(qI({mark:i,attrs:n},s)(t,l),h=iI.create({doc:s.doc,selection:s.selection})),a?PI(o[i],n,s)(h,l):WI({mark:i},s,n)(h,l)}return a&&r(s),a}},GI=function(t,e,i,n){if(!i.isTextblock)return!1;t.selection.ranges.forEach((function(r){var o=t.steps.length,s=r.$from.pos,a=r.$to.pos;t.doc.nodesBetween(s,a,(function(r,s){if(r.eq(e)&&r.isTextblock&&!r.hasMarkup(i,n)&&function(t,e,i){var n=t.resolve(e),r=n.index();return n.parent.canReplaceWith(r,r+1,i)}(t.doc,t.mapping.slice(o).map(s),i)){t.clearIncompatible(t.mapping.slice(o).map(s,1),i);var a=t.mapping.slice(o),l=a.map(s,1),h=a.map(s+r.nodeSize,1),c=new XD(HD.from(i.create(n,null,r.marks)),0,0);return t.step(new vR(l,h,l+1,h-1,c,1,!0)),!1}}))}))},KI=function(t,e){void 0===e&&(e={blocksInSelection:!1});var i=t.doc,n=t.selection,r=n.$from,o=n.ranges,s=e.blocksInSelection,a=[],l=n instanceof qR?n.node:void 0;return l?l.isBlock?(a.push(l),l.nodesBetween(0,l.content.size,(function(t){t.isBlock&&a.push(t)}))):!s&&r.parent&&r.parent.isBlock&&a.push(r.parent):o.forEach((function(t){var e=t.$from.pos,n=t.$to.pos;i.nodesBetween(e,n,(function(t,i,r,o){t.isBlock&&(!s||i>=e&&i+t.content.size+2<=n)&&a.push(t)}))})),a},XI=function(t,e){var i,n,r=t.attrs.style;r&&e.forEach((function(t){n={style:t.name,value:/^.+$/,newValue:t.value},i=CI(r,n),r=i.changed?i.style:r}));return r=r||e.reduce((function(t,e){return(t&&e.value?t+" ":"")+e.value?e.name+": "+e.value+";":""}),""),Object.assign({},t.attrs,{style:r||null})},YI=function(t,e){var i=t.selection,n=i.from,r=i.to,o=!1;return t.doc.nodesBetween(n,r,(function(t){return!(o=o||t.type===e)})),o},ZI=function(t){var e=function(t){var e=KI(t),i=t.schema.nodes,n=[];return e.forEach((function(t){t.type===i.paragraph?n.push("p"):t.type===i.heading?n.push("h"+t.attrs.level):t.type===i.blockquote&&i.blockquote.isTextblock&&n.push("blockquote")})),n}(t);return 1===new Set(e).size?e[0]:null},JI=function(t,e){return function(i,n){var r=KI(i),o=i.tr;o.setMeta("commandName",e),r.forEach((function(e){if(e.type.isTextblock){var i={},n=t.find((function(t){return t.node===e.type.name}));n&&(i=XI(e,n.style)),GI(o,e,e.type,i)}}));var s=o.docChanged;return s&&n(o.scrollIntoView()),s}},QI=function(t,e){var i=KI(t),n=!1;return i.forEach((function(t){if(!n&&t.type.isTextblock&&t.attrs.style){var i=e.find((function(e){return e.node===t.type.name}));i&&(n=i.style.every((function(e){return!!e.value&&new RegExp(e.name+":\\s?"+e.value,"i").test(t.attrs.style)})))}})),n};function tz(t,e){return function(i,n){var r=i.selection,o=r.$from,s=r.$to,a=o.blockRange(s),l=!1,h=a;if(!a)return!1;if(a.depth>=2&&o.node(a.depth-1).type.compatibleContent(t)&&0==a.startIndex){if(0==o.index(a.depth-1))return!1;var c=i.doc.resolve(a.start-2);h=new dP(c,c,a.depth),a.endIndex<a.parent.childCount&&(a=new dP(o,i.doc.resolve(s.end(a.depth)),a.depth)),l=!0}var p=function(t,e,i,n){void 0===n&&(n=t);var r=function(t,e){var i=t.parent,n=t.startIndex,r=t.endIndex,o=i.contentMatchAt(n).findWrapping(e);if(!o)return null;var s=o.length?o[0]:e;return i.canReplaceWith(n,r,s)?o:null}(t,e),o=r&&function(t,e){var i=t.parent,n=t.startIndex,r=t.endIndex,o=i.child(n),s=e.contentMatch.findWrapping(o.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:e).contentMatch,l=n;a&&l<r;l++)a=a.matchType(i.child(l).type);return a&&a.validEnd?s:null}(n,e);return o?r.map(bR).concat({type:e,attrs:i}).concat(o.map(bR)):null}(h,t,e,a);return!!p&&(n&&n(function(t,e,i,n,r){for(var o=HD.empty,s=i.length-1;s>=0;s--)o=HD.from(i[s].type.create(i[s].attrs,o));t.step(new vR(e.start-(n?2:0),e.end,e.start,e.end,new XD(o,0,0),i.length,!0));for(var a=0,l=0;l<i.length;l++)i[l].type==r&&(a=l+1);for(var h=i.length-a,c=e.start+i.length-(n?2:0),p=e.parent,u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&wR(t.doc,c,h)&&(t.split(c,h),c+=2*h),c+=p.child(u).nodeSize;return t}(i.tr,a,p,l,t).scrollIntoView()),!0)}}function ez(t){return function(e,i){var n=e.selection,r=n.$from,o=n.$to,s=r.blockRange(o,(function(e){return e.childCount&&e.firstChild.type==t}));return!!s&&(!i||(r.node(s.depth-1).type==t?function(t,e,i,n){var r=t.tr,o=n.end,s=n.$to.end(n.depth);o<s&&(r.step(new vR(o-1,s,o,s,new XD(HD.from(i.create(null,n.parent.copy())),1,0),1,!0)),n=new dP(r.doc.resolve(n.$from.pos),r.doc.resolve(s),n.depth));return e(r.lift(n,yR(n)).scrollIntoView()),!0}(e,i,t,s):function(t,e,i){for(var n=t.tr,r=i.parent,o=i.end,s=i.endIndex-1,a=i.startIndex;s>a;s--)o-=r.child(s).nodeSize,n.delete(o-1,o+1);var l=n.doc.resolve(i.start),h=l.nodeAfter;if(n.mapping.map(i.end)!=i.start+l.nodeAfter.nodeSize)return!1;var c=0==i.startIndex,p=i.endIndex==r.childCount,u=l.node(-1),d=l.index(-1);if(!u.canReplace(d+(c?0:1),d+1,h.content.append(p?HD.empty:HD.from(r))))return!1;var f=l.pos,v=f+h.nodeSize;return n.step(new vR(f-(c?1:0),v+(p?1:0),f+1,v-1,new XD((c?HD.empty:HD.from(r.copy(HD.empty))).append(p?HD.empty:HD.from(r.copy(HD.empty))),c?0:1,p?0:1),c?0:1)),e(n.scrollIntoView()),!0}(e,i,s)))}}function iz(t){return function(e,i){var n=e.selection,r=n.$from,o=n.$to,s=r.blockRange(o,(function(e){return e.childCount&&e.firstChild.type==t}));if(!s)return!1;var a=s.startIndex;if(0==a)return!1;var l=s.parent,h=l.child(a-1);if(h.type!=t)return!1;if(i){var c=h.lastChild&&h.lastChild.type==l.type,p=HD.from(c?t.create():null),u=new XD(HD.from(t.create(null,HD.from(l.type.create(null,p)))),c?3:1,0),d=s.start,f=s.end;i(e.tr.step(new vR(d-(c?3:1),f,d,f,u,1,!0)).scrollIntoView())}return!0}}var nz={orderedList:"ordered_list",bulletList:"bullet_list",listItem:"list_item"},rz={listType:nz.orderedList,types:kI({},nz)},oz={listType:nz.bulletList,types:kI({},nz)},sz={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"}],listsTypes:kI({},nz)},az={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"}],listsTypes:kI({},nz)};function lz(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function hz(t,e,i){var n=t.selection.$cursor;if(!n||(i?!i.endOfTextblock("backward",t):n.parentOffset>0))return!1;var r=uz(n);if(!r){var o=n.blockRange(),s=o&&yR(o);return null!=s&&(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)}var a=r.nodeBefore;if(!a.type.spec.isolating&&xz(t,r,e))return!0;if(0==n.parent.content.size&&(cz(a,"end")||qR.isSelectable(a))){var l=TR(t.doc,n.before(),n.after(),XD.empty);if(l.slice.size<l.to-l.from){if(e){var h=t.tr.step(l);h.setSelection(cz(a,"end")?FR.findFrom(h.doc.resolve(h.mapping.map(r.pos,-1)),-1):qR.create(h.doc,r.pos-a.nodeSize)),e(h.scrollIntoView())}return!0}}return!(!a.isAtom||r.depth!=n.depth-1)&&(e&&e(t.tr.delete(r.pos-a.nodeSize,r.pos).scrollIntoView()),!0)}function cz(t,e,i){for(;t;t="start"==e?t.firstChild:t.lastChild){if(t.isTextblock)return!0;if(i&&1!=t.childCount)return!1}return!1}function pz(t,e,i){var n=t.selection,r=n.$head,o=r;if(!n.empty)return!1;if(r.parent.isTextblock){if(i?!i.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=uz(r)}var s=o&&o.nodeBefore;return!(!s||!qR.isSelectable(s))&&(e&&e(t.tr.setSelection(qR.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)}function uz(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function dz(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var i=t.node(e);if(t.index(e)+1<i.childCount)return t.doc.resolve(t.after(e+1));if(i.type.spec.isolating)break}return null}function fz(t,e){var i=t.selection,n=i.$head,r=i.$anchor;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}function vz(t){for(var e=0;e<t.edgeCount;e++){var i=t.edge(e).type;if(i.isTextblock&&!i.hasRequiredAttrs())return i}return null}function mz(t,e){var i=t.selection,n=i.$head,r=i.$anchor;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;var o=n.node(-1),s=n.indexAfter(-1),a=vz(o.contentMatchAt(s));if(!o.canReplaceWith(s,s,a))return!1;if(e){var l=n.after(),h=t.tr.replaceWith(l,l,a.createAndFill());h.setSelection(FR.near(h.doc.resolve(l),1)),e(h.scrollIntoView())}return!0}function gz(t,e){var i=t.selection,n=i.$from,r=i.$to;if(i instanceof GR||n.parent.inlineContent||r.parent.inlineContent)return!1;var o=vz(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){var s=(!n.parentOffset&&r.index()<r.parent.childCount?n:r).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(WR.create(a.doc,s+1)),e(a.scrollIntoView())}return!0}function yz(t,e){var i=t.selection.$cursor;if(!i||i.parent.content.size)return!1;if(i.depth>1&&i.after()!=i.end(-1)){var n=i.before();if(wR(t.doc,n))return e&&e(t.tr.split(n).scrollIntoView()),!0}var r=i.blockRange(),o=r&&yR(r);return null!=o&&(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)}function bz(t,e){var i=t.selection,n=i.$from,r=i.$to;if(t.selection instanceof qR&&t.selection.node.isBlock)return!(!n.parentOffset||!wR(t.doc,n.pos))&&(e&&e(t.tr.split(n.pos).scrollIntoView()),!0);if(!n.parent.isBlock)return!1;if(e){var o=r.parentOffset==r.parent.content.size,s=t.tr;(t.selection instanceof WR||t.selection instanceof GR)&&s.deleteSelection();var a=0==n.depth?null:vz(n.node(-1).contentMatchAt(n.indexAfter(-1))),l=o&&a?[{type:a}]:null,h=wR(s.doc,s.mapping.map(n.pos),1,l);if(l||h||!wR(s.doc,s.mapping.map(n.pos),1,a&&[{type:a}])||(l=[{type:a}],h=!0),h&&(s.split(s.mapping.map(n.pos),1,l),!o&&!n.parentOffset&&n.parent.type!=a)){var c=s.mapping.map(n.before()),p=s.doc.resolve(c);n.node(-1).canReplaceWith(p.index(),p.index()+1,a)&&s.setNodeMarkup(s.mapping.map(n.before()),a)}e(s.scrollIntoView())}return!0}function wz(t,e){return bz(t,e&&function(i){var n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();n&&i.ensureMarks(n),e(i)})}function xz(t,e,i){var n,r,o=e.nodeBefore,s=e.nodeAfter;if(o.type.spec.isolating||s.type.spec.isolating)return!1;if(function(t,e,i){var n=e.nodeBefore,r=e.nodeAfter,o=e.index();return!(!(n&&r&&n.type.compatibleContent(r.type))||(!n.content.size&&e.parent.canReplace(o-1,o)?(i&&i(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(o,o+1)||!r.isTextblock&&!xR(t.doc,e.pos)||(i&&i(t.tr.clearIncompatible(e.pos,n.type,n.contentMatchAt(n.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,i))return!0;var a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(n=(r=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&r.matchType(n[0]||s.type).validEnd){if(i){for(var l=e.pos+s.nodeSize,h=HD.empty,c=n.length-1;c>=0;c--)h=HD.from(n[c].create(null,h));h=HD.from(o.copy(h));var p=t.tr.step(new vR(e.pos-1,l,e.pos,l,new XD(h,1,0),n.length,!0)),u=l+2*n.length;xR(p.doc,u)&&p.join(u),i(p.scrollIntoView())}return!0}var d=FR.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),v=f&&yR(f);if(null!=v&&v>=e.depth)return i&&i(t.tr.lift(f,v).scrollIntoView()),!0;if(a&&cz(s,"start",!0)&&cz(o,"end")){for(var m=o,g=[];g.push(m),!m.isTextblock;)m=m.lastChild;for(var y=s,b=1;!y.isTextblock;y=y.firstChild)b++;if(m.canReplace(m.childCount,m.childCount,y.content)){if(i){for(var w=HD.empty,x=g.length-1;x>=0;x--)w=HD.from(g[x].copy(w));i(t.tr.step(new vR(e.pos-g.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new XD(w,g.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function _z(t){return function(e,i){for(var n=e.selection,r=t<0?n.$from:n.$to,o=r.depth;r.node(o).isInline;){if(!o)return!1;o--}return!!r.node(o).isTextblock&&(i&&i(e.tr.setSelection(WR.create(e.doc,t<0?r.start(o):r.end(o)))),!0)}}var kz=_z(-1),Sz=_z(1);function Cz(t,e){if(Array.isArray(e)){var i=e;e=function(t){return i.indexOf(t.type.name)>-1}}return function(i,n,r){return t(i,n&&function(t,e){return function(i){if(!i.isGeneric)return t(i);for(var n=[],r=0;r<i.mapping.maps.length;r++){for(var o=i.mapping.maps[r],s=0;s<n.length;s++)n[s]=o.map(n[s]);o.forEach((function(t,e,i,r){return n.push(i,r)}))}for(var a=[],l=0;l<n.length;l+=2)for(var h=n[l],c=n[l+1],p=i.doc.resolve(h),u=p.sharedDepth(c),d=p.node(u),f=p.indexAfter(u),v=p.after(u+1);v<=c;++f){var m=d.maybeChild(f);if(!m)break;if(f&&-1==a.indexOf(v)){var g=d.child(f-1);g.type==m.type&&e(g,m)&&a.push(v)}v+=m.nodeSize}a.sort((function(t,e){return t-e}));for(var y=a.length-1;y>=0;y--)xR(i.doc,a[y])&&i.join(a[y]);t(i)}}(n,e),r)}}function Ez(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,i,n){for(var r=0;r<t.length;r++)if(t[r](e,i,n))return!0;return!1}}var Tz=Ez(lz,hz,pz),Az=Ez(lz,(function(t,e,i){var n=t.selection.$cursor;if(!n||(i?!i.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size))return!1;var r=dz(n);if(!r)return!1;var o=r.nodeAfter;if(xz(t,r,e))return!0;if(0==n.parent.content.size&&(cz(o,"start")||qR.isSelectable(o))){var s=TR(t.doc,n.before(),n.after(),XD.empty);if(s.slice.size<s.to-s.from){if(e){var a=t.tr.step(s);a.setSelection(cz(o,"start")?FR.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):qR.create(a.doc,a.mapping.map(r.pos))),e(a.scrollIntoView())}return!0}}return!(!o.isAtom||r.depth!=n.depth-1)&&(e&&e(t.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0)}),(function(t,e,i){var n=t.selection,r=n.$head,o=r;if(!n.empty)return!1;if(r.parent.isTextblock){if(i?!i.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=dz(r)}var s=o&&o.nodeAfter;return!(!s||!qR.isSelectable(s))&&(e&&e(t.tr.setSelection(qR.create(t.doc,o.pos)).scrollIntoView()),!0)})),Mz={Enter:Ez(fz,gz,yz,bz),"Mod-Enter":mz,Backspace:Tz,"Mod-Backspace":Tz,"Shift-Backspace":Tz,Delete:Az,"Mod-Delete":Az,"Mod-a":function(t,e){return e&&e(t.tr.setSelection(new GR(t.doc))),!0}},Oz={"Ctrl-h":Mz.Backspace,"Alt-Backspace":Mz["Mod-Backspace"],"Ctrl-d":Mz.Delete,"Ctrl-Alt-Backspace":Mz["Mod-Delete"],"Alt-Delete":Mz["Mod-Delete"],"Alt-d":Mz["Mod-Delete"],"Ctrl-a":kz,"Ctrl-e":Sz};for(var Dz in Mz)Oz[Dz]=Mz[Dz];var Pz=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?Oz:Mz,Rz=function(t,e,i){return function(n,r){var o=KI(n),s=n.tr;s.setMeta("commandName",e),o.forEach((function(e){if(e.type.isTextblock){var n=void 0,r=t.find((function(t){return t.node===e.type.name}));if(r){var o="rtl"===i?r.rtlStyle:r.style,a={name:o,value:r.step>0?""+r.step+r.unit:""};if(e.attrs.style){var l=new RegExp(o+":\\s?(\\d+)"+r.unit,"i"),h=e.attrs.style.match(l);if(h){var c=parseFloat(h[1])+r.step;c=c<=0?"":c,a.value=""+c+(c?r.unit:"")}}n=XI(e,[a])}n&&GI(s,e,e.type,n)}}));var a=s.docChanged;return a&&r(s.scrollIntoView()),a}},Iz=function(t,e,i){var n=KI(t),r=!1;return n.forEach((function(t){if(!r&&t.type.isTextblock&&t.attrs.style){var n=e.find((function(e){return e.node===t.type.name}));if(n){var o="rtl"===i?n.rtlStyle:n.style,s=new RegExp(o+":\\s?\\d+"+n.unit,"i");r=s.test(t.attrs.style)}}})),r},zz=function(t,e){return iz(e)(t)},Lz=function(t,e){var i=t.schema.nodes[e.listsTypes.listItem],n=t.schema.nodes[e.listsTypes.orderedList],r=t.schema.nodes[e.listsTypes.bulletList],o=!!TI(n,2)(t.selection),s=!!TI(r,2)(t.selection);return(o||s)&&ez(i)(t)},Bz=function(t,e){var i=t.schema.nodes,n=i[sz.listsTypes.listItem];return(Iz(t,e.nodes)||sz.nodes.some((function(e){return i[e.node]&&YI(t,i[e.node])})))&&!YI(t,n)},Nz=function(t,e){var i=t.schema.nodes[sz.listsTypes.listItem],n=Bz(t,sz);zz(t,i)?iz(i)(t,e):n&&Rz(sz.nodes)(t,e)},jz=function(t,e){var i=t.schema.nodes,n=i[az.listsTypes.listItem],r=Bz(t,az);YI(t,i.blockquote)?function(t,e){var i=t.selection,n=i.$from,r=i.$to,o=t.schema.nodes.blockquote,s=t.doc,a=-1,l=n.blockRange(r);l&&s.nodesBetween(l.start,l.end,(function(t,e,i,n){t.type===o&&(a=e)}));var h=-1!==a;e&&h&&e(t.tr.lift(l,s.resolve(a).depth))}(t,e):Lz(t,az)?ez(n)(t,e):r&&Rz(az.nodes)(t,e)},Fz=function(t,e,i){for(var n=e.depth,r=t.nodes[i.bulletList],o=t.nodes[i.orderedList],s=t.nodes[i.listItem],a=e.depth;a>0;a--){var l=e.node(a);if(l.type!==r&&l.type!==o||(n=a),l.type!==r&&l.type!==o&&l.type!==s)break}return n-1};function Vz(t){return function(e,i,n){if(!n)return!1;var r=(e=n.state).schema.nodes[t.listType],o=e.selection,s=o.$from,a=o.$to,l=s.node(-2),h=s.node(-3),c=function(t,e,i,n){return 0===function(t,e,i){var n=Array(),r=function(t,e){var i=["blockquote","bulletList","orderedList"];if(1===e.depth)return e;var n=e.node(e.depth),r=e;for(;e.depth>=1;)(n=(e=t.resolve(e.before(e.depth))).node(e.depth))&&-1!==i.indexOf(n.type.name)&&(r=e);return r}(t,e).depth,o=t.resolve(e.start(r));for(;o.pos<=i.start(i.depth);){var s=Math.min(o.depth,r),a=o.node(s);if(a&&n.push(a),0===s)break;var l=t.resolve(o.after(s));if(l.start(s)>=t.nodeSize-2)break;l.depth!==o.depth&&(l=t.resolve(l.pos+2)),o=l.depth?t.resolve(l.start(l.depth)):t.resolve(l.end(l.depth))}return n}(t,e,i).filter((function(t){return t.type!==n})).length}(e.doc,s,a,r);return(l&&l.type===r||h&&h.type===r)&&c?Wz(t)(e,i):(c||(Wz(t)(e,i),e=n.state),function(t,e){void 0===e&&(e={});return Cz(tz(t,e),(function(e,i){return e.type===i.type&&e.type===t}))}(r,t.listAttrs)(e,i))}}function Hz(t,e,i,n){var r=n||t.schema.nodes.listItem,o=e.$from,s=e.$to,a=o.blockRange(s,(function(t){return t.childCount&&t.firstChild.type===r}));if(!a||a.depth<2||o.node(a.depth-1).type!==r)return i;var l=a.end,h=s.end(a.depth);return l<h&&(i.step(new vR(l-1,h,l,h,new XD(HD.from(r.create(void 0,a.parent.copy())),1,0),1,!0)),a=new dP(i.doc.resolve(o.pos),i.doc.resolve(h),a.depth)),i.lift(a,yR(a)).scrollIntoView()}function Wz(t){return function(e,i){var n=e.tr,r=e.selection,o=r.$from,s=r.$to;return n.doc.nodesBetween(o.pos,s.pos,(function(i,r){if(i.isTextblock||"blockquote"===i.type.name||"div"===i.type.name){var o=new qR(n.doc.resolve(n.mapping.map(r))),s=o.$from.blockRange(o.$to);if(!s||o.$from.parent.type!==e.schema.nodes[t.listItem])return!1;var a=s&&yR(s);if(null==a)return!1;n.lift(s,a)}})),i&&i(n),!0}}var Uz=/list\-style\-type:\s?([\w-]+)/,qz=function(t){var e=t.style||"",i=Uz.exec(e);return i&&i[1]||""},$z=function(t,e,i,n,r){var o=n.listType,s=n.listAttrs,a=void 0===s?{style:null}:s,l=t.selection,h=l.$from.node(l.$from.depth-2),c=l.$to.node(l.$to.depth-2);if(h&&h.type.name===o&&qz(h.attrs)===qz(a)&&c&&c.type.name===o&&qz(c.attrs)===qz(a)){var p=i.state.schema.nodes,u={bulletList:p[n.bulletList],orderedList:p[n.orderedList],listItem:p[n.listItem]},d=function(t,e){for(var i,n=e.bulletList,r=e.orderedList,o=e.listItem,s=t.depth-1;s>0;s--){var a=t.node(s);if(a.type!==n&&a.type!==r||(i=s),a.type!==n&&a.type!==r&&a.type!==o)break}return i}(l.$to,u),f=function(t,e,i,n,r,o){o||(o=t.schema.nodes.listItem);var s=!1;return r.doc.nodesBetween(e,i,(function(i,a){if(!s&&i.type===o&&a>e){s=!0;for(var l=n+3;l>n+2;){var h=r.doc.resolve(r.mapping.map(a));l=h.depth;var c=r.doc.resolve(r.mapping.map(a+i.textContent.length)),p=new WR(h,c);r=Hz(t,p,r,o)}}})),r}(t,l.$to.pos,l.$to.end(d),d,i.state.tr,u.listItem);return f=function(t,e,i){var n=t.selection,r=n.from,o=n.to,s=t.schema.nodes,a=s.paragraph,l=s.heading,h=[];e.doc.nodesBetween(r,o,(function(t,e){t.type!==a&&t.type!==l||h.push({node:t,pos:e})}));for(var c=h.length-1;c>=0;c--){var p=h[c],u=e.doc.resolve(e.mapping.map(p.pos));if(u.depth>0){var d=void 0;d=p.node.textContent&&p.node.textContent.length>0?e.doc.resolve(e.mapping.map(p.pos+p.node.textContent.length)):e.doc.resolve(e.mapping.map(p.pos+1));var f=u.blockRange(d);f&&e.lift(f,Fz(t.schema,u,i))}}return e}(t,f,n),f.setMeta("commandName",r),e(f),!0}return Vz(n)(t,e,i)};function Gz(t,e,i){return $z(t,e,i,kI({listType:oz.listType},oz.types))}function Kz(t,e,i){return $z(t,e,i,kI({listType:rz.listType},rz.types))}for(var Xz=function(t){return function(e,i){return function(t){return function(e,i){var n=e.selection,r=n.$from,o=n.$to,s=n.node;if(s&&s.isBlock||r.depth<2||!r.sameParent(o))return!1;var a=r.node(-1);if(a.type!=t)return!1;if(0==r.parent.content.size&&r.node(-1).childCount==r.indexAfter(-1)){if(2==r.depth||r.node(-3).type!=t||r.index(-2)!=r.node(-2).childCount-1)return!1;if(i){for(var l=HD.empty,h=r.index(-1)?1:r.index(-2)?2:3,c=r.depth-h;c>=r.depth-3;c--)l=HD.from(r.node(c).copy(l));var p=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;l=l.append(HD.from(t.createAndFill()));var u=r.before(r.depth-(h-1)),d=e.tr.replace(u,r.after(-p),new XD(l,4-h,0)),f=-1;d.doc.nodesBetween(u,d.doc.content.size,(function(t,e){if(f>-1)return!1;t.isTextblock&&0==t.content.size&&(f=e+1)})),f>-1&&d.setSelection(e.selection.constructor.near(d.doc.resolve(f))),i(d.scrollIntoView())}return!0}var v=o.pos==r.end()?a.contentMatchAt(0).defaultType:null,m=e.tr.delete(r.pos,o.pos),g=v&&[null,{type:v}];return!!wR(m.doc,r.pos,2,g)&&(i&&i(m.split(r.pos,2,g).scrollIntoView()),!0)}}(t)(e,(function(t){var n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();n&&t.ensureMarks(n),i(t)}))}},Yz=function(t,e){return{name:t,value:e}},Zz=[{node:"paragraph",style:[Yz("text-align","left")]},{node:"heading",style:[Yz("text-align","left")]}],Jz=[{node:"paragraph",style:[Yz("text-align","right")]},{node:"heading",style:[Yz("text-align","right")]}],Qz=[{node:"paragraph",style:[Yz("text-align","center")]},{node:"heading",style:[Yz("text-align","center")]}],tL=[{node:"paragraph",style:[Yz("text-align","justify")]},{node:"heading",style:[Yz("text-align","justify")]}],eL=[{node:"paragraph",style:[Yz("text-align","")]},{node:"heading",style:[Yz("text-align","")]}],iL={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},nL={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},rL="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),oL="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),sL="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),aL="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),lL="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),hL=rL&&(aL||+rL[1]<57)||sL&&aL,cL=0;cL<10;cL++)iL[48+cL]=iL[96+cL]=String(cL);for(cL=1;cL<=24;cL++)iL[cL+111]="F"+cL;for(cL=65;cL<=90;cL++)iL[cL]=String.fromCharCode(cL+32),nL[cL]=String.fromCharCode(cL);for(var pL in iL)nL.hasOwnProperty(pL)||(nL[pL]=iL[pL]);var uL="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function dL(t){var e,i,n,r,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))e=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))n=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);uL?r=!0:i=!0}}return e&&(s="Alt-"+s),i&&(s="Ctrl-"+s),r&&(s="Meta-"+s),n&&(s="Shift-"+s),s}function fL(t,e,i){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==i&&e.shiftKey&&(t="Shift-"+t),t}function vL(t){return new sI({props:{handleKeyDown:mL(t)}})}function mL(t){var e=function(t){var e=Object.create(null);for(var i in t)e[dL(i)]=t[i];return e}(t);return function(t,i){var n,r=function(t){var e=!(hL&&(t.ctrlKey||t.altKey||t.metaKey)||(oL||lL)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?nL:iL)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(i),o=1==r.length&&" "!=r,s=e[fL(r,i,!o)];if(s&&s(t.state,t.dispatch,t))return!0;if(o&&(i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(n=iL[i.keyCode])&&n!=r){var a=e[fL(n,i,!0)];if(a&&a(t.state,t.dispatch,t))return!0}else if(o&&i.shiftKey){var l=e[fL(r,i,!0)];if(l&&l(t.state,t.dispatch,t))return!0}return!1}}var gL={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var yL=/Edge\/(\d+)/.exec(navigator.userAgent),bL=/MSIE \d/.test(navigator.userAgent),wL=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),xL=gL.ie=!!(bL||wL||yL);gL.ie_version=bL?document.documentMode||6:wL?+wL[1]:yL?+yL[1]:null,gL.gecko=!xL&&/gecko\/(\d+)/i.test(navigator.userAgent),gL.gecko_version=gL.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var _L=!xL&&/Chrome\/(\d+)/.exec(navigator.userAgent);gL.chrome=!!_L,gL.chrome_version=_L&&+_L[1],gL.safari=!xL&&/Apple Computer/.test(navigator.vendor),gL.ios=gL.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),gL.mac=gL.ios||/Mac/.test(navigator.platform),gL.android=/Android \d/.test(navigator.userAgent),gL.webkit="webkitFontSmoothing"in document.documentElement.style,gL.webkit_version=gL.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var kL=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},SL=function(t){var e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e},CL=null,EL=function(t,e,i){var n=CL||(CL=document.createRange());return n.setEnd(t,null==i?t.nodeValue.length:i),n.setStart(t,e||0),n},TL=function(t,e,i,n){return i&&(ML(t,e,i,n,-1)||ML(t,e,i,n,1))},AL=/^(img|br|input|textarea|hr)$/i;function ML(t,e,i,n,r){for(;;){if(t==i&&e==n)return!0;if(e==(r<0?0:OL(t))){var o=t.parentNode;if(!o||1!=o.nodeType||DL(t)||AL.test(t.nodeName)||"false"==t.contentEditable)return!1;e=kL(t)+(r<0?0:1),t=o}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(r<0?-1:0)]).contentEditable)return!1;e=r<0?OL(t):0}}}function OL(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function DL(t){for(var e,i=t;i&&!(e=i.pmViewDesc);i=i.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var PL=function(t){var e=t.isCollapsed;return e&&gL.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function RL(t,e){var i=document.createEvent("Event");return i.initEvent("keydown",!0,!0),i.keyCode=t,i.key=i.code=e,i}function IL(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function zL(t,e){return"number"==typeof t?t:t[e]}function LL(t){var e=t.getBoundingClientRect(),i=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*i,top:e.top,bottom:e.top+t.clientHeight*n}}function BL(t,e,i){for(var n=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument,s=i||t.dom;s;s=SL(s))if(1==s.nodeType){var a=s==o.body||1!=s.nodeType,l=a?IL(o):LL(s),h=0,c=0;if(e.top<l.top+zL(n,"top")?c=-(l.top-e.top+zL(r,"top")):e.bottom>l.bottom-zL(n,"bottom")&&(c=e.bottom-l.bottom+zL(r,"bottom")),e.left<l.left+zL(n,"left")?h=-(l.left-e.left+zL(r,"left")):e.right>l.right-zL(n,"right")&&(h=e.right-l.right+zL(r,"right")),h||c)if(a)o.defaultView.scrollBy(h,c);else{var p=s.scrollLeft,u=s.scrollTop;c&&(s.scrollTop+=c),h&&(s.scrollLeft+=h);var d=s.scrollLeft-p,f=s.scrollTop-u;e={left:e.left-d,top:e.top-f,right:e.right-d,bottom:e.bottom-f}}if(a)break}}function NL(t){for(var e=[],i=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=i);t=SL(t));return e}function jL(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=n.dom,o=n.top,s=n.left;r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}var FL=null;function VL(t,e){for(var i,n,r=2e8,o=0,s=e.top,a=e.top,l=t.firstChild,h=0;l;l=l.nextSibling,h++){var c=void 0;if(1==l.nodeType)c=l.getClientRects();else{if(3!=l.nodeType)continue;c=EL(l).getClientRects()}for(var p=0;p<c.length;p++){var u=c[p];if(u.top<=s&&u.bottom>=a){s=Math.max(u.bottom,s),a=Math.min(u.top,a);var d=u.left>e.left?u.left-e.left:u.right<e.left?e.left-u.right:0;if(d<r){i=l,r=d,n=d&&3==i.nodeType?{left:u.right<e.left?u.right:u.left,top:e.top}:e,1==l.nodeType&&d&&(o=h+(e.left>=(u.left+u.right)/2?1:0));continue}}!i&&(e.left>=u.right&&e.top>=u.top||e.left>=u.left&&e.top>=u.bottom)&&(o=h+1)}}return i&&3==i.nodeType?function(t,e){for(var i=t.nodeValue.length,n=document.createRange(),r=0;r<i;r++){n.setEnd(t,r+1),n.setStart(t,r);var o=qL(n,1);if(o.top!=o.bottom&&HL(e,o))return{node:t,offset:r+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}(i,n):!i||r&&1==i.nodeType?{node:t,offset:o}:VL(i,n)}function HL(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function WL(t,e,i){var n=t.childNodes.length;if(n&&i.top<i.bottom)for(var r=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-i.top)/(i.bottom-i.top))-2)),o=r;;){var s=t.childNodes[o];if(1==s.nodeType)for(var a=s.getClientRects(),l=0;l<a.length;l++){var h=a[l];if(HL(e,h))return WL(s,e,h)}if((o=(o+1)%n)==r)break}return t}function UL(t,e){var i,n,r,o,s=t.dom.ownerDocument;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(e.left,e.top);a&&(r=(i=a).offsetNode,o=i.offset)}catch(t){}if(!r&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(e.left,e.top);l&&(r=(n=l).startContainer,o=n.startOffset)}var h,c=(t.root.elementFromPoint?t.root:s).elementFromPoint(e.left,e.top+1);if(!c||!t.dom.contains(1!=c.nodeType?c.parentNode:c)){var p=t.dom.getBoundingClientRect();if(!HL(e,p))return null;if(!(c=WL(t.dom,e,p)))return null}if(gL.safari)for(var u=c;r&&u;u=SL(u))u.draggable&&(r=o=null);if(c=function(t,e){var i=t.parentNode;return i&&/^li$/i.test(i.nodeName)&&e.left<t.getBoundingClientRect().left?i:t}(c,e),r){if(gL.gecko&&1==r.nodeType&&(o=Math.min(o,r.childNodes.length))<r.childNodes.length){var d,f=r.childNodes[o];"IMG"==f.nodeName&&(d=f.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}r==t.dom&&o==r.childNodes.length-1&&1==r.lastChild.nodeType&&e.top>r.lastChild.getBoundingClientRect().bottom?h=t.state.doc.content.size:0!=o&&1==r.nodeType&&"BR"==r.childNodes[o-1].nodeName||(h=function(t,e,i,n){for(var r=-1,o=e;o!=t.dom;){var s=t.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>n.left||a.top>n.top)r=s.posBefore;else{if(!(a.right<n.left||a.bottom<n.top))break;r=s.posAfter}}o=s.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,i)}(t,r,o,e))}null==h&&(h=function(t,e,i){var n=VL(e,i),r=n.node,o=n.offset,s=-1;if(1==r.nodeType&&!r.firstChild){var a=r.getBoundingClientRect();s=a.left!=a.right&&i.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}(t,c,e));var v=t.docView.nearestDesc(c,!0);return{pos:h,inside:v?v.posAtStart-v.border:-1}}function qL(t,e){var i=t.getClientRects();return i.length?i[e<0?0:i.length-1]:t.getBoundingClientRect()}var $L=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function GL(t,e,i){var n=t.docView.domFromPos(e,i<0?-1:1),r=n.node,o=n.offset,s=gL.webkit||gL.gecko;if(3==r.nodeType){if(!s||!$L.test(r.nodeValue)&&(i<0?o:o!=r.nodeValue.length)){var a=o,l=o,h=i<0?1:-1;return i<0&&!o?(l++,h=-1):i>=0&&o==r.nodeValue.length?(a--,h=1):i<0?a--:l++,KL(qL(EL(r,a,l),h),h<0)}var c=qL(EL(r,o,o),i);if(gL.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var p=qL(EL(r,o-1,o-1),-1);if(p.top==c.top){var u=qL(EL(r,o,o+1),-1);if(u.top!=c.top)return KL(u,u.left<p.left)}}return c}if(!t.state.doc.resolve(e).parent.inlineContent){if(o&&(i<0||o==OL(r))){var d=r.childNodes[o-1];if(1==d.nodeType)return XL(d.getBoundingClientRect(),!1)}if(o<OL(r)){var f=r.childNodes[o];if(1==f.nodeType)return XL(f.getBoundingClientRect(),!0)}return XL(r.getBoundingClientRect(),i>=0)}if(o&&(i<0||o==OL(r))){var v=r.childNodes[o-1],m=3==v.nodeType?EL(v,OL(v)-(s?0:1)):1!=v.nodeType||"BR"==v.nodeName&&v.nextSibling?null:v;if(m)return KL(qL(m,1),!1)}if(o<OL(r)){for(var g=r.childNodes[o];g.pmViewDesc&&g.pmViewDesc.ignoreForCoords;)g=g.nextSibling;var y=g?3==g.nodeType?EL(g,0,s?0:1):1==g.nodeType?g:null:null;if(y)return KL(qL(y,-1),!0)}return KL(qL(3==r.nodeType?EL(r):r,-i),i>=0)}function KL(t,e){if(0==t.width)return t;var i=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:i,right:i}}function XL(t,e){if(0==t.height)return t;var i=e?t.top:t.bottom;return{top:i,bottom:i,left:t.left,right:t.right}}function YL(t,e,i){var n=t.state,r=t.root.activeElement;n!=e&&t.updateState(e),r!=t.dom&&t.focus();try{return i()}finally{n!=e&&t.updateState(n),r!=t.dom&&r&&r.focus()}}var ZL=/[\u0590-\u08ac]/;var JL=null,QL=null,tB=!1;function eB(t,e,i){return JL==e&&QL==i?tB:(JL=e,QL=i,tB="up"==i||"down"==i?function(t,e,i){var n=e.selection,r="up"==i?n.$from:n.$to;return YL(t,e,(function(){for(var e=t.docView.domFromPos(r.pos,"up"==i?-1:1).node;;){var n=t.docView.nearestDesc(e,!0);if(!n)break;if(n.node.isBlock){e=n.dom;break}e=n.dom.parentNode}for(var o=GL(t,r.pos,1),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=EL(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var h=a[l];if(h.bottom>h.top+1&&("up"==i?o.top-h.top>2*(h.bottom-o.top):h.bottom-o.bottom>2*(o.bottom-h.top)))return!1}}return!0}))}(t,e,i):function(t,e,i){var n=e.selection.$head;if(!n.parent.isTextblock)return!1;var r=n.parentOffset,o=!r,s=r==n.parent.content.size,a=t.root.getSelection();return ZL.test(n.parent.textContent)&&a.modify?YL(t,e,(function(){var e=a.getRangeAt(0),r=a.focusNode,o=a.focusOffset,s=a.caretBidiLevel;a.modify("move",i,"character");var l=!(n.depth?t.docView.domAfterPos(n.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=s&&(a.caretBidiLevel=s),l})):"left"==i||"backward"==i?o:s}(t,e,i))}var iB=function(t,e,i,n){this.parent=t,this.children=e,this.dom=i,i.pmViewDesc=this,this.contentDOM=n,this.dirty=0},nB={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};iB.prototype.matchesWidget=function(){return!1},iB.prototype.matchesMark=function(){return!1},iB.prototype.matchesNode=function(){return!1},iB.prototype.matchesHack=function(t){return!1},iB.prototype.parseRule=function(){return null},iB.prototype.stopEvent=function(){return!1},nB.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},nB.border.get=function(){return 0},iB.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},iB.prototype.posBeforeChild=function(t){for(var e=0,i=this.posAtStart;e<this.children.length;e++){var n=this.children[e];if(n==t)return i;i+=n.size}},nB.posBefore.get=function(){return this.parent.posBeforeChild(this)},nB.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},nB.posAfter.get=function(){return this.posBefore+this.size},nB.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},iB.prototype.localPosFromDOM=function(t,e,i){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(i<0){var n,r;if(t==this.contentDOM)n=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;n=t.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}var o,s;if(t==this.contentDOM)o=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&(!(s=o.pmViewDesc)||s.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(t==this.dom&&this.contentDOM)a=e>kL(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&e==t.childNodes.length)for(var h=t;;h=h.parentNode){if(h==this.dom){a=!0;break}if(h.parentNode.lastChild!=h)break}}return(null==a?i>0:a)?this.posAtEnd:this.posAtStart},iB.prototype.nearestDesc=function(t,e){for(var i=!0,n=t;n;n=n.parentNode){var r=this.getDesc(n);if(r&&(!e||r.node)){if(!i||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(1==t.nodeType?t:t.parentNode):r.nodeDOM==t))return r;i=!1}}},iB.prototype.getDesc=function(t){for(var e=t.pmViewDesc,i=e;i;i=i.parent)if(i==this)return e},iB.prototype.posFromDOM=function(t,e,i){for(var n=t;n;n=n.parentNode){var r=this.getDesc(n);if(r)return r.localPosFromDOM(t,e,i)}return-1},iB.prototype.descAt=function(t){for(var e=0,i=0;e<this.children.length;e++){var n=this.children[e],r=i+n.size;if(i==t&&r!=i){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(t<r)return n.descAt(t-i-n.border);i=r}},iB.prototype.domFromPos=function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var i=0,n=0,r=0;i<this.children.length;i++){var o=this.children[i],s=r+o.size;if(s>t||o instanceof pB){n=t-r;break}r=s}if(n)return this.children[i].domFromPos(n-this.children[i].border,e);for(var a=void 0;i&&!(a=this.children[i-1]).size&&a instanceof oB&&a.widget.type.side>=0;i--);if(e<=0){for(var l,h=!0;(l=i?this.children[i-1]:null)&&l.dom.parentNode!=this.contentDOM;i--,h=!1);return l&&e&&h&&!l.border&&!l.domAtom?l.domFromPos(l.size,e):{node:this.contentDOM,offset:l?kL(l.dom)+1:0}}for(var c,p=!0;(c=i<this.children.length?this.children[i]:null)&&c.dom.parentNode!=this.contentDOM;i++,p=!1);return c&&p&&!c.border&&!c.domAtom?c.domFromPos(0,e):{node:this.contentDOM,offset:c?kL(c.dom):this.contentDOM.childNodes.length}},iB.prototype.parseRange=function(t,e,i){if(void 0===i&&(i=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var n=-1,r=-1,o=i,s=0;;s++){var a=this.children[s],l=o+a.size;if(-1==n&&t<=l){var h=o+a.border;if(t>=h&&e<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,h);t=o;for(var c=s;c>0;c--){var p=this.children[c-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){n=kL(p.dom)+1;break}t-=p.size}-1==n&&(n=0)}if(n>-1&&(l>e||s==this.children.length-1)){e=l;for(var u=s+1;u<this.children.length;u++){var d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){r=kL(d.dom);break}e+=d.size}-1==r&&(r=this.contentDOM.childNodes.length);break}o=l}return{node:this.contentDOM,from:t,to:e,fromOffset:n,toOffset:r}},iB.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},iB.prototype.domAfterPos=function(t){var e=this.domFromPos(t,0),i=e.node,n=e.offset;if(1!=i.nodeType||n==i.childNodes.length)throw new RangeError("No node after pos "+t);return i.childNodes[n]},iB.prototype.setSelection=function(t,e,i,n){for(var r=Math.min(t,e),o=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var l=this.children[s],h=a+l.size;if(r>a&&o<h)return l.setSelection(t-a-l.border,e-a-l.border,i,n);a=h}var c=this.domFromPos(t,t?-1:1),p=e==t?c:this.domFromPos(e,e?-1:1),u=i.getSelection(),d=!1;if((gL.gecko||gL.safari)&&t==e){var f=c.node,v=c.offset;if(3==f.nodeType){if((d=v&&"\n"==f.nodeValue[v-1])&&v==f.nodeValue.length)for(var m=f,g=void 0;m;m=m.parentNode){if(g=m.nextSibling){"BR"==g.nodeName&&(c=p={node:g.parentNode,offset:kL(g)+1});break}var y=m.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{var b=f.childNodes[v-1];d=b&&("BR"==b.nodeName||"false"==b.contentEditable)}}if(gL.gecko&&u.focusNode&&u.focusNode!=p.node&&1==u.focusNode.nodeType){var w=u.focusNode.childNodes[u.focusOffset];w&&"false"==w.contentEditable&&(n=!0)}if(n||d&&gL.safari||!TL(c.node,c.offset,u.anchorNode,u.anchorOffset)||!TL(p.node,p.offset,u.focusNode,u.focusOffset)){var x=!1;if((u.extend||t==e)&&!d){u.collapse(c.node,c.offset);try{t!=e&&u.extend(p.node,p.offset),x=!0}catch(t){if(!(t instanceof DOMException))throw t}}if(!x){if(t>e){var _=c;c=p,p=_}var k=document.createRange();k.setEnd(p.node,p.offset),k.setStart(c.node,c.offset),u.removeAllRanges(),u.addRange(k)}}},iB.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},nB.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},iB.prototype.markDirty=function(t,e){for(var i=0,n=0;n<this.children.length;n++){var r=this.children[n],o=i+r.size;if(i==o?t<=o&&e>=i:t<o&&e>i){var s=i+r.border,a=o-r.border;if(t>=s&&e<=a)return this.dirty=t==i||e==o?2:1,void(t!=s||e!=a||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(t-s,e-s):r.dirty=3);r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}i=o}this.dirty=2},iB.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var i=1==t?2:1;e.dirty<i&&(e.dirty=i)}},nB.domAtom.get=function(){return!1},nB.ignoreForCoords.get=function(){return!1},Object.defineProperties(iB.prototype,nB);var rB=[],oB=function(t){function e(e,i,n,r){var o,s=i.type.toDOM;if("function"==typeof s&&(s=s(n,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:r}))),!i.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,rB,s,null),this.widget=i,o=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={domAtom:{configurable:!0}};return e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},e.prototype.destroy=function(){this.widget.type.destroy(this.dom),t.prototype.destroy.call(this)},i.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,i),e}(iB),sB=function(t){function e(e,i,n,r){t.call(this,e,rB,i,null),this.textDOM=n,this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={size:{configurable:!0}};return i.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,i),e}(iB),aB=function(t){function e(e,i,n,r){t.call(this,e,[],n,r),this.mark=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,i,n,r){var o=r.nodeViews[i.type.name],s=o&&o(i,r,n);return s&&s.dom||(s=JP.renderSpec(document,i.type.spec.toDOM(i,n))),new e(t,i,s.dom,s.contentDOM||s.dom)},e.prototype.parseRule=function(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,i){if(t.prototype.markDirty.call(this,e,i),0!=this.dirty){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,i,n){var r=e.create(this.parent,this.mark,!0,n),o=this.children,s=this.size;i<s&&(o=SB(o,i,s,n)),t>0&&(o=SB(o,0,t,n));for(var a=0;a<o.length;a++)o[a].parent=r;return r.children=o,r},e}(iB),lB=function(t){function e(e,i,n,r,o,s,a,l,h){t.call(this,e,i.isLeaf?rB:[],o,s),this.nodeDOM=a,this.node=i,this.outerDeco=n,this.innerDeco=r,s&&this.updateChildren(l,h)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return e.create=function(t,i,n,r,o,s){var a,l,h=o.nodeViews[i.type.name],c=h&&h(i,o,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s}),n,r),p=c&&c.dom,u=c&&c.contentDOM;if(i.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(i.text);else p||(p=(a=JP.renderSpec(document,i.type.spec.toDOM(i))).dom,u=a.contentDOM);u||i.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),i.type.spec.draggable&&(p.draggable=!0));var d=p;return p=bB(p,n,i),c?l=new uB(t,i,n,r,p,u,d,c,o,s+1):i.isText?new cB(t,i,n,r,p,d,o):new e(t,i,n,r,p,u,d,o,s+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(var i=this.children.length-1;i>=0;i--){var n=this.children[i];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=function(){return HD.empty})}else e.contentElement=this.contentDOM;else e.getContent=function(){return t.node.content};return e},e.prototype.matchesNode=function(t,e,i){return 0==this.dirty&&t.eq(this.node)&&wB(e,this.outerDeco)&&i.eq(this.innerDeco)},i.size.get=function(){return this.node.nodeSize},i.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var i=this,n=this.node.inlineContent,r=e,o=t.composing&&this.localCompositionInfo(t,e),s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new _B(this,s&&s.node);!function(t,e,i,n){var r=e.locals(t),o=0;if(0==r.length){for(var s=0;s<t.childCount;s++){var a=t.child(s);n(a,r,e.forChild(o,a),s),o+=a.nodeSize}return}for(var l=0,h=[],c=null,p=0;;){if(l<r.length&&r[l].to==o){for(var u=r[l++],d=void 0;l<r.length&&r[l].to==o;)(d||(d=[u])).push(r[l++]);if(d){d.sort(kB);for(var f=0;f<d.length;f++)i(d[f],p,!!c)}else i(u,p,!!c)}var v=void 0,m=void 0;if(c)m=-1,v=c,c=null;else{if(!(p<t.childCount))break;m=p,v=t.child(p++)}for(var g=0;g<h.length;g++)h[g].to<=o&&h.splice(g--,1);for(;l<r.length&&r[l].from<=o&&r[l].to>o;)h.push(r[l++]);var y=o+v.nodeSize;if(v.isText){var b=y;l<r.length&&r[l].from<b&&(b=r[l].from);for(var w=0;w<h.length;w++)h[w].to<b&&(b=h[w].to);b<y&&(c=v.cut(b-o),v=v.cut(0,b-o),y=b,m=-1)}n(v,h.length?v.isInline&&!v.isLeaf?h.filter((function(t){return!t.inline})):h.slice():rB,e.forChild(o,v),m),o=y}}(this.node,this.innerDeco,(function(e,o,s){e.spec.marks?l.syncToMarks(e.spec.marks,n,t):e.type.side>=0&&!s&&l.syncToMarks(o==i.node.childCount?GD.none:i.node.child(o).marks,n,t),l.placeWidget(e,t,r)}),(function(e,i,s,h){var c;l.syncToMarks(e.marks,n,t),l.findNodeMatch(e,i,s,h)||a&&t.state.selection.from>r&&t.state.selection.to<r+e.nodeSize&&(c=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(e,i,s,c,t)||l.updateNextNode(e,i,s,t,h)||l.addNode(e,i,s,t,r),r+=e.nodeSize})),l.syncToMarks(rB,n,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(s&&this.protectLocalComposition(t,s),dB(this.contentDOM,this.children,t),gL.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))},e.prototype.localCompositionInfo=function(t,e){var i=t.state.selection,n=i.from,r=i.to;if(!(!(t.state.selection instanceof WR)||n<e||r>e+this.node.content.size)){var o=t.root.getSelection(),s=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=OL(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(o.focusNode,o.focusOffset);if(s&&this.dom.contains(s.parentNode)){if(this.node.inlineContent){var a=s.nodeValue,l=function(t,e,i,n){for(var r=0,o=0;r<t.childCount&&o<=n;){var s=t.child(r++),a=o;if(o+=s.nodeSize,s.isText){for(var l=s.text;r<t.childCount;){var h=t.child(r++);if(o+=h.nodeSize,!h.isText)break;l+=h.text}if(o>=i){var c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=i)return a+c;if(i==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}}return-1}(this.node.content,a,n-e,r-e);return l<0?null:{node:s,pos:l,text:a}}return{node:s,pos:-1}}}},e.prototype.protectLocalComposition=function(t,e){var i=e.node,n=e.pos,r=e.text;if(!this.getDesc(i)){for(var o=i;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var s=new sB(this,o,i,r);t.compositionNodes.push(s),this.children=SB(this.children,n,n+r.length,t,s)}},e.prototype.update=function(t,e,i,n){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,i,n),!0)},e.prototype.updateInner=function(t,e,i,n){this.updateOuterDeco(e),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!wB(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,i=this.dom;this.dom=gB(this.dom,this.nodeDOM,mB(this.outerDeco,this.node,e),mB(t,this.node,e)),this.dom!=i&&(i.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},i.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(e.prototype,i),e}(iB);function hB(t,e,i,n,r){return bB(n,e,t),new lB(null,t,e,i,n,n,n,r,0)}var cB=function(t){function e(e,i,n,r,o,s,a){t.call(this,e,i,n,r,o,null,s,a)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,i,n){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,n.trackWrites==this.nodeDOM&&(n.trackWrites=null)),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,i,n){return e==this.nodeDOM?this.posAtStart+Math.min(i,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,i,n)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,i,n){var r=this.node.cut(t,i),o=document.createTextNode(r.text);return new e(this.parent,r,this.outerDeco,this.innerDeco,o,o,n)},e.prototype.markDirty=function(e,i){t.prototype.markDirty.call(this,e,i),this.dom==this.nodeDOM||0!=e&&i!=this.nodeDOM.nodeValue.length||(this.dirty=3)},i.domAtom.get=function(){return!1},Object.defineProperties(e.prototype,i),e}(lB),pB=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(t){return 0==this.dirty&&this.dom.nodeName==t},i.domAtom.get=function(){return!0},i.ignoreForCoords.get=function(){return"IMG"==this.dom.nodeName},Object.defineProperties(e.prototype,i),e}(iB),uB=function(t){function e(e,i,n,r,o,s,a,l,h,c){t.call(this,e,i,n,r,o,s,a,h,c),this.spec=l}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,i,n,r){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(e,i,n);return o&&this.updateInner(e,i,n,r),o}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,i,n,r)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,i,n,r){this.spec.setSelection?this.spec.setSelection(e,i,n):t.prototype.setSelection.call(this,e,i,n,r)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(lB);function dB(t,e,i){for(var n=t.firstChild,r=!1,o=0;o<e.length;o++){var s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=n;)n=xB(n),r=!0;n=n.nextSibling}else r=!0,t.insertBefore(a,n);if(s instanceof aB){var l=n?n.previousSibling:t.lastChild;dB(s.contentDOM,s.children,i),n=l?l.nextSibling:t.firstChild}}for(;n;)n=xB(n),r=!0;r&&i.trackWrites==t&&(i.trackWrites=null)}function fB(t){t&&(this.nodeName=t)}fB.prototype=Object.create(null);var vB=[new fB];function mB(t,e,i){if(0==t.length)return vB;for(var n=i?vB[0]:new fB,r=[n],o=0;o<t.length;o++){var s=t[o].type.attrs;if(s)for(var a in s.nodeName&&r.push(n=new fB(s.nodeName)),s){var l=s[a];null!=l&&(i&&1==r.length&&r.push(n=new fB(e.isInline?"span":"div")),"class"==a?n.class=(n.class?n.class+" ":"")+l:"style"==a?n.style=(n.style?n.style+";":"")+l:"nodeName"!=a&&(n[a]=l))}}return r}function gB(t,e,i,n){if(i==vB&&n==vB)return e;for(var r=e,o=0;o<n.length;o++){var s=n[o],a=i[o];if(o){var l=void 0;a&&a.nodeName==s.nodeName&&r!=t&&(l=r.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).pmIsDeco=!0,l.appendChild(r),a=vB[0]),r=l}yB(r,a||vB[0],s)}return r}function yB(t,e,i){for(var n in e)"class"==n||"style"==n||"nodeName"==n||n in i||t.removeAttribute(n);for(var r in i)"class"!=r&&"style"!=r&&"nodeName"!=r&&i[r]!=e[r]&&t.setAttribute(r,i[r]);if(e.class!=i.class){for(var o=e.class?e.class.split(" ").filter(Boolean):rB,s=i.class?i.class.split(" ").filter(Boolean):rB,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&t.classList.remove(o[a]);for(var l=0;l<s.length;l++)-1==o.indexOf(s[l])&&t.classList.add(s[l]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=i.style){if(e.style)for(var h,c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;h=c.exec(e.style);)t.style.removeProperty(h[1]);i.style&&(t.style.cssText+=i.style)}}function bB(t,e,i){return gB(t,t,vB,mB(e,i,1!=t.nodeType))}function wB(t,e){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].type.eq(e[i].type))return!1;return!0}function xB(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var _B=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(t,e){var i=e,n=i.children.length,r=t.childCount,o=new Map,s=[];t:for(;r>0;){for(var a=void 0;;)if(n){var l=i.children[n-1];if(!(l instanceof aB)){a=l,n--;break}i=l,n=l.children.length}else{if(i==e)break t;n=i.parent.children.indexOf(i),i=i.parent}var h=a.node;if(h){if(h!=t.child(r-1))break;--r,o.set(a,r),s.push(a)}}return{index:r,matched:o,matches:s.reverse()}}(t.node.content,t)};function kB(t,e){return t.type.side-e.type.side}function SB(t,e,i,n,r){for(var o=[],s=0,a=0;s<t.length;s++){var l=t[s],h=a,c=a+=l.size;h>=i||c<=e?o.push(l):(h<e&&o.push(l.slice(0,e-h,n)),r&&(o.push(r),r=null),c>i&&o.push(l.slice(i-h,l.size,n)))}return o}function CB(t,e){var i=t.root.getSelection(),n=t.state.doc;if(!i.focusNode)return null;var r=t.docView.nearestDesc(i.focusNode),o=r&&0==r.size,s=t.docView.posFromDOM(i.focusNode,i.focusOffset);if(s<0)return null;var a,l,h=n.resolve(s);if(PL(i)){for(a=h;r&&!r.node;)r=r.parent;if(r&&r.node.isAtom&&qR.isSelectable(r.node)&&r.parent&&(!r.node.isInline||!function(t,e,i){for(var n=0==e,r=e==OL(t);n||r;){if(t==i)return!0;var o=kL(t);if(!(t=t.parentNode))return!1;n=n&&0==o,r=r&&o==OL(t)}}(i.focusNode,i.focusOffset,r.dom))){var c=r.posBefore;l=new qR(s==c?h:n.resolve(c))}}else{var p=t.docView.posFromDOM(i.anchorNode,i.anchorOffset);if(p<0)return null;a=n.resolve(p)}l||(l=IB(t,a,h,"pointer"==e||t.state.selection.head<h.pos&&!o?1:-1));return l}function EB(t){return t.editable?t.hasFocus():zB(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function TB(t,e){var i=t.state.selection;if(PB(t,i),EB(t)){if(!e&&t.mouseDown&&t.mouseDown.allowDefault&&gL.chrome){var n=t.root.getSelection(),r=t.domObserver.currentSelection;if(n.anchorNode&&TL(n.anchorNode,n.anchorOffset,r.anchorNode,r.anchorOffset))return t.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.root.getSelection(),i=document.createRange(),n=t.cursorWrapper.dom,r="IMG"==n.nodeName;r?i.setEnd(n.parentNode,kL(n)+1):i.setEnd(n,0);i.collapse(!1),e.removeAllRanges(),e.addRange(i),!r&&!t.state.selection.visible&&gL.ie&&gL.ie_version<=11&&(n.disabled=!0,n.disabled=!1)}(t);else{var o,s,a=i.anchor,l=i.head;!AB||i instanceof WR||(i.$from.parent.inlineContent||(o=MB(t,i.from)),i.empty||i.$from.parent.inlineContent||(s=MB(t,i.to))),t.docView.setSelection(a,l,t.root,e),AB&&(o&&DB(o),s&&DB(s)),i.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var i=t.root.getSelection(),n=i.anchorNode,r=i.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){i.anchorNode==n&&i.anchorOffset==r||(e.removeEventListener("selectionchange",t.hideSelectionGuard),setTimeout((function(){EB(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}_B.prototype.destroyBetween=function(t,e){if(t!=e){for(var i=t;i<e;i++)this.top.children[i].destroy();this.top.children.splice(t,e-t),this.changed=!0}},_B.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},_B.prototype.syncToMarks=function(t,e,i){for(var n=0,r=this.stack.length>>1,o=Math.min(r,t.length);n<o&&(n==r-1?this.top:this.stack[n+1<<1]).matchesMark(t[n])&&!1!==t[n].type.spec.spanning;)n++;for(;n<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[r])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=aB.create(this.top,t[r],e,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,r++}},_B.prototype.findNodeMatch=function(t,e,i,n){var r,o=-1;if(n>=this.preMatch.index&&(r=this.preMatch.matches[n-this.preMatch.index]).parent==this.top&&r.matchesNode(t,e,i))o=this.top.children.indexOf(r,this.index);else for(var s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){var l=this.top.children[s];if(l.matchesNode(t,e,i)&&!this.preMatch.matched.has(l)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},_B.prototype.updateNodeAt=function(t,e,i,n,r){return!!this.top.children[n].update(t,e,i,r)&&(this.destroyBetween(this.index,n),this.index=n+1,!0)},_B.prototype.findIndexWithChild=function(t){for(;;){var e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){var i=t.pmViewDesc;if(i)for(var n=this.index;n<this.top.children.length;n++)if(this.top.children[n]==i)return n;return-1}t=e}},_B.prototype.updateNextNode=function(t,e,i,n,r){for(var o=this.index;o<this.top.children.length;o++){var s=this.top.children[o];if(s instanceof lB){var a=this.preMatch.matched.get(s);if(null!=a&&a!=r)return!1;var l=s.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&3!=s.dirty&&wB(e,s.outerDeco)))&&s.update(t,e,i,n))return this.destroyBetween(this.index,o),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1},_B.prototype.addNode=function(t,e,i,n,r){this.top.children.splice(this.index++,0,lB.create(this.top,t,e,i,n,r)),this.changed=!0},_B.prototype.placeWidget=function(t,e,i){var n=this.index<this.top.children.length?this.top.children[this.index]:null;if(!n||!n.matchesWidget(t)||t!=n.widget&&n.widget.type.toDOM.parentNode){var r=new oB(this.top,t,e,i);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++},_B.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof aB;)t=t.children[t.children.length-1];t&&t instanceof cB&&!/\n$/.test(t.node.text)||((gL.safari||gL.chrome)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},_B.prototype.addHackNode=function(t){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(t))this.index++;else{var e=document.createElement(t);"IMG"==t&&(e.className="ProseMirror-separator",e.alt=""),"BR"==t&&(e.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new pB(this.top,rB,e,null)),this.changed=!0}};var AB=gL.safari||gL.chrome&&gL.chrome_version<63;function MB(t,e){var i=t.docView.domFromPos(e,0),n=i.node,r=i.offset,o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(gL.safari&&o&&"false"==o.contentEditable)return OB(o);if(!(o&&"false"!=o.contentEditable||s&&"false"!=s.contentEditable)){if(o)return OB(o);if(s)return OB(s)}}function OB(t){return t.contentEditable="true",gL.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function DB(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function PB(t,e){if(e instanceof qR){var i=t.docView.descAt(e.from);i!=t.lastSelectedViewDesc&&(RB(t),i&&i.selectNode(),t.lastSelectedViewDesc=i)}else RB(t)}function RB(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function IB(t,e,i,n){return t.someProp("createSelectionBetween",(function(n){return n(t,e,i)}))||WR.between(e,i,n)}function zB(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function LB(t,e){var i=t.selection,n=i.$anchor,r=i.$head,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&FR.findFrom(s,e)}function BB(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function NB(t,e,i){var n=t.state.selection;if(!(n instanceof WR)){if(n instanceof qR&&n.node.isInline)return BB(t,new WR(e>0?n.$to:n.$from));var r=LB(t.state,e);return!!r&&BB(t,r)}if(!n.empty||i.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var o=LB(t.state,e);return!!(o&&o instanceof qR)&&BB(t,o)}if(!(gL.mac&&i.indexOf("m")>-1)){var s,a=n.$head,l=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!l||l.isText)return!1;var h=e<0?a.pos-l.nodeSize:a.pos;return!!(l.isAtom||(s=t.docView.descAt(h))&&!s.contentDOM)&&(qR.isSelectable(l)?BB(t,new qR(e<0?t.state.doc.resolve(a.pos-l.nodeSize):a)):!!gL.webkit&&BB(t,new WR(t.state.doc.resolve(e<0?h:h+l.nodeSize))))}}function jB(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function FB(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function VB(t){var e=t.root.getSelection(),i=e.focusNode,n=e.focusOffset;if(i){var r,o,s=!1;for(gL.gecko&&1==i.nodeType&&n<jB(i)&&FB(i.childNodes[n])&&(s=!0);;)if(n>0){if(1!=i.nodeType)break;var a=i.childNodes[n-1];if(FB(a))r=i,o=--n;else{if(3!=a.nodeType)break;n=(i=a).nodeValue.length}}else{if(WB(i))break;for(var l=i.previousSibling;l&&FB(l);)r=i.parentNode,o=kL(l),l=l.previousSibling;if(l)n=jB(i=l);else{if((i=i.parentNode)==t.dom)break;n=0}}s?UB(t,e,i,n):r&&UB(t,e,r,o)}}function HB(t){var e=t.root.getSelection(),i=e.focusNode,n=e.focusOffset;if(i){for(var r,o,s=jB(i);;)if(n<s){if(1!=i.nodeType)break;if(!FB(i.childNodes[n]))break;r=i,o=++n}else{if(WB(i))break;for(var a=i.nextSibling;a&&FB(a);)r=a.parentNode,o=kL(a)+1,a=a.nextSibling;if(a)n=0,s=jB(i=a);else{if((i=i.parentNode)==t.dom)break;n=s=0}}r&&UB(t,e,r,o)}}function WB(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function UB(t,e,i,n){if(PL(e)){var r=document.createRange();r.setEnd(i,n),r.setStart(i,n),e.removeAllRanges(),e.addRange(r)}else e.extend&&e.extend(i,n);t.domObserver.setCurSelection();var o=t.state;setTimeout((function(){t.state==o&&TB(t)}),50)}function qB(t,e,i){var n=t.state.selection;if(n instanceof WR&&!n.empty||i.indexOf("s")>-1)return!1;if(gL.mac&&i.indexOf("m")>-1)return!1;var r=n.$from,o=n.$to;if(!r.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var s=LB(t.state,e);if(s&&s instanceof qR)return BB(t,s)}if(!r.parent.inlineContent){var a=e<0?r:o,l=n instanceof GR?FR.near(a,e):FR.findFrom(a,e);return!!l&&BB(t,l)}return!1}function $B(t,e){if(!(t.state.selection instanceof WR))return!0;var i=t.state.selection,n=i.$head,r=i.$anchor,o=i.empty;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){var a=t.state.tr;return e<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),t.dispatch(a),!0}return!1}function GB(t,e,i){t.domObserver.stop(),e.contentEditable=i,t.domObserver.start()}function KB(t,e){var i=e.keyCode,n=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==i||gL.mac&&72==i&&"c"==n?$B(t,-1)||VB(t):46==i||gL.mac&&68==i&&"c"==n?$B(t,1)||HB(t):13==i||27==i||(37==i?NB(t,-1,n)||VB(t):39==i?NB(t,1,n)||HB(t):38==i?qB(t,-1,n)||VB(t):40==i?function(t){if(gL.safari&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),i=e.focusNode,n=e.focusOffset;if(i&&1==i.nodeType&&0==n&&i.firstChild&&"false"==i.firstChild.contentEditable){var r=i.firstChild;GB(t,r,!0),setTimeout((function(){return GB(t,r,!1)}),20)}}}(t)||qB(t,1,n)||HB(t):n==(gL.mac?"m":"c")&&(66==i||73==i||89==i||90==i))}function XB(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(gL.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var i=document.createElement("div");return i.appendChild(document.createElement("li")),{skip:i}}if(t.parentNode.lastChild==t||gL.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function YB(t,e,i,n,r){if(e<0){var o=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,s=CB(t,o);if(s&&!t.state.selection.eq(s)){var a=t.state.tr.setSelection(s);"pointer"==o?a.setMeta("pointer",!0):"key"==o&&a.scrollIntoView(),t.dispatch(a)}}else{var l=t.state.doc.resolve(e),h=l.sharedDepth(i);e=l.before(h+1),i=t.state.doc.resolve(i).after(h+1);var c=t.state.selection,p=function(t,e,i){var n=t.docView.parseRange(e,i),r=n.node,o=n.fromOffset,s=n.toOffset,a=n.from,l=n.to,h=t.root.getSelection(),c=null,p=h.anchorNode;if(p&&t.dom.contains(1==p.nodeType?p:p.parentNode)&&(c=[{node:p,offset:h.anchorOffset}],PL(h)||c.push({node:h.focusNode,offset:h.focusOffset})),gL.chrome&&8===t.lastKeyCode)for(var u=s;u>o;u--){var d=r.childNodes[u-1],f=d.pmViewDesc;if("BR"==d.nodeName&&!f){s=u;break}if(!f||f.size)break}var v=t.state.doc,m=t.someProp("domParser")||VP.fromSchema(t.state.schema),g=v.resolve(a),y=null,b=m.parse(r,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=g.parent.type.whitespace||"full",editableContent:!0,findPositions:c,ruleFromNode:XB,context:g});if(c&&null!=c[0].pos){var w=c[0].pos,x=c[1]&&c[1].pos;null==x&&(x=w),y={anchor:w+a,head:x+a}}return{doc:b,sel:y,from:a,to:l}}(t,e,i);if(gL.chrome&&t.cursorWrapper&&p.sel&&p.sel.anchor==t.cursorWrapper.deco.from){var u=t.cursorWrapper.deco.type.toDOM.nextSibling,d=u&&u.nodeValue?u.nodeValue.length:1;p.sel={anchor:p.sel.anchor+d,head:p.sel.anchor+d}}var f,v,m=t.state.doc,g=m.slice(p.from,p.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(f=t.state.selection.to,v="end"):(f=t.state.selection.from,v="start"),t.lastKeyCode=null;var y=function(t,e,i,n,r){var o=t.findDiffStart(e,i);if(null==o)return null;var s=t.findDiffEnd(e,i+t.size,i+e.size),a=s.a,l=s.b;if("end"==r){n-=a+Math.max(0,o-Math.min(a,l))-o}if(a<o&&t.size<e.size){l=(o-=n<=o&&n>=a?o-n:0)+(l-a),a=o}else if(l<o){a=(o-=n<=o&&n>=l?o-n:0)+(a-l),l=o}return{start:o,endA:a,endB:l}}(g.content,p.doc.content,p.from,f,v);if((gL.ios&&t.lastIOSEnter>Date.now()-225||gL.android)&&r.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName}))&&(!y||y.endA>=y.endB)&&t.someProp("handleKeyDown",(function(e){return e(t,RL(13,"Enter"))})))t.lastIOSEnter=0;else{if(!y){if(!(n&&c instanceof WR&&!c.empty&&c.$head.sameParent(c.$anchor))||t.composing||p.sel&&p.sel.anchor!=p.sel.head){if(p.sel){var b=ZB(t,t.state.doc,p.sel);b&&!b.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(b))}return}y={start:c.from,endA:c.to,endB:c.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof WR&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2&&t.state.selection.from>=p.from?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&t.state.selection.to<=p.to&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),gL.ie&&gL.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>p.from&&" "==p.doc.textBetween(y.start-p.from-1,y.start-p.from+1)&&(y.start--,y.endA--,y.endB--);var w,x=p.doc.resolveNoCache(y.start-p.from),_=p.doc.resolveNoCache(y.endB-p.from),k=x.sameParent(_)&&x.parent.inlineContent;if((gL.ios&&t.lastIOSEnter>Date.now()-225&&(!k||r.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!k&&x.pos<p.doc.content.size&&(w=FR.findFrom(p.doc.resolve(x.pos+1),1,!0))&&w.head==_.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,RL(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>y.start&&function(t,e,i,n,r){if(!n.parent.isTextblock||i-e<=r.pos-n.pos||JB(n,!0,!1)<r.pos)return!1;var o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=t.resolve(JB(o,!0,!0));if(!s.parent.isTextblock||s.pos>i||JB(s,!0,!1)<i)return!1;return n.parent.content.cut(n.parentOffset).eq(s.parent.content)}(m,y.start,y.endA,x,_)&&t.someProp("handleKeyDown",(function(e){return e(t,RL(8,"Backspace"))})))gL.android&&gL.chrome&&t.domObserver.suppressSelectionUpdates();else{gL.chrome&&gL.android&&y.toB==y.from&&(t.lastAndroidDelete=Date.now()),gL.android&&!k&&x.start()!=_.start()&&0==_.parentOffset&&x.depth==_.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==y.endA&&(y.endB-=2,_=p.doc.resolveNoCache(y.endB-p.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,RL(13,"Enter"))}))}),20));var S,C,E,T,A=y.start,M=y.endA;if(k)if(x.pos==_.pos)gL.ie&&gL.ie_version<=11&&0==x.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return TB(t)}),20)),S=t.state.tr.delete(A,M),C=m.resolve(y.start).marksAcross(m.resolve(y.endA));else if(y.endA==y.endB&&(T=m.resolve(y.start))&&(E=function(t,e){for(var i,n,r,o=t.firstChild.marks,s=e.firstChild.marks,a=o,l=s,h=0;h<s.length;h++)a=s[h].removeFromSet(a);for(var c=0;c<o.length;c++)l=o[c].removeFromSet(l);if(1==a.length&&0==l.length)n=a[0],i="add",r=function(t){return t.mark(n.addToSet(t.marks))};else{if(0!=a.length||1!=l.length)return null;n=l[0],i="remove",r=function(t){return t.mark(n.removeFromSet(t.marks))}}for(var p=[],u=0;u<e.childCount;u++)p.push(r(e.child(u)));if(HD.from(p).eq(t))return{mark:n,type:i}}(x.parent.content.cut(x.parentOffset,_.parentOffset),T.parent.content.cut(T.parentOffset,y.endA-T.start()))))S=t.state.tr,"add"==E.type?S.addMark(A,M,E.mark):S.removeMark(A,M,E.mark);else if(x.parent.child(x.index()).isText&&x.index()==_.index()-(_.textOffset?0:1)){var O=x.parent.textBetween(x.parentOffset,_.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,A,M,O)})))return;S=t.state.tr.insertText(O,A,M)}if(S||(S=t.state.tr.replace(A,M,p.doc.slice(y.start-p.from,y.endB-p.from))),p.sel){var D=ZB(t,S.doc,p.sel);D&&!(gL.chrome&&gL.android&&t.composing&&D.empty&&(y.start!=y.endB||t.lastAndroidDelete<Date.now()-100)&&(D.head==A||D.head==S.mapping.map(M)-1)||gL.ie&&D.empty&&D.head==A)&&S.setSelection(D)}C&&S.ensureMarks(C),t.dispatch(S.scrollIntoView())}}}}function ZB(t,e,i){return Math.max(i.anchor,i.head)>e.content.size?null:IB(t,e.resolve(i.anchor),e.resolve(i.head))}function JB(t,e,i){for(var n=t.depth,r=e?t.end():t.pos;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,r++,e=!1;if(i)for(var o=t.node(n).maybeChild(t.indexAfter(n));o&&!o.isLeaf;)o=o.firstChild,r++;return r}function QB(t,e){for(var i=[],n=e.content,r=e.openStart,o=e.openEnd;r>1&&o>1&&1==n.childCount&&1==n.firstChild.childCount;){r--,o--;var s=n.firstChild;i.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),n=s.content}var a=t.someProp("clipboardSerializer")||JP.fromSchema(t.state.schema),l=hN(),h=l.createElement("div");h.appendChild(a.serializeFragment(n,{document:l}));for(var c,p=h.firstChild;p&&1==p.nodeType&&(c=aN[p.nodeName.toLowerCase()]);){for(var u=c.length-1;u>=0;u--){for(var d=l.createElement(c[u]);h.firstChild;)d.appendChild(h.firstChild);h.appendChild(d),"tbody"!=c[u]&&(r++,o++)}p=h.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",r+" "+o+" "+JSON.stringify(i)),{dom:h,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function tN(t,e,i,n,r){var o,s,a=r.parent.type.spec.code;if(!i&&!e)return null;var l=e&&(n||a||!i);if(l){if(t.someProp("transformPastedText",(function(t){e=t(e,a||n)})),a)return e?new XD(HD.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):XD.empty;var h=t.someProp("clipboardTextParser",(function(t){return t(e,r,n)}));if(h)s=h;else{var c=r.marks(),p=t.state.schema,u=JP.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((function(t){var e=o.appendChild(document.createElement("p"));t&&e.appendChild(u.serializeNode(p.text(t,c)))}))}}else t.someProp("transformPastedHTML",(function(t){i=t(i)})),o=function(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var i,n=hN().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t);(i=r&&aN[r[1].toLowerCase()])&&(t=i.map((function(t){return"<"+t+">"})).join("")+t+i.map((function(t){return"</"+t+">"})).reverse().join(""));if(n.innerHTML=t,i)for(var o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}(i),gL.webkit&&function(t){for(var e=t.querySelectorAll(gL.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),i=0;i<e.length;i++){var n=e[i];1==n.childNodes.length&&""==n.textContent&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}(o);var d=o&&o.querySelector("[data-pm-slice]"),f=d&&/^(\d+) (\d+) (.*)/.exec(d.getAttribute("data-pm-slice"));if(!s){var v=t.someProp("clipboardParser")||t.someProp("domParser")||VP.fromSchema(t.state.schema);s=v.parseSlice(o,{preserveWhitespace:!(!l&&!f),context:r,ruleFromNode:function(t){if("BR"==t.nodeName&&!t.nextSibling&&t.parentNode&&!eN.test(t.parentNode.nodeName))return{ignore:!0}}})}if(f)s=function(t,e){if(!t.size)return t;var i,n=t.content.firstChild.type.schema;try{i=JSON.parse(e)}catch(e){return t}for(var r=t.content,o=t.openStart,s=t.openEnd,a=i.length-2;a>=0;a-=2){var l=n.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;r=HD.from(l.create(i[a+1],r)),o++,s++}return new XD(r,o,s)}(sN(s,+f[1],+f[2]),f[3]);else if(s=XD.maxOpen(function(t,e){if(t.childCount<2)return t;for(var i=function(i){var n=e.node(i).contentMatchAt(e.index(i)),r=void 0,o=[];if(t.forEach((function(t){if(o){var e,i=n.findWrapping(t.type);if(!i)return o=null;if(e=o.length&&r.length&&nN(i,r,t,o[o.length-1],0))o[o.length-1]=e;else{o.length&&(o[o.length-1]=rN(o[o.length-1],r.length));var s=iN(t,i);o.push(s),n=n.matchType(s.type,s.attrs),r=i}}})),o)return{v:HD.from(o)}},n=e.depth;n>=0;n--){var r=i(n);if(r)return r.v}return t}(s.content,r),!0),s.openStart||s.openEnd){for(var m=0,g=0,y=s.content.firstChild;m<s.openStart&&!y.type.spec.isolating;m++,y=y.firstChild);for(var b=s.content.lastChild;g<s.openEnd&&!b.type.spec.isolating;g++,b=b.lastChild);s=sN(s,m,g)}return t.someProp("transformPasted",(function(t){s=t(s)})),s}var eN=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function iN(t,e,i){void 0===i&&(i=0);for(var n=e.length-1;n>=i;n--)t=e[n].create(null,HD.from(t));return t}function nN(t,e,i,n,r){if(r<t.length&&r<e.length&&t[r]==e[r]){var o=nN(t,e,i,n.lastChild,r+1);if(o)return n.copy(n.content.replaceChild(n.childCount-1,o));if(n.contentMatchAt(n.childCount).matchType(r==t.length-1?i.type:t[r+1]))return n.copy(n.content.append(HD.from(iN(i,t,r+1))))}}function rN(t,e){if(0==e)return t;var i=t.content.replaceChild(t.childCount-1,rN(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(HD.empty,!0);return t.copy(i.append(n))}function oN(t,e,i,n,r,o){var s=e<0?t.firstChild:t.lastChild,a=s.content;return r<n-1&&(a=oN(a,e,i,n,r+1,o)),r>=i&&(a=e<0?s.contentMatchAt(0).fillBefore(a,t.childCount>1||o<=r).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(HD.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function sN(t,e,i){return e<t.openStart&&(t=new XD(oN(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),i<t.openEnd&&(t=new XD(oN(t.content,1,i,t.openEnd,0,0),t.openStart,i)),t}var aN={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},lN=null;function hN(){return lN||(lN=document.implementation.createHTMLDocument("title"))}var cN={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},pN=gL.ie&&gL.ie_version<=11,uN=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};uN.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},uN.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var dN=function(t,e){var i=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)i.queue.push(t[e]);gL.ie&&gL.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?i.flushSoon():i.flush()})),this.currentSelection=new uN,pN&&(this.onCharData=function(t){i.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),i.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};dN.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},dN.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},dN.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,cN),pN&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},dN.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var i=0;i<e.length;i++)this.queue.push(e[i]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}pN&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},dN.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},dN.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},dN.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},dN.prototype.onSelectionChange=function(){if((!(t=this.view).editable||t.root.activeElement==t.dom)&&zB(t)){var t;if(this.suppressingSelectionUpdates)return TB(this.view);if(gL.ie&&gL.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&TL(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},dN.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},dN.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,i=this.view.docView.nearestDesc(e);return i&&i.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},dN.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&zB(this.view)&&!this.ignoreSelectionChange(e),n=-1,r=-1,o=!1,s=[];if(this.view.editable)for(var a=0;a<t.length;a++){var l=this.registerMutation(t[a],s);l&&(n=n<0?l.from:Math.min(l.from,n),r=r<0?l.to:Math.max(l.to,r),l.typeOver&&(o=!0))}if(gL.gecko&&s.length>1){var h=s.filter((function(t){return"BR"==t.nodeName}));if(2==h.length){var c=h[0],p=h[1];c.parentNode&&c.parentNode.parentNode==p.parentNode?p.remove():c.remove()}}(n>-1||i)&&(n>-1&&(this.view.docView.markDirty(n,r),function(t){if(fN)return;fN=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(n,r,o,s),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||TB(this.view),this.currentSelection.set(e))}},dN.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var i=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(i==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!i||i.ignoreMutation(t))return null;if("childList"==t.type){for(var n=0;n<t.addedNodes.length;n++)e.push(t.addedNodes[n]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};var r=t.previousSibling,o=t.nextSibling;if(gL.ie&&gL.ie_version<=11&&t.addedNodes.length)for(var s=0;s<t.addedNodes.length;s++){var a=t.addedNodes[s],l=a.previousSibling,h=a.nextSibling;(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(r=l),(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(o=h)}var c=r&&r.parentNode==t.target?kL(r)+1:0,p=i.localPosFromDOM(t.target,c,-1),u=o&&o.parentNode==t.target?kL(o):t.target.childNodes.length;return{from:p,to:i.localPosFromDOM(t.target,u,1)}}return"attributes"==t.type?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var fN=!1;var vN={},mN={};function gN(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function yN(t){t.someProp("handleDOMEvents",(function(e){for(var i in e)t.eventHandlers[i]||t.dom.addEventListener(i,t.eventHandlers[i]=function(e){return bN(t,e)})}))}function bN(t,e){return t.someProp("handleDOMEvents",(function(i){var n=i[e.type];return!!n&&(n(t,e)||e.defaultPrevented)}))}function wN(t){return{left:t.clientX,top:t.clientY}}function xN(t,e,i,n,r){if(-1==n)return!1;for(var o=t.state.doc.resolve(n),s=function(n){if(t.someProp(e,(function(e){return n>o.depth?e(t,i,o.nodeAfter,o.before(n),r,!0):e(t,i,o.node(n),o.before(n),r,!1)})))return{v:!0}},a=o.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function _N(t,e,i){t.focused||t.focus();var n=t.state.tr.setSelection(e);"pointer"==i&&n.setMeta("pointer",!0),t.dispatch(n)}function kN(t,e,i,n,r){return xN(t,"handleClickOn",e,i,n)||t.someProp("handleClick",(function(i){return i(t,e,n)}))||(r?function(t,e){if(-1==e)return!1;var i,n,r=t.state.selection;r instanceof qR&&(i=r.node);for(var o=t.state.doc.resolve(e),s=o.depth+1;s>0;s--){var a=s>o.depth?o.nodeAfter:o.node(s);if(qR.isSelectable(a)){n=i&&r.$from.depth>0&&s>=r.$from.depth&&o.before(r.$from.depth+1)==r.$from.pos?o.before(r.$from.depth):o.before(s);break}}return null!=n&&(_N(t,qR.create(t.state.doc,n),"pointer"),!0)}(t,i):function(t,e){if(-1==e)return!1;var i=t.state.doc.resolve(e),n=i.nodeAfter;return!!(n&&n.isAtom&&qR.isSelectable(n))&&(_N(t,new qR(i),"pointer"),!0)}(t,i))}function SN(t,e,i,n){return xN(t,"handleDoubleClickOn",e,i,n)||t.someProp("handleDoubleClick",(function(i){return i(t,e,n)}))}function CN(t,e,i,n){return xN(t,"handleTripleClickOn",e,i,n)||t.someProp("handleTripleClick",(function(i){return i(t,e,n)}))||function(t,e,i){if(0!=i.button)return!1;var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(_N(t,WR.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(e),o=r.depth+1;o>0;o--){var s=o>r.depth?r.nodeAfter:r.node(o),a=r.before(o);if(s.inlineContent)_N(t,WR.create(n,a+1,a+1+s.content.size),"pointer");else{if(!qR.isSelectable(s))continue;_N(t,qR.create(n,a),"pointer")}return!0}}(t,i,n)}function EN(t){return RN(t)}mN.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!MN(t,e)&&(t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!gL.android||!gL.chrome||13!=e.keyCode))if(229!=e.keyCode&&t.domObserver.forceFlush(),!gL.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(i){return i(t,e)}))||KB(t,e)?e.preventDefault():gN(t,"key");else{var i=Date.now();t.lastIOSEnter=i,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==i&&(t.someProp("handleKeyDown",(function(e){return e(t,RL(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},mN.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},mN.keypress=function(t,e){if(!(MN(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||gL.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(i){return i(t,e)})))e.preventDefault();else{var i=t.state.selection;if(!(i instanceof WR&&i.$from.sameParent(i.$to))){var n=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,i.$from.pos,i.$to.pos,n)}))||t.dispatch(t.state.tr.insertText(n).scrollIntoView()),e.preventDefault()}}};var TN=gL.mac?"metaKey":"ctrlKey";vN.mousedown=function(t,e){t.shiftKey=e.shiftKey;var i=EN(t),n=Date.now(),r="singleClick";n-t.lastClick.time<500&&function(t,e){var i=e.x-t.clientX,n=e.y-t.clientY;return i*i+n*n<100}(e,t.lastClick)&&!e[TN]&&("singleClick"==t.lastClick.type?r="doubleClick":"doubleClick"==t.lastClick.type&&(r="tripleClick")),t.lastClick={time:n,x:e.clientX,y:e.clientY,type:r};var o=t.posAtCoords(wN(e));o&&("singleClick"==r?(t.mouseDown&&t.mouseDown.done(),t.mouseDown=new AN(t,o,e,i)):("doubleClick"==r?SN:CN)(t,o.pos,o.inside,e)?e.preventDefault():gN(t,"pointer"))};var AN=function(t,e,i,n){var r,o,s=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=i,this.flushed=n,this.selectNode=i[TN],this.allowDefault=i.shiftKey,this.delayedSelectionSync=!1,e.inside>-1)r=t.state.doc.nodeAt(e.inside),o=e.inside;else{var a=t.state.doc.resolve(e.pos);r=a.parent,o=a.depth?a.before():0}this.mightDrag=null;var l=n?null:i.target,h=l?t.docView.nearestDesc(l,!0):null;this.target=h?h.dom:null;var c=t.state.selection;(0==i.button&&r.type.spec.draggable&&!1!==r.type.spec.selectable||c instanceof qR&&c.from<=o&&c.to>o)&&(this.mightDrag={node:r,pos:o,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&gL.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){s.view.mouseDown==s&&s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),gN(t,"pointer")};function MN(t,e){return!!t.composing||!!(gL.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}AN.prototype.done=function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return TB(t.view)})),this.view.mouseDown=null},AN.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(wN(t))),this.allowDefault||!e?gN(this.view,"pointer"):kN(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||gL.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||gL.chrome&&!(this.view.state.selection instanceof WR)&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(_N(this.view,FR.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):gN(this.view,"pointer")}},AN.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),gN(this.view,"pointer"),0==t.buttons&&this.done()},vN.touchdown=function(t){EN(t),gN(t,"pointer")},vN.contextmenu=function(t){return EN(t)};var ON=gL.android?5e3:-1;function DN(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return RN(t)}),e))}function PN(t){for(t.composing&&(t.composing=!1,t.compositionEndedAt=function(){var t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}());t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty()}function RN(t,e){if(!(gL.android&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),PN(t),e||t.docView&&t.docView.dirty){var i=CB(t);return i&&!i.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(i)):t.updateState(t.state),!0}return!1}}mN.compositionstart=mN.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,i=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!i.textOffset&&i.parentOffset&&i.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||i.marks(),RN(t,!0),t.markCursor=null;else if(RN(t),gL.gecko&&e.selection.empty&&i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.length)for(var n=t.root.getSelection(),r=n.focusNode,o=n.focusOffset;r&&1==r.nodeType&&0!=o;){var s=o<0?r.lastChild:r.childNodes[o-1];if(!s)break;if(3==s.nodeType){n.collapse(s,s.nodeValue.length);break}r=s,o=-1}t.composing=!0}DN(t,ON)},mN.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,DN(t,20))};var IN=gL.ie&&gL.ie_version<15||gL.ios&&gL.webkit_version<604;function zN(t,e,i,n){var r=tN(t,e,i,t.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,n,r||XD.empty)})))return!0;if(!r)return!1;var o=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(r),s=o?t.state.tr.replaceSelectionWith(o,t.shiftKey):t.state.tr.replaceSelection(r);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}vN.copy=mN.cut=function(t,e){var i=t.state.selection,n="cut"==e.type;if(!i.empty){var r=IN?null:e.clipboardData,o=QB(t,i.content()),s=o.dom,a=o.text;r?(e.preventDefault(),r.clearData(),r.setData("text/html",s.innerHTML),r.setData("text/plain",a)):function(t,e){if(t.dom.parentNode){var i=t.dom.parentNode.appendChild(document.createElement("div"));i.appendChild(e),i.style.cssText="position: fixed; left: -10000px; top: 10px";var n=getSelection(),r=document.createRange();r.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(r),setTimeout((function(){i.parentNode&&i.parentNode.removeChild(i),t.focus()}),50)}}(t,s),n&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},mN.paste=function(t,e){if(!t.composing||gL.android){var i=IN?null:e.clipboardData;i&&zN(t,i.getData("text/plain"),i.getData("text/html"),e)?e.preventDefault():function(t,e){if(t.dom.parentNode){var i=t.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(i?"textarea":"div"));i||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((function(){t.focus(),n.parentNode&&n.parentNode.removeChild(n),i?zN(t,n.value,null,e):zN(t,n.textContent,n.innerHTML,e)}),50)}}(t,e)}};var LN=function(t,e){this.slice=t,this.move=e},BN=gL.mac?"altKey":"ctrlKey";for(var NN in vN.dragstart=function(t,e){var i=t.mouseDown;if(i&&i.done(),e.dataTransfer){var n=t.state.selection,r=n.empty?null:t.posAtCoords(wN(e));if(r&&r.pos>=n.from&&r.pos<=(n instanceof qR?n.to-1:n.to));else if(i&&i.mightDrag)t.dispatch(t.state.tr.setSelection(qR.create(t.state.doc,i.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var o=t.docView.nearestDesc(e.target,!0);o&&o.node.type.spec.draggable&&o!=t.docView&&t.dispatch(t.state.tr.setSelection(qR.create(t.state.doc,o.posBefore)))}var s=t.state.selection.content(),a=QB(t,s),l=a.dom,h=a.text;e.dataTransfer.clearData(),e.dataTransfer.setData(IN?"Text":"text/html",l.innerHTML),e.dataTransfer.effectAllowed="copyMove",IN||e.dataTransfer.setData("text/plain",h),t.dragging=new LN(s,!e[BN])}},vN.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},mN.dragover=mN.dragenter=function(t,e){return e.preventDefault()},mN.drop=function(t,e){var i=t.dragging;if(t.dragging=null,e.dataTransfer){var n=t.posAtCoords(wN(e));if(n){var r=t.state.doc.resolve(n.pos);if(r){var o=i&&i.slice;o?t.someProp("transformPasted",(function(t){o=t(o)})):o=tN(t,e.dataTransfer.getData(IN?"Text":"text/plain"),IN?null:e.dataTransfer.getData("text/html"),!1,r);var s=i&&!e[BN];if(t.someProp("handleDrop",(function(i){return i(t,e,o||XD.empty,s)})))e.preventDefault();else if(o){e.preventDefault();var a=o?kR(t.state.doc,r.pos,o):r.pos;null==a&&(a=r.pos);var l=t.state.tr;s&&l.deleteSelection();var h=l.mapping.map(a),c=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,p=l.doc;if(c?l.replaceRangeWith(h,h,o.content.firstChild):l.replaceRange(h,h,o),!l.doc.eq(p)){var u=l.doc.resolve(h);if(c&&qR.isSelectable(o.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new qR(u));else{var d=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((function(t,e,i,n){return d=n})),l.setSelection(IB(t,u,l.doc.resolve(d)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}}}}}},vN.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&TB(t)}),20))},vN.blur=function(t,e){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),e.relatedTarget&&t.dom.contains(e.relatedTarget)&&t.domObserver.currentSelection.set({}),t.focused=!1)},vN.beforeinput=function(t,e){if(gL.chrome&&gL.android&&"deleteContentBackward"==e.inputType){t.domObserver.flushSoon();var i=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==i&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,RL(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},mN)vN[NN]=mN[NN];function jN(t,e){if(t==e)return!0;for(var i in t)if(t[i]!==e[i])return!1;for(var n in e)if(!(n in t))return!1;return!0}var FN=function(t,e){this.spec=e||$N,this.side=this.spec.side||0,this.toDOM=t};FN.prototype.map=function(t,e,i,n){var r=t.mapResult(e.from+n,this.side<0?-1:1),o=r.pos;return r.deleted?null:new WN(o-i,o-i,this)},FN.prototype.valid=function(){return!0},FN.prototype.eq=function(t){return this==t||t instanceof FN&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&jN(this.spec,t.spec))},FN.prototype.destroy=function(t){this.spec.destroy&&this.spec.destroy(t)};var VN=function(t,e){this.spec=e||$N,this.attrs=t};VN.prototype.map=function(t,e,i,n){var r=t.map(e.from+n,this.spec.inclusiveStart?-1:1)-i,o=t.map(e.to+n,this.spec.inclusiveEnd?1:-1)-i;return r>=o?null:new WN(r,o,this)},VN.prototype.valid=function(t,e){return e.from<e.to},VN.prototype.eq=function(t){return this==t||t instanceof VN&&jN(this.attrs,t.attrs)&&jN(this.spec,t.spec)},VN.is=function(t){return t.type instanceof VN};var HN=function(t,e){this.spec=e||$N,this.attrs=t};HN.prototype.map=function(t,e,i,n){var r=t.mapResult(e.from+n,1);if(r.deleted)return null;var o=t.mapResult(e.to+n,-1);return o.deleted||o.pos<=r.pos?null:new WN(r.pos-i,o.pos-i,this)},HN.prototype.valid=function(t,e){var i,n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&!(i=t.child(r)).isText&&o+i.nodeSize==e.to},HN.prototype.eq=function(t){return this==t||t instanceof HN&&jN(this.attrs,t.attrs)&&jN(this.spec,t.spec)};var WN=function(t,e,i){this.from=t,this.to=e,this.type=i},UN={spec:{configurable:!0},inline:{configurable:!0}};WN.prototype.copy=function(t,e){return new WN(t,e,this.type)},WN.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},WN.prototype.map=function(t,e,i){return this.type.map(t,this,e,i)},WN.widget=function(t,e,i){return new WN(t,t,new FN(e,i))},WN.inline=function(t,e,i,n){return new WN(t,e,new VN(i,n))},WN.node=function(t,e,i,n){return new WN(t,e,new HN(i,n))},UN.spec.get=function(){return this.type.spec},UN.inline.get=function(){return this.type instanceof VN},Object.defineProperties(WN.prototype,UN);var qN=[],$N={},GN=function(t,e){this.local=t&&t.length?t:qN,this.children=e&&e.length?e:qN};GN.create=function(t,e){return e.length?QN(e,t,0,$N):KN},GN.prototype.find=function(t,e,i){var n=[];return this.findInner(null==t?0:t,null==e?1e9:e,n,0,i),n},GN.prototype.findInner=function(t,e,i,n,r){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=e&&s.to>=t&&(!r||r(s.spec))&&i.push(s.copy(s.from+n,s.to+n))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var l=this.children[a]+1;this.children[a+2].findInner(t-l,e-l,i,n+l,r)}},GN.prototype.map=function(t,e,i){return this==KN||0==t.maps.length?this:this.mapInner(t,e,0,0,i||$N)},GN.prototype.mapInner=function(t,e,i,n,r){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(t,i,n);a&&a.type.valid(e,a)?(o||(o=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?function(t,e,i,n,r,o,s){for(var a=t.slice(),l=function(t,e,i,n){for(var s=0;s<a.length;s+=3){var l=a[s+1],h=void 0;if(!(l<0||t>l+o)){var c=a[s]+o;e>=c?a[s+1]=t<=c?-2:-1:i>=r&&(h=n-i-(e-t))&&(a[s]+=h,a[s+1]+=h)}}},h=0;h<i.maps.length;h++)i.maps[h].forEach(l);for(var c=!1,p=0;p<a.length;p+=3)if(a[p+1]<0){if(-2==a[p+1]){c=!0,a[p+1]=-1;continue}var u=i.map(t[p]+o),d=u-r;if(d<0||d>=n.content.size){c=!0;continue}var f=i.map(t[p+1]+o,-1)-r,v=n.content.findIndex(d),m=v.index,g=v.offset,y=n.maybeChild(m);if(y&&g==d&&g+y.nodeSize==f){var b=a[p+2].mapInner(i,y,u+1,t[p]+o+1,s);b!=KN?(a[p]=d,a[p+1]=f,a[p+2]=b):(a[p+1]=-2,c=!0)}else c=!0}if(c){var w=function(t,e,i,n,r,o,s){function a(t,e){for(var o=0;o<t.local.length;o++){var l=t.local[o].map(n,r,e);l?i.push(l):s.onRemove&&s.onRemove(t.local[o].spec)}for(var h=0;h<t.children.length;h+=3)a(t.children[h+2],t.children[h]+e+1)}for(var l=0;l<t.length;l+=3)-1==t[l+1]&&a(t[l+2],e[l]+o+1);return i}(a,t,e||[],i,r,o,s),x=QN(w,n,0,s);e=x.local;for(var _=0;_<a.length;_+=3)a[_+1]<0&&(a.splice(_,3),_-=3);for(var k=0,S=0;k<x.children.length;k+=3){for(var C=x.children[k];S<a.length&&a[S]<C;)S+=3;a.splice(S,0,x.children[k],x.children[k+1],x.children[k+2])}}return new GN(e&&e.sort(tj),a)}(this.children,o,t,e,i,n,r):o?new GN(o.sort(tj)):KN},GN.prototype.add=function(t,e){return e.length?this==KN?GN.create(t,e):this.addInner(t,e,0):this},GN.prototype.addInner=function(t,e,i){var n,r=this,o=0;t.forEach((function(t,s){var a,l=s+i;if(a=ZN(e,t,l)){for(n||(n=r.children.slice());o<n.length&&n[o]<s;)o+=3;n[o]==s?n[o+2]=n[o+2].addInner(t,a,l+1):n.splice(o,0,s,s+t.nodeSize,QN(a,t,l+1,$N)),o+=3}}));for(var s=YN(o?JN(e):e,-i),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new GN(s.length?this.local.concat(s).sort(tj):this.local,n||this.children)},GN.prototype.remove=function(t){return 0==t.length||this==KN?this:this.removeInner(t,0)},GN.prototype.removeInner=function(t,e){for(var i=this.children,n=this.local,r=0;r<i.length;r+=3){for(var o=void 0,s=i[r]+e,a=i[r+1]+e,l=0,h=void 0;l<t.length;l++)(h=t[l])&&h.from>s&&h.to<a&&(t[l]=null,(o||(o=[])).push(h));if(o){i==this.children&&(i=this.children.slice());var c=i[r+2].removeInner(o,s+1);c!=KN?i[r+2]=c:(i.splice(r,3),r-=3)}}if(n.length)for(var p=0,u=void 0;p<t.length;p++)if(u=t[p])for(var d=0;d<n.length;d++)n[d].eq(u,e)&&(n==this.local&&(n=this.local.slice()),n.splice(d--,1));return i==this.children&&n==this.local?this:n.length||i.length?new GN(n,i):KN},GN.prototype.forChild=function(t,e){if(this==KN)return this;if(e.isLeaf)return GN.empty;for(var i,n,r=0;r<this.children.length;r+=3)if(this.children[r]>=t){this.children[r]==t&&(i=this.children[r+2]);break}for(var o=t+1,s=o+e.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof VN){var h=Math.max(o,l.from)-o,c=Math.min(s,l.to)-o;h<c&&(n||(n=[])).push(l.copy(h,c))}}if(n){var p=new GN(n.sort(tj));return i?new XN([p,i]):p}return i||KN},GN.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof GN)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var i=0;i<this.children.length;i+=3)if(this.children[i]!=t.children[i]||this.children[i+1]!=t.children[i+1]||!this.children[i+2].eq(t.children[i+2]))return!1;return!0},GN.prototype.locals=function(t){return ej(this.localsInner(t))},GN.prototype.localsInner=function(t){if(this==KN)return qN;if(t.inlineContent||!this.local.some(VN.is))return this.local;for(var e=[],i=0;i<this.local.length;i++)this.local[i].type instanceof VN||e.push(this.local[i]);return e};var KN=new GN;GN.empty=KN,GN.removeOverlap=ej;var XN=function(t){this.members=t};function YN(t,e){if(!e||!t.length)return t;for(var i=[],n=0;n<t.length;n++){var r=t[n];i.push(new WN(r.from+e,r.to+e,r.type))}return i}function ZN(t,e,i){if(e.isLeaf)return null;for(var n=i+e.nodeSize,r=null,o=0,s=void 0;o<t.length;o++)(s=t[o])&&s.from>i&&s.to<n&&((r||(r=[])).push(s),t[o]=null);return r}function JN(t){for(var e=[],i=0;i<t.length;i++)null!=t[i]&&e.push(t[i]);return e}function QN(t,e,i,n){var r=[],o=!1;e.forEach((function(e,s){var a=ZN(t,e,s+i);if(a){o=!0;var l=QN(a,e,i+s+1,n);l!=KN&&r.push(s,s+e.nodeSize,l)}}));for(var s=YN(o?JN(t):t,-i).sort(tj),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(n.onRemove&&n.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new GN(s,r):KN}function tj(t,e){return t.from-e.from||t.to-e.to}function ej(t){for(var e=t,i=0;i<e.length-1;i++){var n=e[i];if(n.from!=n.to)for(var r=i+1;r<e.length;r++){var o=e[r];if(o.from!=n.from){o.from<n.to&&(e==t&&(e=t.slice()),e[i]=n.copy(n.from,o.from),ij(e,r,n.copy(o.from,n.to)));break}o.to!=n.to&&(e==t&&(e=t.slice()),e[r]=o.copy(o.from,n.to),ij(e,r+1,o.copy(n.to,o.to)))}}return e}function ij(t,e,i){for(;e<t.length&&tj(i,t[e])>0;)e++;t.splice(e,0,i)}function nj(t){var e=[];return t.someProp("decorations",(function(i){var n=i(t.state);n&&n!=KN&&e.push(n)})),t.cursorWrapper&&e.push(GN.create(t.state.doc,[t.cursorWrapper.deco])),XN.from(e)}XN.prototype.map=function(t,e){var i=this.members.map((function(i){return i.map(t,e,$N)}));return XN.from(i)},XN.prototype.forChild=function(t,e){if(e.isLeaf)return GN.empty;for(var i=[],n=0;n<this.members.length;n++){var r=this.members[n].forChild(t,e);r!=KN&&(r instanceof XN?i=i.concat(r.members):i.push(r))}return XN.from(i)},XN.prototype.eq=function(t){if(!(t instanceof XN)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},XN.prototype.locals=function(t){for(var e,i=!0,n=0;n<this.members.length;n++){var r=this.members[n].localsInner(t);if(r.length)if(e){i&&(e=e.slice(),i=!1);for(var o=0;o<r.length;o++)e.push(r[o])}else e=r}return e?ej(i?e:e.sort(tj)):qN},XN.from=function(t){switch(t.length){case 0:return KN;case 1:return t[0];default:return new XN(t)}};var rj,oj,sj=function(t,e){this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(uj),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=cj(this),this.markCursor=null,this.cursorWrapper=null,hj(this),this.nodeViews=pj(this),this.docView=hB(this.state.doc,lj(this),nj(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.lastAndroidDelete=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new dN(t,(function(e,i,n,r){return YB(t,e,i,n,r)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var i=vN[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var i=e.target;i!=t.dom;i=i.parentNode)if(!i||11==i.nodeType||i.pmViewDesc&&i.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||bN(t,e)||!t.editable&&e.type in mN||i(t,e)})};for(var i in vN)e(i);gL.safari&&t.dom.addEventListener("input",(function(){return null})),yN(t)}(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},aj={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};function lj(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",(function(i){if("function"==typeof i&&(i=i(t.state)),i)for(var n in i)"class"==n&&(e.class+=" "+i[n]),"style"==n?e.style=(e.style?e.style+";":"")+i[n]:e[n]||"contenteditable"==n||"nodeName"==n||(e[n]=String(i[n]))})),[WN.node(0,t.state.doc.content.size,e)]}function hj(t){if(t.markCursor){var e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:WN.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function cj(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function pj(t){var e={};return t.someProp("nodeViews",(function(t){for(var i in t)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=t[i])})),e}function uj(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}if(aj.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},sj.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&yN(this),this._props=t,t.plugins&&(t.plugins.forEach(uj),this.directPlugins=t.plugins),this.updateStateInner(t.state,!0)},sj.prototype.setProps=function(t){var e={};for(var i in this._props)e[i]=this._props[i];for(var n in e.state=this.state,t)e[n]=t[n];this.update(e)},sj.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},sj.prototype.updateStateInner=function(t,e){var i=this,n=this.state,r=!1,o=!1;if(t.storedMarks&&this.composing&&(PN(this),o=!0),this.state=t,e){var s=pj(this);(function(t,e){var i=0,n=0;for(var r in t){if(t[r]!=e[r])return!0;i++}for(var o in e)n++;return i!=n})(s,this.nodeViews)&&(this.nodeViews=s,r=!0),yN(this)}this.editable=cj(this),hj(this);var a=nj(this),l=lj(this),h=e?"reset":t.scrollToSelection>n.scrollToSelection?"to selection":"preserve",c=r||!this.docView.matchesNode(t.doc,l,a);!c&&t.selection.eq(n.selection)||(o=!0);var p,u,d,f,v,m,g="preserve"==h&&o&&null==this.dom.style.overflowAnchor&&function(t){for(var e,i,n=t.dom.getBoundingClientRect(),r=Math.max(0,n.top),o=(n.left+n.right)/2,s=r+1;s<Math.min(innerHeight,n.bottom);s+=5){var a=t.root.elementFromPoint(o,s);if(a!=t.dom&&t.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=r-20){e=a,i=l.top;break}}}return{refDOM:e,refTop:i,stack:NL(t.dom)}}(this);if(o){this.domObserver.stop();var y=c&&(gL.ie||gL.chrome)&&!this.composing&&!n.selection.empty&&!t.selection.empty&&(f=n.selection,v=t.selection,m=Math.min(f.$anchor.sharedDepth(f.head),v.$anchor.sharedDepth(v.head)),f.$anchor.start(m)!=v.$anchor.start(m));if(c){var b=gL.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!r&&this.docView.update(t.doc,l,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=hB(t.doc,l,a,this.dom,this)),b&&!this.trackWrites&&(y=!0)}y||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(p=this,u=p.docView.domFromPos(p.state.selection.anchor,0),d=p.root.getSelection(),TL(u.node,u.offset,d.anchorNode,d.anchorOffset)))?TB(this,y):(PB(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(n),"reset"==h)this.dom.scrollTop=0;else if("to selection"==h){var w=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(i)}))||(t.selection instanceof qR?BL(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),w):BL(this,this.coordsAtPos(t.selection.head,1),w))}else g&&function(t){var e=t.refDOM,i=t.refTop,n=t.stack,r=e?e.getBoundingClientRect().top:0;jL(n,0==r?0:r-i)}(g)},sj.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},sj.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var e=0;e<this.pluginViews.length;e++){var i=this.pluginViews[e];i.update&&i.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var n=0;n<this.directPlugins.length;n++){var r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(var o=0;o<this.state.plugins.length;o++){var s=this.state.plugins[o];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}},sj.prototype.someProp=function(t,e){var i,n=this._props&&this._props[t];if(null!=n&&(i=e?e(n):n))return i;for(var r=0;r<this.directPlugins.length;r++){var o=this.directPlugins[r].props[t];if(null!=o&&(i=e?e(o):o))return i}var s=this.state.plugins;if(s)for(var a=0;a<s.length;a++){var l=s[a].props[t];if(null!=l&&(i=e?e(l):l))return i}},sj.prototype.hasFocus=function(){return this.root.activeElement==this.dom},sj.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(FL)return t.focus(FL);var e=NL(t);t.focus(null==FL?{get preventScroll(){return FL={preventScroll:!0},!0}}:void 0),FL||(FL=!1,jL(e,0))}(this.dom),TB(this),this.domObserver.start()},aj.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},sj.prototype.posAtCoords=function(t){return UL(this,t)},sj.prototype.coordsAtPos=function(t,e){return void 0===e&&(e=1),GL(this,t,e)},sj.prototype.domAtPos=function(t,e){return void 0===e&&(e=0),this.docView.domFromPos(t,e)},sj.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},sj.prototype.posAtDOM=function(t,e,i){void 0===i&&(i=-1);var n=this.docView.posFromDOM(t,e,i);if(null==n)throw new RangeError("DOM position not inside the editor");return n},sj.prototype.endOfTextblock=function(t,e){return eB(this,e||this.state,t)},sj.prototype.destroy=function(){this.docView&&(!function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],nj(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},aj.isDestroyed.get=function(){return null==this.docView},sj.prototype.dispatchEvent=function(t){return function(t,e){bN(t,e)||!vN[e.type]||!t.editable&&e.type in mN||vN[e.type](t,e)}(this,t)},sj.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(sj.prototype,aj),"undefined"!=typeof WeakMap){var dj=new WeakMap;rj=function(t){return dj.get(t)},oj=function(t,e){return dj.set(t,e),e}}else{var fj=[],vj=0;rj=function(t){for(var e=0;e<fj.length;e+=2)if(fj[e]==t)return fj[e+1]},oj=function(t,e){return 10==vj&&(vj=0),fj[vj++]=t,fj[vj++]=e}}var mj=function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n},gj=function(t,e,i,n){this.width=t,this.height=e,this.map=i,this.problems=n};function yj(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],i=0;i<t.colspan;i++)e.push(0);return e}function bj(t,e){var i=t.getAttribute("data-colwidth"),n=i&&/^\d+(,\d+)*$/.test(i)?i.split(",").map((function(t){return Number(t)})):null,r=Number(t.getAttribute("colspan")||1),o={colspan:r,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:n&&n.length==r?n:null};for(var s in e){var a=e[s].getFromDOM,l=a&&a(t);null!=l&&(o[s]=l)}return o}function wj(t,e){var i={};for(var n in 1!=t.attrs.colspan&&(i.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(i.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(i["data-colwidth"]=t.attrs.colwidth.join(",")),e){var r=e[n].setDOMAttr;r&&r(t.attrs[n],i)}return i}function xj(t){var e=t.cached.tableNodeTypes;if(!e)for(var i in e=t.cached.tableNodeTypes={},t.nodes){var n=t.nodes[i],r=n.spec.tableRole;r&&(e[r]=n)}return e}gj.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var i=this.map[e];if(i==t){for(var n=e%this.width,r=e/this.width|0,o=n+1,s=r+1,a=1;o<this.width&&this.map[e+a]==i;a++)o++;for(var l=1;s<this.height&&this.map[e+this.width*l]==i;l++)s++;return new mj(n,r,o,s)}}throw new RangeError("No cell with offset "+t+" found")},gj.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},gj.prototype.nextCell=function(t,e,i){var n=this.findCell(t),r=n.left,o=n.right,s=n.top,a=n.bottom;return"horiz"==e?(i<0?0==r:o==this.width)?null:this.map[s*this.width+(i<0?r-1:o)]:(i<0?0==s:a==this.height)?null:this.map[r+this.width*(i<0?s-1:a)]},gj.prototype.rectBetween=function(t,e){var i=this.findCell(t),n=i.left,r=i.right,o=i.top,s=i.bottom,a=this.findCell(e),l=a.left,h=a.right,c=a.top,p=a.bottom;return new mj(Math.min(n,l),Math.min(o,c),Math.max(r,h),Math.max(s,p))},gj.prototype.cellsInRect=function(t){for(var e=[],i={},n=t.top;n<t.bottom;n++)for(var r=t.left;r<t.right;r++){var o=n*this.width+r,s=this.map[o];i[s]||(i[s]=!0,r==t.left&&r&&this.map[o-1]==s||n==t.top&&n&&this.map[o-this.width]==s||e.push(s))}return e},gj.prototype.positionAt=function(t,e,i){for(var n=0,r=0;;n++){var o=r+i.child(n).nodeSize;if(n==t){for(var s=e+t*this.width,a=(t+1)*this.width;s<a&&this.map[s]<r;)s++;return s==a?o-1:this.map[s]}r=o}},gj.get=function(t){return rj(t)||oj(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=function(t){for(var e=-1,i=!1,n=0;n<t.childCount;n++){var r=t.child(n),o=0;if(i)for(var s=0;s<n;s++)for(var a=t.child(s),l=0;l<a.childCount;l++){var h=a.child(l);s+h.attrs.rowspan>n&&(o+=h.attrs.colspan)}for(var c=0;c<r.childCount;c++){var p=r.child(c);o+=p.attrs.colspan,p.attrs.rowspan>1&&(i=!0)}-1==e?e=o:e!=o&&(e=Math.max(e,o))}return e}(t),i=t.childCount,n=[],r=0,o=null,s=[],a=0,l=e*i;a<l;a++)n[a]=0;for(var h=0,c=0;h<i;h++){var p=t.child(h);c++;for(var u=0;;u++){for(;r<n.length&&0!=n[r];)r++;if(u==p.childCount)break;for(var d=p.child(u),f=d.attrs,v=f.colspan,m=f.rowspan,g=f.colwidth,y=0;y<m;y++){if(y+h>=i){(o||(o=[])).push({type:"overlong_rowspan",pos:c,n:m-y});break}for(var b=r+y*e,w=0;w<v;w++){0==n[b+w]?n[b+w]=c:(o||(o=[])).push({type:"collision",row:h,pos:c,n:v-w});var x=g&&g[w];if(x){var _=(b+w)%e*2,k=s[_];null==k||k!=x&&1==s[_+1]?(s[_]=x,s[_+1]=1):k==x&&s[_+1]++}}}r+=v,c+=d.nodeSize}for(var S=(h+1)*e,C=0;r<S;)0==n[r++]&&C++;C&&(o||(o=[])).push({type:"missing",row:h,n:C}),c++}for(var E=new gj(e,i,n,o),T=!1,A=0;!T&&A<s.length;A+=2)null!=s[A]&&s[A+1]<i&&(T=!0);T&&function(t,e,i){t.problems||(t.problems=[]);for(var n=0,r={};n<t.map.length;n++){var o=t.map[n];if(!r[o]){r[o]=!0;for(var s=i.nodeAt(o),a=null,l=0;l<s.attrs.colspan;l++){var h=e[2*((n+l)%t.width)];null==h||s.attrs.colwidth&&s.attrs.colwidth[l]==h||((a||(a=yj(s.attrs)))[l]=h)}a&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}}(E,s,t);return E}(t))};var _j=new hI("selectingCells");function kj(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function Sj(t){for(var e=t.selection.$head,i=e.depth;i>0;i--)if("row"==e.node(i).type.spec.tableRole)return!0;return!1}function Cj(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:kj(e.$head)||function(t){for(var e=t.nodeAfter,i=t.pos;e;e=e.firstChild,i++){var n=e.type.spec.tableRole;if("cell"==n||"header_cell"==n)return t.doc.resolve(i)}for(var r=t.nodeBefore,o=t.pos;r;r=r.lastChild,o--){var s=r.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(o-r.nodeSize)}}(e.$head)}function Ej(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function Tj(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function Aj(t,e,i){var n=t.start(-1),r=gj.get(t.node(-1)).nextCell(t.pos-n,e,i);return null==r?null:t.node(0).resolve(n+r)}function Mj(t,e,i){var n={};for(var r in t)n[r]=t[r];return n[e]=i,n}function Oj(t,e,i){void 0===i&&(i=1);var n=Mj(t,"colspan",t.colspan-i);return n.colwidth&&(n.colwidth=n.colwidth.slice(),n.colwidth.splice(e,i),n.colwidth.some((function(t){return t>0}))||(n.colwidth=null)),n}function Dj(t,e,i){void 0===i&&(i=1);var n=Mj(t,"colspan",t.colspan+i);if(n.colwidth){n.colwidth=n.colwidth.slice();for(var r=0;r<i;r++)n.colwidth.splice(e,0,0)}return n}var Pj=function(t){function e(e,i){void 0===i&&(i=e);var n=e.node(-1),r=gj.get(n),o=e.start(-1),s=r.rectBetween(e.pos-o,i.pos-o),a=e.node(0),l=r.cellsInRect(s).filter((function(t){return t!=i.pos-o}));l.unshift(i.pos-o);var h=l.map((function(t){var e=n.nodeAt(t),i=t+o+1;return new HR(a.resolve(i),a.resolve(i+e.content.size))}));t.call(this,h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,i){var n=t.resolve(i.map(this.$anchorCell.pos)),r=t.resolve(i.map(this.$headCell.pos));if(Ej(n)&&Ej(r)&&Tj(n,r)){var o=this.$anchorCell.node(-1)!=n.node(-1);return o&&this.isRowSelection()?e.rowSelection(n,r):o&&this.isColSelection()?e.colSelection(n,r):new e(n,r)}return WR.between(n,r)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=gj.get(t),i=this.$anchorCell.start(-1),n=e.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i),r={},o=[],s=n.top;s<n.bottom;s++){for(var a=[],l=s*e.width+n.left,h=n.left;h<n.right;h++,l++){var c=e.map[l];if(!r[c]){r[c]=!0;var p=e.findCell(c),u=t.nodeAt(c),d=n.left-p.left,f=p.right-n.right;if(d>0||f>0){var v=u.attrs;d>0&&(v=Oj(v,0,d)),f>0&&(v=Oj(v,v.colspan-f,f)),u=p.left<n.left?u.type.createAndFill(v):u.type.create(v,u.content)}if(p.top<n.top||p.bottom>n.bottom){var m=Mj(u.attrs,"rowspan",Math.min(p.bottom,n.bottom)-Math.max(p.top,n.top));u=p.top<n.top?u.type.createAndFill(m):u.type.create(m,u.content)}a.push(u)}}o.push(t.child(s).copy(HD.from(a)))}var g=this.isColSelection()&&this.isRowSelection()?t:o;return new XD(HD.from(g),1,1)},e.prototype.replace=function(e,i){void 0===i&&(i=XD.empty);for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var s=r[o],a=s.$from,l=s.$to,h=e.mapping.slice(n);e.replace(h.map(a.pos),h.map(l.pos),o?XD.empty:i)}var c=t.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);c&&e.setSelection(c)},e.prototype.replaceWith=function(t,e){this.replace(t,new XD(HD.from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),i=gj.get(e),n=this.$anchorCell.start(-1),r=i.cellsInRect(i.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n)),o=0;o<r.length;o++)t(e.nodeAt(r[o]),n+r[o])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var i=t+this.$anchorCell.nodeAfter.attrs.rowspan,n=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(i,n)==this.$headCell.node(-1).childCount},e.colSelection=function(t,i){void 0===i&&(i=t);var n=gj.get(t.node(-1)),r=t.start(-1),o=n.findCell(t.pos-r),s=n.findCell(i.pos-r),a=t.node(0);return o.top<=s.top?(o.top>0&&(t=a.resolve(r+n.map[o.left])),s.bottom<n.height&&(i=a.resolve(r+n.map[n.width*(n.height-1)+s.right-1]))):(s.top>0&&(i=a.resolve(r+n.map[s.left])),o.bottom<n.height&&(t=a.resolve(r+n.map[n.width*(n.height-1)+o.right-1]))),new e(t,i)},e.prototype.isRowSelection=function(){var t=gj.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),i=t.colCount(this.$anchorCell.pos-e),n=t.colCount(this.$headCell.pos-e);if(Math.min(i,n)>0)return!1;var r=i+this.$anchorCell.nodeAfter.attrs.colspan,o=n+this.$headCell.nodeAfter.attrs.colspan;return Math.max(r,o)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,i){void 0===i&&(i=t);var n=gj.get(t.node(-1)),r=t.start(-1),o=n.findCell(t.pos-r),s=n.findCell(i.pos-r),a=t.node(0);return o.left<=s.left?(o.left>0&&(t=a.resolve(r+n.map[o.top*n.width])),s.right<n.width&&(i=a.resolve(r+n.map[n.width*(s.top+1)-1]))):(s.left>0&&(i=a.resolve(r+n.map[s.top*n.width])),o.right<n.width&&(t=a.resolve(r+n.map[n.width*(o.top+1)-1]))),new e(t,i)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,i){return new e(t.resolve(i.anchor),t.resolve(i.head))},e.create=function(t,i,n){return void 0===n&&(n=i),new e(t.resolve(i),t.resolve(n))},e.prototype.getBookmark=function(){return new Rj(this.$anchorCell.pos,this.$headCell.pos)},e}(FR);Pj.prototype.visible=!1,FR.jsonID("cell",Pj);var Rj=function(t,e){this.anchor=t,this.head=e};function Ij(t){if(!(t.selection instanceof Pj))return null;var e=[];return t.selection.forEachCell((function(t,i){e.push(WN.node(i,i+t.nodeSize,{class:"selectedCell"}))})),GN.create(t.doc,e)}function zj(t){if(!t.size)return null;for(var e=t.content,i=t.openStart,n=t.openEnd;1==e.childCount&&(i>0&&n>0||"table"==e.firstChild.type.spec.tableRole);)i--,n--,e=e.firstChild.content;var r=e.firstChild,o=r.type.spec.tableRole,s=r.type.schema,a=[];if("row"==o)for(var l=0;l<e.childCount;l++){var h=e.child(l).content,c=l?0:Math.max(0,i-1),p=l<e.childCount-1?0:Math.max(0,n-1);(c||p)&&(h=Lj(xj(s).row,new XD(h,c,p)).content),a.push(h)}else{if("cell"!=o&&"header_cell"!=o)return null;a.push(i||n?Lj(xj(s).row,new XD(e,i,n)).content:e)}return function(t,e){for(var i=[],n=0;n<e.length;n++)for(var r=e[n],o=r.childCount-1;o>=0;o--)for(var s=r.child(o).attrs,a=s.rowspan,l=s.colspan,h=n;h<n+a;h++)i[h]=(i[h]||0)+l;for(var c=0,p=0;p<i.length;p++)c=Math.max(c,i[p]);for(var u=0;u<i.length;u++)if(u>=e.length&&e.push(HD.empty),i[u]<c){for(var d=xj(t).cell.createAndFill(),f=[],v=i[u];v<c;v++)f.push(d);e[u]=e[u].append(HD.from(f))}return{height:e.length,width:c,rows:e}}(s,a)}function Lj(t,e){var i=t.createAndFill();return new lR(i).replace(0,i.content.size,e).doc}function Bj(t,e,i,n,r,o,s,a){if(0==s||s==e.height)return!1;for(var l=!1,h=r;h<o;h++){var c=s*e.width+h,p=e.map[c];if(e.map[c-e.width]==p){l=!0;var u=i.nodeAt(p),d=e.findCell(p),f=d.top,v=d.left;t.setNodeMarkup(t.mapping.slice(a).map(p+n),null,Mj(u.attrs,"rowspan",s-f)),t.insert(t.mapping.slice(a).map(e.positionAt(s,v,i)),u.type.createAndFill(Mj(u.attrs,"rowspan",f+u.attrs.rowspan-s))),h+=u.attrs.colspan-1}}return l}function Nj(t,e,i,n,r,o,s,a){if(0==s||s==e.width)return!1;for(var l=!1,h=r;h<o;h++){var c=h*e.width+s,p=e.map[c];if(e.map[c-1]==p){l=!0;var u=i.nodeAt(p),d=e.colCount(p),f=t.mapping.slice(a).map(p+n);t.setNodeMarkup(f,null,Oj(u.attrs,s-d,u.attrs.colspan-(s-d))),t.insert(f+u.nodeSize,u.type.createAndFill(Oj(u.attrs,0,s-d))),h+=u.attrs.rowspan-1}}return l}function jj(t,e,i,n,r){var o=i?t.doc.nodeAt(i-1):t.doc,s=gj.get(o),a=n.top,l=n.left,h=l+r.width,c=a+r.height,p=t.tr,u=0;function d(){o=i?p.doc.nodeAt(i-1):p.doc,s=gj.get(o),u=p.mapping.maps.length}(function(t,e,i,n,r,o,s){var a,l,h=xj(t.doc.type.schema);if(r>e.width)for(var c=0,p=0;c<e.height;c++){var u=i.child(c);p+=u.nodeSize;var d=[],f=void 0;f=null==u.lastChild||u.lastChild.type==h.cell?a||(a=h.cell.createAndFill()):l||(l=h.header_cell.createAndFill());for(var v=e.width;v<r;v++)d.push(f);t.insert(t.mapping.slice(s).map(p-1+n),d)}if(o>e.height){for(var m=[],g=0,y=(e.height-1)*e.width;g<Math.max(e.width,r);g++){var b=!(g>=e.width)&&i.nodeAt(e.map[y+g]).type==h.header_cell;m.push(b?l||(l=h.header_cell.createAndFill()):a||(a=h.cell.createAndFill()))}for(var w=h.row.create(null,HD.from(m)),x=[],_=e.height;_<o;_++)x.push(w);t.insert(t.mapping.slice(s).map(n+i.nodeSize-2),x)}return!(!a&&!l)})(p,s,o,i,h,c,u)&&d(),Bj(p,s,o,i,l,h,a,u)&&d(),Bj(p,s,o,i,l,h,c,u)&&d(),Nj(p,s,o,i,a,c,l,u)&&d(),Nj(p,s,o,i,a,c,h,u)&&d();for(var f=a;f<c;f++){var v=s.positionAt(f,l,o),m=s.positionAt(f,h,o);p.replace(p.mapping.slice(u).map(v+i),p.mapping.slice(u).map(m+i),new XD(r.rows[f-a],0,0))}d(),p.setSelection(new Pj(p.doc.resolve(i+s.positionAt(a,l,o)),p.doc.resolve(i+s.positionAt(c-1,h-1,o)))),e(p)}Rj.prototype.map=function(t){return new Rj(t.map(this.anchor),t.map(this.head))},Rj.prototype.resolve=function(t){var e=t.resolve(this.anchor),i=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==i.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&i.index()<i.parent.childCount&&Tj(e,i)?new Pj(e,i):FR.near(i,1)};var Fj=mL({ArrowLeft:Hj("horiz",-1),ArrowRight:Hj("horiz",1),ArrowUp:Hj("vert",-1),ArrowDown:Hj("vert",1),"Shift-ArrowLeft":Wj("horiz",-1),"Shift-ArrowRight":Wj("horiz",1),"Shift-ArrowUp":Wj("vert",-1),"Shift-ArrowDown":Wj("vert",1),Backspace:Uj,"Mod-Backspace":Uj,Delete:Uj,"Mod-Delete":Uj});function Vj(t,e,i){return!i.eq(t.selection)&&(e&&e(t.tr.setSelection(i).scrollIntoView()),!0)}function Hj(t,e){return function(i,n,r){var o=i.selection;if(o instanceof Pj)return Vj(i,n,FR.near(o.$headCell,e));if("horiz"!=t&&!o.empty)return!1;var s=Kj(r,t,e);if(null==s)return!1;if("horiz"==t)return Vj(i,n,FR.near(i.doc.resolve(o.head+e),e));var a,l=i.doc.resolve(s),h=Aj(l,t,e);return a=h?FR.near(h,1):e<0?FR.near(i.doc.resolve(l.before(-1)),-1):FR.near(i.doc.resolve(l.after(-1)),1),Vj(i,n,a)}}function Wj(t,e){return function(i,n,r){var o=i.selection;if(!(o instanceof Pj)){var s=Kj(r,t,e);if(null==s)return!1;o=new Pj(i.doc.resolve(s))}var a=Aj(o.$headCell,t,e);return!!a&&Vj(i,n,new Pj(o.$anchorCell,a))}}function Uj(t,e){var i=t.selection;if(!(i instanceof Pj))return!1;if(e){var n=t.tr,r=xj(t.schema).cell.createAndFill().content;i.forEachCell((function(t,e){t.content.eq(r)||n.replace(n.mapping.map(e+1),n.mapping.map(e+t.nodeSize-1),new XD(r,0,0))})),n.docChanged&&e(n)}return!0}function qj(t,e){var i=kj(t.state.doc.resolve(e));return!!i&&(t.dispatch(t.state.tr.setSelection(new Pj(i))),!0)}function $j(t,e,i){if(!Sj(t.state))return!1;var n=zj(i),r=t.state.selection;if(r instanceof Pj){n||(n={width:1,height:1,rows:[HD.from(Lj(xj(t.state.schema).cell,i))]});var o=r.$anchorCell.node(-1),s=r.$anchorCell.start(-1),a=gj.get(o).rectBetween(r.$anchorCell.pos-s,r.$headCell.pos-s);return n=function(t,e,i){var n=t.width,r=t.height,o=t.rows;if(n!=e){for(var s=[],a=[],l=0;l<o.length;l++){for(var h=o[l],c=[],p=s[l]||0,u=0;p<e;u++){var d=h.child(u%h.childCount);p+d.attrs.colspan>e&&(d=d.type.create(Oj(d.attrs,d.attrs.colspan,p+d.attrs.colspan-e),d.content)),c.push(d),p+=d.attrs.colspan;for(var f=1;f<d.attrs.rowspan;f++)s[l+f]=(s[l+f]||0)+d.attrs.colspan}a.push(HD.from(c))}o=a,n=e}if(r!=i){for(var v=[],m=0,g=0;m<i;m++,g++){for(var y=[],b=o[g%r],w=0;w<b.childCount;w++){var x=b.child(w);m+x.attrs.rowspan>i&&(x=x.type.create(Mj(x.attrs,"rowspan",Math.max(1,i-x.attrs.rowspan)),x.content)),y.push(x)}v.push(HD.from(y))}o=v,r=i}return{width:n,height:r,rows:o}}(n,a.right-a.left,a.bottom-a.top),jj(t.state,t.dispatch,s,a,n),!0}if(n){var l=Cj(t.state),h=l.start(-1);return jj(t.state,t.dispatch,h,gj.get(l.node(-1)).findCell(l.pos-h),n),!0}return!1}function Gj(t,e){if(!e.ctrlKey&&!e.metaKey){var i,n=Xj(t,e.target);if(e.shiftKey&&t.state.selection instanceof Pj)r(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&n&&null!=(i=kj(t.state.selection.$anchor))&&Yj(t,e).pos!=i.pos)r(i,e),e.preventDefault();else if(!n)return;t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",s)}function r(e,i){var n=Yj(t,i),r=null==_j.getState(t.state);if(!n||!Tj(e,n)){if(!r)return;n=e}var o=new Pj(e,n);if(r||!t.state.selection.eq(o)){var s=t.state.tr.setSelection(o);r&&s.setMeta(_j,e.pos),t.dispatch(s)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",s),null!=_j.getState(t.state)&&t.dispatch(t.state.tr.setMeta(_j,-1))}function s(i){var s,a=_j.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(Xj(t,i.target)!=n&&!(s=Yj(t,e)))return o();s&&r(s,i)}}function Kj(t,e,i){if(!(t.state.selection instanceof WR))return null;for(var n=t.state.selection.$head,r=n.depth-1;r>=0;r--){var o=n.node(r);if((i<0?n.index(r):n.indexAfter(r))!=(i<0?0:o.childCount))return null;if("cell"==o.type.spec.tableRole||"header_cell"==o.type.spec.tableRole){var s=n.before(r),a="vert"==e?i>0?"down":"up":i>0?"right":"left";return t.endOfTextblock(a)?s:null}}return null}function Xj(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function Yj(t,e){var i=t.posAtCoords({left:e.clientX,top:e.clientY});return i&&i?kj(t.state.doc.resolve(i.pos)):null}var Zj=new hI("fix-tables");function Jj(t,e,i,n){var r=t.childCount,o=e.childCount;t:for(var s=0,a=0;s<o;s++){for(var l=e.child(s),h=a,c=Math.min(r,s+3);h<c;h++)if(t.child(h)==l){a=h+1,i+=l.nodeSize;continue t}n(l,i),a<r&&t.child(a).sameMarkup(l)?Jj(t.child(a),l,i+1,n):l.nodesBetween(0,l.content.size,n,i+1),i+=l.nodeSize}}function Qj(t,e){var i,n=function(e,n){"table"==e.type.spec.tableRole&&(i=function(t,e,i,n){var r=gj.get(e);if(!r.problems)return n;n||(n=t.tr);for(var o,s,a=[],l=0;l<r.height;l++)a.push(0);for(var h=0;h<r.problems.length;h++){var c=r.problems[h];if("collision"==c.type){for(var p=e.nodeAt(c.pos),u=0;u<p.attrs.rowspan;u++)a[c.row+u]+=c.n;n.setNodeMarkup(n.mapping.map(i+1+c.pos),null,Oj(p.attrs,p.attrs.colspan-c.n,c.n))}else if("missing"==c.type)a[c.row]+=c.n;else if("overlong_rowspan"==c.type){var d=e.nodeAt(c.pos);n.setNodeMarkup(n.mapping.map(i+1+c.pos),null,Mj(d.attrs,"rowspan",d.attrs.rowspan-c.n))}else if("colwidth mismatch"==c.type){var f=e.nodeAt(c.pos);n.setNodeMarkup(n.mapping.map(i+1+c.pos),null,Mj(f.attrs,"colwidth",c.colwidth))}}for(var v=0;v<a.length;v++)a[v]&&(null==o&&(o=v),s=v);for(var m=0,g=i+1;m<r.height;m++){var y=e.child(m),b=g+y.nodeSize,w=a[m];if(w>0){var x="cell";y.firstChild&&(x=y.firstChild.type.spec.tableRole);for(var _=[],k=0;k<w;k++)_.push(xj(t.schema)[x].createAndFill());var S=0!=m&&o!=m-1||s!=m?b-1:g+1;n.insert(n.mapping.map(S),_)}g=b}return n.setMeta(Zj,{fixTables:!0})}(t,e,n,i))};return e?e.doc!=t.doc&&Jj(e.doc,t.doc,0,n):t.doc.descendants(n),i}function tF(t){var e,i=t.selection,n=Cj(t),r=n.node(-1),o=n.start(-1),s=gj.get(r);return(e=i instanceof Pj?s.rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o):s.findCell(n.pos-o)).tableStart=o,e.map=s,e.table=r,e}function eF(t,e,i){var n=e.map,r=e.tableStart,o=e.table,s=i>0?-1:0;(function(t,e,i){for(var n=xj(e.type.schema).header_cell,r=0;r<t.height;r++)if(e.nodeAt(t.map[i+r*t.width]).type!=n)return!1;return!0})(n,o,i+s)&&(s=0==i||i==n.width?null:0);for(var a=0;a<n.height;a++){var l=a*n.width+i;if(i>0&&i<n.width&&n.map[l-1]==n.map[l]){var h=n.map[l],c=o.nodeAt(h);t.setNodeMarkup(t.mapping.map(r+h),null,Dj(c.attrs,i-n.colCount(h))),a+=c.attrs.rowspan-1}else{var p=null==s?xj(o.type.schema).cell:o.nodeAt(n.map[l+s]).type,u=n.positionAt(a,i,o);t.insert(t.mapping.map(r+u),p.createAndFill())}}return t}function iF(t,e){if(!Sj(t))return!1;if(e){var i=tF(t);e(eF(t.tr,i,i.left))}return!0}function nF(t,e){if(!Sj(t))return!1;if(e){var i=tF(t);e(eF(t.tr,i,i.right))}return!0}function rF(t,e,i){for(var n=e.map,r=e.table,o=e.tableStart,s=t.mapping.maps.length,a=0;a<n.height;){var l=a*n.width+i,h=n.map[l],c=r.nodeAt(h);if(i>0&&n.map[l-1]==h||i<n.width-1&&n.map[l+1]==h)t.setNodeMarkup(t.mapping.slice(s).map(o+h),null,Oj(c.attrs,i-n.colCount(h)));else{var p=t.mapping.slice(s).map(o+h);t.delete(p,p+c.nodeSize)}a+=c.attrs.rowspan}}function oF(t,e){if(!Sj(t))return!1;if(e){var i=tF(t),n=t.tr;if(0==i.left&&i.right==i.map.width)return!1;for(var r=i.right-1;rF(n,i,r),r!=i.left;r--)i.table=i.tableStart?n.doc.nodeAt(i.tableStart-1):n.doc,i.map=gj.get(i.table);e(n)}return!0}function sF(t,e,i){for(var n=e.map,r=e.tableStart,o=e.table,s=r,a=0;a<i;a++)s+=o.child(a).nodeSize;var l=[],h=i>0?-1:0;(function(t,e,i){for(var n=xj(e.type.schema).header_cell,r=0;r<t.width;r++)if(e.nodeAt(t.map[r+i*t.width]).type!=n)return!1;return!0})(n,o,i+h)&&(h=0==i||i==n.height?null:0);for(var c=0,p=n.width*i;c<n.width;c++,p++)if(i>0&&i<n.height&&n.map[p]==n.map[p-n.width]){var u=n.map[p],d=o.nodeAt(u).attrs;t.setNodeMarkup(r+u,null,Mj(d,"rowspan",d.rowspan+1)),c+=d.colspan-1}else{var f=null==h?xj(o.type.schema).cell:o.nodeAt(n.map[p+h*n.width]).type;l.push(f.createAndFill())}return t.insert(s,xj(o.type.schema).row.create(null,l)),t}function aF(t,e,i){for(var n=e.map,r=e.table,o=e.tableStart,s=0,a=0;a<i;a++)s+=r.child(a).nodeSize;var l=s+r.child(i).nodeSize,h=t.mapping.maps.length;t.delete(s+o,l+o);for(var c=0,p=i*n.width;c<n.width;c++,p++){var u=n.map[p];if(i>0&&u==n.map[p-n.width]){var d=r.nodeAt(u).attrs;t.setNodeMarkup(t.mapping.slice(h).map(u+o),null,Mj(d,"rowspan",d.rowspan-1)),c+=d.colspan-1}else if(i<n.width&&u==n.map[p+n.width]){var f=r.nodeAt(u),v=f.type.create(Mj(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),m=n.positionAt(i+1,c,r);t.insert(t.mapping.slice(h).map(o+m),v),c+=f.attrs.colspan-1}}}function lF(t,e){if(!Sj(t))return!1;if(e){var i=tF(t),n=t.tr;if(0==i.top&&i.bottom==i.map.height)return!1;for(var r=i.bottom-1;aF(n,i,r),r!=i.top;r--)i.table=i.tableStart?n.doc.nodeAt(i.tableStart-1):n.doc,i.map=gj.get(i.table);e(n)}return!0}function hF(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function cF(t,e){var i=t.selection;if(!(i instanceof Pj)||i.$anchorCell.pos==i.$headCell.pos)return!1;var n=tF(t),r=n.map;if(function(t,e){for(var i=t.width,n=t.height,r=t.map,o=e.top*i+e.left,s=o,a=(e.bottom-1)*i+e.left,l=o+(e.right-e.left-1),h=e.top;h<e.bottom;h++){if(e.left>0&&r[s]==r[s-1]||e.right<i&&r[l]==r[l+1])return!0;s+=i,l+=i}for(var c=e.left;c<e.right;c++){if(e.top>0&&r[o]==r[o-i]||e.bottom<n&&r[a]==r[a+i])return!0;o++,a++}return!1}(r,n))return!1;if(e){for(var o,s,a=t.tr,l={},h=HD.empty,c=n.top;c<n.bottom;c++)for(var p=n.left;p<n.right;p++){var u=r.map[c*r.width+p],d=n.table.nodeAt(u);if(!l[u])if(l[u]=!0,null==o)o=u,s=d;else{hF(d)||(h=h.append(d.content));var f=a.mapping.map(u+n.tableStart);a.delete(f,f+d.nodeSize)}}if(a.setNodeMarkup(o+n.tableStart,null,Mj(Dj(s.attrs,s.attrs.colspan,n.right-n.left-s.attrs.colspan),"rowspan",n.bottom-n.top)),h.size){var v=o+1+s.content.size,m=hF(s)?o+1:v;a.replaceWith(m+n.tableStart,v+n.tableStart,h)}a.setSelection(new Pj(a.doc.resolve(o+n.tableStart))),e(a)}return!0}function pF(t,e){var i,n=xj(t.schema);return(i=function(t){var e=t.node;return n[e.type.spec.tableRole]},function(t,e){var n,r,o=t.selection;if(o instanceof Pj){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;n=o.$anchorCell.nodeAfter,r=o.$anchorCell.pos}else{if(!(n=function(t){for(var e=t.depth;e>0;e--){var i=t.node(e).type.spec.tableRole;if("cell"===i||"header_cell"===i)return t.node(e)}return null}(o.$from)))return!1;r=kj(o.$from).pos}if(1==n.attrs.colspan&&1==n.attrs.rowspan)return!1;if(e){var s=n.attrs,a=[],l=s.colwidth;s.rowspan>1&&(s=Mj(s,"rowspan",1)),s.colspan>1&&(s=Mj(s,"colspan",1));for(var h,c=tF(t),p=t.tr,u=0;u<c.right-c.left;u++)a.push(l?Mj(s,"colwidth",l&&l[u]?[l[u]]:null):s);for(var d=c.top;d<c.bottom;d++){var f=c.map.positionAt(d,c.left,c.table);d==c.top&&(f+=n.nodeSize);for(var v=c.left,m=0;v<c.right;v++,m++)v==c.left&&d==c.top||p.insert(h=p.mapping.map(f+c.tableStart,1),i({node:n,row:d,col:v}).createAndFill(a[m]))}p.setNodeMarkup(r,i({node:n,row:c.top,col:c.left}),a[0]),o instanceof Pj&&p.setSelection(new Pj(p.doc.resolve(o.$anchorCell.pos),h&&p.doc.resolve(h))),e(p)}return!0})(t,e)}function uF(t,e,i){for(var n=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),r=0;r<n.length;r++){var o=e.table.nodeAt(n[r]);if(o&&o.type!==i.header_cell)return!1}return!0}function dF(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,i){if(!Sj(e))return!1;if(i){for(var n=xj(e.schema),r=tF(e),o=e.tr,s=r.map.cellsInRect("column"==t?new mj(r.left,0,r.right,r.map.height):"row"==t?new mj(0,r.top,r.map.width,r.bottom):r),a=s.map((function(t){return r.table.nodeAt(t)})),l=0;l<s.length;l++)a[l].type==n.header_cell&&o.setNodeMarkup(r.tableStart+s[l],n.cell,a[l].attrs);if(0==o.steps.length)for(var h=0;h<s.length;h++)o.setNodeMarkup(r.tableStart+s[h],n.header_cell,a[h].attrs);i(o)}return!0}}(t):function(e,i){if(!Sj(e))return!1;if(i){var n=xj(e.schema),r=tF(e),o=e.tr,s=uF("row",r,n),a=uF("column",r,n),l=("column"===t?s:"row"===t&&a)?1:0,h="column"==t?new mj(0,l,1,r.map.height):"row"==t?new mj(l,0,r.map.width,1):r,c="column"==t?a?n.cell:n.header_cell:"row"==t?s?n.cell:n.header_cell:n.cell;r.map.cellsInRect(h).forEach((function(t){var e=t+r.tableStart,i=o.doc.nodeAt(e);i&&o.setNodeMarkup(e,c,i.attrs)})),i(o)}return!0}}dF("row",{useDeprecatedLogic:!0}),dF("column",{useDeprecatedLogic:!0}),dF("cell",{useDeprecatedLogic:!0});function fF(t,e){for(var i=t.selection.$anchor,n=i.depth;n>0;n--){if("table"==i.node(n).type.spec.tableRole)return e&&e(t.tr.delete(i.before(n),i.after(n)).scrollIntoView()),!0}return!1}var vF=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),mF(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function mF(t,e,i,n,r,o){for(var s=0,a=!0,l=e.firstChild,h=t.firstChild,c=0,p=0;c<h.childCount;c++)for(var u=h.child(c).attrs,d=u.colspan,f=u.colwidth,v=0;v<d;v++,p++){var m=r==p?o:f&&f[v],g=m?m+"px":"";s+=m||n,m||(a=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):e.appendChild(document.createElement("col")).style.width=g}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}a?(i.style.width=s+"px",i.style.minWidth=""):(i.style.width="",i.style.minWidth=s+"px")}vF.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,mF(t,this.colgroup,this.table,this.cellMinWidth),!0)},vF.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var gF=new hI("tableColumnResizing");var yF=function(t,e){this.activeHandle=t,this.dragging=e};function bF(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new sI({key:_j,state:{init:function(){return null},apply:function(t,e){var i=t.getMeta(_j);if(null!=i)return-1==i?null:i;if(null==e||!t.docChanged)return e;var n=t.mapping.mapResult(e),r=n.deleted,o=n.pos;return r?null:o}},props:{decorations:Ij,handleDOMEvents:{mousedown:Gj},createSelectionBetween:function(t){if(null!=_j.getState(t.state))return t.state.selection},handleTripleClick:qj,handleKeyDown:Fj,handlePaste:$j},appendTransaction:function(t,i,n){return function(t,e,i){var n,r,o=(e||t).selection,s=(e||t).doc;if(o instanceof qR&&(r=o.node.type.spec.tableRole)){if("cell"==r||"header_cell"==r)n=Pj.create(s,o.from);else if("row"==r){var a=s.resolve(o.from+1);n=Pj.rowSelection(a,a)}else if(!i){var l=gj.get(o.node),h=o.from+1,c=h+l.map[l.width*l.height-1];n=Pj.create(s,h+1,c)}}else o instanceof WR&&function(t){var e=t.$from,i=t.$to;if(e.pos==i.pos||e.pos<e.pos-6)return!1;for(var n=e.pos,r=i.pos,o=e.depth;o>=0&&!(e.after(o+1)<e.end(o));o--,n++);for(var s=i.depth;s>=0&&!(i.before(s+1)>i.start(s));s--,r--);return n==r&&/row|table/.test(e.node(o).type.spec.tableRole)}(o)?n=WR.create(s,o.from):o instanceof WR&&function(t){for(var e,i,n=t.$from,r=t.$to,o=n.depth;o>0;o--){var s=n.node(o);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=r.depth;a>0;a--){var l=r.node(a);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){i=l;break}}return e!==i&&0===r.parentOffset}(o)&&(n=WR.create(s,o.$from.start(),o.$from.end()));return n&&(e||(e=t.tr)).setSelection(n),e}(n,Qj(n,i),e)}})}yF.prototype.apply=function(t){var e=this,i=t.getMeta(gF);if(i&&null!=i.setHandle)return new yF(i.setHandle,null);if(i&&void 0!==i.setDragging)return new yF(e.activeHandle,i.setDragging);if(e.activeHandle>-1&&t.docChanged){var n=t.mapping.map(e.activeHandle,-1);Ej(t.doc.resolve(n))||(n=null),e=new yF(n,e.dragging)}return e};var wF=["blockquote",0],xF=["hr"],_F=["pre",["code",0]],kF=["ol",0],SF=["ul",0],CF=["li",0],EF=function(t){for(var e,i={},n=t.attributes,r=0;r<n.length;r++)i[(e=n[r]).name]=e.value;return i},TF=function(t){var e={};return t.forEach((function(t){e[t]={default:null}})),e},AF=function(){return TF(["style","class","id"])},MF=function(t,e){for(var i in t)if(i&&null!==t[i]&&i!==e)return!0;return!1},OF=function(t,e){void 0===e&&(e=[]);var i={},n=function(n){n&&null!==t[n]&&!e.find((function(t){return t===n}))&&(i[n]=t[n])};for(var r in t)n(r);return i},DF=function(t){var e;return(e={})[t]={name:t,inclusive:!0,parseDOM:[{tag:t}],toDOM:function(){return[t,0]}},e},PF=kI({link:{attrs:kI({},AF(),{href:{default:null},target:{default:null},title:{default:null}}),inclusive:!1,parseDOM:[{tag:"a",getAttrs:EF}],toDOM:function(t){return["a",OF(t.attrs),0]}}},DF("strong"),DF("b"),DF("em"),DF("i"),DF("u"),DF("del"),DF("sub"),DF("sup"),DF("code"),{style:{attrs:kI({},AF()),parseDOM:[{tag:"span",getAttrs:EF}],toDOM:function(t){return MF(t.attrs)?["span",OF(t.attrs),0]:["span",0]}}}),RF=function(t){var e;return(e={})[t]={default:null,getFromDOM:function(e){return e.getAttribute(t)},setDOMAttr:function(e,i){i[t]=e}},e},IF=kI({},RF("style"),RF("class"),RF("id"),RF("headers")),zF={doc:{content:"colgroup*"},col:{attrs:TF(["id","class","style","span"]),parseDOM:[{getAttrs:EF,tag:"col"}],toDOM:function(t){return["col",t.attrs]}},colgroup:{attrs:TF(["id","class","style","span"]),content:"col*",parseDOM:[{getAttrs:EF,tag:"colgroup"}],toDOM:function(t){return["colgroup",t.attrs,0]}},text:{inline:!0,group:"inline"}},LF=new jP({nodes:zF,marks:{}}),BF=function(t){var e=wI(yI(t),LF,{preserveWhitespace:!1});return bI(e).firstChild},NF=function(t){var e=t.cellAttributes||{},i={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var n in e)i[n]={default:e[n].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:i,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return bj(t,e)}}],toDOM:function(t){return["td",wj(t,e),0]}},table_header:{content:t.cellContent,attrs:i,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return bj(t,e)}}],toDOM:function(t){return["th",wj(t,e),0]}}}}({tableGroup:"block",cellContent:"block+",cellAttributes:IF});NF.table_row.attrs=kI({},NF.table_row.attrs,TF([cI,"style","class","id"])),NF.table_row.toDOM=function(t){return["tr",OF(t.attrs),0]},NF.table_row.parseDOM=[{tag:"tr",getAttrs:EF}],NF.table.attrs=kI({},NF.table.attrs,TF(["style","class","id",pI,uI])),NF.table.toDOM=function(t){var e=MF(t.attrs)?OF(t.attrs,[pI,uI]):{},i=null;if(t.attrs[pI]&&!function(t){for(var e=!1,i=t.child(0),n=0;n<i.childCount;n++)if(i.child(n).attrs.colwidth){e=!0;break}return e}(t)){var n=BF(t.attrs[pI]);if(n){var r=Array.from(n.children).map((function(t){return["col",EF(t)]}));i=["colgroup",EF(n)].concat(r)}}return i?["table",e,i,["tbody",0]]:["table",e,["tbody",0]]},NF.table.parseDOM=[{tag:"table",getAttrs:function(t){var e=EF(t),i=Array.from(t.childNodes).find((function(t){return"COLGROUP"===t.nodeName}));return i&&(e[pI]=i.outerHTML),e}}];var jF=kI({doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:kI({},AF()),parseDOM:[{tag:"p",getAttrs:EF}],toDOM:function(t){return MF(t.attrs)?["p",OF(t.attrs),0]:["p",0]}},div:{content:"block*",group:"block",attrs:kI({},AF()),parseDOM:[{tag:"div",getAttrs:EF}],toDOM:function(t){return MF(t.attrs)?["div",OF(t.attrs),0]:["div",0]}},blockquote:{attrs:kI({},AF()),content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:EF}],toDOM:function(t){return MF(t.attrs)?["blockquote",OF(t.attrs),0]:wF}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return xF}},heading:{attrs:kI({},AF(),{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:function(t){return kI({},EF(t),{level:1})}},{tag:"h2",getAttrs:function(t){return kI({},EF(t),{level:2})}},{tag:"h3",getAttrs:function(t){return kI({},EF(t),{level:3})}},{tag:"h4",getAttrs:function(t){return kI({},EF(t),{level:4})}},{tag:"h5",getAttrs:function(t){return kI({},EF(t),{level:5})}},{tag:"h6",getAttrs:function(t){return kI({},EF(t),{level:6})}}],toDOM:function(t){return MF(t.attrs,"level")?["h"+t.attrs.level,OF(t.attrs,["level"]),0]:["h"+t.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return _F}},text:{inline:!0,group:"inline"},image:{inline:!0,attrs:kI({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},AF()),group:"inline",draggable:!0,parseDOM:[{tag:"img",getAttrs:EF}],toDOM:function(t){return MF(t.attrs)?["img",OF(t.attrs)]:["img"]}},hard_break:{inline:!0,attrs:kI({},AF()),group:"inline",selectable:!1,parseDOM:[{tag:"br",getAttrs:EF}],toDOM:function(t){return MF(t.attrs)?["br",OF(t.attrs)]:["br"]}},ordered_list:{content:"list_item+",group:"block",attrs:kI({},AF(),{type:{default:null},order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:function(t){return kI({},EF(t),{order:t.hasAttribute("start")?parseInt(t.getAttribute("start")||"1",10):1})}}],toDOM:function(t){return 1===t.attrs.order?MF(t.attrs,"order")?["ol",OF(t.attrs,["order"]),0]:kF:["ol",kI({},OF(t.attrs,["order"]),{start:t.attrs.order}),0]}},bullet_list:{content:"list_item+",group:"block",attrs:kI({},AF()),parseDOM:[{tag:"ul",getAttrs:EF}],toDOM:function(t){return MF(t.attrs)?["ul",OF(t.attrs),0]:SF}},list_item:{content:"(paragraph | heading) block*",attrs:kI({},AF()),parseDOM:[{tag:"li",getAttrs:EF}],toDOM:function(t){return MF(t.attrs)?["li",OF(t.attrs),0]:CF},defining:!0}},NF),FF=200,VF=function(){};VF.prototype.append=function(t){return t.length?(t=VF.from(t),!this.length&&t||t.length<FF&&this.leafAppend(t)||this.length<FF&&t.leafPrepend(this)||this.appendInner(t)):this},VF.prototype.prepend=function(t){return t.length?VF.from(t).append(this):this},VF.prototype.appendInner=function(t){return new WF(this,t)},VF.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?VF.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},VF.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},VF.prototype.forEach=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length),e<=i?this.forEachInner(t,e,i,0):this.forEachInvertedInner(t,e,i,0)},VF.prototype.map=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length);var n=[];return this.forEach((function(e,i){return n.push(t(e,i))}),e,i),n},VF.from=function(t){return t instanceof VF?t:t&&t.length?new HF(t):VF.empty};var HF=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,i){return 0==t&&i==this.length?this:new e(this.values.slice(t,i))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,i,n){for(var r=e;r<i;r++)if(!1===t(this.values[r],n+r))return!1},e.prototype.forEachInvertedInner=function(t,e,i,n){for(var r=e-1;r>=i;r--)if(!1===t(this.values[r],n+r))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=FF)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=FF)return new e(t.flatten().concat(this.values))},i.length.get=function(){return this.values.length},i.depth.get=function(){return 0},Object.defineProperties(e.prototype,i),e}(VF);VF.empty=new HF([]);var WF=function(t){function e(e,i){t.call(this),this.left=e,this.right=i,this.length=e.length+i.length,this.depth=Math.max(e.depth,i.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,i,n){var r=this.left.length;return!(e<r&&!1===this.left.forEachInner(t,e,Math.min(i,r),n))&&(!(i>r&&!1===this.right.forEachInner(t,Math.max(e-r,0),Math.min(this.length,i)-r,n+r))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,i,n){var r=this.left.length;return!(e>r&&!1===this.right.forEachInvertedInner(t,e-r,Math.max(i,r)-r,n+r))&&(!(i<r&&!1===this.left.forEachInvertedInner(t,Math.min(e,r),i,n))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var i=this.left.length;return e<=i?this.left.slice(t,e):t>=i?this.right.slice(t-i,e-i):this.left.slice(t,i).append(this.right.slice(0,e-i))},e.prototype.leafAppend=function(t){var i=this.right.leafAppend(t);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(t){var i=this.left.leafPrepend(t);if(i)return new e(i,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(VF);const UF=VF;var qF=function(t,e){this.items=t,this.eventCount=e};qF.prototype.popEvent=function(t,e){var i=this;if(0==this.eventCount)return null;for(var n,r,o=this.items.length;;o--){if(this.items.get(o-1).selection){--o;break}}e&&(n=this.remapping(o,this.items.length),r=n.maps.length);var s,a,l=t.tr,h=[],c=[];return this.items.forEach((function(t,e){if(!t.step)return n||(n=i.remapping(o,e+1),r=n.maps.length),r--,void c.push(t);if(n){c.push(new $F(t.map));var p,u=t.step.map(n.slice(r));u&&l.maybeStep(u).doc&&(p=l.mapping.maps[l.mapping.maps.length-1],h.push(new $F(p,null,null,h.length+c.length))),r--,p&&n.appendMap(p,r)}else l.maybeStep(t.step);return t.selection?(s=n?t.selection.map(n.slice(r)):t.selection,a=new qF(i.items.slice(0,o).append(c.reverse().concat(h)),i.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:l,selection:s}},qF.prototype.addTransform=function(t,e,i,n){for(var r=[],o=this.eventCount,s=this.items,a=!n&&s.length?s.get(s.length-1):null,l=0;l<t.steps.length;l++){var h,c=t.steps[l].invert(t.docs[l]),p=new $F(t.mapping.maps[l],c,e);(h=a&&a.merge(p))&&(p=h,l?r.pop():s=s.slice(0,s.length-1)),r.push(p),e&&(o++,e=null),n||(a=p)}var u,d,f,v=o-i.depth;return v>KF&&(d=v,(u=s).forEach((function(t,e){if(t.selection&&0==d--)return f=e,!1})),s=u.slice(f),o-=v),new qF(s.append(r),o)},qF.prototype.remapping=function(t,e){var i=new sR;return this.items.forEach((function(e,n){var r=null!=e.mirrorOffset&&n-e.mirrorOffset>=t?i.maps.length-e.mirrorOffset:null;i.appendMap(e.map,r)}),t,e),i},qF.prototype.addMaps=function(t){return 0==this.eventCount?this:new qF(this.items.append(t.map((function(t){return new $F(t)}))),this.eventCount)},qF.prototype.rebased=function(t,e){if(!this.eventCount)return this;var i=[],n=Math.max(0,this.items.length-e),r=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),n);var a=e;this.items.forEach((function(e){var n=r.getMirror(--a);if(null!=n){o=Math.min(o,n);var l=r.maps[n];if(e.step){var h=t.steps[n].invert(t.docs[n]),c=e.selection&&e.selection.map(r.slice(a+1,n));c&&s++,i.push(new $F(l,h,c))}else i.push(new $F(l))}}),n);for(var l=[],h=e;h<o;h++)l.push(new $F(r.maps[h]));var c=this.items.slice(0,n).append(l).append(i),p=new qF(c,s);return p.emptyItemCount()>500&&(p=p.compress(this.items.length-i.length)),p},qF.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},qF.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),i=e.maps.length,n=[],r=0;return this.items.forEach((function(o,s){if(s>=t)n.push(o),o.selection&&r++;else if(o.step){var a=o.step.map(e.slice(i)),l=a&&a.getMap();if(i--,l&&e.appendMap(l,i),a){var h=o.selection&&o.selection.map(e.slice(i));h&&r++;var c,p=new $F(l.invert(),a,h),u=n.length-1;(c=n.length&&n[u].merge(p))?n[u]=c:n.push(p)}}else o.map&&i--}),this.items.length,0),new qF(UF.from(n.reverse()),r)},qF.empty=new qF(UF.empty,0);var $F=function(t,e,i,n){this.map=t,this.step=e,this.selection=i,this.mirrorOffset=n};$F.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new $F(e.getMap().invert(),e,this.selection)}};var GF=function(t,e,i,n){this.done=t,this.undone=e,this.prevRanges=i,this.prevTime=n},KF=20;function XF(t){var e=[];return t.forEach((function(t,i,n,r){return e.push(n,r)})),e}function YF(t,e){if(!t)return null;for(var i=[],n=0;n<t.length;n+=2){var r=e.map(t[n],1),o=e.map(t[n+1],-1);r<=o&&i.push(r,o)}return i}function ZF(t,e,i,n){var r=tV(e),o=eV.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(s){var a=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),h=new GF(n?l:s.remaining,n?s.remaining:l,null,0);i(s.transform.setSelection(a).setMeta(eV,{redo:n,historyState:h}).scrollIntoView())}}var JF=!1,QF=null;function tV(t){var e=t.plugins;if(QF!=e){JF=!1,QF=e;for(var i=0;i<e.length;i++)if(e[i].spec.historyPreserveItems){JF=!0;break}}return JF}var eV=new hI("history"),iV=new hI("closeHistory");function nV(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new sI({key:eV,state:{init:function(){return new GF(qF.empty,qF.empty,null,0)},apply:function(e,i,n){return function(t,e,i,n){var r,o=i.getMeta(eV);if(o)return o.historyState;i.getMeta(iV)&&(t=new GF(t.done,t.undone,null,0));var s=i.getMeta("appendedTransaction");if(0==i.steps.length)return t;if(s&&s.getMeta(eV))return s.getMeta(eV).redo?new GF(t.done.addTransform(i,null,n,tV(e)),t.undone,XF(i.mapping.maps[i.steps.length-1]),t.prevTime):new GF(t.done,t.undone.addTransform(i,null,n,tV(e)),null,t.prevTime);if(!1===i.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(r=i.getMeta("rebased"))?new GF(t.done.rebased(i,r),t.undone.rebased(i,r),YF(t.prevRanges,i.mapping),t.prevTime):new GF(t.done.addMaps(i.mapping.maps),t.undone.addMaps(i.mapping.maps),YF(t.prevRanges,i.mapping),t.prevTime);var a=0==t.prevTime||!s&&(t.prevTime<(i.time||0)-n.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var i=!1;return t.mapping.maps[0].forEach((function(t,n){for(var r=0;r<e.length;r+=2)t<=e[r+1]&&n>=e[r]&&(i=!0)})),i}(i,t.prevRanges)),l=s?YF(t.prevRanges,i.mapping):XF(i.mapping.maps[i.steps.length-1]);return new GF(t.done.addTransform(i,a?e.selection.getBookmark():null,n,tV(e)),qF.empty,l,i.time)}(i,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput:function(t,e){var i="historyUndo"==e.inputType?rV(t.state,t.dispatch):"historyRedo"==e.inputType&&oV(t.state,t.dispatch);return i&&e.preventDefault(),i}}}})}function rV(t,e){var i=eV.getState(t);return!(!i||0==i.done.eventCount)&&(e&&ZF(i,t,e,!1),!0)}function oV(t,e){var i=eV.getState(t);return!(!i||0==i.undone.eventCount)&&(e&&ZF(i,t,e,!0),!0)}var sV=function(t,e){var i;this.match=t,this.handler="string"==typeof e?(i=e,function(t,e,n,r){var o=i;if(e[1]){var s=e[0].lastIndexOf(e[1]);o+=e[0].slice(s+e[1].length);var a=(n+=s)-r;a>0&&(o=e[0].slice(s-a,s)+o,n=r)}return t.tr.insertText(o,n,r)}):e};function aV(t,e){for(var i=t.plugins,n=0;n<i.length;n++){var r=i[n],o=void 0;if(r.spec.isInputRules&&(o=r.getState(t))){if(e){for(var s=t.tr,a=o.transform,l=a.steps.length-1;l>=0;l--)s.step(a.steps[l].invert(a.docs[l]));if(o.text){var h=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,h))}else s.delete(o.from,o.to);e(s)}return!0}}return!1}new sV(/--$/,""),new sV(/\.\.\.$/,""),new sV(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new sV(/"$/,""),new sV(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new sV(/'$/,"");var lV={mark:"strong",altMarks:["b"],altStyle:{name:"font-weight",value:/^(bold(er)?|[5-9]\d{2,})$/}},hV={mark:"em",altMarks:["i"],altStyle:{name:"font-style",value:/^italic$/i}},cV={mark:"u",altStyle:{name:"text-decoration",value:/^underline$/i}},pV={mark:"del",altStyle:{name:"text-decoration",value:/^line-through$/i}},uV={mark:"sub"},dV={mark:"sup"},fV={mark:"link"},vV="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),mV=function(t,e){var i={},n=e&&e.applyToWord||!1;if(i["Mod-z"]=rV,i["Shift-Mod-z"]=oV,i.Backspace=Ez(aV,lz,hz,pz),i.Enter=Ez(fz,gz,yz,wz),vV||(i["Mod-y"]=oV),t.marks.strong&&(i["Mod-b"]=OI(WI,kI({},lV,{applyToWord:n}))),t.marks.em&&(i["Mod-i"]=OI(WI,kI({},hV,{applyToWord:n}))),t.marks.u&&(i["Mod-u"]=OI(WI,kI({},cV,{applyToWord:n}))),t.nodes.hard_break){var r=t.nodes.hard_break,o=Ez(mz,(function(t,e){return e(t.tr.replaceSelectionWith(r.create()).scrollIntoView()),!0}));i["Shift-Enter"]=o}return i},gV=function(t){var e={};return t.nodes.list_item&&(e.Enter=Xz(t.nodes.list_item)),e},yV=/style=['"]?[^'"]*?mso-list:\s*[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi,bV=function(t){return/^MsoListParagraph/.test(t.className)},wV=function(t){var e=t.innerHTML;return e=(e=e.replace(/<!--(.|\s)*?-->/gi,"")).replace(/<\/?[^>]+?\/?>/gm,"")},xV=function(t,e){var i=document.createElement(t);return i.style.listStyleType=e,i},_V=function(t){var e=null;return/^\d/.test(t)||(e=(/^[a-z]/.test(t)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(t)?"roman":"alpha")),e},kV=function(t,e){var i=[];Array.from(t).forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=t;n.getAttribute("datalist")?(i.push(t),e.add(i)):bV(n)&&i.length?i.push(t):(i=[],"DIV"===n.nodeName?kV(n.children,e):"TABLE"===n.nodeName&&Array.from(n.querySelectorAll("td,th")).forEach((function(t){kV(t.children,e)})))}}))},SV=function(t){var e,i=t.innerHTML,n=function(t){return t.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};return i=i.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,""),/^[\u2022\u00b7\u00a7\u00d8ovn][\u00a0 ]+/.test(i)?{tag:"ul",style:(e=n(wV(t)),/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(e)?null:/^o/.test(e)?"circle":"square")}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(i)?{tag:"ol",style:_V(n(wV(t)))}:void 0},CV=function(t){var e,i=t.nodeName.toLowerCase();t.firstChild&&t.firstChild.nodeType===Node.COMMENT_NODE&&t.removeChild(t.firstChild),1===t.childNodes.length?e=t.firstChild.nodeType===Node.TEXT_NODE?wV(t):t.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(t.removeChild(t.firstChild),3===t.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(t.firstChild.nodeValue)&&t.removeChild(t.firstChild),/^(&nbsp;|\s)+$/i.test(t.firstChild.innerHTML)&&t.removeChild(t.firstChild),e="p"!==i?"<"+i+">"+t.innerHTML+"</"+i+">":t.innerHTML),t.parentNode.removeChild(t);var n=document.createElement("li");return n.innerHTML=e,n},EV=function(t){var e=document.createElement("div");e.innerHTML=function(t){return t.replace(yV,(function(t,e,i){return'datalist="'+e+'" datalevel="'+i+'" '+t}))}(t);var i=new Set;return kV(e.children,i),i.forEach((function(t){return function(t){var e,i,n,r,o,s,a,l,h,c,p,u,d,f=-1,v={};for(l=0;l<t.length;l++){var m=(d={datalist:(h=t[l]).getAttribute("datalist"),datalevel:h.getAttribute("datalevel")}).datalist,g=SV(h);if(c=g&&g.tag){if(p=d.datalevel||parseFloat(h.style.marginLeft||0),d.datalevel||h.style.marginLeft){var y=c+m;v[p]||(v[p]={}),(!i||i<0)&&(i=p,n=m,r=(a=t.filter((function(t){return t.getAttribute("datalist")===String(n)})))[a.length-1],s=xV(c,g&&g.style),h.parentNode.insertBefore(s,h),f=p,v[p][y]=s),o=r===h,u=v[p][y],(p>f||!u)&&(u=xV(c,g&&g.style),v[p][y]=u,e.appendChild(u)),e=CV(h),u.appendChild(e),o?i=f=-1:f=p}}else!e||o&&!bV(h)||(h.style.marginLeft&&(h.style.marginLeft=""),h.style.marginLeft&&(h.style.margin=""),e.appendChild(h))}}(t)})),e.innerHTML},TV=function(t){t.ownerElement&&t.ownerElement.removeAttribute(t.name)},AV=function(t){/^Mso/.test(t.value)&&TV(t)},MV=/\s*;\s*/,OV=/\s*:\s*/,DV=function(t){var e,i,n=t.value.split(MV).filter((function(t){return Boolean(t)})),r=t.ownerElement.style,o="";n.forEach((function(t){var n;n=t.split(OV),e=n[0],i=n[1],void 0!==r[e]&&(o+=e+": "+i+"; ")})),(o=o.trim())?t.value=o:TV(t)},PV=function(t,e){var i=t;if(e.convertMsLists&&(i=EV(i)),e.stripTags&&(i=function(t,e){return t.replace(new RegExp("<\\/?("+e+")(?:\\s[^>]*?)?>","gi"),"")}(i,e.stripTags)),e.attributes){var n=document.createElement("div");n.innerHTML=i,Array.from(n.querySelectorAll("*")).forEach((function(t){return function(t,e){if(t.nodeType===Node.ELEMENT_NODE){for(var i=t.attributes.length-1;i>=0;i--){var n=t.attributes[i];e[n.name]?e[n.name](n):e["*"]&&e["*"](n)}"SPAN"===t.nodeName&&0===t.attributes.length&&function(t){var e=t.parentNode;if(e){for(;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)}}(t)}}(t,e.attributes)})),i=n.innerHTML}return i};var RV=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/;new RegExp("(?:("+RV.source+"))([\\da-fA-F\\s]+)\\}","g");new hI("highlight");var IV={southeast:{x:1,y:1},east:{x:1,y:0},south:{x:0,y:1},north:{x:0,y:-1},west:{x:-1,y:0},southwest:{x:-1,y:1},northwest:{x:-1,y:-1},northeast:{x:1,y:-1}},zV=Object.keys(IV),LV=new hI("image-resize"),BV=function(t,e,i){t.style[e]=i+"px"},NV=/[^\-]width:|[^\-]height:/,jV=/^.+$/,FV=function(){function t(t,e,i,n){this.activeHandle=t,this.dragging=e,this.rect=i,this.nodePosition=n}return t.prototype.apply=function(e){var i=e.getMeta(LV);return i?new t(i.activeHandle,i.setDragging,i.rect,i.nodePosition):this},t}(),VV=function(t,e,i){var n=e.target.getAttribute(vI);if(!n)return!1;var r=LV.getState(t.state);e.preventDefault();var o=t.state.tr;function s(e){!function(t,e,i){var n=LV.getState(t.state),r=n.rect,o=n.dragging,s=n.nodePosition,a=n.activeHandle;if(o&&r){var l=t.nodeDOM(s),h=IV[a],c=(e.clientX-o.startX)*h.x,p=(e.clientY-o.startY)*h.y,u=h.x?c+l.width:r.width,d=h.y?p+l.height:r.height;if(i.lockRatio&&h.x&&h.y){var f=Math.min(u/l.width,d/l.height),v=l.width*f,m=l.height*f;o.startX=e.clientX-(u-v)*h.x,o.startY=e.clientY-(d-m)*h.y,u=v,d=m}else o.startX=h.x?e.clientX:o.startX,o.startY=h.y?e.clientY:o.startY;BV(l,"width",u),BV(l,"height",d),r.top=l.offsetTop,r.left=l.offsetLeft,r.width=l.offsetWidth,r.height=l.offsetHeight;var g=l.nextElementSibling;g.style.width=r.width+"px",g.style.height=r.height+"px",g.style.top=r.top+"px",g.style.left=r.left+"px"}}(t,e,i)}return o.setMeta(LV,{setDragging:{startX:e.clientX,startY:e.clientY},activeHandle:n,rect:r.rect,nodePosition:r.nodePosition}),o.setMeta("addToHistory",!1),t.dispatch(o),e.view.addEventListener("mouseup",(function e(i){i.view.removeEventListener("mouseup",e),i.view.removeEventListener("mousemove",s),function(t){var e=LV.getState(t.state),i=e.rect,n=e.dragging,r=e.nodePosition;if(n&&i){var o=t.state.selection;if(o instanceof qR){var s=o.node.attrs,a=i.width,l=i.height,h=void 0;if(NV.test(s.style||"")){var c=CI(s.style,{style:"width",value:jV,newValue:a+"px"}),p=CI(c.style||"",{style:"height",value:jV,newValue:l+"px"}).style;h=kI({},s,{style:p})}else h=kI({},s,{width:a,height:l});var u=o.node.type.createAndFill(h);if(u){var d=t.state.tr;d.replaceWith(r,r+1,u),d.setSelection(qR.create(d.doc,r)),d.setMeta("commandName","image-resize"),d.setMeta("args",h),d.setMeta(LV,{setDragging:null,activeHandle:null,rect:i,nodePosition:r}),t.dispatch(d)}}}}(t)})),e.view.addEventListener("mousemove",s),!0},HV=function(t){return void 0===t&&(t={node:"image",lockRatio:!0}),new sI({key:LV,view:function(e){return{resize:function(){LV.getState(e.state).rect&&e.dispatch(e.state.tr.setMeta("resize",!0))},get window(){return e.dom.ownerDocument&&e.dom.ownerDocument.defaultView},attachResize:function(){var t=this.window;t&&(t.removeEventListener("resize",this.resize),t.addEventListener("resize",this.resize))},removeResize:function(){var t=this.window;t&&t.removeEventListener("resize",this.resize)},update:function(e,i){var n=e.state,r=n.selection,o=n.schema.nodes[t.node],s=LV.getState(n),a=s.rect;if(r instanceof qR&&o===r.node.type){var l=e.nodeDOM(r.from),h={top:l.offsetTop,left:l.offsetLeft,width:l.offsetWidth,height:l.offsetHeight};if(!i.selection.eq(r)||a&&(a.width!==h.width||a.height!==h.height||a.top!==h.top||a.left!==h.left)){var c=n.tr;c.setMeta(LV,{rect:h,nodePosition:r.from}),e.dispatch(c),this.attachResize()}}else a&&(s.rect=null,s.nodePosition=-1)},destroy:function(){this.removeResize()}}},state:{init:function(){return new FV("",null,null,-1)},apply:function(t,e){return e.apply(t)}},props:{handleDOMEvents:{mousedown:function(e,i){return VV(e,i,t)}},decorations:function(e){var i=e.selection,n=e.schema.nodes[t.node],r=LV.getState(e).rect;if(r&&i instanceof qR&&n===i.node.type){var o=document.createElement("div");o.className="k-editor-resize-handles-wrapper",o.style.width=r.width+"px",o.style.height=r.height+"px",o.style.top=r.top+"px",o.style.left=r.left+"px";for(var s=0;s<zV.length;s++){var a=document.createElement("div");a.className=dI+" "+zV[s],a.setAttribute(vI,zV[s]),o.appendChild(a)}return GN.create(e.doc,[WN.widget(e.selection.from+1,o)])}return GN.empty}}})};new hI("caret-color");var WV=function(){function t(t,e){this.node=t,this.view=e,this.dom=document.createElement("div"),this.dom.className="k-editor-resize-wrap-element",this.table=this.dom.appendChild(document.createElement("table")),t.attrs[pI]&&this.renderColgroup(t.attrs[pI]);var i=this.table.appendChild(document.createElement("tbody"));this.setAttributes(this.table,t.attrs),this.resizeHandles=zV.map((function(t){var e=document.createElement("span");return e.className=dI+" "+t,e.setAttribute(fI,t),e})),this.contentDOM=i}return t.prototype.update=function(t){var e=this;if(t.type!==this.node.type)return!1;var i=this.node;return this.node=t,t.attrs[uI]?this.resizeHandles.forEach((function(t){e.dom.appendChild(t)})):Array.from(this.dom.children).filter((function(t){return t.classList.contains(dI)})).forEach((function(t){return t.remove()})),this.setAttributes(this.table,t.attrs),i.attrs[pI]!==t.attrs[pI]&&this.renderColgroup(t.attrs[pI]),!0},t.prototype.ignoreMutation=function(t){return"attributes"===t.type&&(t.target===this.table||t.target.firstChild===this.table||this.colgroup&&this.colgroup.contains(t.target))},t.prototype.destroy=function(){this.node=void 0,this.view=void 0,this.table=void 0,this.colgroup=void 0,this.resizeHandles=void 0},t.prototype.renderColgroup=function(t){this.table&&this.table.firstChild&&"COLGROUP"===this.table.firstChild.nodeName&&this.table.removeChild(this.table.firstChild),t&&(this.colgroup=BF(t),this.table.insertBefore(this.colgroup,this.table.firstChild))},t.prototype.setAttributes=function(t,e){var i=[pI,uI];for(var n in e)if(n&&-1===i.indexOf(n)){var r=t.getAttribute(n),o=e[n];o&&o!==r?t.setAttribute(n,o):o||t.removeAttribute(n)}},t}(),UV=/^.+$/,qV=function(t){return(t||"").split(/\s*;\s*/).filter(Boolean).map((function(t){var e,i=t.split(/\s*:\s*/);return(e={})[i[0]]=i[1],e})).reduce((function(t,e){return kI({},t,e)}),{})};function $V(t,e,i){var n;if(new RegExp("[^-]?"+e+":").test(t.style||"")){var r=CI(t.style||"",{style:e,value:UV,newValue:i}).style;n=kI({},t,{style:r})}else n=t.style?kI({},t,{style:t.style.replace(/;$/,"")+"; "+e+": "+i+";"}):kI({},t,{style:e+": "+i+";"});return n}var GV=new hI("table-resize"),KV=new hI("table-column-resizing"),XV=new hI("table-row-resizing");function YV(t,e){var i=!1;return i=(i=(i=i||t!==GV&&Boolean(GV.get(e))&&GV.getState(e).dragging)||t!==KV&&Boolean(KV.get(e))&&KV.getState(e).dragging)||t!==XV&&Boolean(XV.get(e))&&XV.getState(e).dragging}function ZV(t,e){var i=!1;return i=(i=i||t!==KV&&Boolean(KV.get(e))&&KV.getState(e).activeHandle>-1)||t!==XV&&Boolean(XV.get(e))&&XV.getState(e).activeHandle>-1}function JV(t){return t&&t.firstChild&&"TABLE"===t.firstChild.nodeName?t.firstChild:t}function QV(t){for(;t&&"TD"!==t.nodeName&&"TH"!==t.nodeName;)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}function tH(t,e){for(var i=t.depth;i>0;i--){var n=t.node(i);if(e(n))return{node:n,depth:i}}return null}function eH(){var t=WV,e=new sI({key:KV,state:{init:function(e,i){return this.spec.props.nodeViews[xj(i.schema).table.name]=function(e,i){return new t(e,i)},new iH(-1,null)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return ZV(KV,t)?null:KV.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,e){return YV(KV,t.state)||function(t,e,i){var n=KV.getState(t.state);if(!n.dragging){var r=QV(e.target),o=-1;if(r){var s=function(t){var e=t.parentNode;return{cellIndex:t.cellIndex,rowIndex:e.rowIndex}}(r),a=r.getBoundingClientRect(),l=a.left,h=a.right;Math.abs(e.clientX-l)<=i&&s.cellIndex>0?(s.cellIndex--,o=nH(t,e,s)):h-e.clientX>0&&h-e.clientX<=i&&(o=nH(t,e,s))}o!==n.activeHandle&&oH(t,o)}}(t,e,5),!1},mouseleave:function(t){return function(t){var e=KV.getState(t.state);e.activeHandle>-1&&!e.dragging&&oH(t,-1)}(t),!1},mousedown:function(t,e){return function(t,e,i){var n,r=KV.getState(t.state);if(-1===r.activeHandle||r.dragging)return!1;for(var o=t.state.doc.resolve(r.activeHandle),s=o.parent,a=o.index(),l=0,h=0;h<=a;h++)l+=s.child(h).attrs.colspan;var c,p,u=o.node(o.depth-1),d=t.domAtPos(r.activeHandle),f=d.node.childNodes[d.offset].closest("table");if(u.attrs[pI]){(c=(m=f.firstChild).children[l-1]).style.width||(c.style.width=c.offsetWidth+"px")}else{var v=0;for(h=0;h<s.childCount;h++)v+=s.child(h).attrs.colspan;var m=document.createElement("colgroup"),g=new Array(v);for(h=0;h<v;h++)g[h]=document.createElement("col"),m.appendChild(g[h]);f.insertBefore(m,f.firstChild),(c=g[a]).style.width=c.offsetWidth+"px",p=kI({},u.attrs,((n={})[pI]="<colgroup>"+g.reduce((function(t,e){return t+e.outerHTML}),"")+"</colgroup>",n))}var y=parseFloat(c.style.width),b=t.state.tr.setMeta(KV,{setDragging:{startX:e.clientX,startWidth:y}});if(!f.style.width){var w=Array.from(c.parentNode.children).map((function(t){return t.style.width}));if(w.every(Boolean)){var x=w.reduce((function(t,e){return t+parseFloat(e)}),0);p=$V(p||u.attrs,"width",x+"px")}}if(p){var _=o.posAtIndex(0,o.depth-1)-1;b.setNodeMarkup(_,null,p)}function k(e){e.view.removeEventListener("mouseup",k),e.view.removeEventListener("mousemove",S);var n=KV.getState(t.state);if(n.dragging){var r=t.state.tr;!function(t,e,i,n){var r,o=t.state.doc.resolve(i),s=o.node(-1),a=o.start(-1),l=o.posAtIndex(0,o.depth-1)-1,h=t.nodeDOM(a).closest("table"),c=s.attrs;if(s&&c[pI]){var p=h.firstChild;c=kI({},c,((r={})[pI]=p.outerHTML,r))}var u=h.style.width;h&&u&&qV(c.style).width!==u&&(c=$V(c,"width",u),e.setNodeMarkup(l,null,c))}(t,r,n.activeHandle,rH(n.dragging,e,i)),t.dispatch(r.setMeta(KV,{setDragging:null}))}}function S(e){if(!e.which)return k(e);var n=KV.getState(t.state),r=rH(n.dragging,e,i);!function(t,e,i,n){var r=t.state.doc.resolve(e),o=r.node(-1),s=r.start(-1),a=gj.get(o).colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=t.domAtPos(r.start(-1)).node;"TABLE"!==l.nodeName&&(l=l.closest("table"));var h=l,c=h.firstChild,p=Array.from(c.children);if(p[a].style.width=i+"px",h.style.width){var u=p.map((function(t){return t.style.width}));if(u.every(Boolean)){var d=u.reduce((function(t,e){return t+parseFloat(e)}),0);h.style.width=d+"px"}}}(t,n.activeHandle,r)}return t.dispatch(b),e.view.addEventListener("mouseup",k),e.view.addEventListener("mousemove",S),e.preventDefault(),!0}(t,e,25)}},decorations:function(t){if(!YV(KV,t)){var e=KV.getState(t);if(e.activeHandle>-1)return function(t,e){for(var i=[],n=t.doc.resolve(e),r=n.node(-1),o=gj.get(r),s=n.start(-1),a=o.colCount(n.pos-s)+n.nodeAfter.attrs.colspan,l=0;l<o.height;l++){var h=a+l*o.width-1;if(!(a!==o.width&&o.map[h]===o.map[h+1]||0!==l&&o.map[h-1]===o.map[h-1-o.width])){var c=o.map[h],p=s+c+r.nodeAt(c).nodeSize-1,u=document.createElement("div");u.className="column-resize-handle",i.push(WN.widget(p,u))}}return GN.create(t.doc,i)}(t,e.activeHandle)}return GN.empty},nodeViews:{}}});return e}var iH=function(){function t(t,e){this.activeHandle=t,this.dragging=e}return t.prototype.apply=function(e){var i,n=this,r=e.getMeta(KV);if(r&&null!=r.setHandle)return new t(r.setHandle,null);if(r&&void 0!==r.setDragging)return new t(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){var o=e.mapping.map(n.activeHandle,-1);i=e.doc.resolve(o),Boolean("row"===i.parent.type.spec.tableRole&&i.nodeAfter)||(o=-1),n=new t(o,n.dragging)}return n},t}();function nH(t,e,i){var n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return-1;var r=t.state.doc.resolve(n.pos),o=tH(r,(function(t){return"table"===t.type.spec.tableRole}));if(null===o)return-1;var s=r.start(o.depth),a=o.node,l=gj.get(a);return s+l.map[l.width*i.rowIndex+i.cellIndex]}function rH(t,e,i){var n=e.clientX-t.startX;return Math.max(i,t.startWidth+n)}function oH(t,e){var i=t.state.tr;i.setMeta("addToHistory",!1),i.setMeta(KV,{setHandle:e}),t.dispatch(i)}var sH={southeast:!0,southwest:!0,northwest:!0,northeast:!0},aH=kI({east:!0,west:!0},sH),lH=kI({south:!0,north:!0},sH),hH=function(){function t(t,e,i){this.activeHandle=t,this.dragging=e,this.nodePosition=i}return t.prototype.apply=function(e){var i=e.getMeta(GV);return i?new t(i.activeHandle,i.setDragging,i.nodePosition):this},t}(),cH=function(t){var e=Array.from(t.firstChild.children).map((function(t){return t.offsetWidth})),i=Array.from(t.rows).map((function(t){return t.offsetHeight})),n=e.reduce((function(t,e){return t+e}),0),r=i.reduce((function(t,e){return t+e}),0),o=t.offsetHeight;return{width:n,height:r,colsWidth:e,rowsHeight:i,offsetWidth:t.offsetWidth,offsetHeight:o}},pH=function(t){var e=GV.getState(t.state),i=e.dragging,n=e.nodePosition,r=e.activeHandle;if(i){var o=t.state.doc.nodeAt(n),s=JV(t.nodeDOM(n)),a=cH(s);if(o){var l=a.offsetWidth+"px",h=a.offsetHeight+"px",c=t.state.tr,p=o.attrs,u=qV(p.style);aH[r]&&s.style.width&&u.width!==l&&(p=$V(p,"width",l)),lH[r]&&s.style.height&&u.height!==h&&(p=$V(p,"height",h)),p=function(t,e,i,n){var r=t.state.doc.nodeAt(i),o=JV(t.nodeDOM(i)),s=(o.ownerDocument&&o.ownerDocument.defaultView||window).getComputedStyle,a=Array.from(o.rows);r.forEach((function(t,n,r){var o=qV(t.attrs.style).height;o&&!/px$/.test(o)&&e.setNodeMarkup(i+n+1,null,$V(t.attrs,"height",s(a[r]).height))}));var l=o.firstChild,h=Array.from(l&&l.children||[]),c=!1;h.forEach((function(t,e){t.style.width&&!/px$/.test(t.style.width)&&(t.style.width=s(h[e]).width,c=!0)}));var p=kI({},n);return c&&(p[pI]=l.outerHTML),p}(t,c,n,p),c.setNodeMarkup(n,null,p),c.setMeta("commandName","node-resize"),c.setMeta("args",p),c.setMeta(GV,{setDragging:null,activeHandle:null,nodePosition:n}),t.dispatch(c)}}},uH=function(t,e){var i=e.target.getAttribute(fI);if(!i)return!1;var n=GV.getState(t.state);e.preventDefault();var r=t.state.tr;r.setMeta(GV,{setDragging:{startX:e.clientX,startY:e.clientY},activeHandle:i,nodePosition:n.nodePosition}),r.setMeta("addToHistory",!1),function(t,e,i){var n=t.state.doc.nodeAt(i),r=JV(t.nodeDOM(i)),o=cH(r),s=o.width,a=o.height,l=o.colsWidth,h=o.rowsHeight,c=o.offsetWidth,p=o.offsetHeight,u=r.firstChild,d=Array.from(u&&u.children||[]),f=!1;d.forEach((function(t,e){t.style.width&&!/%$/.test(t.style.width)&&(t.style.width=100*l[e]/s+"%",f=!0)}));var v=!1;n.forEach((function(t,n,r){var o=qV(t.attrs.style).height;o&&!/%$/.test(o)&&(e.setNodeMarkup(i+n+1,null,$V(t.attrs,"height",100*h[r]/a+"%")),v=!0)}));var m=n.attrs;qV(m.style).width!==c+"px"&&(m=$V(m,"width",c+"px")),f&&(m[pI]=u.outerHTML),v&&(m=$V(m,"height",p+"px")),(f||v)&&e.setNodeMarkup(i,null,m)}(t,r,n.nodePosition),t.dispatch(r);var o=e.view||window;function s(e){!function(t,e){var i=GV.getState(t.state),n=i.dragging,r=i.nodePosition,o=i.activeHandle;if(!(r<0)&&n){var s=JV(t.nodeDOM(r)),a=s.getBoundingClientRect(),l=IV[o],h=(e.clientX-n.startX)*l.x,c=(e.clientY-n.startY)*l.y,p=(s.ownerDocument&&s.ownerDocument.defaultView||window).getComputedStyle(s),u=/px/.test(p.width)?parseFloat(p.width):s.offsetWidth,d=/px/.test(p.height)?parseFloat(p.height):s.offsetHeight,f=l.x?h+u:a.width,v=l.y?c+d:a.height;n.startX=l.x?e.clientX:n.startX,n.startY=l.y?e.clientY:n.startY,aH[o]&&(s.style.width=f+"px"),lH[o]&&(s.style.height=v+"px")}}(t,e)}return o.addEventListener("mouseup",(function e(i){o.removeEventListener("mouseup",e),o.removeEventListener("mousemove",s),pH(t)})),o.addEventListener("mousemove",s),!0},dH=function(t){return void 0===t&&(t={node:"table"}),new sI({key:GV,view:function(e){return{selectedNode:function(t,e){var i=t.selection;if(i instanceof qR&&e===i.node.type&&i instanceof qR)return{node:i.node,pos:i.from};var n=tH(i.$from,(function(t){return t.type===e})),r=n&&n.node;if(r){var o=new Array(i.$from.depth+1).fill(0).findIndex((function(t,e){return"table"===i.$from.node(e).type.spec.tableRole}));return{node:r,pos:i.$from.start(o)-1}}return null},update:function(e,i){var n,r,o,s,a,l=e.state,h=l.schema.nodes[t.node],c=this.selectedNode(l,h),p=this.selectedNode(i,h);if((c||!p||i.doc.eq(e.state.doc))&&(c||p)){var u=l.tr;u.setMeta("addToHistory",!1),c&&p&&c.pos!==p.pos?(u.setMeta(GV,{nodePosition:c.pos}),u.setNodeMarkup(p.pos,h,kI({},p.node.attrs,((n={})[uI]=!1,n))),u.setNodeMarkup(c.pos,h,kI({},c.node.attrs,((r={})[uI]=!0,r))),e.dispatch(u)):c&&p&&c.pos===p.pos&&!c.node.attrs[uI]&&!l.selection.eq(i.selection)?(u.setMeta(GV,{nodePosition:c.pos}),e.dispatch(u.setNodeMarkup(c.pos,h,kI({},c.node.attrs,((o={})[uI]=!0,o))))):c&&!p?(u.setMeta(GV,{nodePosition:c.pos}),e.dispatch(u.setNodeMarkup(c.pos,h,kI({},c.node.attrs,((s={})[uI]=!0,s))))):!c&&p&&(u.setMeta(GV,{nodePosition:-1}),e.dispatch(u.setNodeMarkup(p.pos,h,kI({},p.node.attrs,((a={})[uI]=!1,a)))))}}}},state:{init:function(){return new hH("",null,-1)},apply:function(t,e){return e.apply(t)}},props:{handleDOMEvents:{mousedown:function(t,e){return uH(t,e)}}}})},fH=function(){function t(){}return t.prototype.ignoreMutation=function(t){return"attributes"===t.type&&"style"===t.attributeName&&"TR"===t.target.nodeName},t}();function vH(){var t=new sI({key:XV,state:{init:function(t,e){return this.spec.props.nodeViews[xj(e.schema).row.name]=function(t,e){return new fH},new mH(-1,null)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return ZV(XV,t)?null:XV.getState(t).activeHandle>-1?{class:"resize-cursor-vertical"}:null},handleDOMEvents:{mousemove:function(t,e){return YV(XV,t.state)||function(t,e,i){var n=XV.getState(t.state);if(!n.dragging){var r=QV(e.target),o=-1;if(r){var s=r.parentNode,a=s.getBoundingClientRect();Math.abs(e.clientY-a.top)<=i&&s.rowIndex>0?o=gH(t,e,s.rowIndex-1):a.bottom-e.clientY>0&&a.bottom-e.clientY<=i&&(o=gH(t,e,s.rowIndex))}o!==n.activeHandle&&yH(t,o)}}(t,e,5),!1},mouseleave:function(t){return function(t){var e=XV.getState(t.state);e.activeHandle>-1&&!e.dragging&&yH(t,-1)}(t),!1},mousedown:function(t,e){return function(t,e){var i=XV.getState(t.state);if(-1===i.activeHandle||i.dragging)return!1;var n=t.state.doc,r=n.resolve(i.activeHandle),o=n.nodeAt(i.activeHandle),s=r.parent,a=qV(o.attrs.style).height,l=qV(s.attrs.style).height,h=a?parseFloat(a):0;if(!a){h=t.nodeDOM(i.activeHandle).offsetHeight}function c(e){e.view.removeEventListener("mouseup",c),e.view.removeEventListener("mousemove",p);var i=XV.getState(t.state);if(i.dragging){var n=t.state.tr.setMeta(XV,{setDragging:null});!function(t,e,i){var n=t.state.doc,r=n.nodeAt(i),o=t.nodeDOM(i),s=o.ownerDocument&&o.ownerDocument.defaultView||window;o.style.height=s.getComputedStyle(o).height,e.setNodeMarkup(i,null,$V(r.attrs,"height",o.style.height));var a=o&&o.closest("table"),l=a&&a.style.height;if(l){var h=n.resolve(i),c=h.start(h.depth)-1;e.setNodeMarkup(c,null,$V(h.parent.attrs,"height",l))}}(t,n,i.activeHandle),t.dispatch(n)}}function p(e){if(!e.which)return c(e);var i=XV.getState(t.state),n=function(t,e){var i=e.clientY-t.startY;return t.startHeight.rowHeight+i}(i.dragging,e),r=e.clientY-i.dragging.startY;!function(t,e,i,n,r){var o=t.nodeDOM(e);if(o){o.style.height=i+"px";var s=o.ownerDocument&&o.ownerDocument.defaultView||window;o.style.height=s.getComputedStyle(o).height;var a=o.closest("table"),l=parseFloat(r)+n+"px",h=a&&a.style.height;h&&h!==l&&(a.style.height=parseFloat(r)+n+"px",a.style.height=s.getComputedStyle(a).height)}}(t,i.activeHandle,n,r,l)}return t.dispatch(t.state.tr.setMeta(XV,{setDragging:{startY:e.clientY,startHeight:{rowHeight:h,tableHeight:l}}})),e.view.addEventListener("mouseup",c),e.view.addEventListener("mousemove",p),e.preventDefault(),!0}(t,e)}},decorations:function(t){if(YV(XV,t))return GN.empty;var e=XV.getState(t);return e.activeHandle>-1?function(t,e){var i=[];if("number"!=typeof e)return GN.empty;for(var n=t.doc.resolve(e),r=n.parent,o=gj.get(r),s=n.index(n.depth),a=n.start(n.depth),l=0;l<o.width;l++){var h=l+s*o.width,c=o.map[h],p=r.nodeAt(c),u=a+c+(p?p.nodeSize:0)-1,d=document.createElement("div");d.className="row-resize-handle",i.push(WN.widget(u,d))}return GN.create(t.doc,i)}(t,e.activeHandle):void 0},nodeViews:{}}});return t}var mH=function(){function t(t,e){this.activeHandle=t,this.dragging=e}return t.prototype.apply=function(e){var i,n=this,r=e.getMeta(XV);if(r&&null!=r.setHandle)return new t(r.setHandle,null);if(r&&void 0!==r.setDragging)return new t(n.activeHandle,r.setDragging);if(n.activeHandle>-1){var o=e.mapping.map(n.activeHandle,-1);"row"===(i=e.doc.resolve(o)).parent.type.spec.tableRole&&i.nodeAfter||(o=null),n=new t(o,n.dragging)}return n},t}();function gH(t,e,i){var n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return-1;var r=t.state.doc.resolve(n.pos),o=tH(r,(function(t){return"table"===t.type.spec.tableRole}));if(null===o)return-1;var s=r.start(o.depth),a=o.node,l=gj.get(a);return s+l.map[l.width*i]-1}function yH(t,e){var i=t.state.tr;i.setMeta("addToHistory",!1),i.setMeta(XV,{setHandle:e}),t.dispatch(i)}var bH=function(t,e){var i=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var n=function(t){return i[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}}))};bH.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){var i=e.name,n=e.handler;return t.editorView.dom.removeEventListener(i,n)}))},bH.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())},bH.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},bH.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var i=e.nodeBefore,n=e.nodeAfter;if(i||n){var r=this.editorView.nodeDOM(this.cursorPos-(i?i.nodeSize:0)).getBoundingClientRect(),o=i?r.bottom:r.top;i&&n&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:r.left,right:r.right,top:o-this.width/2,bottom:o+this.width/2}}}if(!t){var s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a,l,h=this.editorView.dom.offsetParent;if(this.element||(this.element=h.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!h||h==document.body&&"static"==getComputedStyle(h).position)a=-pageXOffset,l=-pageYOffset;else{var c=h.getBoundingClientRect();a=c.left-h.scrollLeft,l=c.top-h.scrollTop}this.element.style.left=t.left-a+"px",this.element.style.top=t.top-l+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},bH.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},bH.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),i=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),n=i&&i.type.spec.disableDropCursor,r="function"==typeof n?n(this.editorView,e):n;if(e&&!r){var o=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(o=kR(this.editorView.state.doc,o,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(o),this.scheduleRemoval(5e3)}}},bH.prototype.dragend=function(){this.scheduleRemoval(20)},bH.prototype.drop=function(){this.scheduleRemoval(20)},bH.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};var wH=function(t){function e(e){t.call(this,e,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(i,n){var r=i.resolve(n.map(this.head));return e.valid(r)?new e(r):t.near(r)},e.prototype.content=function(){return XD.empty},e.prototype.eq=function(t){return t instanceof e&&t.head==this.head},e.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function(t,i){if("number"!=typeof i.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(i.pos))},e.prototype.getBookmark=function(){return new xH(this.anchor)},e.valid=function(t){var e=t.parent;if(e.isTextblock||!function(t){for(var e=t.depth;e>=0;e--){var i=t.index(e),n=t.node(e);if(0!=i)for(var r=n.child(i-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}else if(n.type.spec.isolating)return!0}return!0}(t)||!function(t){for(var e=t.depth;e>=0;e--){var i=t.indexAfter(e),n=t.node(e);if(i!=n.childCount)for(var r=n.child(i);;r=r.firstChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}else if(n.type.spec.isolating)return!0}return!0}(t))return!1;var i=e.type.spec.allowGapCursor;if(null!=i)return i;var n=e.contentMatchAt(t.index()).defaultType;return n&&n.isTextblock},e.findFrom=function(t,i,n){t:for(;;){if(!n&&e.valid(t))return t;for(var r=t.pos,o=null,s=t.depth;;s--){var a=t.node(s);if(i>0?t.indexAfter(s)<a.childCount:t.index(s)>0){o=a.child(i>0?t.indexAfter(s):t.index(s)-1);break}if(0==s)return null;r+=i;var l=t.doc.resolve(r);if(e.valid(l))return l}for(;;){var h=i>0?o.firstChild:o.lastChild;if(!h){if(o.isAtom&&!o.isText&&!qR.isSelectable(o)){t=t.doc.resolve(r+o.nodeSize*i),n=!1;continue t}break}o=h,r+=i;var c=t.doc.resolve(r);if(e.valid(c))return c}return null}},e}(FR);wH.prototype.visible=!1,FR.jsonID("gapcursor",wH);var xH=function(t){this.pos=t};xH.prototype.map=function(t){return new xH(t.map(this.pos))},xH.prototype.resolve=function(t){var e=t.resolve(this.pos);return wH.valid(e)?new wH(e):FR.near(e)};mL({ArrowLeft:_H("horiz",-1),ArrowRight:_H("horiz",1),ArrowUp:_H("vert",-1),ArrowDown:_H("vert",1)});function _H(t,e){var i="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,n,r){var o=t.selection,s=e>0?o.$to:o.$from,a=o.empty;if(o instanceof WR){if(!r.endOfTextblock(i)||0==s.depth)return!1;a=!1,s=t.doc.resolve(e>0?s.after():s.before())}var l=wH.findFrom(s,e,a);return!!l&&(n&&n(t.tr.setSelection(new wH(l))),!0)}}var kH=function(t,e){for(var i=t.$head,n=i.depth;n>0;n--){var r=i.node(n);if(r.type.name===e)return{pos:i.before(n),node:r}}return null},SH=function(t,e){var i=e&&function(t){var i,n=kH(t.selection,"table_row"),r=kH(t.selection,"table");if(n&&r&&n.node.attrs[cI]){for(var o=0,s=0;s<r.node.nodeSize;s++)if(r.node.child(s).eq(n.node)){o=s;break}var a=r.node.child(o-1),l=n.pos-a.nodeSize;t.setNodeMarkup(l,void 0,((i={})[cI]=n.node.attrs[cI],i))}return e(t)};return function(t,e){if(!Sj(t))return!1;if(e){var i=tF(t);e(sF(t.tr,i,i.top))}return!0}(t,i)},CH=function(t,e){return function(t,e){if(!Sj(t))return!1;if(e){var i=tF(t);e(sF(t.tr,i,i.bottom))}return!0}(t,e&&function(t){var i,n=kH(t.selection,"table_row");if(n&&n.node.attrs[cI]){var r=n.pos+n.node.nodeSize;t.setNodeMarkup(r,void 0,((i={})[cI]=n.node.attrs[cI],i))}return e(t)})};function EH(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function TH(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?EH(Object(i),!0).forEach((function(e){AH(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):EH(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function AH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var MH=t=>{for(var e,i={},n=t.attributes,r=0;r<n.length;r++)i[(e=n[r]).name]=e.value;return i},OH=(t,e)=>{var i={};for(var n in t)n&&null!==t[n]&&n!==e&&(i[n]=t[n]);return i},DH=()=>PH(["class","id","style"]),PH=t=>t.reduce(((t,e)=>TH(TH({},t),{},{[e]:{default:null}})),{});function RH(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function IH(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?RH(Object(i),!0).forEach((function(e){zH(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):RH(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function zH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}jF.table.attrs.class={default:"k-table"};var LH=IH(IH({},jF),{},{video:{attrs:IH({src:{default:null},controls:{},poster:{default:null},width:{default:null},height:{default:null}},DH()),group:"block",content:"source*",draggable:!0,parseDOM:[{tag:"video",getAttrs:MH}],toDOM:t=>["video",OH(t.attrs),0]},audio:{attrs:IH({controls:{},src:{default:null},width:{default:null},height:{default:null}},DH()),group:"block",content:"source*",draggable:!0,parseDOM:[{tag:"audio",getAttrs:MH}],toDOM:t=>["audio",OH(t.attrs),0]},iframe:{attrs:IH({src:{},width:{default:null},height:{default:null}},DH()),group:"block",draggable:!0,parseDOM:[{tag:"iframe",getAttrs:MH}],toDOM:t=>["iframe",OH(t.attrs)]},source:{attrs:{src:{default:null},type:{default:null}},inline:!0,group:"inline",parseDOM:[{tag:"source",getAttrs:MH}],toDOM:t=>["source",t.attrs]}}),BH=new jP({nodes:LH,marks:PF});function NH(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function jH(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?NH(Object(i),!0).forEach((function(e){FH(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):NH(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function FH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var VH=t=>(e,i)=>{QI(e,t)?JI(eL)(e,i):JI(t)(e,i)},HH={alignCenter:()=>VH(Qz),alignJustify:()=>VH(tL),alignLeft:()=>VH(Zz),alignRight:()=>VH(Jz),format:t=>{return e=t.value,function(t,n){var r=KI(t),o=t.schema.nodes,s=t.tr;s.setMeta("commandName",i),s.setMeta("args",{value:e}),r.forEach((function(t){if(t.type.isTextblock)if("p"===e){var i=t.attrs,n=i.level,r=SI(i,["level"]);GI(s,t,o.paragraph,r)}else if(/^h[1-6]$/i.test(e))n=parseInt(e.substr(1),10),GI(s,t,o.heading,kI({},t.attrs,{level:n}));else if("blockquote"===e){var a=t.attrs;n=a.level,r=SI(a,["level"]),GI(s,t,o.blockquote,r)}}));var a=s.docChanged;return a&&n(s.scrollIntoView()),a};var e,i},insertOrderedList:()=>Kz,insertUnorderedList:()=>Gz,outdent:()=>jz,indent:()=>Nz,insertImage:t=>{return e=t,function(t,i){var n=t.schema.nodes.image.createAndFill(e);AI(n)(t,(function(t){return i(t.setMeta("commandName","insertImage").setMeta("args",e))}))};var e},redo:()=>oV,undo:()=>rV,setHtml:t=>_I(t.value,"setHTML",{preserveWhitespace:!1}),insertHtml:t=>(t=>(e,i)=>{var n=document.createElement("div");n.innerHTML=t.value;var r=VP.fromSchema(BH).parse(n,{topNode:t.inline?BH.nodes.paragraph.create():null});r&&r.firstChild&&i(e.tr.replaceSelectionWith(r.firstChild,!1))})(t)},WH={insertTable:t=>(t=>(e,i)=>{var n=function(t,e,i){for(var n,r=t.table,o=t.table_row,s=t.table_cell,a=[],l=0;l<e+1;l++){n=[];for(var h=0;h<i+1;h++)n.push(s.createAndFill());a.push(o.createAndFill(void 0,n))}return r.createAndFill(void 0,a)}(e.schema.nodes,t.rows,t.cols);n&&AI(n,!0)(e,i)})(t),addColumnBefore:()=>iF,addColumnAfter:()=>nF,addRowBefore:()=>SH,addRowAfter:()=>CH,deleteRow:()=>lF,deleteColumn:()=>oF,mergeCells:()=>cF,splitCell:()=>pF,deleteTable:()=>fF},UH=jH(jH(jH({},{bold:()=>WI(lV),cleanFormatting:()=>{return t={except:BH.marks.link},e=(void 0===t?{}:t).except,i=void 0===e?[]:e,function(t,e){var n,r=t.tr;II(r,{except:(n=i,n instanceof Array?n:[n])}),r.docChanged&&e(r)};var t,e,i},createLink:t=>$I({mark:"link",attrs:t}),fontFamily:t=>UI({style:"font-family",value:t.value}),fontSize:t=>UI({style:"font-size",value:t.value}),insertFile:t=>$I({mark:"link",attrs:t}),insertText:t=>{return e=t,function(t,i){i(t.tr.insertText(e.text,e.from,e.to))};var e},italic:()=>WI(hV),strikethrough:()=>WI(pV),subscript:()=>WI(uV),superscript:()=>WI(dV),underline:()=>WI(cV),unlink:()=>qI(fV),foreColor:t=>UI({style:"color",value:t.value}),backColor:t=>UI({style:"background-color",value:t.value})}),HH),WH),qH=(t,e)=>{var i=t.enabled===e.enabled,n=!0;return n=t.hasOwnProperty("selectedValue")?t.selectedValue===e.selectedValue:t.selected===e.selected,i&&n},$H=(t,e)=>{var i=[...VI(t,{name:e,value:/^.+$/})];return 1===i.length?i[0]:null},GH=t=>t.selection instanceof Pj?null:function(t){return{tag:ZI(t)||""}}(t).tag,KH=t=>({alignCenter:{selected:QI(t,Qz),enabled:!0},alignJustify:{selected:QI(t,tL),enabled:!0},alignLeft:{selected:QI(t,Zz),enabled:!0},alignRight:{selected:QI(t,Jz),enabled:!0},bold:{selected:zI(t,lV),enabled:!0},cleanFormatting:{selected:!1,enabled:!t.selection.empty},format:{selectedValue:GH(t),enabled:!0},indent:{enabled:zz(t,BH.nodes.list_item)||Bz(t,sz)},insertOrderedList:{selected:YI(t,BH.nodes.ordered_list),enabled:!0},insertUnorderedList:{selected:YI(t,BH.nodes.bullet_list),enabled:!0},italic:{selected:zI(t,hV),enabled:!0},unlink:{enabled:zI(t,fV)},outdent:{enabled:Lz(t,az)||Iz(t,az.nodes)},redo:{enabled:oV(t)},strikethrough:{selected:zI(t,pV),enabled:!0},style:{selected:NI(t,BH.marks.style),enabled:!0},fontFamily:{selectedValue:$H(t,"font-family"),enabled:!0},fontSize:{selectedValue:$H(t,"font-size"),enabled:!0},foreColor:{selectedValue:$H(t,"color"),enabled:!0},backColor:{selectedValue:$H(t,"background-color"),enabled:!0},subscript:{selected:zI(t,uV),enabled:!0},superscript:{selected:zI(t,dV),enabled:!0},underline:{selected:zI(t,cV),enabled:!0},undo:{enabled:rV(t)},createLink:{enabled:!t.selection.empty||zI(t,fV)},insertFile:{enabled:!t.selection.empty},insertImage:{enabled:!0},viewSource:{enabled:!0},insertTable:{enabled:!0},addColumnBefore:{enabled:iF(t)},addColumnAfter:{enabled:nF(t)},addRowBefore:{enabled:SH(t)},addRowAfter:{enabled:CH(t)},deleteRow:{enabled:lF(t)},deleteColumn:{enabled:oF(t)},mergeCells:{enabled:cF(t)},splitCell:{enabled:pF(t)},deleteTable:{enabled:fF(t)}}),XH=t=>({createLink:()=>{var e=function(t,e){var i=BI(t,e),n=i.filter((function(t){return Boolean(t)}));return i.length===n.length?i[0]:void 0}(t.state,BH.marks.link);return{href:e?e.attrs.href:null,title:e?e.attrs.title:null,target:e?e.attrs.target:null}},insertImage:()=>{var e=function(t){if(t.selection instanceof qR)return t.selection.node}(t.state);return{src:e?e.attrs.src:null,alt:e?e.attrs.alt:null,width:e?e.attrs.width:null,height:e?e.attrs.height:null}},setHtml:()=>{return{value:(e=t.state,i=bI(e.doc),n=document.createElement("div"),n.appendChild(i),n.innerHTML)};var e,i,n}});function YH(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function ZH(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?YH(Object(i),!0).forEach((function(e){JH(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):YH(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function JH(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var QH="iframe",tW="undefined"!=typeof window&&/Firefox/.test(window.navigator.userAgent);class eW extends F{constructor(t,e){super(t,e),JH(this,"options",{editMode:QH,debounceDelay:100}),JH(this,"initialize",(()=>{this.initContent(),this.initEditor()})),this.extendOptions(e),this.iframeEditMode=this.options.editMode===QH,this.iframe=this.element.querySelector(".k-iframe"),this.div=this.element.querySelector(".k-content"),this.toolbar=this.element.querySelector(".k-toolbar"),this.bindEvents(),tW&&!this.shouldInitialize()||this.initialize()}bindEvents(){tW&&this.iframeEditMode&&this.iframe.addEventListener("load",this.initialize,!0),this.toolbar.addEventListener("mousedown",this.onToolBarMouseDown)}unbindEvents(){tW&&this.iframeEditMode&&this.iframe.removeEventListener("load",this.initialize,!0),this.toolbar.removeEventListener("mousedown",this.onToolBarMouseDown)}shouldInitialize(){return!this.iframeEditMode||"complete"===(this.iframe.contentDocument||this.iframe.contentWindow.document).readyState}initEditor(){var t=this.options.debounceDelay,e=[new sI({view:()=>({update:()=>{this.updateToolBarState()}}),key:new hI("toolbar-tools-update-plugin")}),new sI({view:()=>({update:wi(this.valueChanged,t).bind(this)}),key:new hI("value-changed-plugin")}),nV(),vL(gV(BH)),vL(mV(BH)),vL(Pz),dH(),eH(),vH(),bF(),HV()];this.valueContainer=this.element.querySelector("textarea");var i=iI.create({schema:BH,plugins:e,doc:VP.fromSchema(BH).parse(this.valueContainer)});this.view=new sj({mount:this.content},{state:i,transformPastedHTML:t=>this.options.pasteSettings?this.executePasteCleanup(t):t}),this.value=this.view.dom.innerHTML}initContent(){this.content=this.iframeEditMode?this.setupIframe():this.setupDiv()}setupIframe(){var t=this.iframe.contentWindow.document,e=t.createElement("meta");e.setAttribute("charset","utf-8"),t.head.appendChild(e);var i=t.createElement("style");i.appendChild(t.createTextNode('\nhtml, body {\n    margin: 0;\n    height: 100%;\n    padding: 0;\n}\n\nhtml {\n  min-height: 100%;\n}\n\nbody {\n  box-sizing: border-box;\n  position: relative;\n  padding: 8px;\n}\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\ndiv.ProseMirror {\n  position: relative;\n  min-height: 100%;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\ndiv.ProseMirror:focus {\n  outline: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-hideselection *::selection { background: transparent; }\n.ProseMirror-hideselection *::-moz-selection { background: transparent; }\n.ProseMirror-hideselection { caret-color: transparent; }\n\n.ProseMirror li {\n  position: relative;\n}\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px;\n  top: -2px;\n  bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.k-editor-resize-handles-wrapper {\n  position: absolute;\n  visibility: hidden;\n}\n\n.k-editor-resize-handle {\n  position: absolute;\n  visibility: visible;\n  background-color: #fff;\n  border: 1px solid #000;\n  z-index: 100;\n  width: 5px;\n  height: 5px;\n}\n\n.k-editor-resize-handle.northwest {\n  top: 0;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: nw-resize;\n}\n\n.k-editor-resize-handle.north {\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  cursor: n-resize;\n}\n\n.k-editor-resize-handle.northeast {\n  top: 0;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: ne-resize;\n}\n\n.k-editor-resize-handle.southwest {\n  left: 0;\n  bottom: 0;\n  transform: translate(-50%, 50%);\n  cursor: sw-resize;\n}\n\n.k-editor-resize-handle.south {\n  bottom: 0;\n  left: 50%;\n  transform: translate(-50%, 50%);\n  cursor: s-resize;\n}\n\n.k-editor-resize-handle.southeast {\n  right: 0;\n  bottom: 0;\n  transform: translate(50%, 50%);\n  cursor: se-resize;\n}\n\n.k-editor-resize-handle.west {\n  top: 50%;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: w-resize;\n}\n\n.k-editor-resize-handle.east {\n  top: 50%;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: e-resize;\n}\n\n.ProseMirror .tableWrapper {\n  overflow-x: auto;\n  margin: 1em 0;\n}\n\n.k-editor-resize-wrap-element {\n  display: inline-block;\n  position: relative;\n}\n\n.ProseMirror .row-resize-handle {\n  position: absolute;\n  right: 0; left: 0; bottom: 0;\n  transform: translate(0, 50%);\n  height: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror.resize-cursor-vertical {\n  cursor: sn-resize;\n  cursor: row-resize;\n}\n\n.k-editor-resize-wrap-element table td p,\n.k-editor-resize-wrap-element table th p {\n  margin: 0 auto;\n}\n\n.ProseMirror table {\n  margin: 0;\n  border-collapse: collapse;\n  table-layout: fixed;\n  width: 100%;\n  overflow: hidden;\n}\n\n.ProseMirror td, .ProseMirror th {\n  min-width: 1em;\n  border: 1px solid #ddd;\n  padding: 3px 5px;\n  vertical-align: top;\n  box-sizing: border-box;\n  position: relative;\n}\n\n.ProseMirror th {\n  font-weight: bold;\n  text-align: left;\n}\n\n.ProseMirror .column-resize-handle {\n  position: absolute;\n  right: -2px; top: 0; bottom: 0;\n  width: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror.resize-cursor {\n  cursor: ew-resize;\n  cursor: col-resize;\n}\n\n/* Give selected cells a blue overlay */\n.ProseMirror .selectedCell:after {\n  z-index: 2;\n  position: absolute;\n  content: "";\n  left: 0; right: 0; top: 0; bottom: 0;\n  background: rgba(200, 200, 255, 0.4);\n  pointer-events: none;\n}\n')),t.head.appendChild(i);var n=t.createElement("div");return t.body.appendChild(n),t.body.querySelector("div")}setupDiv(){return this.div}getDialogArgs(t){return XH(this.view)[t]()}exec(t){var e=t.commandName;UH[e](t)(this.view.state,this.view.dispatch,this.view),t.shouldFocusView&&this.view.focus()}focus(){this.view.focus()}setOptions(t){super.setOptions(t)}setValue(){_I(this.valueContainer.innerHTML)(this.view.state,this.view.dispatch),this.value=this.view.dom.innerHTML}updateToolBarState(){var{stateChanged:t,state:e}=((t,e)=>{var i=KH(t),n=Object.keys(e),r=!1;for(var o of n){var s=i[o],a=e[o];s&&a&&!qH(s,a)&&(r=!0,e[o]=s)}return{stateChanged:r,state:e}})(this.view.state,this.options.toolStates);t&&(this.options.toolStates=e,this.invokeToolBarUpdate(e))}onToolBarMouseDown(t){rt(t.target,".k-button",!0)&&t.preventDefault()}executePasteCleanup(t){var e=this.options.pasteSettings,i=this.getPasteCleanupAttributes(),n=function(t){return(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/^[\s\S]+?<!--StartFragment-->\s*([\s\S]*?)\s*<!--EndFragment-->[\s\S]+$/,"$1")).replace(/<\/?[ovw]:[^>]*?>/gi,"")).replace(/<\\?\??xml[^>]*>/gi,"")).replace(/<(?:link|meta) [^>]+?>/gi,"")).replace(/<style[^>]*?>\s*<\/style>/gi,"")).replace(/<\/?st1:.*?>/gi,"")).replace(/<a name="[a-zA-Z0-9_]+">/gim,"")).replace(/v:shapes?="[^"]+"/gi,"")).replace(/<!\[if !supportLists\]>/gi,"")).replace(/<!\[endif\]>/gi,"")}(t);return e.removeComments&&(n=function(t){return t.replace(/<!--[\s\S]+?-->/g,"")}(n)),PV(n,{convertMsLists:e.convertMsLists,stripTags:e.stripTags?e.stripTags.join("|"):[],attributes:i})}getPasteCleanupAttributes(){var t=this.options.pasteSettings,e={};return t.removeAllAttributes?{"*":TV}:(t.removeMsStyles&&(e.style=DV),t.removeMsClasses&&(e.class=AV),t.removeAttributes.reduce(((t,e)=>ZH(ZH({},t),{},{[e]:TV})),e))}valueChanged(){(function(t,e,i,n){var r=HD.from(xI(t,i,n)),o=HD.from(xI(e,i,n));return r.eq(o)})(this.view.dom.innerHTML,this.value,BH)||(this.value=this.view.dom.innerHTML,this.invokeValueChanged())}invokeToolBarUpdate(t){this.invokeMethodAsync(this.options.jsinterop.updateToolBarState,t)}invokeValueChanged(){this.invokeMethodAsync(this.options.jsinterop.valueChanged,this.value)}destroy(){super.destroy(),this.unbindEvents(),this.view.destroy(),this.content=this.view=this.iframe=this.div=null}}function iW(t,e){Ft(eW,t,e)}class nW extends F{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,jsinterop:{}}),this.extendOptions(e)}focusEntryNameEditor(){Q((()=>{var t=this.element.querySelector(".k-listview-item.k-edit-item"),e=this.element.querySelector(".k-grid-edit-row"),i=t||e;if(f(i)){var n=at(i);if(!f(n))return;y(n.select)&&n.select(),y(n.focus)&&n.focus()}}))}saveFile(t){var{fileName:e,dataUrl:i}=t;e&&i&&E(e,i)}}function rW(t,e){Ft(nW,t,e)}function oW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var sW="focus",aW="focusout";class lW extends F{constructor(t,e){super(t,e),oW(this,"options",{dotNetInstance:null}),oW(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),oW(this,"onFocus",(()=>{this.invokeFocus()})),oW(this,"onFocusOut",(()=>{this.invokeFocusOut()})),this.extendOptions(e),this.bindEvents(),this.initNavigationService()}bindEvents(){this.element.addEventListener(sW,this.onFocus),this.element.addEventListener(aW,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(sW,this.onFocus),this.element.removeEventListener(aW,this.onFocusOut)}initNavigationService(){this.navigationService=new oe(this.element),this.navigationService.bind("".concat(ie.ALT," ").concat(ee.ARROWDOWN),this.onKeyDown)}destroy(){this.disableTabKeyTrap(),this.navigationService.destroy(),super.destroy()}enableTabKeyTrap(t){if(this.options.navigable){var e=q(t);this.formKeyTrap=new pe(e),this.formKeyTrap.enableKeyTrap()}}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.focusout)}}function hW(t,e){Ft(lW,t,e)}function cW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class pW extends F{constructor(t,e){super(t,e),cW(this,"options",{dotNetInstance:null,jsinterop:{}}),cW(this,"onTimeLineScroll",(()=>{this.timelineHeader.scrollLeft=this.timelineContent.scrollLeft,this.treeListContent.scrollTop=this.timelineContent.scrollTop})),cW(this,"onTreeListWheelFF",(t=>{this.onTreeListScroll(t,-40*t.detail)})),cW(this,"onTreeListWheel",(t=>{this.onTreeListScroll(t,t.wheelDelta)})),cW(this,"onTreeListScroll",((t,e)=>{if(this.timelineContent){var i=this.timelineContent.scrollTop-e;this.timelineContent.scrollTop=i}else{var n=this.treeListContent.scrollTop-e;this.treeListContent.scrollTop=n}t.preventDefault()})),this.extendOptions(e),this.timelineContent=this.element.querySelector(".k-gantt-timeline .k-grid-content"),this.timelineHeader=this.element.querySelector(".k-gantt-timeline .k-grid-header-wrap"),this.treeListContent=this.element.querySelector(".k-gantt-treelist .k-grid-content"),this.unifyFilterRowHeight(),this.setTreeListHeight(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.timelineContent&&this.timelineContent.addEventListener("scroll",this.onTimeLineScroll),ue.firefox?this.treeListContent.addEventListener("DOMMouseScroll",this.onTreeListWheelFF):this.treeListContent.addEventListener("wheel",this.onTreeListWheel)}unbindEvents(){this.timelineContent&&this.timelineContent.removeEventListener("scroll",this.onTimeLineScroll),ue.firefox?this.treeListContent.removeEventListener("DOMMouseScroll",this.onTreeListWheelFF):this.treeListContent.removeEventListener("wheel",this.onTreeListWheel)}unifyFilterRowHeight(){var t=this.element.querySelector(".k-gantt-timeline .k-filter-row"),e=this.element.querySelector(".k-gantt-treelist .k-filter-row");e&&t&&(t.style.height="".concat(e.offsetHeight,"px"))}setTreeListHeight(){var t=this.element.querySelector(".k-gantt-treelist"),e=t.querySelector(".k-grid-header");this.treeListContent.style.height=t.offsetHeight-e.offsetHeight+"px"}}function uW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class dW extends F{constructor(t,e){super(t,e),uW(this,"options",{dotNetInstance:null,jsinterop:{moveTask:"",updatePercentComplete:"",getDragTaskTooltipDates:"",createDependency:""}}),uW(this,"renderMoveHints",(()=>{this.moveTarget&&(this.destroyHint(),this.destroyTooltip(),this.hint=this.createHint(),this.tooltip=this.createTooltip(),this.tooltipContent=this.tooltip.querySelector(".k-tooltip-content"),this.getContentElement().appendChild(this.hint),this.getContentElement().appendChild(this.tooltip))})),uW(this,"createHint",(()=>{var t=document.createElement("div");t.className="k-marquee k-gantt-marquee",t.style.top="0px",t.style.height=this.getTablesWrapperElement().getBoundingClientRect().height+"px",t.style.left=this.originalLeft+"px",t.style.width=this.originalWidth+"px";var e=document.createElement("div");return e.className="k-marquee-color",t.appendChild(e),t})),uW(this,"destroyHint",(()=>{this.hint&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)})),uW(this,"createTooltip",(()=>{var t=document.createElement("div");t.className="k-tooltip k-gantt-resize-hint",t.style.zIndex="100002",t.style.minWidth="160px";var e=document.createElement("div");return e.className="k-tooltip-content",t.appendChild(e),t})),uW(this,"destroyTooltip",(()=>{this.tooltip&&(this.tooltip.parentNode.removeChild(this.tooltip),this.tooltip=null,this.tooltipContent=null)})),uW(this,"renderPercentDragTooltip",(()=>{this.destroyPercentDragTooltip(),this.percentDragTooltip=this.createPercentDragTooltip(),this.element.appendChild(this.percentDragTooltip)})),uW(this,"createPercentDragTooltip",(()=>{var t=document.createElement("div");t.className="k-tooltip",t.style.zIndex="100002";var e=document.createElement("div");e.className="k-tooltip-content",t.appendChild(e);var i=document.createElement("div");return i.className="k-callout k-callout-s",t.appendChild(i),t})),uW(this,"destroyPercentDragTooltip",(()=>{this.percentDragTooltip&&(this.percentDragTooltip.parentNode.removeChild(this.percentDragTooltip),this.percentDragTooltip=null)})),uW(this,"renderDependencyDragHint",(()=>{this.destroyDependencyDragHint(),this.dependencyDragHint=this.createDependencyDragHint(),this.element.querySelector(".k-gantt-dependencies-svg").appendChild(this.dependencyDragHint)})),uW(this,"createDependencyDragHint",(()=>{var t=document.createElementNS("http://www.w3.org/2000/svg","polyline");return t.style.fill="none",t.style.stroke="black",t.style.strokeWidth="2",t})),uW(this,"destroyDependencyDragHint",(()=>{this.dependencyDragHint&&(this.dependencyDragHint.parentNode.removeChild(this.dependencyDragHint),this.dependencyDragHint=null)})),uW(this,"getContentElement",(()=>this.element.querySelector(".k-grid-content"))),uW(this,"getTablesWrapperElement",(()=>this.getContentElement().querySelector(".k-gantt-tables"))),uW(this,"getRowHeight",(()=>this.element.querySelector(".k-gantt-tables tr").getBoundingClientRect().height)),uW(this,"getMilestoneWidth",(()=>{var t=B('<div class="k-task-wrap k-milestone-wrap">\n                <div class="k-task k-task-milestone" >\n                </div>\n            </div>');this.getTablesWrapperElement().appendChild(t);var e=t.querySelector(".k-task").getBoundingClientRect().width;return t.parentNode.removeChild(t),e})),this.extendOptions(e),this.bindEvents(),this.createMovable()}destroy(){this.unbindEvents(),this.destroyMovable(),super.destroy()}bindEvents(){}unbindEvents(){}createMovable(){this.destroyMovable(),this.movable=new Je({press:this.onMovableDragStart.bind(this),drag:this.onMovableDrag.bind(this),release:this.onMovableDrop.bind(this),mouseOnly:!0}),this.movable.bindTo(this.element)}destroyMovable(){this.movable&&this.movable.destroy&&this.movable.destroy(),this.moveTarget=null}onMovableDragStart(t){this.moveTarget=null,this.dragStarted=!1;var e=t.originalEvent.target;e&&(e.closest(".k-task")?this.onTaskDragStart(t):e.closest(".k-task-dot")?this.onDependencyDragStart(t):e.closest(".k-task-draghandle")&&this.onPercentDragStart(t))}onTaskDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task"),this.resizeTask=!0,this.resizeStart=Boolean(e.closest(".k-resize-w")),this.resizeEnd=Boolean(e.closest(".k-resize-e"));var i=this.moveTarget.getBoundingClientRect();this.originalLeft=this.currentLeft=i.left-this.getTablesWrapperElement().getBoundingClientRect().left,this.originalWidth=this.currentWidth=i.width,this.originalTaskMouseOffset=t.clientX-i.left}onDependencyDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task-dot");var i=this.moveTarget.getBoundingClientRect(),n=this.getTablesWrapperElement().getBoundingClientRect(),r=n.x,o=n.y;this.dependencyDragOptions={predecessorIndex:this.getTaskIndex(e),fromStart:Y("k-task-start",this.moveTarget),startX:i.x+i.width/2-r,startY:i.y+i.height/2-o}}onPercentDragStart(t){var e=t.originalEvent.target;this.moveTarget=e.closest(".k-task-draghandle");var i=this.moveTarget.parentElement.querySelector(".k-task");this.percentCompleteBarElement=i.querySelector(".k-task-complete");var n=i.getBoundingClientRect();this.maxPercentWidth=n.width,this.originalWidth=this.currentWidth=t.clientX-n.left,this.originalLeft=t.clientX}onMovableDrag(t){if(this.moveTarget)return this.dragStarted?void(this.resizeTask?this.onTaskDrag(t):this.dependencyDragOptions?this.onDependencyDrag(t):this.onPercentDrag(t)):(this.dragStarted=!0,void(this.resizeTask?this.renderMoveHints():this.dependencyDragOptions?this.renderDependencyDragHint():this.renderPercentDragTooltip()))}onTaskDrag(t){var e=t.clientX-this.getTablesWrapperElement().getBoundingClientRect().left;e<0&&(e=0),this.resizeStart?(this.currentLeft=e,this.currentLeft>this.originalLeft+this.originalWidth&&(this.currentLeft=this.originalLeft+this.originalWidth)):this.resizeEnd||(this.currentLeft=e-this.originalTaskMouseOffset),this.resizeStart?this.currentWidth=this.originalWidth+this.originalLeft-e:this.resizeEnd&&(this.currentWidth=e-this.originalLeft),this.currentWidth<0&&(this.currentWidth=0),this.invokeMethodAsync(this.options.jsinterop.getDragTaskTooltipDates,{start:this.currentLeft,end:this.currentLeft+this.currentWidth}).then((t=>{if(this.dragStarted){this.tooltipContent.innerHTML="<div>Start: "+t.start+"</div><div>End: "+t.end+"</div>";var e=this.currentLeft-this.tooltip.getBoundingClientRect().width/2;this.resizeEnd&&(e+=this.currentWidth),e<0&&(e=0),this.tooltip.style.left=e+"px";var i=this.moveTarget.getBoundingClientRect().top-this.getTablesWrapperElement().getBoundingClientRect().top,n=this.tooltip.getBoundingClientRect().height;i-n<0?i+=this.moveTarget.getBoundingClientRect().height:i-=n,this.tooltip.style.top=i+"px",this.hint.style.left=this.currentLeft+"px",this.hint.style.width=this.currentWidth+"px"}}))}onDependencyDrag(t){var e=this.getTablesWrapperElement().getBoundingClientRect(),i=e.x,n=e.y;if(!this.dependencyDragOptions.startX){var r=this.moveTarget.getBoundingClientRect();this.dependencyDragOptions.startX=r.x+r.width/2-i,this.dependencyDragOptions.startY=r.y+r.height/2-n}var o=t.clientX-i,s=t.clientY-n;this.dependencyDragHint.setAttribute("points","".concat(this.dependencyDragOptions.startX,",").concat(this.dependencyDragOptions.startY," ").concat(o,",").concat(s))}onPercentDrag(t){var e=this.element.getBoundingClientRect(),i=this.moveTarget.parentElement.querySelector(".k-task").getBoundingClientRect(),n=this.percentDragTooltip.getBoundingClientRect(),r=this.originalWidth+(t.clientX-this.originalLeft);if(!(r<0||r>this.maxPercentWidth)){this.currentWidth=r;var o=Math.round(this.currentWidth/this.maxPercentWidth*100);this.moveTarget.style.left=this.currentWidth+"px",this.percentCompleteBarElement.style.width=this.currentWidth+"px",this.percentDragTooltip.querySelector(".k-tooltip-content").textContent=o+"%",this.percentDragTooltip.style.left=t.clientX-e.left-n.width/2+"px",this.percentDragTooltip.style.top=i.top-e.top-n.height-6+"px"}}onMovableDrop(t){if(this.destroyHint(),this.destroyTooltip(),this.destroyPercentDragTooltip(),this.destroyDependencyDragHint(),this.dragStarted)if(this.resizeTask)this.invokeMethodAsync(this.options.jsinterop.moveTask,{resizeStart:this.resizeStart,resizeEnd:this.resizeEnd,left:this.currentLeft,right:this.currentLeft+this.currentWidth});else if(this.dependencyDragOptions){var e=this.getElementUnderCursor(t);e.closest(".k-task-dot")&&this.invokeMethodAsync(this.options.jsinterop.createDependency,{predecessorIndex:this.dependencyDragOptions.predecessorIndex,fromStart:this.dependencyDragOptions.fromStart,successorIndex:this.getTaskIndex(e),toStart:Y("k-task-start",e.closest(".k-task-dot"))})}else{var i=Math.round(this.currentWidth/this.maxPercentWidth*100)/100;this.invokeMethodAsync(this.options.jsinterop.updatePercentComplete,i)}this.dragStarted=!1,this.moveTarget=null,this.resizeTask=this.resizeStart=this.resizeEnd=!1,this.dependencyDragOptions=null}getTaskIndex(t){return parseInt(t.closest(".k-task-wrap").getAttribute("data-index"))}getElementUnderCursor(t){return document.elementFromPoint(t.clientX,t.clientY)}}function fW(t,e){Ft(pW,t,e)}function vW(t,e){Ft(dW,t,e)}var mW=t=>"".concat(parseFloat(t),"px");class gW extends _A{constructor(t,e,i,n){super(t,e,i,n),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return kk}setOptions(t){super.setOptions(t),this.showCenterLabel()}getCenterLabel(){return this.element.querySelector(".k-arcgauge-label")}showCenterLabel(){var t=this.getCenterLabel();if(t){var e=this.getCenterLabelPosition();t.style.top=mW(e.top),t.style.left=mW(e.left),t.style.display=""}}getCenterLabelPosition(){var t=this.getCenterLabel(),e={top:0,left:0};if(t){var i=t.style.display;t.style.visibility="hidden",t.style.display="block",e=this.getLabelPositionFromGauge(),t.style.display=i,t.style.visibility=""}return e}getLabelPositionFromGauge(){var t=this.getCenterLabel(),e=t?t.offsetWidth:0,i=t?t.offsetHeight:0,n=this.widget.centerLabelPosition(e,i);return{top:n.top,left:n.left}}}function yW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class bW extends yA{constructor(){super(...arguments),yW(this,"store",{}),yW(this,"loaded",!1),yW(this,"element",null)}reset(){this.loaded=!1}getThemeOptions(){return this.store}loadTheme(){this.loaded||(this.readTheme(),this.loaded=!0)}createElement(){var t=this.element=document.createElement("div");t.style.display="none",t.innerHTML='\n    <div class="k-var--gauge-pointer"></div>\n    <div class="k-var--gauge-track"></div>\n    <div class="k-var--normal-text-color"></div>\n',document.body.appendChild(t)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}readTheme(){this.createElement();try{var t=this.queryColor("gauge-pointer"),e=this.queryColor("gauge-track"),i=this.queryColor("normal-text-color");this.store={pointer:{color:t},scale:{labels:{color:i},rangePlaceholderColor:e,minorTicks:{color:i},majorTicks:{color:i},line:{color:i}}}}finally{this.destroyElement()}}setStyle(t,e){this.set(t,e)}queryColor(t){return this.queryStyle(t).backgroundColor}queryStyle(t){var e=this.element.querySelector(".k-var--".concat(t));return window.getComputedStyle(e)}}function wW(t){var{id:e="",widgetOptions:i={},componentOptions:n={},componentConstructor:r}=t;kA({id:e,widgetOptions:i,componentOptions:n,services:{themeService:new bW,intlService:Io},componentConstructor:r})}function xW(t,e,i){wW({id:t,widgetOptions:e,componentOptions:i,componentConstructor:gW})}class _W extends gW{getWidgetConstructor(){return Ck}getCenterLabel(){return this.element.querySelector(".k-circulargauge-label")}}function kW(t,e,i){wW({id:t,widgetOptions:e,componentOptions:i,componentConstructor:_W})}class SW extends _A{constructor(t,e,i,n){super(t,e,i,n),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return Y_}}function CW(t,e,i){wW({id:t,widgetOptions:e,componentOptions:i,componentConstructor:SW})}class EW extends _A{constructor(t,e,i,n){super(t,e,i,n),this.extendOptions(e),this.initWidget()}getWidgetConstructor(){return vk}}function TW(t,e,i){wW({id:t,widgetOptions:e,componentOptions:i,componentConstructor:EW})}class AW extends gi{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!1},componentSelector:".k-grid",jsinterop:{removeFocus:"",blur:"",rowDrop:""}}),this.extendOptions(e)}destroy(){super.destroy()}}function MW(t,e){Ft(AW,t,e)}function OW(t){Vt(t)}function DW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var PW,RW="focusout";class IW extends F{constructor(t,e){super(t,e),DW(this,"options",{dotNetInstance:null,jsinterop:{focusout:""}}),DW(this,"onFocusOut",(()=>{this.invokeMethodAsync(this.options.jsinterop.focusout)})),this.extendOptions(e),this.bindEvents()}bindEvents(){this.element.addEventListener(RW,this.onFocusOut)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener(RW,this.onFocusOut)}focus(){this.element.focus()}}function zW(t,e){Ft(IW,t,e)}!function(t){t[t.Literal=0]="Literal",t[t.Mask=1]="Mask",t[t.Undefined=2]="Undefined"}(PW||(PW={}));var LW=function(){function t(t,e,i){void 0===i&&(i=PW.Undefined),this.value=t,this.rest=e,this.type=i}return t.prototype.map=function(e){return new t(e(this.value),this.rest)},t.prototype.chain=function(t){return t(this.value,this.rest)},t.prototype.fold=function(t,e){return t(this.value,this.rest)},t.prototype.concat=function(t){return this.map((function(e,i){return t.chain((function(t,i){return e.concat([t])}))}))},t.prototype.toString=function(){return"Result({ value: '"+this.value+"', rest: "+this.rest+" })"},t}(),BW=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.input=t,this.control=e,this.inputCursor=0,this.controlCursor=0}return t.prototype.eof=function(){return this.inputCursor>=this.input.length},t.prototype.next=function(){return{char:this.input[this.inputCursor++],control:this.control[this.controlCursor++]}},t.prototype.peek=function(){return{char:this.input[this.inputCursor],control:this.control[this.controlCursor]}},t.prototype.eat_input=function(){this.inputCursor++},t.prototype.eat_control=function(){this.controlCursor++},t.prototype.eat=function(){this.inputCursor++,this.controlCursor++},t}(),NW=function(t){return(t||"").split("")},jW=function(){function t(t){this.parse=t}return t.prototype.run=function(t,e){return void 0===e&&(e=""),t instanceof BW?this.parse(t):this.parse(new BW(NW(t),NW(e)))},t.prototype.map=function(e){var i=this;return new t((function(t){return i.parse(t).map(e)}))},t.prototype.chain=function(e){var i=this;return new t((function(t){return i.parse(t).chain((function(t,i){return e(t).run(i)}))}))},t.prototype.isLiteral=function(t){return this.run(t).type===PW.Literal},t}(),FW=function(t,e){return new jW((function(i){var n=i.next().char,r=t[n];return"\\"===n?(n=i.next().char,new LW(e.literal(n),i)):new LW(r?e.mask(r):e.literal(n),i)}))},VW=function(t){var e=t.prompt,i=t.promptPlaceholder;return new jW((function(t){var n=t.next().char;return new LW(n===e?i:n,t)}))},HW=function(t){return new jW((function(e){var i=e.next().char;return new LW(t?i:"",e)}))},WW=function(t){return t.reduce((function(t,e){return i=e,t.chain((function(t){return i.map((function(e){return t.concat([e])}))}));var i}),(e=[],new jW((function(t){return new LW(e,t)}))));var e},UW=function(t){return new jW((function(e){for(var i=new LW([],e);!e.eof();)i=i.concat(t.run(e));return i}))},qW=function(){function t(){this.rules={},this.prompt="_",this.mask="",this.promptPlaceholder=" ",this.includeLiterals=!1,this.maskTokens=[],this.unmaskTokens=[],this.rawTokens=[],this.validationTokens=[]}return t.prototype.update=function(t){var e=t.mask,i=void 0===e?"":e,n=t.prompt,r=void 0===n?"":n,o=t.promptPlaceholder,s=void 0===o?" ":o,a=t.rules,l=void 0===a?{}:a,h=t.includeLiterals,c=void 0!==h&&h;this.mask=i,this.prompt=r,this.promptPlaceholder=s,this.rules=l,this.includeLiterals=c,this.tokenize()},t.prototype.validationValue=function(t){void 0===t&&(t="");var e=t;return WW(this.validationTokens).run(t).fold((function(t){e=t.join("")})),e},t.prototype.rawValue=function(t){void 0===t&&(t="");var e=t;return this.rawTokens.length?(WW(this.rawTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskRaw=function(t){void 0===t&&(t="");var e=t;return this.maskTokens.length?(WW(this.maskTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskInput=function(t,e,i){return t.length<e.length?this.maskRemoved(t,e,i):this.maskInserted(t,e,i)},t.prototype.maskInRange=function(t,e,i,n){var r="",o=n,s=e.split("").slice(0,i),a=e.split("").slice(n);return WW(this.maskTokens.slice(i,n)).run(t).fold((function(t){r=s.concat(t).concat(a).join("")})),{selection:o,value:r}},t.prototype.maskRemoved=function(t,e,i){var n=this,r="",o=i,s=t.split("").slice(i),a=t.split("").slice(0,i).join(""),l=this.maskTokens.length-(t.length-i);return WW(this.maskTokens.slice(0,l)).run(a,e).fold((function(t){o=n.adjustPosition(t,o),r=t.concat(s).join("")})),{selection:o,value:r}},t.prototype.adjustPosition=function(t,e){var i=t[e];return this.maskTokens[e].isLiteral(i)||i===this.prompt?e:e+1},t.prototype.maskInserted=function(t,e,i){var n=this,r="",o=i,s=t.slice(0,i);return WW(this.unmaskTokens).run(s,e).chain((function(t){o=t.join("").length;var i=e.slice(o);return WW(n.maskTokens).run(t.join("")+i,e)})).fold((function(t){r=t.join("")})),{selection:o,value:r}},Object.defineProperty(t.prototype,"maskTokenCreator",{get:function(){var t=this.prompt,e=this.promptPlaceholder;return{literal:function(t){return e=t,new jW((function(t){return t.peek().char===e?(t.eat(),new LW(e,t,PW.Literal)):new LW(e,t,PW.Literal)}));var e},mask:function(i){return function(t){var e=t.prompt,i=t.promptPlaceholder;return function(t){return new jW((function(n){for(;!n.eof();){var r=n.peek(),o=r.char,s=r.control;if(o===s&&s===e)return n.eat(),new LW(e,n,PW.Mask);if(t.test(o))return n.eat(),new LW(o,n,PW.Mask);if(o===i)return n.eat(),new LW(e,n,PW.Mask);n.eat_input()}return n.eat(),new LW(e,n,PW.Mask)}))}}({prompt:t,promptPlaceholder:e})(i)}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unmaskTokenCreator",{get:function(){var t=this;return{literal:function(t){return e=t,new jW((function(t){return t.eof()?new LW("",t):(t.peek().char===e&&t.eat(),new LW(e,t))}));var e},mask:function(e){return(i=t.prompt,function(t){return new jW((function(e){for(;!e.eof();){var n=e.peek(),r=n.char,o=n.control;if(r===i&&o===i)return e.eat(),new LW(r,e);if(t.test(r))return e.eat(),new LW(r,e);e.eat_input()}return e.eat(),new LW("",e)}))})(e);var i}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawTokenCreator",{get:function(){var t=this,e=t.prompt,i=t.promptPlaceholder,n=t.includeLiterals;return{literal:function(t){return HW(n)},mask:function(t){return VW({prompt:e,promptPlaceholder:i})}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validationTokenCreator",{get:function(){var t=this.prompt;return{literal:function(t){return HW(!1)},mask:function(e){return VW({prompt:t,promptPlaceholder:""})}}},enumerable:!0,configurable:!0}),t.prototype.tokenize=function(){var t=this;UW(FW(this.rules,this.maskTokenCreator)).run(this.mask).fold((function(e,i){t.maskTokens=e})),UW(FW(this.rules,this.unmaskTokenCreator)).run(this.mask).fold((function(e,i){t.unmaskTokens=e})),UW(FW(this.rules,this.rawTokenCreator)).run(this.mask).fold((function(e,i){t.rawTokens=e})),UW(FW(this.rules,this.validationTokenCreator)).run(this.mask).fold((function(e,i){t.validationTokens=e}))},t}();function $W(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class GW extends F{constructor(t,e){super(t,e),$W(this,"defaultRules",{"#":/[\d\s\+\-]/,"&":/[\S]/,0:/[\d]/,9:/[\d\s]/,"?":/[a-zA-Z\s]/,A:/[a-zA-Z0-9]/,C:/./,L:/[a-zA-Z]/,a:/[a-zA-Z0-9\s]/}),$W(this,"options",{dotNetInstance:null,includeLiterals:!1,mask:"",prompt:"",promptPlaceholder:"",maskOnFocus:!1,rules:this.defaultRules,value:"",debounceDelay:150,jsinterop:{blur:"",updateValue:"",change:""}}),$W(this,"state",{selection:[0,0],isPasted:!1,shouldFocusOnClick:!1,service:null,isFocused:!1,maskedValue:"",value:""}),$W(this,"onFocus",(()=>{this.state.isFocused=!0,this.options.maskOnFocus&&this.isMaskEmpty()&&(this.updateInput(this.state.service.maskRaw(this.state.value)),this.setSelection(0,0)),this.invokeFocus()})),$W(this,"onPaste",(t=>{var{selectionStart:e,selectionEnd:i}=t.target;i!==e&&(this.state.isPasted=!0,this.state.selection=[e,i])})),$W(this,"onBlur",(()=>{this.state.isFocused=!1,this.state.shouldFocusOnClick=!1,this.options.maskOnFocus&&this.isMaskEmpty()&&this.updateInput(this.state.maskedValue),this.invokeBlur()})),$W(this,"onClick",(()=>{if(this.state.isFocused&&!this.state.shouldFocusOnClick){this.state.shouldFocusOnClick=!0;var{selectionStart:t,selectionEnd:e}=this.element;t===e&&this.setFocusSelection()}})),$W(this,"onInput",(t=>{var e,i=t.target.value,[n,r]=this.state.selection;if(!this.options.mask)return this.updateComponentValue(i),void(this.state.isPasted=!1);if(this.state.isPasted){this.state.isPasted=!1;var o=this.state.maskedValue.length-r,s=i.length-o;e=this.state.service.maskInRange(i.slice(n,s),this.state.maskedValue,n,r)}else e=this.state.service.maskInput(i,this.state.maskedValue,t.target.selectionStart);this.updateInput(e.value,e.selection),this.debounceUpdateComponentValue(e.value)})),this.extendOptions(e),this.bindEvents(),this.state.service=new qW,this.updateService(),this.setValue(this.options.value),this.setInputDebounceCallback()}bindEvents(){this.element.addEventListener("blur",this.onBlur),this.element.addEventListener("input",this.onInput),this.element.addEventListener("focus",this.onFocus),this.element.addEventListener("click",this.onClick),this.element.addEventListener("paste",this.onPaste)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener("blur",this.onBlur),this.element.removeEventListener("input",this.onInput),this.element.removeEventListener("focus",this.onFocus),this.element.removeEventListener("click",this.onClick),this.element.removeEventListener("paste",this.onPaste)}focus(){this.element.focus()}updateService(){this.state.service.update({includeLiterals:this.options.includeLiterals,mask:this.options.mask,prompt:this.options.prompt,promptPlaceholder:this.options.promptPlaceholder,rules:this.options.rules})}setOptions(t){var e=this.options.promptPlaceholder,i=this.options.includeLiterals;this.extendOptions(t),this.setInputDebounceCallback(),this.updateService(),this.setValue(this.options.value),e===this.options.promptPlaceholder&&i===this.options.includeLiterals||this.updateComponentValue(this.state.maskedValue)}updateComponentValue(t){this.options.mask&&!this.state.service.validationValue(t)?this.state.value="":this.state.value=this.state.service.rawValue(t),this.invokeUpdate(this.state.value)}setValue(t){if(this.state.value=t,this.options.mask){var e=this.state.service.maskRaw(this.state.value);this.updateInput(e)}else this.updateInput(this.state.value)}setFocusSelection(){var t=this.element.selectionStart,e=this.state.maskedValue?this.state.maskedValue.indexOf(this.options.prompt):0;e>=0&&e<t&&(this.state.selection=[e,e],this.setSelection())}updateInput(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this.state.maskedValue=t;var i=this.shouldResetValue()?"":t;this.element.value=i,void 0!==e&&this.setSelection(e,e)}setSelection(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.selection[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.selection[1];this.state.isFocused&&this.element.setSelectionRange(t,e)}isMaskEmpty(){return this.state.service.maskRaw()===this.state.maskedValue}shouldResetValue(){return this.options.maskOnFocus&&!this.state.isFocused&&this.isMaskEmpty()}invokeBlur(){this.invokeMethodAsync(this.options.jsinterop.blur)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeUpdate(t){this.invokeMethodAsync(this.options.jsinterop.updateValue,t)}setInputDebounceCallback(){this.debounceUpdateComponentValue=wi(this.updateComponentValue,this.options.debounceDelay).bind(this)}}function KW(t,e){Ft(GW,t,e)}function XW(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var YW="k-spinner-increase",ZW="k-spinner-decrease",JW=[te.ARROWDOWN,te.ARROWUP];class QW extends F{constructor(t,e){super(t,e),XW(this,"options",{dotNetInstance:null,decimals:0,separator:"\\.",min:null,max:null,value:"",jsinterop:{blur:""}}),XW(this,"onKeyDown",(t=>{JW.includes(t.keyCode)&&t.preventDefault()})),this.setOptions(e),this.upArrowElement=t.parentElement.getElementsByClassName(YW)[0],this.downArrowElement=t.parentElement.getElementsByClassName(ZW)[0],this.bindEvents()}setOptions(t){this.extendOptions(t),this.element.value=this.options.value}bindEvents(){this.onKeyPress=this.onKeyPress.bind(this),this.onPaste=this.onPaste.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onBlur=this.onBlur.bind(this),this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("keypress",this.onKeyPress),this.element.addEventListener("paste",this.onPaste),this.element.addEventListener("blur",this.onBlur),this.upArrowElement&&this.upArrowElement.addEventListener("mousedown",this.onMouseDown),this.downArrowElement&&this.downArrowElement.addEventListener("mousedown",this.onMouseDown)}destroy(){this.unbindEvents(),super.destroy(),this.upArrowElement=null,this.downArrowElement=null}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("keypress",this.onKeyPress),this.element.removeEventListener("paste",this.onPaste),this.element.removeEventListener("blur",this.onBlur),this.upArrowElement&&this.upArrowElement.removeEventListener("mousedown",this.onMouseDown),this.downArrowElement&&this.downArrowElement.removeEventListener("mousedown",this.onMouseDown)}focus(){this.element.focus()}onKeyPress(t){var e=String.fromCharCode(t.which);this.isValid(e)||t.keyCode===te.ENTER||t.preventDefault()}onPaste(t){this.isValid(t.clipboardData.getData("text/plain"))||t.preventDefault()}onMouseDown(t){t.preventDefault(),document.activeElement!==this.element&&this.element.focus()}onBlur(){var t=this.options.jsinterop.blur;this.invokeMethodAsync(t)}numericRegex(){var t=this.options.separator,e=this.options.decimals,i="{0,"+e+"}";return e?new RegExp("^(-)?(((\\d+(["+t+"]\\d"+i+")?)|(["+t+"]\\d"+i+")))?$"):/^(-)?(\d*)$/}caret(){return[this.element.selectionStart,this.element.selectionEnd]}isValid(t){var e=this.element.value,i=this.caret();return e=e.substring(0,i[0])+t+e.substring(i[1]),!!this.numericRegex().test(e)}}function tU(t,e){Ft(QW,t,e)}class eU extends F{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,jsinterop:{blur:""}}),this.extendOptions(e),this.bindEvents()}bindEvents(){this.onBlur=this.onBlur.bind(this),this.element.addEventListener("blur",this.onBlur)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener("blur",this.onBlur)}focus(){this.element.focus()}onBlur(){var t=this.options.jsinterop.blur;this.invokeMethodAsync(t)}}class iU extends eU{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{autoSize:!1,debounceDelay:150,jsinterop:{updateValue:""}}),this.setOptions(e),this.resize()}destroy(){super.destroy()}bindEvents(){super.bindEvents(),this.onInput=this.onInput.bind(this),this.element.addEventListener("input",this.onInput)}unbindEvents(){this.element.removeEventListener("input",this.onInput),super.unbindEvents()}setOptions(t){this.extendOptions(t),this.debounceChangeValue=wi(this.changeValue,this.options.debounceDelay).bind(this)}onInput(){this.resize(),this.debounceChangeValue()}setValue(t){this.element.value=t,this.resize()}resize(){if(this.options.autoSize){var t,e=this.element;e.style.height="",e.style.height=(t=e.scrollHeight,"".concat(t,"px"))}}changeValue(){this.element&&this.invokeMethodAsync(this.options.jsinterop.updateValue,this.element.value)}}function nU(t,e){Ft(iU,t,e)}function rU(t,e){Ft(eU,t,e)}function oU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class sU extends F{constructor(t,e){super(t,e),oU(this,"options",{dotNetInstance:null,jsinterop:{onSpaceKeyDown:""}}),oU(this,"onSpaceKeyDown",(()=>(this.invokeMethodAsync(this.options.jsinterop.onSpaceKeyDown),!1))),this.extendOptions(e),this.initNavigationService()}destroy(){this.navigationService.destroy(),super.destroy()}focus(){this.element.focus()}initNavigationService(){this.navigationService=new oe(this.element),this.navigationService.bind(ee.SPACE,this.onSpaceKeyDown)}}function aU(t,e){Ft(sU,t,e)}class lU extends F{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"snapValue",(t=>{var e=Jt(t-this.options.min,this.options.smallStep)+this.options.min;return Zt(e,this.options.min,this.options.max)})),this.extendOptions(e),this.sliderTrack=this.element.querySelector(".k-slider-track-wrap"),this.throttleChangeValue=xi(this.invokeChangeValue,150).bind(this)}eventValue(t){var e=this.calculatePercentageValue(t),i=this.convertToValue(e);return this.snapValue(i)}calculatePercentageValue(t){var e=this.sliderTrack.getBoundingClientRect();return"vertical"===this.options.orientation?100-(t.clientY-e.top)/e.height*100:(t.clientX-e.left)/e.width*100}convertToValue(t){return this.options.min+t*(this.options.max-this.options.min)/100}convertToPercentage(t){return(t-this.options.min)/(this.options.max-this.options.min)*100}setSliderEnd(t){this.endValue=t,this.element&&this.element.style.setProperty("--kendo-slider-end",this.convertToPercentage(t))}setSliderStart(t){this.startValue=t,this.element&&this.element.style.setProperty("--kendo-slider-start",this.convertToPercentage(t))}invokeChangeValue(t){var{isChangeCommitted:e}=t,i=this.options.jsinterop.changeValue;if(this.dotNetInstance&&this.dotNetInstance.invokeMethodAsync&&i){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this.dotNetInstance.invokeMethodAsync(i,...r,e)}}}function hU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var cU=[ee.ARROWUP,ee.ARROWDOWN,ee.ARROWLEFT,ee.ARROWRIGHT,ee.PAGE_UP,ee.PAGE_DOWN,ee.HOME,ee.END];class pU extends lU{constructor(t,e){super(t,e),hU(this,"onDragStart",(()=>{X("k-slider-transitions",this.element)})),hU(this,"onDrag",(t=>{var e=this.eventValue(t);this.setSliderEnd(e),this.throttleChangeValue({isChangeCommitted:!1},this.endValue)})),hU(this,"onDragEnd",(()=>{this.changeValue(this.endValue),K("k-slider-transitions",this.element)})),hU(this,"onClick",(t=>{var e=this.eventValue(t);e!==this.endValue&&this.changeValue(e),this.dragHandle.focus()})),hU(this,"onNavigate",(t=>{this.invokeNavigate(t.name)})),this.extendOptions(e),this.dragHandle=this.element.querySelector(".k-draghandle"),this.endValue=this.options.value,this.bindEvents(),K("k-slider-transitions",this.element)}destroy(){this.unbindEvents(),super.destroy()}setOptions(t){super.setOptions(t),Y("k-slider-transitions")||K("k-slider-transitions",this.element)}bindEvents(){this.initDraggable(),this.initNavigationService(),this.sliderTrack.addEventListener("click",this.onClick)}unbindEvents(){this.draggable.destroy(),this.navigationService.destroy(),this.sliderTrack.removeEventListener("click",this.onClick)}initDraggable(){this.draggable=new ni(this.element,{filter:".k-draghandle",events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}})}initNavigationService(){this.navigationService=new oe(this.dragHandle),this.navigationService.bind(cU,this.onNavigate)}changeValue(t){var e=null===t?this.options.min:t;this.setSliderEnd(Math.max(e,this.options.min)),this.invokeChangeValue({isChangeCommitted:!0},this.endValue)}invokeNavigate(t){this.invokeMethodAsync(this.options.jsinterop.navigate,t).then((t=>this.setSliderEnd(t)))}}function uU(t,e){Ft(pU,t,e)}function dU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var fU=[ee.ARROWUP,ee.ARROWDOWN,ee.ARROWLEFT,ee.ARROWRIGHT,ee.PAGE_UP,ee.PAGE_DOWN,ee.HOME,ee.END];class vU extends lU{constructor(t,e){super(t,e),dU(this,"onStartHandleDrag",(t=>{var e=this.eventValue(t);e>this.endValue&&this.setSliderEnd(e),this.setSliderStart(e),this.throttleChangeValue({isChangeCommitted:!1},this.startValue,this.endValue)})),dU(this,"onEndHandleDrag",(t=>{var e=this.eventValue(t);e<this.startValue&&this.setSliderStart(e),this.setSliderEnd(e),this.throttleChangeValue({isChangeCommitted:!1},this.startValue,this.endValue)})),dU(this,"onDragEnd",(()=>{this.changeValue(this.startValue,this.endValue)})),dU(this,"onClick",(t=>{var e=this.eventValue(t);e<=this.startValue||e<(this.startValue+this.endValue)/2?(e!==this.startValue&&this.changeValue(e,this.endValue),this.startHandle.focus()):(e>=this.endValue||e>=(this.startValue+this.endValue)/2)&&(e!==this.endValue&&this.changeValue(this.startValue,e),this.endHandle.focus())})),dU(this,"onStartHandleNavigate",(t=>{this.invokeMethodAsync(this.options.jsinterop.startNavigate,t.name).then((t=>{this.setSliderStart(t.startValue),this.setSliderEnd(t.endValue)}))})),dU(this,"onEndHandleNavigate",(t=>{this.invokeMethodAsync(this.options.jsinterop.endNavigate,t.name).then((t=>{this.setSliderStart(t.startValue),this.setSliderEnd(t.endValue)}))})),this.startHandle=this.element.querySelector(".k-draghandle-start"),this.endHandle=this.element.querySelector(".k-draghandle-end"),this.startValue=this.options.startValue,this.endValue=this.options.endValue,this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.startHandle=this.endHandle=null}setOptions(t){super.setOptions(t),this.startValue=this.options.startValue,this.endValue=this.options.endValue}bindEvents(){this.initDraggable(),this.initNavigationService(),this.sliderTrack.addEventListener("click",this.onClick)}unbindEvents(){this.destroyDraggable(),this.destroyNavigationService(),this.sliderTrack.removeEventListener("click",this.onClick)}initDraggable(){this.startDraggable=new ni(this.element,{filter:".k-draghandle-start",events:{drag:this.onStartHandleDrag,dragEnd:this.onDragEnd}}),this.endDraggable=new ni(this.element,{filter:".k-draghandle-end",events:{drag:this.onEndHandleDrag,dragEnd:this.onDragEnd}})}destroyDraggable(){this.startDraggable.destroy(),this.endDraggable.destroy()}initNavigationService(){this.startNavigationService=new oe(this.startHandle),this.endNavigationService=new oe(this.endHandle),this.startNavigationService.bind(fU,this.onStartHandleNavigate),this.endNavigationService.bind(fU,this.onEndHandleNavigate)}destroyNavigationService(){this.startNavigationService.destroy(),this.endNavigationService.destroy()}changeValue(t,e){var i=null===t?this.options.min:t,n=null===e?this.options.min:e;this.setSliderStart(Math.max(i,this.options.min)),this.setSliderEnd(Math.max(n,this.options.min,i)),this.invokeChangeValue({isChangeCommitted:!0},this.startValue,this.endValue)}}function mU(t,e){Ft(vU,t,e)}function gU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var yU=[ee.ENTER,ee.SPACE,ee.HOME,ee.END,ee.ARROWDOWN,ee.ARROWUP,ee.ARROWLEFT,ee.ARROWRIGHT];class bU extends F{constructor(t,e){super(t,e),gU(this,"onKeyDown",(t=>{this.invokeKeyDown(t)})),gU(this,"onFocus",(()=>{this.invokeFocus()})),gU(this,"onFocusOut",(()=>{this.invokeFocusOut()})),gU(this,"onClick",(()=>{this.invokeClick()})),this.popup=q(e.popupId),this.options=e,this.bindEvents(),this.initNavigationService()}initNavigationService(){this.navigationService=new oe(this.element),this.navigationService.bind(yU,this.onKeyDown)}bindEvents(){this.element.addEventListener("focus",this.onFocus),this.element.addEventListener("focusout",this.onFocusOut),this.element.addEventListener("click",this.onClick)}unbindEvents(){this.element.removeEventListener("focus",this.onFocus),this.element.removeEventListener("focusout",this.onFocusOut),this.element.removeEventListener("click",this.onClick)}destroy(){this.unbindEvents(),super.destroy(),this.popup=null}hasParentPopupWithDisplayNone(t){if("none"===t.style.display)return!0;var e=t.closest(".k-popup")!==t?t.closest(".k-popup"):null,i=e!==t?e:null;return i&&this.hasParentPopupWithDisplayNone(i)}focusNode(){this.element&&(this.hasParentPopupWithDisplayNone(this.element)?tt(this.element):document.activeElement!==this.element&&this.element.focus())}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.focusout)}invokeClick(){this.invokeMethodAsync(this.options.jsinterop.click)}}function wU(t,e){Ft(bU,t,e)}var xU="keydown",_U=[te.ARROWLEFT,te.ARROWRIGHT,te.ARROWUP,te.ARROWDOWN,te.HOME,te.END,te.ENTER,te.SPACE];class kU extends F{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onKeyDown",(t=>{_U.includes(t.keyCode)&&t.preventDefault()})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(xU,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(xU,this.onKeyDown)}focusStep(t){var e=this.element.querySelector('[data-index="'.concat(t,'"]'));e&&e.focus()}}function SU(t,e){Ft(kU,t,e)}function CU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var EU="keydown",TU="wheel",AU="nearest",MU="horizontal",OU="vertical",DU=[te.ARROWUP,te.ARROWDOWN],PU=[te.ARROWLEFT,te.ARROWRIGHT],RU=[te.HOME,te.END];class IU extends F{constructor(t,e){super(t,e),CU(this,"options",{dotNetInstance:null,orientation:MU,scrollable:!1,jsinterop:{updateScrollButtons:null}}),CU(this,"onKeyDown",(t=>{(this.isVertical()?DU:PU).concat(RU).includes(t.keyCode)&&t.preventDefault()})),CU(this,"onMouseWheel",(t=>{var e=t.deltaY>0?10:-10;t.preventDefault(),this.scrollTabs(e)})),CU(this,"onResize",(()=>{this.updateScrollButtons()})),this.extendOptions(e),this.tabList=this.element.querySelector(".k-tabstrip-items"),this.bindEvents(),this.options.scrollable&&this.initResizeService()}destroy(){this.unbindEvents(),this.destroyResizeService(),super.destroy()}setOptions(t){super.setOptions(t),this.tabList.removeEventListener(TU,this.onMouseWheel),t.scrollable?(this.initResizeService(),this.tabList.addEventListener(TU,this.onMouseWheel)):this.destroyResizeService()}bindEvents(){this.tabList.addEventListener(EU,this.onKeyDown),this.options.scrollable&&this.tabList.addEventListener(TU,this.onMouseWheel)}unbindEvents(){this.tabList.removeEventListener(EU,this.onKeyDown),this.options.scrollable&&this.tabList.removeEventListener(TU,this.onMouseWheel)}initResizeService(){this.resizeService||(this.resizeService=new _i({element:this.tabList,onResize:this.onResize}))}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=null)}focusTab(t){var e=this.tabList.querySelectorAll(".k-item")[t];e&&(this.scrollElementIntoView(e),e.focus())}isVertical(){return this.options.orientation===OU}scrollTabs(t){this.isVertical()?this.tabList.scrollTop+=t:this.tabList.scrollLeft+=t,this.updateScrollButtons()}scrollElementIntoView(t){t.scrollIntoView&&t.scrollIntoView({inline:AU,block:AU})}updateScrollButtons(){var t,e,i,n=this.tabList;this.isVertical()?(t=n.scrollTop,e=n.scrollHeight,i=n.offsetHeight):(t=n.scrollLeft,e=n.scrollWidth,i=n.offsetWidth),this.invokeMethodAsync(this.options.jsinterop.updateScrollButtons,{prevButtonEnabled:t>0,nextButtonEnabled:e-i>t,showButtons:e>i})}}function zU(t,e){Ft(IU,t,e)}function LU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var BU="keydown",NU="mousedown",jU=[te.ARROWLEFT,te.ARROWRIGHT,te.ARROWUP,te.ARROWDOWN,te.HOME,te.END,te.ENTER];class FU extends F{constructor(t,e){super(t,e),LU(this,"onKeyDown",(t=>{jU.includes(t.keyCode)&&t.preventDefault()})),LU(this,"onMouseDown",(t=>{t.shiftKey&&t.preventDefault()})),LU(this,"createHint",(t=>{var e=t.textContent;return B('<div class="k-header k-drag-clue">\n                <span class="k-icon k-drag-status k-icon-with-modifier">\n                    <span class="k-icon k-icon-modifier"></span>\n                </span>\n                '.concat(e,"\n            </div>"))})),LU(this,"onItemDrop",(t=>{var e=this.getDestinationTree(t.destinationItem);this.invokeMethodAsync(this.options.jsinterop.drop,{sourceIndex:t.sourceItem.getAttribute("data-treeindex"),destinationIndex:t.destinationItem.getAttribute("data-treeindex"),treeviewDotNetInstance:e,dropPosition:t.dropPosition})})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),this.draggable&&this.draggable.destroy(),super.destroy()}bindEvents(){this.element.addEventListener(BU,this.onKeyDown),this.element.addEventListener(NU,this.onMouseDown),this.options.draggable&&this.createDraggable()}unbindEvents(){this.element.removeEventListener(BU,this.onKeyDown),this.element.removeEventListener(NU,this.onMouseDown)}setOptions(t){this.options.draggable!==t.draggable&&(t.draggable?this.createDraggable():this.draggable.destroy()),this.extendOptions(t)}focusNode(t){var e=this.element.querySelector('[data-treeindex="'.concat(t,'"]'));e&&e.focus()}createDraggable(){this.element&&(this.draggable=new pi(this.element,{componentSelector:".k-treeview",group:".k-treeview",filter:".k-treeview-leaf",dropClueTargetSelector:".k-treeview-mid,.k-treeview-top,.k-treeview-bot",itemSelector:".k-treeview-item",offsetDropClue:!0,hint:this.createHint,events:{itemDrop:this.onItemDrop}}))}getDestinationTree(t){var e=this.element,i=t.closest(".k-treeview");if(i&&e!==i){var n=Ut(i.getAttribute("data-id"));return n&&n.dotNetInstance}return this.dotNetInstance}}function VU(t,e){Ft(FU,t,e)}function HU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var WU=[ee.ARROWLEFT,ee.ARROWRIGHT,ee.HOME,ee.END],UU=[ee.ARROWDOWN,ee.ARROWUP,ee.HOME,ee.END,ee.ENTER,ee.ESC],qU="".concat(ie.ALT," ").concat(ee.ARROWDOWN),$U=".k-overflow-anchor",GU=":not([disabled]):not([data-focusable='false']):not(.k-picker > .k-button):not(.k-spin-button > .k-button)",KU="a[href], area[href], input".concat(GU,", select").concat(GU,", textarea").concat(GU,", button").concat(GU,", [tabindex]").concat(GU);class XU extends F{constructor(t,e){super(t,e),HU(this,"options",{adaptive:!1,popupId:null,skipedOverflowItemIndexes:[],jsinterop:{populateCollapsedItems:""}}),HU(this,"onOverflowAnchorKeyDown",(()=>{Ut(this.options.popupId).openAsync()})),HU(this,"onOverflowPopupKeyDown",(t=>{var e=document.activeElement;if(e&&t.name===ee.ENTER)return e.click(),void this.focusPopupAnchor();t.name===ee.ESC&&(Ut(this.options.popupId).close(),this.focusPopupAnchor());var i=q(this.options.popupId).querySelectorAll(".k-item:not(.k-separator):not(.k-disabled)"),n=i.length-1,r=[...i].indexOf(e),o=-1;t.name===ee.ARROWDOWN&&r===n||t.name===ee.HOME?o=0:t.name===ee.ARROWUP&&0===r||t.name===ee.END?o=n:t.name===ee.ARROWDOWN?o=r+1:t.name===ee.ARROWUP&&(o=r-1),-1!==o&&(this.setTabIndices(i,o),i[o].focus())})),HU(this,"onKeyDown",(t=>{var e=Array.from(this.element.querySelectorAll(KU)).filter((t=>""===t.style.display&&""===t.parentElement.style.display)),i=this.element.querySelector(":focus"),n=e.length-1,r=[...e].indexOf(i),o=-1;t.name===ee.ARROWRIGHT&&r===n||t.name===ee.HOME?o=0:t.name===ee.ARROWLEFT&&0===r||t.name===ee.END?o=n:t.name===ee.ARROWRIGHT?o=r+1:t.name===ee.ARROWLEFT&&(o=r-1),-1!==o&&(this.setTabIndices(e,o),e[o].focus())})),HU(this,"onResize",(()=>{this.positionOverflowingItems()})),this.setTabIndices(this.element.querySelectorAll(KU),0),this.extendOptions(e),this.initNavigationServices(),this.options.adaptive&&(this.setCollapsibleItems(),this.initResizeService(),this.positionOverflowingItems())}setOptions(t){super.setOptions(t[0]),this.options.adaptive?(this.setCollapsibleItems(),this.positionOverflowingItems(),this.initResizeService(),this.initOverflowNavigationServices()):(this.collapsibleItems.forEach((t=>this.setItemDisplay(t.item,""))),this.destroyOverflowNavigationServices(),this.destroyResizeService())}destroy(){this.navigationService.destroy(),this.destroyOverflowNavigationServices(),this.destroyResizeService(),super.destroy()}initResizeService(){this.resizeService=new _i({element:this.element,onResize:this.onResize})}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=this.collapsibleItems=null)}destroyOverflowNavigationServices(){this.overflowAnchorNavigationService.destroy(),this.popupNavigationService.destroy()}getItems(){return Array.from(this.element.children)}initNavigationServices(){this.navigationService=new oe(this.element),this.navigationService.bind(WU,this.onKeyDown),this.options.adaptive&&this.initOverflowNavigationServices()}initOverflowNavigationServices(){var t=this.element.querySelector($U);this.overflowAnchorNavigationService=new oe(t),this.overflowAnchorNavigationService.bind(qU,this.onOverflowAnchorKeyDown);var e=q(this.options.popupId);this.popupNavigationService=new oe(e),this.popupNavigationService.bind(UU,this.onOverflowPopupKeyDown)}setTabIndices(t,e){t.forEach(((t,i)=>{var n=e===i?0:-1;t.setAttribute("tabindex",n)}))}getWidths(){var t=this.getItems(),e=getComputedStyle(this.element),i=parseInt(e.gap),n=t.filter((t=>!Array.from(t.classList).includes("k-spacer"))).map((t=>t.offsetWidth)),r=n.filter((t=>t)).reduce(((t,e)=>t+e+i),0),o=getComputedStyle(this.element);return{totalItemsWidth:r,elementInternalWidth:this.element.clientWidth-parseInt(o.paddingLeft)-parseInt(o.paddingRight)}}setCollapsibleItems(){var t=this.getItems(),e=getComputedStyle(this.element),i=parseInt(e.gap),n=t.slice(0,t.length-1).map(((t,e)=>{var n=t.offsetWidth+i,r=this.options.skipedOverflowItemIndexes.includes(e),o=Array.from(t.classList).includes("k-spacer");return{item:t,offsetWidth:n,expanded:!0,collapsible:!r&&!o,index:e}}));this.collapsibleItems=n}collapseItem(t){this.setItemDisplay(t.item,"none"),t.expanded=!1}expandItem(t){this.setItemDisplay(t.item,""),t.expanded=!0}setItemDisplay(t,e){t.style.display=e}focusFirstOverflowItem(){var t=q(this.options.popupId).querySelector(".k-item:not(.k-separator):not(.k-disabled)");t.setAttribute("tabindex",0),t.focus()}focusPopupAnchor(){var t=this.element.querySelector($U);t&&t.focus()}positionOverflowingItems(t){if(this.collapsibleItems&&this.collapsibleItems.length){var{totalItemsWidth:e,elementInternalWidth:i}=this.getWidths(),n=[...this.collapsibleItems].reverse().find((t=>t.expanded&&t.collapsible)),r=this.collapsibleItems.find((t=>!t.expanded));n&&e>i&&!0!==t?(this.collapseItem(n),this.positionOverflowingItems(!1)):r&&e+r.offsetWidth<i&&!0!==t&&(this.expandItem(r),this.positionOverflowingItems(!0));var o=this.collapsibleItems.filter((t=>!t.expanded)).map((t=>t.index));this.invokeMethodAsync(this.options.jsinterop.populateCollapsedItems,o||[])}}}function YU(t,e){Ft(XU,t,e)}class ZU extends Zs{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"handlerMap",{click:"onObserverMapClick",pan:"onObserverMapPan",panEnd:"onObserverMapPanEnd",markerMouseEnter:"onObserverMarkerMouseEnter",markerMouseLeave:"onObserverMarkerMouseLeave",markerClick:"onObserverMarkerClick",markerActivate:"onObserverMarkerActivate",shapeClick:"onObserverShapeClick"})}}function JU(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class QU extends _A{constructor(t,e){super(t,e),JU(this,"options",{markerTooltipId:"",jsinterop:{onObserverMapClick:"",onObserverMapPan:"",onObserverMapPanEnd:"",onObserverMarkerClick:"",onObserverMarkerMouseEnter:"",onObserverMarkerMouseLeave:"",onObserverMarkerActivate:"",onObserverShapeClick:""}}),JU(this,"onObserverMapClick",(t=>{var e=this.createMapClickEventArgs(t);this.invokeMapClickAsync(e)})),JU(this,"onObserverMapPan",(t=>{this.hideMarkerTooltip(t)})),JU(this,"onObserverMapPanEnd",(()=>{this.showMarkerTooltip(this._hoveredMarker)})),JU(this,"onObserverMarkerActivate",(t=>{this.repositionMarkerTooltip(t.marker)})),JU(this,"onObserverMarkerClick",(t=>{var e=this.createMarkerClickEventArgs(t);this.invokeMarkerClickAsync(e)})),JU(this,"onObserverMarkerMouseEnter",(t=>{this._hoveredMarker=t.marker;var e=this.createMarkerEventArgs(t);this.invokeMarkerMouseEnterAsync(e)})),JU(this,"onObserverMarkerMouseLeave",(()=>{this._hoveredMarker=null})),JU(this,"onObserverShapeClick",(t=>{var e=this.createShapeClickEventArgs(t);this.invokeShapeClickAsync(e)})),this.extendOptions(e),this.createInstanceObserver(),this.initWidget()}destroy(){this.destroyInstanceObserver(),this._hoveredMarker=null,this.widget&&(this.widget.destroy(),this.widget=null)}getThemeOptions(){return{}}getWidgetConstructor(){return nA}createInstanceObserver(){this.instanceObserver=new ZU(this)}destroyInstanceObserver(){this.instanceObserver=null}trigger(){}requiresHandlers(){return!1}invokeMapClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMapClick,t)}invokeMarkerClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMarkerClick,t)}invokeMarkerMouseEnterAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMarkerMouseEnter,t)}invokeShapeClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShapeClick,t)}createMapClickEventArgs(t){var e=t.location||{lat:null,lng:null},i={location:{latitude:e.lat,longitude:e.lng}};return this.extendWithOriginalMouseEvent(i,t)}createMarkerClickEventArgs(t){var e=this.createMarkerEventArgs(t);return this.extendWithOriginalMouseEvent(e,t)}createShapeClickEventArgs(t){var e=this.createShapeEventArgs(t);return this.extendWithOriginalMouseEvent(e,t)}createMarkerEventArgs(t){return{layerIndex:t.layerIndex,markerIndex:t.markerIndex}}createShapeEventArgs(t){var e=t.shape.dataItem,i=t.shape.location&&t.shape.value;return{layerIndex:t.layerIndex,shapeIndex:t.shapeIndex,geoJsonDataItem:i?null:e}}getOriginalEvent(t){var e=t.originalEvent;return(e||{}).event||e}extendWithOriginalMouseEvent(t,e){var i=this.getOriginalEvent(e);return u(t,{eventArgs:O(i)})}repositionMarkerTooltip(t){var e=this.getMarkerTooltip();if(e&&t){var i=e.getPopupComponent();i&&i.anchor===t.element&&e.repositionPopup()}}showMarkerTooltip(t){var e=this.getMarkerTooltip();if(e&&t){var i=e.getPopupComponent();i&&i.anchor&&i.anchor===t.element&&e.open(i.anchor)}}hideMarkerTooltip(){var t=this.getMarkerTooltip();if(t){var e=t.getPopupComponent();e&&e.anchor&&t.close(e.anchor)}}getMarkerTooltip(){return Ut(this.options.markerTooltipId)}}function tq(t,e,i){var n=q(t);if(n){var r=eq(e),o=Ut(t),s=u(r,i);if(o)Ht(o,s);else qt(t,new QU(n,s))}}Bs.register(Vo);var eq=t=>{var e=iq(t),i=nq(e);return e.layers=i||[],e.layers.forEach((t=>{"shape"===t.type&&t.shapeSettings.style?t.style=t.shapeSettings.style:"bubble"===t.type&&t.bubbleSettings.style&&(t.style=t.bubbleSettings.style)})),e},iq=t=>{var e=JSON.parse(t),i=nq(e);return e.layers=i,e},nq=t=>{var e=t.layers||[];return e.forEach((t=>{"string"==typeof t.data&&(t.data=JSON.parse(t.data))})),e};function rq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class oq extends F{constructor(t,e){super(t,e),rq(this,"options",{media:"",jsinterop:{change:""}}),rq(this,"onMediaChange",(t=>{this.invokeMethodAsync(this.options.jsinterop.change,t.matches)})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.mediaQueryList=window.matchMedia(this.options.media),this.mediaQueryList.addEventListener("change",this.onMediaChange)}unbindEvents(){this.mediaQueryList&&this.mediaQueryList.removeEventListener("change",this.onMediaChange)}getMatches(){return this.mediaQueryList.matches}}function sq(t,e){return Ft(oq,t,e),Ut(t).getMatches()}function aq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class lq extends F{constructor(t,e){super(t,e),aq(this,"options",{events:{focusOut:null},focusElementSelector:t=>"[data-index='".concat(t,"']")}),aq(this,"onKeyDown",(t=>{[te.ARROWRIGHT,te.ARROWLEFT,te.ARROWUP,te.ARROWDOWN].includes(t.keyCode)&&t.preventDefault()})),aq(this,"onFocusOut",(t=>{V(this.element,t.relatedTarget)||this.trigger("focusOut")})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut)}focusElement(t){var{index:e}=t,i=this.element.querySelector(this.options.focusElementSelector(e));i&&i.focus()}}function hq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class cq extends F{constructor(t,e){super(t,e),hq(this,"options",{dotNetInstance:null,focusElementSelector:t=>"[data-index='".concat(t,"']"),jsinterop:{focusOut:""}}),hq(this,"onNavigationRemoveFocus",(()=>{this.removeFocus()})),hq(this,"onResize",(()=>{if(this.element){var t=Bt(this.element),e=this.element.offsetWidth;this.shrink(e,t),this.stretch(e,t)}})),this.extendOptions(e),this.createNavigationService(),e.adaptive&&(this.setAdaptiveItems(),this.initResizeService())}destroy(){this.destroyNavigationService(),this.destroyResizeService(),super.destroy()}setOptions(t){super.setOptions(t),t.adaptive?(this.setAdaptiveItems(),this.initResizeService()):this.destroyResizeService()}createNavigationService(){this.navigationService=new lq(this.element,{events:{focusOut:this.onNavigationRemoveFocus}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}initResizeService(){this.resizeService=new _i({element:this.element,onResize:this.onResize})}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=this.collapsibleItems=null)}focusElement(t){this.navigationService&&this.navigationService.focusElement(t)}removeFocus(){setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusOut)}),1)}setAdaptiveItems(){var t=this.element.querySelectorAll("[data-adaptive=true]");this.adaptiveItems=[...t].map((t=>({element:t,width:t.offsetWidth,visible:!0}))),this.setAdaptiveSelect()}setAdaptiveSelect(){var t=this.element.querySelector(".k-pager-numbers-wrap .k-dropdownlist");t&&($(t,"inline-flex"),this.adaptiveSelectItem={element:t,width:Lt(t)},G(t))}shrink(t,e){var i=e,n=this.adaptiveItems.filter((t=>t.visible));if(t<i)for(var r=n.length-1;r>=0;r--){var o=n[r];if(t>i)break;if(o.width=o.element.offsetWidth,Y("k-pager-numbers",o.element)){if(o.width<=this.adaptiveSelectItem.width)continue;$(this.adaptiveSelectItem.element,"inline-flex")}this.hideItem(o),i-=o.width}}stretch(t,e){var i=e,n=this.adaptiveItems.filter((t=>!t.visible));if(t>i)for(var r=0;r<n.length;r++){var o=n[r];if(Y("k-pager-numbers",o.element)){t>i-this.adaptiveSelectItem.width+o.width&&(this.showItem(o),i+=o.width,G(this.adaptiveSelectItem.element));break}if(t<i+o.width)break;this.showItem(o),i+=o.width}}showItem(t){$(t.element),t.visible=!0}hideItem(t){G(t.element),t.visible=!1}}function pq(t,e){Ft(cq,t,e)}var uq="keydown",dq=[te.ARROWLEFT,te.ARROWRIGHT,te.ARROWUP,te.ARROWDOWN,te.HOME,te.END,te.ENTER,te.SPACE];class fq extends F{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"onKeyDown",(t=>{dq.includes(t.keyCode)&&t.target.matches("span.k-link")&&t.preventDefault()})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(uq,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(uq,this.onKeyDown)}focusNode(t){var e=this.element.querySelector('[data-treeindex="'.concat(t,'"]'));e&&e.focus()}}function vq(t,e){Ft(fq,t,e)}const mq="bottom",gq="center",yq="middle",bq="left",wq="right",xq="top";const _q=function(t){var e=t.anchorRect,i=t.anchorAlign,n=t.elementRect,r=t.elementAlign,o=t.margin;void 0===o&&(o={});var s=i.horizontal,a=i.vertical,l=r.horizontal,h=r.vertical,c=o.horizontal||0,p=o.vertical||0,u=e.top,d=e.left;return a===mq&&(u+=e.height),a!==gq&&a!==yq||(u+=Math.round(e.height/2)),h===mq&&(u-=n.height,p*=-1),h!==gq&&h!==yq||(u-=Math.round(n.height/2),p*=-1),s===wq&&(d+=e.width),s!==gq&&s!==yq||(d+=Math.round(e.width/2)),l===wq&&(d-=n.width,c*=-1),l!==gq&&l!==yq||(d-=Math.round(n.width/2),c*=-1),{top:u+p,left:d+c}};function kq(t){return t.ownerDocument||t.document||t}const Sq=function(t){return kq(t).documentElement};const Cq=function(t){return kq(t).defaultView};function Eq(t){var e=Sq(t),i=Cq(t);return{x:i.pageXOffset||e.scrollLeft||0,y:i.pageYOffset||e.scrollTop||0}}function Tq(t){return t===(t.ownerDocument||{}).body?Eq(t):{x:t.scrollLeft,y:t.scrollTop}}const Aq=function(t){for(var e=t.offsetParent;e&&"static"===e.style.position;)e=e.offsetParent;return e||Sq(t)};function Mq(t,e){return t?Tq(t):function(t){var e=Aq(t);return e?Tq(e):{x:0,y:0}}(e)}const Oq=function(t){var e=t.getBoundingClientRect(),i=e.left,n=e.top;return e.height||e.width||(e=function(t){var e=t.style,i=e.display,n=e.left,r=e.position;t.style.display="",t.style.left="-10000px",t.style.position="absolute";var o=t.getBoundingClientRect();return t.style.display=i,t.style.left=n,t.style.position=r,o}(t)),{top:n,left:i,height:e.height,width:e.width}};const Dq=function(t,e){var i=Cq(t),n=i.getComputedStyle(t),r=Oq(t),o=e||Aq(t),s=t.ownerDocument,a=o!==s.body&&o!==s.documentElement,l={top:0,left:0};if("fixed"!==n.position&&a){var h=i.getComputedStyle(o);(l=Oq(o)).top+=parseInt(h.borderTopWidth,10),l.left+=parseInt(h.borderLeftWidth,10)}return{top:r.top-l.top,left:r.left-l.left,height:r.height,width:r.width}};const Pq="fit",Rq="flip";var Iq=function(t,e,i){var n=0;return t+e>i&&(n=i-(t+e)),t<0&&(n=-t),n},zq=function(t){var e=t.offset,i=t.size,n=t.anchorSize,r=t.viewPortSize,o=t.anchorAlignPoint,s=t.elementAlignPoint,a=0,l=2*t.margin;if(s!==o&&!(s===gq||s===yq)&&!(o===gq||o===yq)){var h=o===xq||o===bq;e<0&&h?e+(a=i+n+l)+i>r&&(a=0):e>=0&&!h&&(e+i>r&&(a+=-(n+i+l)),e+a<0&&(a=0))}return a};const Lq=function(t){var e=t.anchorRect,i=t.anchorAlign,n=t.elementRect,r=t.elementAlign,o=t.collisions,s=t.viewPort,a=t.margin;void 0===a&&(a={});var l=n.top,h=n.left,c=n.height,p=n.width,u=s.height,d=s.width,f=a.horizontal||0,v=a.vertical||0,m=0,g=0,y=o.horizontal===Rq,b=o.vertical===Rq;o.vertical===Pq&&(g+=Iq(l,c,u)),o.horizontal===Pq&&(m+=Iq(h,p,d)),b&&(g+=zq({margin:v,offset:l,size:c,anchorSize:e.height,viewPortSize:u,anchorAlignPoint:i.vertical,elementAlignPoint:r.vertical})),y&&(m+=zq({margin:f,offset:h,size:p,anchorSize:e.width,viewPortSize:d,anchorAlignPoint:i.horizontal,elementAlignPoint:r.horizontal}));var w=y&&0!==m,x=b&&0!==g;return{flipped:w||x,flip:{horizontal:w,vertical:x},offset:{left:m,top:g}}};function Bq(t,e){for(var i=[],n=t.parentNode;n&&(i.push(n),n!==e);)n=n.parentNode;return i}function Nq(t){for(var e=[],i=t.parentNode.firstElementChild;i;)i!==t&&e.push(i),i=i.nextElementSibling;return e}function jq(t,e){if(!t||!e)return null;var i=function(t,e){for(var i,n,r=Bq(t),o=e;o&&(i=Nq(o),!(n=r.reduce((function(t,e){return t.concat(i.filter((function(t){return t===e})))}),[])[0]));)o=o.parentElement;return n}(t,e);if(!i)return null;var n=[t].concat(Bq(t,i)).reduce((function(t,e){var i=e.style.zIndex||window.getComputedStyle(e).zIndex,n=parseInt(i,10);return n>t?n:t}),0);return n?n+1:null}var Fq=0;function Vq(){if(!Fq&&"undefined"!=typeof document){var t=document.createElement("div");t.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",t.innerHTML="&nbsp;",document.body.appendChild(t),Fq=t.offsetWidth-t.scrollWidth,document.body.removeChild(t)}return Fq}function Hq(t){var e=Cq(t),i=Sq(t),n={height:e.innerHeight,width:e.innerWidth};return i.scrollHeight-i.clientHeight>0&&(n.width-=Vq()),n}function Wq(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Uq={x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0},qq=Array.from,$q="mouseleave",Gq="mouseover",Kq="mousedown",Xq="pointerdown",Yq="scroll",Zq="resize";class Jq extends F{constructor(t,e){if(super(t,e),Wq(this,"mouseHoverTimeout",null),Wq(this,"options",{dotNetInstance:null,anchorSelector:"",dynamicAnchors:!1,anchorRect:Uq,toggleElementSelector:"",width:"",inheritAnchorWidth:!0,anchorAlign:{horizontal:"left",vertical:"bottom"},elementAlign:{horizontal:"left",vertical:"top"},openOn:"click",closeOn:"click",closeParentPopupsUntilSelector:"",jsinterop:{close:"",closeAsync:"",openAsync:"",positionSet:""}}),Wq(this,"toggle",(t=>{t.preventDefault(),this._visible?this.closeAsync():this.openAsync(t)})),Wq(this,"onCloseEvent",(t=>{!(this.toggleElements&&[...this.toggleElements].includes(t.target))&&t.target!==this.anchor||this.isChild(t.relatedTarget)||(this.mouseHoverTimeout=setTimeout((()=>{this.closeAsync()}),30))})),Wq(this,"onElementMouseOver",(()=>{this.mouseHoverTimeout&&clearTimeout(this.mouseHoverTimeout)})),Wq(this,"onMouseDown",(t=>{this.isChild(t.target)||this.closeAsync()})),Wq(this,"onElementMouseLeave",(t=>{var e=t.relatedTarget;if(!H(this.element,e)&&!H(this.anchor,e)){var i=e&&e.closest(".k-animation-container"),n=i&&(i.dataset.id===this.element.dataset.id||this.isChild(e));i&&n||t.target!==this.element||(this.mouseHoverTimeout=setTimeout((()=>{this.closeAsync(),this.options.closeParentPopupsUntilSelector&&this.closeParentPopups()}),30))}})),Wq(this,"onScroll",(t=>{this.isChild(t.target)||this.positionElement()})),Wq(this,"onResize",(()=>{this.close()})),Wq(this,"openAsync",((t,e,i)=>{this.mouseHoverTimeout&&clearTimeout(this.mouseHoverTimeout);var n=this.anchor;this.anchors.length>1&&this.anchors.forEach((e=>{H(e,t.target)&&(this.anchor=e)})),n!==this.anchor&&this.closeAsync(),this.options.anchorRect={top:i,left:e,width:0,height:0},this.invokeMethodAsync(this.options.jsinterop.openAsync)})),this.extendOptions(e),this.anchors=this.getAnchorsFromDocument(),this.anchor=this.anchors[0],this.anchors.length>1&&e.toggleElementSelector)throw new Error("Toggle element is not supported when you have more than one anchor");e.toggleElementSelector&&(this.toggleElements=qq(document.querySelectorAll(e.toggleElementSelector))),c()||this.createIntersectionObserver(),this.bindAnchorsEvents(),this.bindElementEvents(),this.initPosition()}destroy(){this.unbindElementEvents(),this.unbindEvents(),this.unbindAnchorsEvents(),this.destroyIntersectionObserver(),super.destroy(),this.toggleElements=null,this.anchor=null}getElementRect(t){var e=t?t.getBoundingClientRect():Uq,i=document.body.getBoundingClientRect();return{top:e.top-i.top,left:e.left-i.left,width:e.width,height:e.height}}bindElementEvents(){this.options.closeOn===$q&&(this.element.addEventListener($q,this.onElementMouseLeave),this.element.addEventListener(Gq,this.onElementMouseOver))}unbindElementEvents(){this.element&&(this.element.removeEventListener($q,this.onElementMouseLeave),this.element.removeEventListener(Gq,this.onElementMouseOver))}bindAnchorsEvents(){this.toggleElements&&this.toggleElements.length?this.toggleElements.forEach((t=>{this.bindAnchorEvents(t)})):this.anchors.forEach((t=>{this.bindAnchorEvents(t)}))}unbindAnchorsEvents(){this.toggleElements&&this.toggleElements.forEach((t=>{this.unbindAnchorEvents(t)})),this.anchors.forEach((t=>{this.unbindAnchorEvents(t)}))}bindAnchorEvents(t){if(v(t)){var{openOn:e,closeOn:i}=this.options;e===i?t.addEventListener(e,this.toggle,!0):(t.addEventListener(e,this.openAsync,!0),t.addEventListener(i,this.onCloseEvent,!0))}}unbindAnchorEvents(t){if(v(t)){var{openOn:e,closeOn:i}=this.options;t.removeEventListener(e,this.toggle,!0),t.removeEventListener(e,this.openAsync,!0),t.removeEventListener(i,this.onCloseEvent,!0)}}bindEvents(){this.bound||(this.bound=!0,document.addEventListener(Yq,this.onScroll,!0),c()||window.addEventListener(Zq,this.onResize),window&&window.PointerEvent?document.addEventListener(Xq,this.onMouseDown,!0):document.addEventListener(Kq,this.onMouseDown,!0))}unbindEvents(){document.removeEventListener(Yq,this.onScroll,!0),document.removeEventListener(Kq,this.onMouseDown,!0),document.removeEventListener(Xq,this.onMouseDown,!0),window.removeEventListener(Zq,this.onResize,!0),this.bound=!1}closeParentPopups(){for(var t=this.element;t&&!t.querySelector(this.options.closeParentPopupsUntilSelector);){var e=Ut(t.getAttribute("data-id")),i=e.anchor;e.close(),t=i&&i.closest(".k-animation-container")}}onOpen(){this._visible=!0,this.bindEvents(),!this.options.width&&this.options.inheritAnchorWidth&&(this.element.style.width=this.getAnchorWidth()),this.anchor&&this.setZIndex(this.anchor),this.positionElement()}getAutoSizePosition(){var t=this.element.children[0];if(t){var e=t.style.display;t.style.visibility="hidden",t.style.display="block";var i=this.getPosition();return t.style.display=e,t.style.visibility="",i}return this.getPosition()}onClose(){this._visible=!1,this.unbindEvents()}initPosition(){this.element&&(this.element.style.left="-10000px",this.element.style.top="0px")}getPosition(){var t=this.getAnchorRect(),e=this.element.style.left,i=this.element.style.top;this.element.style.left="",this.element.style.top="";var n=this.getElementRect(this.element);this.element.style.left=e,this.element.style.top=i;var r,o,s=_q({anchorRect:t,elementRect:n,anchorAlign:this.options.anchorAlign,elementAlign:this.options.elementAlign,margin:this.options.margin});n.top=s.top,n.left=s.left,r=n,o=Eq(this.element),n={top:r.top-o.y,left:r.left-o.x,height:r.height,width:r.width};var a=Lq({anchorRect:t,elementRect:n,anchorAlign:this.options.anchorAlign,elementAlign:this.options.elementAlign,collisions:{horizontal:"fit",vertical:"flip"},viewPort:Hq(this.element)});return this.flipped=a.flipped,{top:"".concat(s.top+a.offset.top,"px"),left:"".concat(s.left+a.offset.left,"px"),flipped:a.flipped}}positionElement(){var t=this.getElementPosition();return this.element.style.top=t.top,this.element.style.left=t.left,this.invokePositionSet(),t}getElementPosition(){return!0===this.options.autoSize?this.getAutoSizePosition():this.getPosition()}getAnchorWidth(){if(!this.anchor)return"";var t=this.getElementRect(this.anchor);return"".concat(t.width,"px")}getAnchorRect(){return this.anchor?this.getElementRect(this.anchor):this.options.anchorRect}setZIndex(t){var e;this.element&&(t&&(e=jq(t,this.element)),this.element.style.zIndex=e||10002)}createIntersectionObserver(){this.destroyIntersectionObserver(),this.intersectionObserver=this.initIntersectionObserver(),this.anchors.forEach((t=>{this.observeIntersection(t)}))}initIntersectionObserver(){var t={threshold:this.getIntersectionThreshold()};return new window.IntersectionObserver((t=>{t.forEach((t=>{t.intersectionRatio>=0&&t.intersectionRatio<1&&this.onAnchorHide(t.target)}))}),t)}observeIntersection(t){this.canObserveIntersection(t)&&this.intersectionObserver.observe(t)}unobserveIntersection(t){this.canObserveIntersection(t)&&this.intersectionObserver.unobserve(t)}canObserveIntersection(t){return this.intersectionObserver&&v(t)}destroyIntersectionObserver(){this.intersectionObserver&&(this.anchors.forEach((t=>{this.unobserveIntersection(t)})),this.intersectionObserver.disconnect&&this.intersectionObserver.disconnect()),this.intersectionObserver=null}onAnchorHide(t){if(this.hasDynamicAnchors()&&this._ignoreFirstIntersectionCheck){if(H(this.anchor,t))return void(this._ignoreFirstIntersectionCheck=!1)}else this.close()}getIntersectionThreshold(){for(var t=[],e=0;e<=1;e+=.1)t.push(e);return t}isElementVisible(){return this.element&&this.element.getElementsByClassName("k-popup")[0]}isChild(t){var e=t;if(J(e,[this.element,this.anchor]))return!0;var i=e instanceof HTMLElement&&e.closest(".k-animation-container");if(i&&i!==this.element){var n=Ut(i.getAttribute("data-id")||i.id);return!!(n&&n.isParent(this.element))||this.isChildOfPopup(e,this.element)}return!1}isChildOfPopup(t,e){var i=t&&t.closest(".k-animation-container");if(i&&i===e)return!0;if(i&&i!==e){var n=Ut(i.getAttribute("data-id")||i.id);if(n)return this.isChildOfPopup(n.anchor,e)}return!1}isParent(t){return t&&V(t,this.anchor)}close(){this.invokeMethodAsync(this.options.jsinterop.close)}closeAsync(){this.invokeMethodAsync(this.options.jsinterop.closeAsync)}invokePositionSet(){this.options.jsinterop.positionSet&&this.invokeMethodAsync(this.options.jsinterop.positionSet)}get anchors(){return this.hasDynamicAnchors()&&(this.anchors=this.getAnchorsFromDocument()),this._anchors}set anchors(t){var e=this.hasAnyAnchorChanged(t);this.hasDynamicAnchors()&&e&&((this._anchors||[]).forEach((t=>{this.unobserveIntersection(t),this.unbindAnchorEvents(t)})),t.forEach((t=>{this.bindAnchorEvents(t)}))),this._anchors=t}get anchor(){return this._anchor||(this._anchor=this._anchors[0]),this._anchor}set anchor(t){this.unobserveIntersection(this._anchor),this.unbindAnchorEvents(this._anchor),this._anchor=t,this.hasDynamicAnchors()&&(this._ignoreFirstIntersectionCheck=!0,this.observeIntersection(this._anchor),this.bindAnchorEvents(this._anchor))}getAnchorsFromDocument(){return qq(document.querySelectorAll(this.options.anchorSelector))}hasAnyAnchorChanged(t){if(!this.hasDynamicAnchors())return!1;var e=qq(this._anchors||[]);if(!e||e.length!==t.length)return!0;for(var i=0;i<t.length;i++)if(!e.includes(t[i]))return!0;return!1}hasDynamicAnchors(){return this.options.dynamicAnchors}}function Qq(t,e){Ft(Jq,t,e)}function t$(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class e$ extends F{constructor(t,e){super(t,e),t$(this,"options",{events:{removeFocus:null,keyDown:null},appointmentElementSelector:t=>".k-event[data-render-index='".concat(t,"']")}),t$(this,"onKeyDown",(t=>{[te.ARROWRIGHT,te.ARROWLEFT,te.ARROWUP,te.ARROWDOWN,te.PAGE_DOWN,te.PAGE_UP,te.HOME,te.END,te.SPACE].includes(t.keyCode)&&Y("k-state-selected",t.target)&&t.target.matches("div.k-event")&&t.preventDefault(),this.trigger("keyDown",{key:t.key,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.ctrlKey})})),t$(this,"onFocusOut",(t=>{!t.relatedTarget||this.element.querySelector(".k-scheduler-layout").contains(t.relatedTarget)||t.relatedTarget.closest(".k-window")||this.trigger("removeFocus")})),this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut)}focusAppointmentElement(t){var e=this.element.querySelector(this.options.appointmentElementSelector(t));e&&this.focusElement(e)}focusElement(t){t instanceof HTMLElement&&t!==document.activeElement&&t.focus()}}function i$(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class n$ extends F{constructor(t,e){super(t,e),i$(this,"options",{dotNetInstance:null,jsinterop:{removeFocus:"",keyDown:""}}),i$(this,"onKeyDown",(t=>{this.invokeMethodAsync(this.options.jsinterop.keyDown,t)})),i$(this,"onRemoveFocus",(()=>{this.invokeMethodAsync(this.options.jsinterop.removeFocus)})),this.extendOptions(e),this.createNavigationService()}destroy(){this.destroyNavigationService(),super.destroy()}createNavigationService(){this.navigationService=new e$(this.element,{events:{keyDown:this.onKeyDown,removeFocus:this.onRemoveFocus}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}focusAppointmentElement(t){this.navigationService.focusAppointmentElement(t)}focusElement(){this.navigationService.focusElement(this.element)}}function r$(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class o$ extends F{constructor(t,e){super(t,e),r$(this,"options",{dotNetInstance:null,allowUpdate:!1,jsinterop:{resizeAppointments:""}}),r$(this,"onResize",(()=>{var t=this.element.offsetWidth;t!==this.width&&(this.width=t,this.invokeResizeAppointments())})),r$(this,"renderMoveHints",(t=>{t&&t.length&&this.moveTarget&&(this.destroyHints(),t.forEach((t=>{var e=this.createHint(this.moveTarget);this.renderHintElement(e,t)})))})),r$(this,"renderHintElement",(()=>{throw new Error("You have to implement the method renderHintElement!")})),r$(this,"getSlotUnderCursor",(t=>{var e=De(t);if(!e)return null;var i=e.closest(".k-event");return i&&(G(i),e=this.getSlotUnderCursor(t),$(i)),e.closest(".k-scheduler-cell.k-slot-cell")})),r$(this,"createHint",(t=>{var e=t.cloneNode();return e.className+=" k-event-drag-hint",e.style.zIndex="2",this.hints[this.hints.length]=e,e})),r$(this,"destroyHints",(()=>{this.hints.forEach((t=>{t.parentNode.removeChild(t)})),this.hints=[]})),this.extendOptions(e),this.bindEvents(),this.createMovable(),this.hints=[],this.width=0}destroy(){this.bodyElement=null,this.unbindEvents(),this.destroyMovable(),super.destroy()}bindEvents(){window.addEventListener("resize",this.onResize)}unbindEvents(){window.removeEventListener("resize",this.onResize)}invokeResizeAppointments(){this.invokeMethodAsync(this.options.jsinterop.resizeAppointments,this.getSlotMetrics())}refresh(){this.invokeResizeAppointments()}getSlotMetrics(){var t=this.getFirstCell(),e=this.getContentWidth();return this.setHeadersWidths(),this.slotMetrics={width:e-t.offsetLeft,height:t.offsetHeight,left:t.offsetLeft},this.slotMetrics}createMovable(){this.destroyMovable(),this.options.allowUpdate&&(this.movable=new Je({press:this.onMovableDragStart.bind(this),drag:this.onMovableDrag.bind(this),release:this.onMovableDrop.bind(this),mouseOnly:!0}),this.movable.bindTo(this.element))}destroyMovable(){this.movable&&this.movable.destroy&&this.movable.destroy(),this.moveTarget=null}onMovableDragStart(t){this.moveTarget=null,this.dragStarted=!1;var e=t.originalEvent.target;if(e&&e.closest(".k-event")){var i=this.getSlotUnderCursor(t);this.moveTarget=e.closest(".k-event"),this.resizeStart=Boolean(e.closest(".k-resize-n, .k-resize-w")),this.resizeEnd=Boolean(e.closest(".k-resize-s, .k-resize-e")),this.lastCellIndex=this.originalCellIndex=this.getCellIndex(i),this.lastRowIndex=this.originalRowIndex=this.getRowIndex(i),this.lastResourceIndex=this.originalResourceIndex=this.getResourceIndex(i)}}onMovableDrag(t){if(this.moveTarget)if(this.dragStarted){var e=this.getSlotUnderCursor(t);if(e){var i=Y("k-scheduler-alldays-slot",e),n=this.getCellIndex(e),r=this.getRowIndex(e),o=this.getResourceIndex(e),s=!1;n!==this.lastCellIndex&&(this.lastCellIndex=n,s=!0),r!==this.lastRowIndex&&(this.lastRowIndex=r,s=!0),o!==this.lastResourceIndex&&(this.resourceRowIndex=o,s=!0),s&&this.invokeMethodAsync(this.options.jsinterop.getMoveHint,{rowIndex:r,cellIndex:n,resourceIndex:o,originalCellIndex:this.originalCellIndex,originalRowIndex:this.originalRowIndex,originalResourceIndex:this.originalResourceIndex,resizeStart:this.resizeStart,resizeEnd:this.resizeEnd,isAllDay:i}).then(this.renderMoveHints)}}else this.dragStarted=!0}onMovableDrop(){this.destroyHints(),this.dragStarted&&this.invokeMethodAsync(this.options.jsinterop.moveAppointment),this.moveTarget=null,this.lastCellIndex=this.lastRowIndex=this.lastResourceIndex=0,this.originalCellIndex=this.originalRowIndex=this.originalResourceIndex=0}getFirstCell(){return this.element.querySelector(".k-first-cell")}getContentWidth(){return this.getBodyElement().offsetWidth}setHeadersWidths(){var t=Array.from(this.element.querySelectorAll(".k-heading-cell.k-group-cell,.k-heading-cell.k-resource-cell")),e=N(t,(t=>t.getAttribute("data-depth-index"))),i=function(t){var i=0;e[t].forEach((t=>{t.style.minWidth="",i=Math.max(t.offsetWidth,i)})),e[t].forEach((t=>{t.style.minWidth=i+"px"}))};for(var n in e)i(n)}getBodyElement(){return this.bodyElement||(this.bodyElement=this.element.querySelector(".k-scheduler-body")),this.bodyElement}getCellIndex(t){return this.getCellDataIndex(t,"data-cell-index")}getRowIndex(t){return this.getCellDataIndex(t,"data-row-index")}getResourceIndex(t){return this.getCellDataIndex(t,"data-resource-index")}getCellDataIndex(t,e){return t?parseInt(t.getAttribute(e),10):-1}}function s$(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class a$ extends o${constructor(t,e){super(t,e),s$(this,"options",{jsinterop:{getMoveHint:"",moveAppointment:""}}),s$(this,"renderHintElement",((t,e)=>{var i=this.getAllDayRowElement();t.style.left=e.left+"px",t.style.width=e.width+"px",e.isAllDay&&i?(t.style.top="0px",t.style.height="100%",i.appendChild(t)):(t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t))})),this.extendOptions(e)}destroy(){this.allDayRowElement=null,super.destroy()}getAllDayRowElement(){return this.allDayRowElement||(this.allDayRowElement=this.element.querySelector(".k-scheduler-all-day-row")),this.allDayRowElement}}function l$(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class h$ extends o${constructor(t,e){super(t,e),l$(this,"options",{jsinterop:{getMoveHint:"",moveAppointment:""}}),l$(this,"renderHintElement",((t,e)=>{t.style.left=e.left+"px",t.style.width=e.width+"px",t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t)})),this.extendOptions(e)}destroy(){super.destroy()}getFirstCell(){return this.element.querySelector(".k-slot-cell")}}function c$(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class p$ extends o${constructor(t,e){super(t,e),c$(this,"options",{jsinterop:{getMoveHint:"",moveAppointment:""}}),c$(this,"renderHintElement",((t,e)=>{t.style.left=e.left+"px",t.style.width=e.width+"px",t.style.top=e.top+"px",t.style.height=e.height+"px",this.getBodyElement().appendChild(t)})),this.extendOptions(e)}destroy(){super.destroy()}getFirstCell(){return this.element.querySelector(".k-slot-cell")}}function u$(t,e){Ft(n$,t,e)}function d$(t,e){Ft(a$,t,e)}function f$(t,e){Ft(h$,t,e)}function v$(t,e){Ft(p$,t,e)}function m$(t){var e=Ut(t);return e?e.getSlotMetrics():{width:0,height:0,left:0}}function g$(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var y$="blur",b$="focus",w$="click",x$=[ee.ARROWDOWN,ee.ARROWUP],_$=".k-button",k$=".k-split-button-arrow";class S$ extends cD{constructor(t,e){super(t,e),g$(this,"onBlur",(t=>{var e=t.relatedTarget,i=e&&V(this.popupElement,e),n=e&&e.closest(k$);i||n||this.invokeBlur()})),g$(this,"onFocus",(()=>{this.invokeFocus()})),g$(this,"onArrowButtonClick",(()=>{tt(this.button)})),this.button=this.element.querySelector(_$),this.arrowButton=this.element.querySelector(k$),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.button.addEventListener(y$,this.onBlur),this.button.addEventListener(b$,this.onFocus),this.arrowButton.addEventListener(w$,this.onArrowButtonClick),this.navigationService.bind(x$,this.invokeKeyDown),this.navigationService.bind("printableKey",this.invokeKeyDown)}unbindEvents(){this.arrowButton.removeEventListener(w$,this.onArrowButtonClick),this.button.removeEventListener(y$,this.onBlur),this.button.removeEventListener(b$,this.onBlur)}}class C$ extends S${constructor(t,e){super(t,e),this.extendOptions(e)}}function E$(t,e){Ft(C$,t,e)}function T$(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var A$=".k-splitbar",M$=".k-splitbar-draggable-horizontal",O$=".k-splitbar-draggable-vertical",D$="horizontal",P$=Number.MAX_SAFE_INTEGER,R$="k-pane-static",I$=".k-collapse-next",z$=".k-collapse-prev",L$=t=>/%$/.test(t),B$=(t,e)=>{var i=parseFloat(t);return L$(t)&&(i=e*i/100),i},N$=(t,e,i)=>t?e===D$?t["".concat(i,"Width")]:t["".concat(i,"Height")]:0;class j$ extends F{constructor(t,e){super(t,e),T$(this,"options",{dotNetInstance:null,orientation:D$,resizable:!0,keyboardResizeDelta:10,panes:[],jsinterop:{resizePane:""}}),T$(this,"onResizableResizeStart",(t=>{t.originalEvent.stopPropagation();var e=Rt(t.originalCurrentTarget,A$);this.resetPaneState(),this.addResizeOverlays(e)})),T$(this,"onResizableResize",(t=>{var e=Rt(t.originalCurrentTarget,A$),i=this.isHorizontal()?t.delta.x:t.delta.y;this.dragSplitterBar(e,i)})),T$(this,"onResizableResizeEnd",(()=>{this.removeResizeOverlays(),this.invokeResizePane()})),T$(this,"onElementKeyDown",(t=>{t.target.closest(A$)&&this.onSplitterBarKeyDown(t)})),this.extendOptions(e),this.resetPaneState(),this.createResizable(),this.bindEvents()}destroy(){this.unbindEvents(),this.destroyResizable(),super.destroy()}setOptions(t){this.extendOptions(t);for(var e=0;e<this.options.panes.length;e++){if(this.options.panes[e].forceExpanded){var i=this.getPaneElement(e);X(R$,i)}}}bindEvents(){this.element&&this.element.addEventListener("keydown",this.onElementKeyDown)}unbindEvents(){this.element&&this.element.removeEventListener("keydown",this.onElementKeyDown)}setState(t){this.state=u(this.state||{},t)}resetPaneState(){this.setState({resizedPanes:{}})}createResizable(){this.options.resizable&&(this.resizable=new FO(this.element,{draggable:{filter:[M$,O$].join(","),ignore:[z$,I$].join(",")},events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}}))}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null)}dragSplitterBar(t,e){var{leftPane:i,rightPane:n}=this.getAdjacentPanes(t),r=i.computedSize+e,o=r>i.min&&r<i.max,s=this.getPaneElements().filter((t=>!t.style["flex-basis"])),a=(i.size||n.size)&&s.length>1;i.size&&n.size||a?o&&(this.resizePane(i,e),this.resizePane(n,-e)):n.size?this.resizePane(n,-e):this.resizePane(i,e)}resizePane(t,e){var i=Zt(t.computedSize+e,t.min,t.max),n="";if(L$(t.size)){var r=this.getElementClientSize();n="".concat(100*i/r,"%")}else n=(t=>"".concat(t,"px"))(i);this.setPaneSize(t.index,n)}isHorizontal(){return this.options.orientation===D$}getPane(t){return(this.options.panes||[])[t]}getPaneElements(){return Array.from(this.element.children||[]).filter((t=>Y("k-pane",t)))}getPaneElement(t){return this.getPaneElements()[t]}getAdjacentPanes(t){var e=t,i=t+1,n=this.getPaneElement(e),r=this.getPaneElement(i),o=this.getPane(e),s=this.getPane(i),a=this.getPaneOffsetSize(e),l=this.getPaneOffsetSize(i),h=a+l,c=this.getElementClientSize(),p=t=>B$(t,c),{leftPaneMaxSize:u,rightPaneMaxSize:d}=this.getAdjacentPanesMaxSize(t);return{leftPane:{index:e,computedSize:a,min:p(o.min)||h-p(s.max)||0,max:u,size:n.style["flex-basis"],collapsible:o.collapsible},rightPane:{index:i,computedSize:l,min:p(s.min)||h-p(o.max)||0,max:d,size:r.style["flex-basis"],collapsible:s.collapsible}}}getAdjacentPanesMaxSize(t){var{size:e,min:i,max:n}=this.getPaneSizes(t),{size:r,min:o,max:s}=this.getPaneSizes(t+1),a=e+r;return{leftPaneMaxSize:Math.min(n,a-o),rightPaneMaxSize:Math.min(s,a-i)}}getPaneSizes(t){var e=this.getElementClientSize(),i=this.getPane(t);return{size:this.getPaneOffsetSize(t),min:i.min?B$(i.min,e):0,max:i.max?B$(i.max,e):P$}}getPaneOffsetSize(t){var e=((t,e)=>{if(!t)return 0;var i=t.getBoundingClientRect();return e===D$?i.width:i.height})(this.getPaneElement(t),this.options.orientation);return e}getElementClientSize(){var t=((t,e)=>N$(t,e,"client"))(this.element,this.options.orientation);return t}setPaneSize(t,e){var i=this.getPaneElement(t);i&&(this.state.resizedPanes[t]={index:t,size:e},(this.options.panes[t]||{}).forceExpanded||K(R$,i),i.style["flex-basis"]=e)}addResizeOverlays(t){this.addResizeOverlay(t),this.addResizeOverlay(t+1)}addResizeOverlay(t){var e=this.getPaneElement(t);if(e){var i=B('<div class="k-splitter-overlay k-overlay"></div>');e.appendChild(i)}}removeResizeOverlays(){Array.from(this.element.querySelectorAll(".k-splitter-overlay")).forEach((t=>{t.remove()}))}invokeResizePane(){Object.values(this.state.resizedPanes).forEach((t=>{this.invokeMethodAsync(this.options.jsinterop.resizePane,{index:t.index,size:t.size})}))}isSplitterBarDraggable(t){return Y(M$.replace(".",""),t)||Y(O$.replace(".",""),t)}getSplitterBarIndex(t){return Rt(t,A$)}onSplitterBarKeyDown(t){var e=t.target.closest(A$),i=t.key;if(this.isSplitterBarDraggable(e)){var n=Rt(e,A$),r=this.options.keyboardResizeDelta,o=this.isHorizontal(),s=i===ee.ARROWRIGHT&&o||i===ee.ARROWDOWN&&!o,a=i===ee.ARROWLEFT&&o||i===ee.ARROWUP&&!o,l=s?1:-1;(s||a)&&(t.preventDefault(),this.dragSplitterBar(n,l*r),this.invokeResizePane())}}}function F$(t,e){Ft(j$,t,e)}function V$(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var H$=".k-tilelayout-item";class W$ extends F{constructor(t,e){super(t,e),V$(this,"options",{dotNetInstance:null,resizable:!1,reorderable:!1,jsinterop:{resizeItem:"",reorderItem:""}}),V$(this,"onResizableResizeStart",(t=>{var e=t.originalCurrentTarget.closest(H$),i=parseInt(e.style.gridColumnEnd.substring(5)),n=parseInt(e.style.gridRowEnd.substring(5)),r=Array.from(this.element.querySelectorAll(H$)).find((t=>"1"===t.style.order)),o=r.offsetTop-this.element.offsetTop,s=r.offsetLeft-this.element.offsetLeft,a=(e.offsetWidth-(i-1)*s)/i,l=(e.offsetHeight-(n-1)*o)/n,h=t.originalCurrentTarget.className;this.resizeState={item:e,columnWidth:a,columnHeight:l,segmentWidth:a+s,segmentHeight:l+o,totalWidth:this.element.offsetWidth,originalWidth:e.offsetWidth,originalHeight:e.offsetHeight,originalColSpan:i,originalRowSpan:n,maxWidth:this.element.offsetWidth-(e.offsetLeft+s),colSpanDelta:0,rowSpanDelta:0,resizeSide:h.indexOf("ew")>-1||h.indexOf("nwse")>-1,resizeDown:h.indexOf("ns")>-1||h.indexOf("nwse")>-1}})),V$(this,"onResizableResize",(t=>{this.pinContainer(this.resizeState.item),this.createResizeHint(this.resizeState.item);var e=()=>{this.resizeState.item.style.top=this.hint.offsetTop+"px",this.resizeState.item.style.left=this.hint.offsetLeft+"px"};if(this.resizeState.resizeSide){var i=this.resizeState.originalWidth+t.initialDelta.x;i<=this.resizeState.maxWidth&&i>=this.resizeState.columnWidth&&(this.resizeState.item.style.width=i+"px",this.resizeState.colSpanDelta=Math.floor((t.initialDelta.x+this.resizeState.segmentWidth/2)/this.resizeState.segmentWidth),this.hint.style.gridColumnEnd="span "+(this.resizeState.originalColSpan+this.resizeState.colSpanDelta),this.resizeState.item.style.gridColumnEnd="span "+(this.resizeState.originalColSpan+this.resizeState.colSpanDelta),e(),this.resizeState.resizeDown||(this.resizeState.item.style.height=this.hint.offsetHeight+"px"))}if(this.resizeState.resizeDown){var n=this.resizeState.originalHeight+t.initialDelta.y;n>=this.resizeState.columnHeight&&(this.resizeState.item.style.height=n+"px",this.resizeState.rowSpanDelta=Math.floor((t.initialDelta.y+this.resizeState.segmentHeight/2)/this.resizeState.segmentHeight),this.hint.style.gridRowEnd="span "+(this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta),this.resizeState.item.style.gridRowEnd="span "+(this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta),e())}})),V$(this,"onResizableResizeEnd",(()=>{(this.resizeState.colSpanDelta||this.resizeState.rowSpanDelta)&&this.invokeMethodAsync(this.options.jsinterop.resizeItem,{order:parseInt(this.resizeState.item.style.order),colSpan:this.resizeState.originalColSpan+this.resizeState.colSpanDelta,rowSpan:this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta}),this.unpinContainer(this.resizeState.item),this.destroyResizeHint(),this.resizeState=null})),V$(this,"onReorderableDragStart",(t=>{var e=t.originalCurrentTarget.closest(H$),i=parseInt(e.style.order);this.reorderState={item:e,left:e.offsetLeft,top:e.offsetTop,order:i,originalOrder:i}})),V$(this,"onReorderableDrag",(t=>{this.pinContainer(this.reorderState.item),this.createResizeHint(this.reorderState.item),this.reorderState.item.style.left=this.reorderState.left+t.initialDelta.x+"px",this.reorderState.item.style.top=this.reorderState.top+t.initialDelta.y+"px";var e=this.getItemUnderCursor(t,this.reorderState.item);if(e){var i,n,r,o=e.getBoundingClientRect(),s=t.clientX<o.left+o.width/2,a=parseInt(e.style.order),l=a+(s?0:1);if(e===this.reorderState.lastItemUnderCursor&&s===this.reorderState.lastIsLeftOfMiddle)return;if(a>this.reorderState.order?(i=this.reorderState.order+1,n=l,r=-1,this.reorderState.order=l-1):a<this.reorderState.order&&(i=l,n=this.reorderState.order,r=1,this.reorderState.order=l),n>i){this.shiftItemsOrder(i,n,r),this.hint.style.order=this.reorderState.order,this.reorderState.item.style.order=this.reorderState.order;var h=this.getItemUnderCursor(t,this.reorderState.item);if(this.reorderState.lastItemUnderCursor=h,h){var c=h.getBoundingClientRect(),p=t.clientX<c.left+c.width/2;this.reorderState.lastIsLeftOfMiddle=p}}}})),V$(this,"onReorderableDragEnd",(()=>{this.reorderState.order!==this.reorderState.originalOrder&&this.invokeMethodAsync(this.options.jsinterop.reorderItem,{fromOrder:this.reorderState.originalOrder,toOrder:this.reorderState.order}),this.destroyResizeHint(),this.unpinContainer(this.reorderState.item),this.reorderState=null})),V$(this,"pinContainer",(t=>{if("absolute"!==t.style.position){var e=t.offsetLeft,i=t.offsetTop,n=t.offsetWidth,r=t.offsetHeight;t.style.position="absolute",t.style.left=e+"px",t.style.top=i+"px",t.style.width=n+"px",t.style.height=r+"px",t.style.zIndex=2}})),V$(this,"unpinContainer",(t=>{t.style.position="",t.style.left="",t.style.top="",t.style.width="",t.style.height="",t.style.zIndex=""})),V$(this,"createResizeHint",(t=>{this.hint||(this.hint=document.createElement("div"),this.hint.className="k-layout-item-hint k-layout-item-hint-resize",this.hint.style.order=t.style.order,this.hint.style.gridColumnEnd=t.style.gridColumnEnd,this.hint.style.gridRowEnd=t.style.gridRowEnd,this.element.appendChild(this.hint))})),V$(this,"destroyResizeHint",(()=>{this.hint&&(this.element.removeChild(this.hint),this.hint=null)})),V$(this,"getElementUnderCursor",((t,e)=>{var i=De(t);return e&&e.contains(i)&&(G(e),i=De(t),$(e)),i})),V$(this,"getItemUnderCursor",((t,e)=>{var i=this.getElementUnderCursor(t,e);return i?i.closest(H$):null})),V$(this,"shiftItemsOrder",((t,e,i)=>{for(var n=this.element.querySelectorAll(H$),r=0;r<n.length;r++){var o=n[r],s=parseInt(o.style.order);s>=t&&s<e&&(o.style.order=s+i)}})),this.extendOptions(e),this.options.resizable&&this.createResizable(),this.options.reorderable&&this.createReorderable(),this.bindEvents()}destroy(){this.destroyResizable(),this.destroyReorderable(),this.unbindEvents(),super.destroy()}bindEvents(){}unbindEvents(){}setOptions(t){this.options.resizable!==t.resizable&&(t.resizable?this.createResizable():this.destroyResizable()),this.options.reorderable!==t.reorderable&&(t.reorderable?this.createReorderable():this.destroyReorderable()),this.extendOptions(t)}createResizable(){this.resizable=new FO(this.element,{draggable:{filter:".k-resize-handle"},events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}})}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null,this.destroyResizeHint())}createReorderable(){this.reorderable=new FO(this.element,{draggable:{filter:".k-tilelayout-item-header"},events:{resizeStart:this.onReorderableDragStart,resize:this.onReorderableDrag,resizeEnd:this.onReorderableDragEnd}})}destroyReorderable(){this.reorderable&&(this.reorderable.destroy(),this.reorderable=null)}}function U$(t,e){Ft(W$,t,e)}function q$(t){Vt(t)}function $$(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var G$="k-active";class K$ extends F{constructor(t,e){super(t,e),$$(this,"options",{dotNetInstance:null}),$$(this,"setActive",(()=>(this.element&&!this.element.classList.contains(G$)&&this.element.classList.add(G$),!0))),$$(this,"removeActive",(()=>(this.element&&this.element.classList.contains(G$)&&this.element.classList.remove(G$),!0))),this.extendOptions(e),this.bindEvents()}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}bindEvents(){this.initNavigationService(),this.element.addEventListener("mousedown",this.setActive),this.element.addEventListener("mouseleave",this.removeActive)}unbindEvents(){this.element.removeEventListener("mousedown",this.setActive),this.element.removeEventListener("mouseleave",this.removeActive)}initNavigationService(){this.navigationService=new oe(this.element),this.navigationService.bind(ee.SPACE,this.setActive)}}function X$(t,e){Ft(K$,t,e)}function Y$(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Z$="k-callout-n",J$="k-callout-s",Q$="hover",tG="bottom",eG="mouseenter",iG="mouseleave",nG="mousedown",rG="click",oG="data-telerik-tooltip-id";class sG extends F{constructor(t,e){super(t,e),Y$(this,"options",{dotNetInstance:null,showOn:"",targetSelector:"",popupId:"",jsinterop:{open:"",close:""}}),Y$(this,"onMouseDown",(t=>{var e=this.getPopupComponent();e.anchor&&!e.isChild(t.target)&&this.close(e.anchor)})),Y$(this,"onClick",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getClosestMatchingAnchor(e);this.open(i)}})),Y$(this,"onAnyTargetMouseEnter",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getClosestMatchingAnchor(e);this.removeTitle(i)}})),Y$(this,"onMouseEnter",(t=>{this.onAnyTargetMouseEnter(t);var e=this.getClosestMatchingAnchor(t.target);this.open(e)})),Y$(this,"onMouseLeave",(t=>{var e=t.target;if(!this.shouldSkipAnchor(e)){var i=this.getPopupComponent(),n=t.relatedTarget;if(!H(i.anchor,n)){var r=this.getClosestMatchingAnchor(e);this.close(r)}}})),Y$(this,"open",(t=>{if(v(t)&&!this.shouldSkipAnchor(t)){var e=this.getDataAttributes(t),i=this.getPopupComponent();i.anchors.forEach((e=>{H(e,t)&&(i.anchor=e)})),this.invokeMethodAsync(this.options.jsinterop.open,e)}})),Y$(this,"close",(t=>{v(t)&&(this.restoreTitle(t),this.invokeMethodAsync(this.options.jsinterop.close))})),this.id=g(),this.options=e,this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){var t=window.document.documentElement;t&&(this.options.showOn===Q$?(t.addEventListener(eG,this.onMouseEnter,!0),t.addEventListener(iG,this.onMouseLeave,!0)):(t.addEventListener(eG,this.onAnyTargetMouseEnter,!0),t.addEventListener(rG,this.onClick,!0)),t.addEventListener(nG,this.onMouseDown,!0))}unbindEvents(){var t=window.document.documentElement;t&&(this.options.showOn===Q$?(t.removeEventListener(eG,this.onMouseEnter,!0),t.removeEventListener(iG,this.onMouseLeave,!0)):(t.removeEventListener(eG,this.onAnyTargetMouseEnter,!0),t.removeEventListener(rG,this.onClick,!0)),t.removeEventListener(nG,this.onMouseDown,!0))}getDataAttributes(t){var e=t.getAttribute("title")||t.getAttribute("data-title"),i=t.getAttribute("alt")||e;return i&&t.setAttribute("data-title",i),t.removeAttribute("title"),t.dataset}restoreTitle(t){if(v(t)){var e=t.getAttribute("data-title")||t.getAttribute("title");e&&t.setAttribute("title",e),t.removeAttribute("data-title"),this.untrackAnchor(t)}}removeTitle(t){if(v(t)){this.trackAnchor(t);var e=t.getAttribute("title")||t.getAttribute("data-title");t.setAttribute("data-title",e),t.removeAttribute("title")}}flipCallout(t){var e=this.getPopupComponent();if(e.flipped){var i=e.element.querySelector(".k-callout");"top"===t?(X(J$,i),K(Z$,i)):t===tG&&(X(Z$,i),K(J$,i))}}correctCalloutPosition(){var t=this.getPopupComponent(),e=t.getElementRect(t.anchor),i=t.getElementRect(t.element),n=e.left-i.left+.5*e.width,r=t.element.querySelector(".k-callout");r&&(r.style.left=n+"px")}positionCallout(t){this.flipCallout(t),"top"!==t&&t!==tG||this.correctCalloutPosition()}getCalloutSize(){var t=document.createElement("div");t.className="k-callout ".concat(Z$),t.style.visibility="hidden",document.body.appendChild(t);var e=window.getComputedStyle(t),i=e.borderWidth||e.borderTopWidth,n=parseFloat(i);return document.body.removeChild(t),n}getPopupComponent(){return Ut(this.options.popupId)}shouldSkipAnchor(t){var e=this.isAnchorTracked(t),i=this.ownsAnchorBySelector(t);return!e&&!i}trackAnchor(t){v(t)&&t.setAttribute(oG,this.id)}untrackAnchor(t){v(t)&&t.removeAttribute(oG)}isAnchorTracked(t){return v(t)&&t.getAttribute(oG)===this.id}ownsAnchorBySelector(t){return v(t)&&Boolean(t.closest(this.options.targetSelector))}getClosestMatchingAnchor(t){var e=this.getClosestTrackedAnchor(t);return e||this.getClosestAnchorBySelector(t)}getClosestTrackedAnchor(t){return v(t)?t.closest(R(oG,this.id)):null}getClosestAnchorBySelector(t){return v(t)?t.closest(this.options.targetSelector):null}repositionPopup(){var t=this.getPopupComponent();t&&t.positionElement()}}function aG(t,e){Ut(t)||qt(t,new sG(null,e))}class lG extends gi{constructor(t,e){super(t,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"options",{dotNetInstance:null,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!0},componentSelector:".k-treelist",jsinterop:{removeFocus:"",blur:"",rowDrop:""}}),this.extendOptions(e)}destroy(){super.destroy()}}function hG(t,e){Ft(lG,t,e)}function cG(t){Vt(t)}var pG=Array.from,uG=t=>null!=t,dG=t=>{var e=t.match(/\.([^\.]+)$/);return e?e[0]:""};function fG(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function vG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var mG="error",gG=()=>({}),yG=function(t){return y(t)?t:gG},bG=(t,e)=>{var i=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?fG(Object(i),!0).forEach((function(e){vG(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):fG(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({request:wG(t)},e);return i},wG=t=>({status:t.status,statusText:t.statusText,responseText:t.responseText,responseType:t.responseType});class xG{static send(t){var{url:e,method:i,data:n,withCredentials:r=!1,headers:o={},success:s,error:a,progress:l}=t,h=new XMLHttpRequest,c=yG(s),p=yG(a),u=yG(l);return h.withCredentials=r,h.addEventListener("load",(()=>{h.status>=200&&h.status<300?c(bG(h)):p(bG(h))})),h.addEventListener(mG,(()=>{p(bG(h))})),h.upload.addEventListener(mG,(()=>{p(bG(h))})),h.upload.addEventListener("progress",(t=>{u(bG(h,{progress:Math.round(100*t.loaded/t.total)}))})),h.open(i,e,!0),Object.entries(o).forEach((t=>{var[e,i]=t;h.setRequestHeader(e,i)})),h.send(n),h}}var _G=0,kG=1;function SG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class CG extends F{constructor(t){super(null,t),SG(this,"options",{saveUrl:"",saveMethod:"POST",saveField:"files",removeUrl:null,removeMethod:"POST",removeField:"files",withCredentials:!1,events:{uploadProgress:null,uploadSuccess:null,uploadError:null}}),SG(this,"onUploadProgress",(t=>{this.trigger("uploadProgress",t)})),SG(this,"onUploadSuccess",(t=>{this.trigger("uploadSuccess",t)})),SG(this,"onUploadError",(t=>{this.trigger("uploadError",t)})),SG(this,"onRemoveSuccess",(t=>{this.trigger("removeSuccess",t)})),SG(this,"onRemoveError",(t=>{this.trigger("removeError",t)})),this.extendOptions(t),this.resetState()}setOptions(t){this.extendOptions(t)}resetState(){this.setState({fileRequests:{}})}setState(t){this.state=u(this.state||{},t)}uploadFiles(t,e){pG(t).forEach((t=>{this.uploadFile(t,e)}))}uploadFile(t,e){this.sendUploadRequest(t,e)}cancelFile(t){var e=this.state.fileRequests[t];e&&(this.untrackUploadRequest(t),e.abort())}removeFile(t,e){this.sendRemoveRequest(t,e)}sendUploadRequest(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options.saveUrl){var i=t.id,n=this.getFileUploadFormData(t.rawFile,e.data),r=xG.send({url:this.options.saveUrl,method:this.options.saveMethod,withCredentials:this.options.withCredentials,data:n,headers:e.headers,success:t=>{this.onUploadSuccess({operation:_G,request:t.request,file:{id:i}})},error:t=>{this.onUploadError({operation:_G,request:t.request,file:{id:i}})},progress:t=>{this.onUploadProgress({file:{id:i,progress:t.progress}})}});this.trackUploadRequest(i,r)}}sendRemoveRequest(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options.removeUrl){var i=t.id,n=this.getFileRemoveFormData(t,e.data);xG.send({url:this.options.removeUrl,method:this.options.removeMethod,withCredentials:this.options.withCredentials,data:n,headers:e.headers,success:t=>{this.onRemoveSuccess({operation:kG,request:t.request,file:{id:i}})},error:t=>{this.onRemoveError({operation:kG,request:t.request,file:{id:i}})}})}}trackUploadRequest(t,e){this.state.fileRequests[t]=e}untrackUploadRequest(t){this.state.fileRequests[t]=null}getFileUploadFormData(t,e){return this.getFormData({field:this.options.saveField,data:t,additionalData:e})}getFileRemoveFormData(t,e){return this.getFormData({field:this.options.removeField,data:t.name,additionalData:e})}getFormData(t){var{data:e,field:i,additionalData:n={}}=t,r=new FormData;return Object.keys(n).forEach((t=>{r.append(t,n[t])})),r.append(i,e),r}}var EG=0,TG=1,AG=2,MG=3;class OG{validateFile(t,e){var{allowedExtensions:i,minFileSize:n,maxFileSize:r}=e;return{validExtension:this.isValidFileExtension(t.extension,i),validMinFileSize:this.isValidMinFileSize(t.size,n),validMaxFileSize:this.isValidMaxFileSize(t.size,r)}}isValidFileExtension(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!uG(e)||e.map((t=>t.toLowerCase())).includes(t.toLowerCase())}isValidMinFileSize(t,e){return!uG(e)||t>e}isValidMaxFileSize(t,e){return!uG(e)||t<e}}class DG{constructor(t){this.id=g(),this.name=S(t.name),this.size=t.size,this.extension=t.extension,this.progress=t.progress||0,this.rawFile=t.rawFile,this.status=t.status||EG,this.invalidExtension=t.invalidExtension||!1,this.invalidMinFileSize=t.invalidMinSize||!1,this.invalidMaxFileSize=t.invalidMaxFileSize||!1}isValid(){return!this.invalidExtension&&!this.invalidMinFileSize&&!this.invalidMaxFileSize}}function PG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var RG="change",IG="keydown",zG="focusout",LG=[ee.ARROWLEFT,ee.ARROWRIGHT,ee.ARROWUP,ee.ARROWDOWN],BG=t=>t?parseInt(t.getAttribute("data-index"),10):null;class NG extends F{constructor(t,e){super(t,e),PG(this,"options",{dotNetInstance:null,allowedExtensions:[],minFileSize:null,maxFileSize:null,multiple:!1,jsinterop:{onSelect:null,focusout:null}}),PG(this,"onInputChange",(t=>{var e=this.getFilesInfo(t.target.files);navigator.userAgent.match(/webkit/i)&&(t.target.type="",t.target.type="file"),this.options.multiple||this.clearFiles(),this.addFiles(e),this.triggerFileSelect(e)})),PG(this,"onKeyDown",(t=>{LG.includes(t.key)&&t.preventDefault()})),PG(this,"onFocusOut",(t=>{var e=t.target.closest(".k-file"),i=BG(e),n=t.relatedTarget?t.relatedTarget.closest(".k-file"):null,r=BG(n);this.invokeFocusOut(i,r)})),this.extendOptions(e),this.inputElement=this.element.querySelector("input[type='file']"),this.initValidator(),this.resetState(),this.bindEvents()}destroy(){this.unbindEvents(),this.inputElement=null,this.destroyValidator(),super.destroy()}bindEvents(){this.inputElement&&this.inputElement.addEventListener(RG,this.onInputChange),this.element.addEventListener(IG,this.onKeyDown),this.element.addEventListener(zG,this.onFocusOut)}unbindEvents(){this.inputElement&&this.inputElement.removeEventListener(RG,this.onInputChange),this.element.removeEventListener(IG,this.onKeyDown),this.element.removeEventListener(zG,this.onFocusOut)}resetState(){this.setState({files:[]})}setState(t){this.state=u(this.state||{},t)}initValidator(){this.validator=new OG}destroyValidator(){this.validator=null}triggerFileSelect(t){return this.invokeMethodAsync(this.options.jsinterop.onSelect,t)}addFiles(t){pG(t).forEach((t=>{this.addFile(t)}))}addFile(t){this.getFile(t.id)||(this.validateFile(t),this.state.files.push(t))}removeFileFromState(t){var e=this.state.files.filter((e=>e.id!==t));this.setState({files:e})}getFiles(){return this.state.files}getFile(t){return this.state.files.find((e=>e.id===t))}getFileInfo(t){var e=(t=>({name:t.name,size:t.size,extension:dG(t.name),rawFile:t}))(t);return new DG(e)}getFilesInfo(t){return pG(t).map(this.getFileInfo)}clearFiles(){this.setState({files:[]})}validateFile(t){if(this.validator){var e=this.validator.validateFile(t,{allowedExtensions:this.options.allowedExtensions,minFileSize:this.options.minFileSize,maxFileSize:this.options.maxFileSize});t.invalidExtension=!e.validExtension,t.invalidMinFileSize=!e.validMinFileSize,t.invalidMaxFileSize=!e.validMaxFileSize}}invokeFocusOut(t,e){var i;null!==(i=t)&&i>=0&&setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusout,{relatedTargetFileIndex:e})}),1)}focusFile(t){var e=Array.from(this.element.querySelectorAll(".k-file")||[])[t];this.focusElement(e)}focusInput(){this.focusElement(this.inputElement)}focusElement(t){t instanceof HTMLElement&&tt(t)}}function jG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class FG extends NG{constructor(t,e){super(t,e),jG(this,"options",{saveUrl:null,saveField:"files",removeUrl:null,removeField:"files",withCredentials:!1,autoUpload:!1,jsinterop:{onProgress:null,onSuccess:null,onError:null}}),jG(this,"onProgress",(t=>{var e=this.getFile(t.file.id);uG(e)&&(e.progress=t.file.progress,this.invokeMethodAsync(this.options.jsinterop.onProgress,{files:[e],progress:t.file.progress}))})),jG(this,"onSuccess",(t=>{var e=[this.getFile(t.file.id)];t.operation===kG?this.removeFileFromState(t.file.id):this.setFileStatus(e,TG),this.invokeMethodAsync(this.options.jsinterop.onSuccess,{operation:t.operation,files:e,request:t.request})})),jG(this,"onError",(t=>{var e=[this.getFile(t.file.id)];t.operation===_G&&this.setFileStatus(e,MG),this.invokeMethodAsync(this.options.jsinterop.onError,{operation:t.operation,files:e,request:t.request})})),this.extendOptions(e),this.initOrUpdateUploadService(this.options)}destroy(){this.destroyUploadService(),super.destroy()}setOptions(t){this.extendOptions(t),this.initOrUpdateUploadService(this.options)}initOrUpdateUploadService(t){this.uploadService?this.uploadService.setOptions(t):this.uploadService=this.initUploadService(t)}initUploadService(t){return new CG({saveUrl:t.saveUrl,saveField:t.saveField,removeUrl:t.removeUrl,removeField:t.removeField,withCredentials:t.withCredentials,events:{uploadProgress:this.onProgress,uploadSuccess:this.onSuccess,uploadError:this.onError,removeSuccess:this.onSuccess,removeError:this.onError}})}destroyUploadService(){this.uploadService&&this.uploadService.destroy()}deleteFile(t){var{fileId:e,options:i}=t;this.removeFile(e,i)}removeFile(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getFile(t);i&&(i.status===TG?this.uploadService.removeFile(i,{headers:e.requestHeaders,data:e.requestData}):this.removeFileFromState(t))}uploadFiles(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.files||[]).length>0?t.files:this.getFiles(),i=this.getFilesForUpload(e);this.setFileStatus(i,AG),this.uploadService.uploadFiles(i,{headers:t.requestHeaders,data:t.requestData})}retryFile(t){var{fileId:e,options:i={}}=t,n=this.getFile(e);n&&n.status===MG&&this.uploadService.uploadFile(n,{headers:i.requestHeaders,data:i.requestData})}cancelFile(t){this.getFile(t)&&(this.uploadService.cancelFile(t),this.removeFile(t))}focusClearButton(){var t=this.element.querySelector(".k-clear-selected");this.focusElement(t)}getFilesForUpload(){var t=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{var i=this.getFile(e.id);this.isFileForUpload(i)&&t.push(i)})),t}isFileForUpload(t){return t.isValid()&&t.status===EG}setFileStatus(t,e){(Array.isArray(t)?t:[t]).forEach((t=>{uG(t)&&(t.status=e)}))}openFileSelect(){this.inputElement&&this.inputElement.click()}}class VG extends NG{constructor(t,e){super(t,e),this.extendOptions(e)}destroy(){super.destroy()}setOptions(t){this.extendOptions(t)}deleteFile(t){this.removeFileFromState(t)}readBlob(t){return function(t){return new Promise((function(e,i){var n=new FileReader;n.onerror=function(){n.abort(),i("Error reading file.")},n.onload=function(){e(n.result)},t&&n.readAsArrayBuffer(t.rawFile)}))}(t)}readBytes(t){var e=this.getFile(t[0].fileId);return this.readBlob(e).then((function(e){var i=new Uint8Array(e,t[0].start,Math.min(e.byteLength,t[0].count));return btoa(String.fromCharCode.apply(null,i))}))}triggerFileSelect(t){return this.invokeMethodAsync(this.options.jsinterop.onSelect,t)}}function HG(t,e){Ft(FG,t,e)}function WG(t,e){Ft(VG,t,e)}function UG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var qG=P("data-col-index"),$G=Array.from;class GG extends F{constructor(t,e){super(t,e),UG(this,"options",{dotNetInstance:null,tableSelector:".k-grid-table",debounceDelay:180,headerSelector:"k-grid-header",contentSelector:"k-grid-content",footerSelector:"k-grid-footer",jsinterop:{onScroll:""}}),UG(this,"detectScrollTopChanged",(t=>{this.state.scrollTopChanged=this.state.scrollTop!==t.target.scrollTop,this.state.scrollTop=t.target.scrollTop})),UG(this,"onScroll",(t=>{if(!this.state.scrollTopChanged){var e=document.activeElement?document.activeElement.closest(qG):null,i=e?e.closest(I("k-state-focused"))||e:null,n=i?i.closest([I(this.options.headerSelector),I(this.options.contentSelector),I(this.options.footerSelector)].join(",")):null,r=x(i),o=Et(i,n),s=0;if(i){var a=i.getBoundingClientRect().width,l=i.closest("tr"),h=(l?$G(l.querySelectorAll(qG)):[]).filter(ye);s=h.reduce(((t,e)=>t+e.getBoundingClientRect().width),0),h.length&&s+a>this.element.clientWidth&&(o=!0)}this.invokeScroll({scrollLeft:t.target.scrollLeft,containsActiveElement:r,isActiveCellInView:o})}})),this.extendOptions(e),this.bindEvents(),this.setState({scrollTop:0,scrollTopChanged:!1,scrollLeft:0})}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.debouncedScroll=wi((t=>{this.onScroll(t)}),this.options.debounceDelay).bind(this),this.element.addEventListener("scroll",this.detectScrollTopChanged),this.element.addEventListener("scroll",this.debouncedScroll)}unbindEvents(){this.element.removeEventListener("scroll",this.detectScrollTopChanged),this.element.removeEventListener("scroll",this.debouncedScroll),this.debouncedScroll=null}setState(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state=u(this.state||{},t)}invokeScroll(t){var{scrollLeft:e,containsActiveElement:i,isActiveCellInView:n}=t;this.invokeMethodAsync(this.options.jsinterop.onScroll,{scrollLeft:e,containsActiveElement:i,isActiveCellInView:n})}}function KG(t,e){Ft(GG,Kt(t,"VirtualColumnScroller"),e)}function XG(t){Vt(Kt(t,"VirtualColumnScroller"))}function YG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class ZG extends F{constructor(t,e){super(t,e),YG(this,"options",{skip:0,itemHeight:0,loadingItems:!1,jsinterop:{scroll:""}}),YG(this,"onElementScroll",(()=>{var t=this.options,e=Math.floor(this.element.scrollTop);if(this.scrollTop===e||this.manualSet)this.manualSet=!1;else{clearTimeout(this.timeout),t.loadingItems&&this.scrollLoadingItems(),this.scrollTop=e;var i=Math.floor(e/t.itemHeight);this.timeout=setTimeout((()=>{this.invokeMethodAsync(t.jsinterop.scroll,i)}),66)}})),this.extendOptions(e),this.timeout,this.contentElement=this.element.querySelector(".k-virtual-scroller-content"),this.total=parseInt(this.contentElement.getAttribute("data-total")),this.setScrollbarSize(),this.setPosition(e.skip),this.bindEvents()}destroy(){clearTimeout(this.timeout),this.unbindEvents(),this.contentElement=null,super.destroy()}bindEvents(){this.element.addEventListener("scroll",this.onElementScroll)}unbindEvents(){this.element.removeEventListener("scroll",this.onElementScroll)}setScrollbarSize(){It()}setPosition(t){this.manualSet=!0,this.scrollTop=Math.floor(this.options.itemHeight*t);var e=this.element.parentElement.parentElement.style.display,i=this.element.parentElement.parentElement.parentElement.style.display;this.element.parentElement.parentElement.style.display="",this.element.parentElement.parentElement.parentElement.style.display="",this.element.scrollTop=this.scrollTop,this.element.parentElement.parentElement.style.display=e,this.element.parentElement.parentElement.parentElement.style.display=i}setPositionToIndex(t){this.manualSet=!0;var e=t*this.options.itemHeight,i=e+this.options.itemHeight,n=Math.floor(this.element.scrollTop),r=bt(this.element),o=n+(this.element.offsetHeight-r);i>o?(this.scrollTop+=i-o,this.element.scrollTop=this.scrollTop):i<n&&(this.scrollTop=e,this.element.scrollTop=this.scrollTop)}scrollLoadingItems(){var t=this.options,e=Math.floor(this.element.scrollTop),i=bt(this.element),n=this.element.offsetHeight-i,r=this.contentElement.children[0].offsetHeight,o=2*t.itemHeight,s=parseFloat(this.contentElement.getAttribute("data-translate")),a=s;e<s?a=e-e%o:r+s<n+e&&(a=Math.ceil((n+e-r)/o)*o),this.contentElement.style.setProperty("transform","translateY("+a+"px)")}}function JG(t,e){Ft(ZG,t,e)}function QG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var tK="width",eK="height",iK="k-resize-",nK="n",rK="w",oK=[nK,"e","s",rK,"ne","nw","se","sw"].map((t=>"".concat(iK).concat(t)));class sK extends F{constructor(t,e){super(t,e),QG(this,"options",{dotNetInstance:null,jsinterop:{keydown:"",dragEnd:"",resizeEnd:"",focusin:""},navigable:!1,draggable:!0,resizable:!0,modal:!1}),QG(this,"onFocusIn",(()=>{this.invokeMethodAsync(this.options.jsinterop.focusin)})),QG(this,"onKeyDown",(t=>{this.element!==t.target&&t.keyCode!==te.ESCAPE||this.invokeKeyDown(t)})),QG(this,"onDragStart",(t=>{this.resetDragState();var e=this.allowedDrag(t);e&&(this.setFixedPosition(),this.initWidth(),He(t),this.setState({dragging:{dragStarted:e,initialTop:this.state.top,initialLeft:this.state.left,cursorOffset:{top:t.pageY-this.state.top,left:t.pageX-this.state.left}}}),this.element.focus())})),QG(this,"onDrag",(t=>{if(!this.state.dragging.dragStarted)return!0;var e=t.pageY-this.state.dragging.cursorOffset.top,i=t.pageX-this.state.dragging.cursorOffset.left;this.setPosition(e,i)})),QG(this,"onDragEnd",(()=>{this.state.dragging.dragStarted&&(this.state.dragging.initialTop===this.state.top&&this.state.dragging.initialLeft===this.state.left||this.invokeMethodAsync(this.options.jsinterop.dragEnd,{top:j(this.state.top),left:j(this.state.left)}))})),QG(this,"onResizeStart",(t=>{this.resetResizeState(),this.setFixedPosition();var e=Array.from(t.originalCurrentTarget.classList).find((t=>oK.includes(t))).replace(iK,""),{currentWidth:i,currentHeight:n}=this.getDimensions()||{};i&&n&&this.setState({resizing:{initialWidth:i,initialHeight:n,targetedWidth:i,targetedHeight:n,direction:e}})})),QG(this,"onResize",(t=>{var e=this.state.resizing.targetedWidth,i=this.state.resizing.targetedHeight,n=t.delta.y,r=t.delta.x;this.state.resizing.direction.includes(nK)&&(n=this.constrainDelta(nK,n),(this.state.top>=0||n>0)&&(i-=n,this.tryApplyNewDimension(eK,i)&&this.setPosition(Number(this.state.top)+n,this.state.left)));(this.state.resizing.direction.includes("e")&&(e+=r,this.tryApplyNewDimension(tK,e)),this.state.resizing.direction.includes("s")&&(i+=n,this.tryApplyNewDimension(eK,i)),this.state.resizing.direction.includes(rK))&&(r=this.constrainDelta(rK,r),(this.state.left>=0||r>0)&&(e-=r,this.tryApplyNewDimension(tK,e)&&this.setPosition(this.state.top,Number(this.state.left)+r)))})),QG(this,"onResizeEnd",(()=>{Qt(this.state.resizing.initialWidth,this.state.resizing.targetedWidth,{decimals:2})&&Qt(this.state.resizing.initialHeight,this.state.resizing.targetedHeight,{decimals:2})||this.invokeMethodAsync(this.options.jsinterop.resizeEnd,{width:j(this.state.resizing.targetedWidth),height:j(this.state.resizing.targetedHeight),top:j(this.state.top),left:j(this.state.left)})})),this.extendOptions(e),this.titleBar=this.element.querySelector(".k-window-titlebar"),this.bindEvents(),this.options.navigable&&this.enableTabKeyTrap(),this.resetState()}destroy(){this.unbindEvents(),this.options.navigable&&this.disableTabKeyTrap(),this.destroyDraggable(),this.destroyResizable(),super.destroy(),this.content=this.titleBar=null}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusin",this.onFocusIn)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusin",this.onFocusIn)}onShow(t){t.length&&this.setOptions(t[0]),this.unbindEvents();var e=this.element.getAttribute("data-id");this.element=q(e),this.element&&(this.titleBar=this.element.querySelector(".k-window-titlebar"),this.content=this.element.querySelector(".k-window-content"),this.bindEvents(),this.initDraggable(),this.initResizable(),this.formKeyTrap&&(this.formKeyTrap.destroy(),this.enableTabKeyTrap()),this.options.navigable?lt(this.content.id):this.element.focus())}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,{type:t.type,key:t.key,code:t.keyCode,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey})}enableTabKeyTrap(){this.options.modal&&(this.formKeyTrap=new pe(this.content),this.formKeyTrap.enableKeyTrap())}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}initDraggable(){this.options.draggable&&this.createDraggable()}createDraggable(){this.titleBar&&(this.draggable=new Je({press:this.onDragStart,drag:this.onDrag,release:this.onDragEnd}),this.draggable.bindTo(this.titleBar))}destroyDraggable(){this.draggable&&(this.draggable.destroy(),this.draggable=null)}allowedDrag(t){var e=t.originalEvent.target;return!this.isMaximized()&&!e.closest("button")}initResizable(){this.options.resizable&&this.createResizable()}createResizable(){this.resizable=new FO(this.element,{draggable:{filter:".k-resize-handle"},events:{resizeStart:this.onResizeStart,resize:this.onResize,resizeEnd:this.onResizeEnd}})}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null)}tryApplyNewDimension(t,e){this.setDimension(t,e);var{currentWidth:i,currentHeight:n}=this.getDimensions()||{};return t===tK&&i?Qt(e,i,{decimals:2})?(this.state.resizing.targetedWidth=e,!0):(this.setDimension(t,this.state.resizing.targetedWidth),!1):t===eK&&n?Qt(e,n,{decimals:2})?(this.state.resizing.targetedHeight=e,!0):(this.setDimension(t,this.state.resizing.targetedHeight),!1):void 0}constrainDelta(t,e){var i=e;if(t===nK){var n=Number(this.state.top)+e;n<0&&(i-=n)}else if(t===rK){var r=Number(this.state.left)+e;r<0&&(i-=r)}return i}setFixedPosition(){var t=function(t,e,i){void 0===i&&(i=1);var n=e?Aq(e):null,r=Dq(t,n),o=r.top,s=r.left,a=r.height,l=r.width,h=Mq(n,t),c=h.x,p=h.y,u=t.ownerDocument,d=n===u.body||n===u.documentElement?1:i;return{top:o+p*d,left:s+c*d,height:a,width:l}}(this.element,this.element.parentElement);X("k-centered",this.element),this.setPosition(t.top,t.left)}setPosition(t,e){this.setState({top:(Math.round(10*t)/10).toFixed(1),left:(Math.round(10*e)/10).toFixed(1)}),this.element&&(this.element.style.top=j(t),this.element.style.left=j(e))}isMaximized(){if(this.element)return"100%"===this.element.style.width&&"100%"===this.element.style.height}getDimensions(){if(this.element){var{width:t,height:e}=this.element.getBoundingClientRect();return{currentWidth:t,currentHeight:e}}}setDimension(t,e){this.element&&(t===tK?this.element.style.width=j(e):t===eK&&(this.element.style.height=j(e)))}setState(t){this.state=u(this.state||{},t)}resetState(){this.setState({top:"",left:"",resizing:{initialWidth:"",initialHeight:"",targetedWidth:"",targetedHeight:"",direction:""},dragging:{dragStarted:"",initialTop:"",initialLeft:"",cursorOffset:{top:"",left:""}}})}resetDragState(){this.setState({dragging:{}})}resetResizeState(){this.setState({resizing:{}})}initWidth(){if(this.element&&!Boolean(this.element.style.width)){var t=this.element.offsetWidth;this.setDimension(tK,t)}}}function aK(t,e){Ft(sK,t,e)}})(),n})()}));